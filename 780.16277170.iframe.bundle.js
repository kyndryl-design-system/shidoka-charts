/*! For license information please see 780.16277170.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_kyndryl_design_system_shidoka_charts=self.webpackChunk_kyndryl_design_system_shidoka_charts||[]).push([[780],{"./node_modules/@carbon/icons/es/chart--line/24.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>_24});var _24={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M4.67,28l6.39-12,7.3,6.49a2,2,0,0,0,1.7.47,2,2,0,0,0,1.42-1.07L27,10.9,25.18,10,19.69,21l-7.3-6.49A2,2,0,0,0,10.71,14a2,2,0,0,0-1.42,1L4,25V2H2V28a2,2,0,0,0,2,2H30V28Z"}}],name:"chart--line",size:24}},"./node_modules/@carbon/icons/es/download/20.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>_20});var _20={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M26 24v4H6V24H4v4H4a2 2 0 002 2H26a2 2 0 002-2h0V24zM26 14L24.59 12.59 17 20.17 17 2 15 2 15 20.17 7.41 12.59 6 14 16 24 26 14z"}}],name:"download",size:20}},"./node_modules/@carbon/icons/es/maximize/20.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>_20});var _20={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M20 2L20 4 26.586 4 18 12.582 19.414 14 28 5.414 28 12 30 12 30 2 20 2zM14 19.416L12.592 18 4 26.586 4 20 2 20 2 30 12 30 12 28 5.414 28 14 19.416z"}}],name:"maximize",size:20}},"./node_modules/@carbon/icons/es/minimize/20.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>_20});var _20={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:20,height:20},content:[{elem:"path",attrs:{d:"M4 18L4 20 10.586 20 2 28.582 3.414 30 12 21.414 12 28 14 28 14 18 4 18zM30 3.416L28.592 2 20 10.586 20 4 18 4 18 14 28 14 28 12 21.414 12 30 3.416z"}}],name:"minimize",size:20}},"./node_modules/@carbon/icons/es/table-of-contents/24.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>_24});var _24={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",width:24,height:24},content:[{elem:"path",attrs:{d:"M4 6H22V8H4zM4 12H22V14H4zM4 18H22V20H4zM4 24H22V26H4zM26 6H28V8H26zM26 12H28V14H26zM26 18H28V20H26zM26 24H28V26H26z"}}],name:"table-of-contents",size:24}},"./node_modules/@kyndryl-design-system/shidoka-foundation/components/icon/index.js":()=>{function _tslib_e(e,t,r,o){var c,f=arguments.length,n=f<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,o);else for(var l=e.length-1;l>=0;l--)(c=e[l])&&(n=(f<3?c(n):f>3?c(t,r,n):c(t,r))||n);return f>3&&n&&Object.defineProperty(t,r,n),n}const t=window,css_tag_e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class n{constructor(t,e,o){if(this._$cssResult$=!0,o!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const s=this.t;if(css_tag_e&&void 0===t){const e=void 0!==s&&1===s.length;e&&(t=o.get(s)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&o.set(s,t))}return t}toString(){return this.cssText}}const c=(s,o)=>{css_tag_e?s.adoptedStyleSheets=o.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):o.forEach((e=>{const o=document.createElement("style"),n=t.litNonce;void 0!==n&&o.setAttribute("nonce",n),o.textContent=e.cssText,s.appendChild(o)}))},a=css_tag_e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const s of t.cssRules)e+=s.cssText;return(t=>new n("string"==typeof t?t:t+"",void 0,s))(e)})(t):t;var reactive_element_s;const i=window,reactive_element_r=i.trustedTypes,reactive_element_o=reactive_element_r?reactive_element_r.emptyScript:"",reactive_element_n=i.reactiveElementPolyfillSupport,reactive_element_a={toAttribute(t,e){switch(e){case Boolean:t=t?reactive_element_o:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let s=t;switch(e){case Boolean:s=null!==t;break;case Number:s=null===t?null:Number(t);break;case Object:case Array:try{s=JSON.parse(t)}catch(t){s=null}}return s}},h=(t,e)=>e!==t&&(e==e||t==t),l={attribute:!0,type:String,converter:reactive_element_a,reflect:!1,hasChanged:h};class d extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var e;this.finalize(),(null!==(e=this.h)&&void 0!==e?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,s)=>{const i=this._$Ep(s,e);void 0!==i&&(this._$Ev.set(i,s),t.push(i))})),t}static createProperty(t,e=l){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const s="symbol"==typeof t?Symbol():"__"+t,i=this.getPropertyDescriptor(t,s,e);void 0!==i&&Object.defineProperty(this.prototype,t,i)}}static getPropertyDescriptor(t,e,s){return{get(){return this[e]},set(i){const r=this[t];this[e]=i,this.requestUpdate(t,r,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||l}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),void 0!==t.h&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const s of e)this.createProperty(s,t[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const s=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const e of i)s.unshift(a(e))}else void 0!==e&&s.push(a(e));return s}static _$Ep(t,e){const s=e.attribute;return!1===s?void 0:"string"==typeof s?s:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,s;(null!==(e=this._$ES)&&void 0!==e?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(s=t.hostConnected)||void 0===s||s.call(t))}removeController(t){var e;null===(e=this._$ES)||void 0===e||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const s=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return c(s,this.constructor.elementStyles),s}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,s){this._$AK(t,s)}_$EO(t,e,s=l){var i;const r=this.constructor._$Ep(t,s);if(void 0!==r&&!0===s.reflect){const o=(void 0!==(null===(i=s.converter)||void 0===i?void 0:i.toAttribute)?s.converter:reactive_element_a).toAttribute(e,s.type);this._$El=t,null==o?this.removeAttribute(r):this.setAttribute(r,o),this._$El=null}}_$AK(t,e){var s;const i=this.constructor,r=i._$Ev.get(t);if(void 0!==r&&this._$El!==r){const t=i.getPropertyOptions(r),o="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(s=t.converter)||void 0===s?void 0:s.fromAttribute)?t.converter:reactive_element_a;this._$El=r,this[r]=o.fromAttribute(e,t.type),this._$El=null}}requestUpdate(t,e,s){let i=!0;void 0!==t&&(((s=s||this.constructor.getPropertyOptions(t)).hasChanged||h)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===s.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,s))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,e)=>this[e]=t)),this._$Ei=void 0);let e=!1;const s=this._$AL;try{e=this.shouldUpdate(s),e?(this.willUpdate(s),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(s)):this._$Ek()}catch(t){throw e=!1,this._$Ek(),t}e&&this._$AE(s)}willUpdate(t){}_$AE(t){var e;null===(e=this._$ES)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$EO(e,this[e],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}var lit_html_t;d.finalized=!0,d.elementProperties=new Map,d.elementStyles=[],d.shadowRootOptions={mode:"open"},null==reactive_element_n||reactive_element_n({ReactiveElement:d}),(null!==(reactive_element_s=i.reactiveElementVersions)&&void 0!==reactive_element_s?reactive_element_s:i.reactiveElementVersions=[]).push("1.5.0");const lit_html_e=window,lit_html_i=lit_html_e.trustedTypes,lit_html_s=lit_html_i?lit_html_i.createPolicy("lit-html",{createHTML:t=>t}):void 0,lit_html_n=`lit$${(Math.random()+"").slice(9)}$`,lit_html_o="?"+lit_html_n,lit_html_l=`<${lit_html_o}>`,lit_html_r=document,lit_html_h=(t="")=>lit_html_r.createComment(t),$=t=>null===t||"object"!=typeof t&&"function"!=typeof t,lit_html_d=Array.isArray,lit_html_a=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,A=/-->/g,lit_html_c=/>/g,u=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),_=/'/g,v=/"/g,p=/^(?:script|style|textarea|title)$/i,g=(e,...i)=>({_$litType$:1,strings:e,values:i}),m=Symbol.for("lit-noChange"),f=Symbol.for("lit-nothing"),y=new WeakMap,H=lit_html_r.createTreeWalker(lit_html_r,129,null,!1),x=(t,e)=>{const i=t.length-1,o=[];let r,h=2===e?"<svg>":"",$=lit_html_a;for(let e=0;e<i;e++){const i=t[e];let s,d,g=-1,m=0;for(;m<i.length&&($.lastIndex=m,d=$.exec(i),null!==d);)m=$.lastIndex,$===lit_html_a?"!--"===d[1]?$=A:void 0!==d[1]?$=lit_html_c:void 0!==d[2]?(p.test(d[2])&&(r=RegExp("</"+d[2],"g")),$=u):void 0!==d[3]&&($=u):$===u?">"===d[0]?($=null!=r?r:lit_html_a,g=-1):void 0===d[1]?g=-2:(g=$.lastIndex-d[2].length,s=d[1],$=void 0===d[3]?u:'"'===d[3]?v:_):$===v||$===_?$=u:$===A||$===lit_html_c?$=lit_html_a:($=u,r=void 0);const f=$===u&&t[e+1].startsWith("/>")?" ":"";h+=$===lit_html_a?i+lit_html_l:g>=0?(o.push(s),i.slice(0,g)+"$lit$"+i.slice(g)+lit_html_n+f):i+lit_html_n+(-2===g?(o.push(void 0),e):f)}const d=h+(t[i]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==lit_html_s?lit_html_s.createHTML(d):d,o]};class N{constructor({strings:t,_$litType$:e},s){let l;this.parts=[];let r=0,$=0;const d=t.length-1,a=this.parts,[A,c]=x(t,e);if(this.el=N.createElement(A,s),H.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(l=H.nextNode())&&a.length<d;){if(1===l.nodeType){if(l.hasAttributes()){const t=[];for(const e of l.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(lit_html_n)){const i=c[$++];if(t.push(e),void 0!==i){const t=l.getAttribute(i.toLowerCase()+"$lit$").split(lit_html_n),e=/([.?@])?(.*)/.exec(i);a.push({type:1,index:r,name:e[2],strings:t,ctor:"."===e[1]?M:"?"===e[1]?E:"@"===e[1]?I:w})}else a.push({type:6,index:r})}for(const e of t)l.removeAttribute(e)}if(p.test(l.tagName)){const t=l.textContent.split(lit_html_n),e=t.length-1;if(e>0){l.textContent=lit_html_i?lit_html_i.emptyScript:"";for(let i=0;i<e;i++)l.append(t[i],lit_html_h()),H.nextNode(),a.push({type:2,index:++r});l.append(t[e],lit_html_h())}}}else if(8===l.nodeType)if(l.data===lit_html_o)a.push({type:2,index:r});else{let t=-1;for(;-1!==(t=l.data.indexOf(lit_html_n,t+1));)a.push({type:7,index:r}),t+=lit_html_n.length-1}r++}}static createElement(t,e){const i=lit_html_r.createElement("template");return i.innerHTML=t,i}}function C(t,e,i=t,s){var n,o,l,r;if(e===m)return e;let h=void 0!==s?null===(n=i._$Co)||void 0===n?void 0:n[s]:i._$Cl;const d=$(e)?void 0:e._$litDirective$;return(null==h?void 0:h.constructor)!==d&&(null===(o=null==h?void 0:h._$AO)||void 0===o||o.call(h,!1),void 0===d?h=void 0:(h=new d(t),h._$AT(t,i,s)),void 0!==s?(null!==(l=(r=i)._$Co)&&void 0!==l?l:r._$Co=[])[s]=h:i._$Cl=h),void 0!==h&&(e=C(t,h._$AS(t,e.values),h,s)),e}class T{constructor(t,e){this.u=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(t){var e;const{el:{content:i},parts:s}=this._$AD,n=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:lit_html_r).importNode(i,!0);H.currentNode=n;let o=H.nextNode(),l=0,h=0,$=s[0];for(;void 0!==$;){if(l===$.index){let e;2===$.type?e=new b(o,o.nextSibling,this,t):1===$.type?e=new $.ctor(o,$.name,$.strings,this,t):6===$.type&&(e=new B(o,this,t)),this.u.push(e),$=s[++h]}l!==(null==$?void 0:$.index)&&(o=H.nextNode(),l++)}return n}p(t){let e=0;for(const i of this.u)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class b{constructor(t,e,i,s){var n;this.type=2,this._$AH=f,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=s,this._$Cm=null===(n=null==s?void 0:s.isConnected)||void 0===n||n}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cm}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=C(this,t,e),$(t)?t===f||null==t||""===t?(this._$AH!==f&&this._$AR(),this._$AH=f):t!==this._$AH&&t!==m&&this.g(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>lit_html_d(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]))(t)?this.k(t):this.g(t)}O(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}g(t){this._$AH!==f&&$(this._$AH)?this._$AA.nextSibling.data=t:this.T(lit_html_r.createTextNode(t)),this._$AH=t}$(t){var e;const{values:i,_$litType$:s}=t,n="number"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=N.createElement(s.h,this.options)),s);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===n)this._$AH.p(i);else{const t=new T(n,this),e=t.v(this.options);t.p(i),this.T(e),this._$AH=t}}_$AC(t){let e=y.get(t.strings);return void 0===e&&y.set(t.strings,e=new N(t)),e}k(t){lit_html_d(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,s=0;for(const n of t)s===e.length?e.push(i=new b(this.O(lit_html_h()),this.O(lit_html_h()),this,this.options)):i=e[s],i._$AI(n),s++;s<e.length&&(this._$AR(i&&i._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cm=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class w{constructor(t,e,i,s,n){this.type=1,this._$AH=f,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=n,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=f}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,i,s){const n=this.strings;let o=!1;if(void 0===n)t=C(this,t,e,0),o=!$(t)||t!==this._$AH&&t!==m,o&&(this._$AH=t);else{const s=t;let l,r;for(t=n[0],l=0;l<n.length-1;l++)r=C(this,s[i+l],e,l),r===m&&(r=this._$AH[l]),o||(o=!$(r)||r!==this._$AH[l]),r===f?t=f:t!==f&&(t+=(null!=r?r:"")+n[l+1]),this._$AH[l]=r}o&&!s&&this.j(t)}j(t){t===f?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class M extends w{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===f?void 0:t}}const lit_html_S=lit_html_i?lit_html_i.emptyScript:"";class E extends w{constructor(){super(...arguments),this.type=4}j(t){t&&t!==f?this.element.setAttribute(this.name,lit_html_S):this.element.removeAttribute(this.name)}}class I extends w{constructor(t,e,i,s,n){super(t,e,i,s,n),this.type=5}_$AI(t,e=this){var i;if((t=null!==(i=C(this,t,e,0))&&void 0!==i?i:f)===m)return;const s=this._$AH,n=t===f&&s!==f||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,o=t!==f&&(s===f||n);n&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==i?i:this.element,t):this._$AH.handleEvent(t)}}class B{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){C(this,t)}}const U=lit_html_e.litHtmlPolyfillSupport;null==U||U(N,b),(null!==(lit_html_t=lit_html_e.litHtmlVersions)&&void 0!==lit_html_t?lit_html_t:lit_html_e.litHtmlVersions=[]).push("2.5.0");var lit_element_l,lit_element_r;class lit_element_i extends d{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const n=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=n.firstChild),n}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((t,e,i)=>{var s,n;const o=null!==(s=null==i?void 0:i.renderBefore)&&void 0!==s?s:e;let l=o._$litPart$;if(void 0===l){const t=null!==(n=null==i?void 0:i.renderBefore)&&void 0!==n?n:null;o._$litPart$=l=new b(e.insertBefore(lit_html_h(),t),t,void 0,null!=i?i:{})}return l._$AI(t),l})(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return m}}lit_element_i.finalized=!0,lit_element_i._$litElement$=!0,null===(lit_element_l=globalThis.litElementHydrateSupport)||void 0===lit_element_l||lit_element_l.call(globalThis,{LitElement:lit_element_i});const lit_element_o=globalThis.litElementPolyfillSupport;null==lit_element_o||lit_element_o({LitElement:lit_element_i}),(null!==(lit_element_r=globalThis.litElementVersions)&&void 0!==lit_element_r?lit_element_r:globalThis.litElementVersions=[]).push("3.2.2");const property_e=(e,i)=>"method"===i.kind&&i.descriptor&&!("value"in i.descriptor)?{...i,finisher(r){r.createProperty(i.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:i.key,initializer(){"function"==typeof i.initializer&&(this[i.key]=i.initializer.call(this))},finisher(r){r.createProperty(i.key,e)}};function property_i(i){return(r,t)=>void 0!==t?((e,i,r)=>{i.constructor.createProperty(r,e)})(i,r,t):property_e(i,r)}var query_assigned_elements_o;null===(query_assigned_elements_o=window.HTMLSlotElement)||void 0===query_assigned_elements_o||query_assigned_elements_o.prototype.assignedElements;const directive_t_CHILD=2;class directive_r{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,r){this._$Ct=t,this._$AM=e,this._$Ci=r}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}class unsafe_html_n extends directive_r{constructor(i){if(super(i),this.it=f,i.type!==directive_t_CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(r){if(r===f||null==r)return this._t=void 0,this.it=r;if(r===m)return r;if("string"!=typeof r)throw Error(this.constructor.directiveName+"() called with a non-string value");if(r===this.it)return this._t;this.it=r;const e=[r];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}}unsafe_html_n.directiveName="unsafeHTML",unsafe_html_n.resultType=1;const unsafe_html_o=(t=>(...e)=>({_$litDirective$:t,values:e}))(unsafe_html_n);function es_e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function es_t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?es_e(Object(o),!0).forEach((function(e){es_r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):es_e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function es_r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function es_n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var es_o=["width","height","viewBox"],es_c=["tabindex"],es_i={focusable:"false",preserveAspectRatio:"xMidYMid meet"};function es_a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.width,a=e.height,u=e.viewBox,l=void 0===u?"0 0 ".concat(r," ").concat(a):u,b=es_n(e,es_o),f=b.tabindex,O=es_n(b,es_c),p=es_t(es_t(es_t({},es_i),O),{},{width:r,height:a,viewBox:l});return p["aria-label"]||p["aria-labelledby"]||p.title?(p.role="img",null!=f&&(p.focusable="true",p.tabindex=f)):p["aria-hidden"]=!0,p}function es_u(e){var t=e.elem,r=void 0===t?"svg":t,n=e.attrs,o=void 0===n?{}:n,c=e.content,i=(void 0===c?[]:c).map(es_u).join("");return"svg"!==r?"<".concat(r," ").concat(es_l(o),">").concat(i,"</").concat(r,">"):"<".concat(r," ").concat(es_l(es_a(o)),">").concat(i,"</").concat(r,">")}function es_l(e){return Object.keys(e).reduce((function(t,r,n){var o="".concat(r,'="').concat(e[r],'"');return 0===n?o:t+" "+o}),"")}var icon_scss_t=((t,...e)=>{const o=1===t.length?t[0]:e.reduce(((e,s,o)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[o+1]),t[0]);return new n(o,t,s)})`*,
*::before,
*::after {
  box-sizing: border-box;
}

:host {
  display: inline-block;
}

svg {
  display: block;
}`;let icon_d=class extends lit_element_i{constructor(){super(...arguments),this.icon={},this.fill="currentColor"}render(){if(Object.keys(this.icon).length>0){const e=JSON.parse(JSON.stringify(this.icon.attrs));e.fill=this.fill,this.sizeOverride&&(e.width=this.sizeOverride,e.height=this.sizeOverride);const i=es_u({...this.icon,attrs:es_a(e)});return g` ${unsafe_html_o(i)} `}return null}};icon_d.styles=icon_scss_t,_tslib_e([property_i({type:Object})],icon_d.prototype,"icon",void 0),_tslib_e([property_i({type:String})],icon_d.prototype,"fill",void 0),_tslib_e([property_i({type:Number})],icon_d.prototype,"sizeOverride",void 0),icon_d=_tslib_e([(e=>n=>"function"==typeof n?((e,n)=>(customElements.define(e,n),n))(e,n):((e,n)=>{const{kind:t,elements:s}=n;return{kind:t,elements:s,finisher(n){customElements.define(e,n)}}})(e,n))("kd-icon")],icon_d)},"./node_modules/chart.js/auto/auto.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__});var _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/chart.js/dist/chart.js");_dist_chart_js__WEBPACK_IMPORTED_MODULE_0__.t1.register(..._dist_chart_js__WEBPACK_IMPORTED_MODULE_0__.$L);const __WEBPACK_DEFAULT_EXPORT__=_dist_chart_js__WEBPACK_IMPORTED_MODULE_0__.t1},"./node_modules/chart.js/dist/chart.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$L:()=>registerables,Bs:()=>ArcElement,E8:()=>BarElement,FE:()=>Scale,FN:()=>PointElement,Hg:()=>Element,OJ:()=>LogarithmicScale,Qw:()=>Animations,ij:()=>adapters,kc:()=>LinearScale,n:()=>DatasetController,t1:()=>Chart,u5:()=>registry});var _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/chart.js/dist/chunks/helpers.segment.js");class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(chart,anims,date,type){const callbacks=anims.listeners[type],numSteps=anims.duration;callbacks.forEach((fn=>fn({chart,initial:anims.initial,numSteps,currentStep:Math.min(date-anims.start,numSteps)})))}_refresh(){this._request||(this._running=!0,this._request=_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.r.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(date=Date.now()){let remaining=0;this._charts.forEach(((anims,chart)=>{if(!anims.running||!anims.items.length)return;const items=anims.items;let item,i=items.length-1,draw=!1;for(;i>=0;--i)item=items[i],item._active?(item._total>anims.duration&&(anims.duration=item._total),item.tick(date),draw=!0):(items[i]=items[items.length-1],items.pop());draw&&(chart.draw(),this._notify(chart,anims,date,"progress")),items.length||(anims.running=!1,this._notify(chart,anims,date,"complete"),anims.initial=!1),remaining+=items.length})),this._lastDate=date,0===remaining&&(this._running=!1)}_getAnims(chart){const charts=this._charts;let anims=charts.get(chart);return anims||(anims={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},charts.set(chart,anims)),anims}listen(chart,event,cb){this._getAnims(chart).listeners[event].push(cb)}add(chart,items){items&&items.length&&this._getAnims(chart).items.push(...items)}has(chart){return this._getAnims(chart).items.length>0}start(chart){const anims=this._charts.get(chart);anims&&(anims.running=!0,anims.start=Date.now(),anims.duration=anims.items.reduce(((acc,cur)=>Math.max(acc,cur._duration)),0),this._refresh())}running(chart){if(!this._running)return!1;const anims=this._charts.get(chart);return!!(anims&&anims.running&&anims.items.length)}stop(chart){const anims=this._charts.get(chart);if(!anims||!anims.items.length)return;const items=anims.items;let i=items.length-1;for(;i>=0;--i)items[i].cancel();anims.items=[],this._notify(chart,anims,Date.now(),"complete")}remove(chart){return this._charts.delete(chart)}}var animator=new Animator;const interpolators={boolean:(from,to,factor)=>factor>.5?to:from,color(from,to,factor){const c0=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.c)(from||"transparent"),c1=c0.valid&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.c)(to||"transparent");return c1&&c1.valid?c1.mix(c0,factor).hexString():to},number:(from,to,factor)=>from+(to-from)*factor};class Animation{constructor(cfg,target,prop,to){const currentValue=target[prop];to=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a)([cfg.to,to,currentValue,cfg.from]);const from=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a)([cfg.from,currentValue,to]);this._active=!0,this._fn=cfg.fn||interpolators[cfg.type||typeof from],this._easing=_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.e[cfg.easing]||_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.e.linear,this._start=Math.floor(Date.now()+(cfg.delay||0)),this._duration=this._total=Math.floor(cfg.duration),this._loop=!!cfg.loop,this._target=target,this._prop=prop,this._from=from,this._to=to,this._promises=void 0}active(){return this._active}update(cfg,to,date){if(this._active){this._notify(!1);const currentValue=this._target[this._prop],elapsed=date-this._start,remain=this._duration-elapsed;this._start=date,this._duration=Math.floor(Math.max(remain,cfg.duration)),this._total+=elapsed,this._loop=!!cfg.loop,this._to=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a)([cfg.to,to,currentValue,cfg.from]),this._from=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a)([cfg.from,currentValue,to])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(date){const elapsed=date-this._start,duration=this._duration,prop=this._prop,from=this._from,loop=this._loop,to=this._to;let factor;if(this._active=from!==to&&(loop||elapsed<duration),!this._active)return this._target[prop]=to,void this._notify(!0);elapsed<0?this._target[prop]=from:(factor=elapsed/duration%2,factor=loop&&factor>1?2-factor:factor,factor=this._easing(Math.min(1,Math.max(0,factor))),this._target[prop]=this._fn(from,to,factor))}wait(){const promises=this._promises||(this._promises=[]);return new Promise(((res,rej)=>{promises.push({res,rej})}))}_notify(resolved){const method=resolved?"res":"rej",promises=this._promises||[];for(let i=0;i<promises.length;i++)promises[i][method]()}}class Animations{constructor(chart,config){this._chart=chart,this._properties=new Map,this.configure(config)}configure(config){if(!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(config))return;const animationOptions=Object.keys(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.animation),animatedProps=this._properties;Object.getOwnPropertyNames(config).forEach((key=>{const cfg=config[key];if(!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(cfg))return;const resolved={};for(const option of animationOptions)resolved[option]=cfg[option];((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.b)(cfg.properties)&&cfg.properties||[key]).forEach((prop=>{prop!==key&&animatedProps.has(prop)||animatedProps.set(prop,resolved)}))}))}_animateOptions(target,values){const newOptions=values.options,options=function resolveTargetOptions(target,newOptions){if(!newOptions)return;let options=target.options;if(!options)return void(target.options=newOptions);options.$shared&&(target.options=options=Object.assign({},options,{$shared:!1,$animations:{}}));return options}(target,newOptions);if(!options)return[];const animations=this._createAnimations(options,newOptions);return newOptions.$shared&&function awaitAll(animations,properties){const running=[],keys=Object.keys(properties);for(let i=0;i<keys.length;i++){const anim=animations[keys[i]];anim&&anim.active()&&running.push(anim.wait())}return Promise.all(running)}(target.options.$animations,newOptions).then((()=>{target.options=newOptions}),(()=>{})),animations}_createAnimations(target,values){const animatedProps=this._properties,animations=[],running=target.$animations||(target.$animations={}),props=Object.keys(values),date=Date.now();let i;for(i=props.length-1;i>=0;--i){const prop=props[i];if("$"===prop.charAt(0))continue;if("options"===prop){animations.push(...this._animateOptions(target,values));continue}const value=values[prop];let animation=running[prop];const cfg=animatedProps.get(prop);if(animation){if(cfg&&animation.active()){animation.update(cfg,value,date);continue}animation.cancel()}cfg&&cfg.duration?(running[prop]=animation=new Animation(cfg,target,prop,value),animations.push(animation)):target[prop]=value}return animations}update(target,values){if(0===this._properties.size)return void Object.assign(target,values);const animations=this._createAnimations(target,values);return animations.length?(animator.add(this._chart,animations),!0):void 0}}function scaleClip(scale,allowedOverflow){const opts=scale&&scale.options||{},reverse=opts.reverse,min=void 0===opts.min?allowedOverflow:0,max=void 0===opts.max?allowedOverflow:0;return{start:reverse?max:min,end:reverse?min:max}}function getSortedDatasetIndices(chart,filterVisible){const keys=[],metasets=chart._getSortedDatasetMetas(filterVisible);let i,ilen;for(i=0,ilen=metasets.length;i<ilen;++i)keys.push(metasets[i].index);return keys}function applyStack(stack,value,dsIndex,options={}){const keys=stack.keys,singleMode="single"===options.mode;let i,ilen,datasetIndex,otherValue;if(null!==value){for(i=0,ilen=keys.length;i<ilen;++i){if(datasetIndex=+keys[i],datasetIndex===dsIndex){if(options.all)continue;break}otherValue=stack.values[datasetIndex],(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(otherValue)&&(singleMode||0===value||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.s)(value)===(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.s)(otherValue))&&(value+=otherValue)}return value}}function isStacked(scale,meta){const stacked=scale&&scale.options.stacked;return stacked||void 0===stacked&&void 0!==meta.stack}function getOrCreateStack(stacks,stackKey,indexValue){const subStack=stacks[stackKey]||(stacks[stackKey]={});return subStack[indexValue]||(subStack[indexValue]={})}function getLastIndexInStack(stack,vScale,positive,type){for(const meta of vScale.getMatchingVisibleMetas(type).reverse()){const value=stack[meta.index];if(positive&&value>0||!positive&&value<0)return meta.index}return null}function updateStacks(controller,parsed){const{chart,_cachedMeta:meta}=controller,stacks=chart._stacks||(chart._stacks={}),{iScale,vScale,index:datasetIndex}=meta,iAxis=iScale.axis,vAxis=vScale.axis,key=function getStackKey(indexScale,valueScale,meta){return`${indexScale.id}.${valueScale.id}.${meta.stack||meta.type}`}(iScale,vScale,meta),ilen=parsed.length;let stack;for(let i=0;i<ilen;++i){const item=parsed[i],{[iAxis]:index,[vAxis]:value}=item;stack=(item._stacks||(item._stacks={}))[vAxis]=getOrCreateStack(stacks,key,index),stack[datasetIndex]=value,stack._top=getLastIndexInStack(stack,vScale,!0,meta.type),stack._bottom=getLastIndexInStack(stack,vScale,!1,meta.type);(stack._visualValues||(stack._visualValues={}))[datasetIndex]=value}}function getFirstScaleId(chart,axis){const scales=chart.scales;return Object.keys(scales).filter((key=>scales[key].axis===axis)).shift()}function clearStacks(meta,items){const datasetIndex=meta.controller.index,axis=meta.vScale&&meta.vScale.axis;if(axis){items=items||meta._parsed;for(const parsed of items){const stacks=parsed._stacks;if(!stacks||void 0===stacks[axis]||void 0===stacks[axis][datasetIndex])return;delete stacks[axis][datasetIndex],void 0!==stacks[axis]._visualValues&&void 0!==stacks[axis]._visualValues[datasetIndex]&&delete stacks[axis]._visualValues[datasetIndex]}}}const isDirectUpdateMode=mode=>"reset"===mode||"none"===mode,cloneIfNotShared=(cached,shared)=>shared?cached:Object.assign({},cached);class DatasetController{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(chart,datasetIndex){this.chart=chart,this._ctx=chart.ctx,this.index=datasetIndex,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const meta=this._cachedMeta;this.configure(),this.linkScales(),meta._stacked=isStacked(meta.vScale,meta),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(datasetIndex){this.index!==datasetIndex&&clearStacks(this._cachedMeta),this.index=datasetIndex}linkScales(){const chart=this.chart,meta=this._cachedMeta,dataset=this.getDataset(),chooseId=(axis,x,y,r)=>"x"===axis?x:"r"===axis?r:y,xid=meta.xAxisID=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(dataset.xAxisID,getFirstScaleId(chart,"x")),yid=meta.yAxisID=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(dataset.yAxisID,getFirstScaleId(chart,"y")),rid=meta.rAxisID=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(dataset.rAxisID,getFirstScaleId(chart,"r")),indexAxis=meta.indexAxis,iid=meta.iAxisID=chooseId(indexAxis,xid,yid,rid),vid=meta.vAxisID=chooseId(indexAxis,yid,xid,rid);meta.xScale=this.getScaleForId(xid),meta.yScale=this.getScaleForId(yid),meta.rScale=this.getScaleForId(rid),meta.iScale=this.getScaleForId(iid),meta.vScale=this.getScaleForId(vid)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(scaleID){return this.chart.scales[scaleID]}_getOtherScale(scale){const meta=this._cachedMeta;return scale===meta.iScale?meta.vScale:meta.iScale}reset(){this._update("reset")}_destroy(){const meta=this._cachedMeta;this._data&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.u)(this._data,this),meta._stacked&&clearStacks(meta)}_dataCheck(){const dataset=this.getDataset(),data=dataset.data||(dataset.data=[]),_data=this._data;if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(data))this._data=function convertObjectDataToArray(data){const keys=Object.keys(data),adata=new Array(keys.length);let i,ilen,key;for(i=0,ilen=keys.length;i<ilen;++i)key=keys[i],adata[i]={x:key,y:data[key]};return adata}(data);else if(_data!==data){if(_data){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.u)(_data,this);const meta=this._cachedMeta;clearStacks(meta),meta._parsed=[]}data&&Object.isExtensible(data)&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.l)(data,this),this._syncList=[],this._data=data}}addElements(){const meta=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(meta.dataset=new this.datasetElementType)}buildOrUpdateElements(resetNewElements){const meta=this._cachedMeta,dataset=this.getDataset();let stackChanged=!1;this._dataCheck();const oldStacked=meta._stacked;meta._stacked=isStacked(meta.vScale,meta),meta.stack!==dataset.stack&&(stackChanged=!0,clearStacks(meta),meta.stack=dataset.stack),this._resyncElements(resetNewElements),(stackChanged||oldStacked!==meta._stacked)&&updateStacks(this,meta._parsed)}configure(){const config=this.chart.config,scopeKeys=config.datasetScopeKeys(this._type),scopes=config.getOptionScopes(this.getDataset(),scopeKeys,!0);this.options=config.createResolver(scopes,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(start,count){const{_cachedMeta:meta,_data:data}=this,{iScale,_stacked}=meta,iAxis=iScale.axis;let i,cur,parsed,sorted=0===start&&count===data.length||meta._sorted,prev=start>0&&meta._parsed[start-1];if(!1===this._parsing)meta._parsed=data,meta._sorted=!0,parsed=data;else{parsed=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.b)(data[start])?this.parseArrayData(meta,data,start,count):(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(data[start])?this.parseObjectData(meta,data,start,count):this.parsePrimitiveData(meta,data,start,count);const isNotInOrderComparedToPrev=()=>null===cur[iAxis]||prev&&cur[iAxis]<prev[iAxis];for(i=0;i<count;++i)meta._parsed[i+start]=cur=parsed[i],sorted&&(isNotInOrderComparedToPrev()&&(sorted=!1),prev=cur);meta._sorted=sorted}_stacked&&updateStacks(this,parsed)}parsePrimitiveData(meta,data,start,count){const{iScale,vScale}=meta,iAxis=iScale.axis,vAxis=vScale.axis,labels=iScale.getLabels(),singleScale=iScale===vScale,parsed=new Array(count);let i,ilen,index;for(i=0,ilen=count;i<ilen;++i)index=i+start,parsed[i]={[iAxis]:singleScale||iScale.parse(labels[index],index),[vAxis]:vScale.parse(data[index],index)};return parsed}parseArrayData(meta,data,start,count){const{xScale,yScale}=meta,parsed=new Array(count);let i,ilen,index,item;for(i=0,ilen=count;i<ilen;++i)index=i+start,item=data[index],parsed[i]={x:xScale.parse(item[0],index),y:yScale.parse(item[1],index)};return parsed}parseObjectData(meta,data,start,count){const{xScale,yScale}=meta,{xAxisKey="x",yAxisKey="y"}=this._parsing,parsed=new Array(count);let i,ilen,index,item;for(i=0,ilen=count;i<ilen;++i)index=i+start,item=data[index],parsed[i]={x:xScale.parse((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.f)(item,xAxisKey),index),y:yScale.parse((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.f)(item,yAxisKey),index)};return parsed}getParsed(index){return this._cachedMeta._parsed[index]}getDataElement(index){return this._cachedMeta.data[index]}applyStack(scale,parsed,mode){const chart=this.chart,meta=this._cachedMeta,value=parsed[scale.axis];return applyStack({keys:getSortedDatasetIndices(chart,!0),values:parsed._stacks[scale.axis]._visualValues},value,meta.index,{mode})}updateRangeFromParsed(range,scale,parsed,stack){const parsedValue=parsed[scale.axis];let value=null===parsedValue?NaN:parsedValue;const values=stack&&parsed._stacks[scale.axis];stack&&values&&(stack.values=values,value=applyStack(stack,parsedValue,this._cachedMeta.index)),range.min=Math.min(range.min,value),range.max=Math.max(range.max,value)}getMinMax(scale,canStack){const meta=this._cachedMeta,_parsed=meta._parsed,sorted=meta._sorted&&scale===meta.iScale,ilen=_parsed.length,otherScale=this._getOtherScale(scale),stack=((canStack,meta,chart)=>canStack&&!meta.hidden&&meta._stacked&&{keys:getSortedDatasetIndices(chart,!0),values:null})(canStack,meta,this.chart),range={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:otherMin,max:otherMax}=function getUserBounds(scale){const{min,max,minDefined,maxDefined}=scale.getUserBounds();return{min:minDefined?min:Number.NEGATIVE_INFINITY,max:maxDefined?max:Number.POSITIVE_INFINITY}}(otherScale);let i,parsed;function _skip(){parsed=_parsed[i];const otherValue=parsed[otherScale.axis];return!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(parsed[scale.axis])||otherMin>otherValue||otherMax<otherValue}for(i=0;i<ilen&&(_skip()||(this.updateRangeFromParsed(range,scale,parsed,stack),!sorted));++i);if(sorted)for(i=ilen-1;i>=0;--i)if(!_skip()){this.updateRangeFromParsed(range,scale,parsed,stack);break}return range}getAllParsedValues(scale){const parsed=this._cachedMeta._parsed,values=[];let i,ilen,value;for(i=0,ilen=parsed.length;i<ilen;++i)value=parsed[i][scale.axis],(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(value)&&values.push(value);return values}getMaxOverflow(){return!1}getLabelAndValue(index){const meta=this._cachedMeta,iScale=meta.iScale,vScale=meta.vScale,parsed=this.getParsed(index);return{label:iScale?""+iScale.getLabelForValue(parsed[iScale.axis]):"",value:vScale?""+vScale.getLabelForValue(parsed[vScale.axis]):""}}_update(mode){const meta=this._cachedMeta;this.update(mode||"default"),meta._clip=function toClip(value){let t,r,b,l;return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(value)?(t=value.top,r=value.right,b=value.bottom,l=value.left):t=r=b=l=value,{top:t,right:r,bottom:b,left:l,disabled:!1===value}}((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(this.options.clip,function defaultClip(xScale,yScale,allowedOverflow){if(!1===allowedOverflow)return!1;const x=scaleClip(xScale,allowedOverflow),y=scaleClip(yScale,allowedOverflow);return{top:y.end,right:x.end,bottom:y.start,left:x.start}}(meta.xScale,meta.yScale,this.getMaxOverflow())))}update(mode){}draw(){const ctx=this._ctx,chart=this.chart,meta=this._cachedMeta,elements=meta.data||[],area=chart.chartArea,active=[],start=this._drawStart||0,count=this._drawCount||elements.length-start,drawActiveElementsOnTop=this.options.drawActiveElementsOnTop;let i;for(meta.dataset&&meta.dataset.draw(ctx,area,start,count),i=start;i<start+count;++i){const element=elements[i];element.hidden||(element.active&&drawActiveElementsOnTop?active.push(element):element.draw(ctx,area))}for(i=0;i<active.length;++i)active[i].draw(ctx,area)}getStyle(index,active){const mode=active?"active":"default";return void 0===index&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(mode):this.resolveDataElementOptions(index||0,mode)}getContext(index,active,mode){const dataset=this.getDataset();let context;if(index>=0&&index<this._cachedMeta.data.length){const element=this._cachedMeta.data[index];context=element.$context||(element.$context=function createDataContext(parent,index,element){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.j)(parent,{active:!1,dataIndex:index,parsed:void 0,raw:void 0,element,index,mode:"default",type:"data"})}(this.getContext(),index,element)),context.parsed=this.getParsed(index),context.raw=dataset.data[index],context.index=context.dataIndex=index}else context=this.$context||(this.$context=function createDatasetContext(parent,index){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.j)(parent,{active:!1,dataset:void 0,datasetIndex:index,index,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),context.dataset=dataset,context.index=context.datasetIndex=this.index;return context.active=!!active,context.mode=mode,context}resolveDatasetElementOptions(mode){return this._resolveElementOptions(this.datasetElementType.id,mode)}resolveDataElementOptions(index,mode){return this._resolveElementOptions(this.dataElementType.id,mode,index)}_resolveElementOptions(elementType,mode="default",index){const active="active"===mode,cache=this._cachedDataOpts,cacheKey=elementType+"-"+mode,cached=cache[cacheKey],sharing=this.enableOptionSharing&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.h)(index);if(cached)return cloneIfNotShared(cached,sharing);const config=this.chart.config,scopeKeys=config.datasetElementScopeKeys(this._type,elementType),prefixes=active?[`${elementType}Hover`,"hover",elementType,""]:[elementType,""],scopes=config.getOptionScopes(this.getDataset(),scopeKeys),names=Object.keys(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.elements[elementType]),values=config.resolveNamedOptions(scopes,names,(()=>this.getContext(index,active,mode)),prefixes);return values.$shared&&(values.$shared=sharing,cache[cacheKey]=Object.freeze(cloneIfNotShared(values,sharing))),values}_resolveAnimations(index,transition,active){const chart=this.chart,cache=this._cachedDataOpts,cacheKey=`animation-${transition}`,cached=cache[cacheKey];if(cached)return cached;let options;if(!1!==chart.options.animation){const config=this.chart.config,scopeKeys=config.datasetAnimationScopeKeys(this._type,transition),scopes=config.getOptionScopes(this.getDataset(),scopeKeys);options=config.createResolver(scopes,this.getContext(index,active,transition))}const animations=new Animations(chart,options&&options.animations);return options&&options._cacheable&&(cache[cacheKey]=Object.freeze(animations)),animations}getSharedOptions(options){if(options.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},options))}includeOptions(mode,sharedOptions){return!sharedOptions||isDirectUpdateMode(mode)||this.chart._animationsDisabled}_getSharedOptions(start,mode){const firstOpts=this.resolveDataElementOptions(start,mode),previouslySharedOptions=this._sharedOptions,sharedOptions=this.getSharedOptions(firstOpts),includeOptions=this.includeOptions(mode,sharedOptions)||sharedOptions!==previouslySharedOptions;return this.updateSharedOptions(sharedOptions,mode,firstOpts),{sharedOptions,includeOptions}}updateElement(element,index,properties,mode){isDirectUpdateMode(mode)?Object.assign(element,properties):this._resolveAnimations(index,mode).update(element,properties)}updateSharedOptions(sharedOptions,mode,newOptions){sharedOptions&&!isDirectUpdateMode(mode)&&this._resolveAnimations(void 0,mode).update(sharedOptions,newOptions)}_setStyle(element,index,mode,active){element.active=active;const options=this.getStyle(index,active);this._resolveAnimations(index,mode,active).update(element,{options:!active&&this.getSharedOptions(options)||options})}removeHoverStyle(element,datasetIndex,index){this._setStyle(element,index,"active",!1)}setHoverStyle(element,datasetIndex,index){this._setStyle(element,index,"active",!0)}_removeDatasetHoverStyle(){const element=this._cachedMeta.dataset;element&&this._setStyle(element,void 0,"active",!1)}_setDatasetHoverStyle(){const element=this._cachedMeta.dataset;element&&this._setStyle(element,void 0,"active",!0)}_resyncElements(resetNewElements){const data=this._data,elements=this._cachedMeta.data;for(const[method,arg1,arg2]of this._syncList)this[method](arg1,arg2);this._syncList=[];const numMeta=elements.length,numData=data.length,count=Math.min(numData,numMeta);count&&this.parse(0,count),numData>numMeta?this._insertElements(numMeta,numData-numMeta,resetNewElements):numData<numMeta&&this._removeElements(numData,numMeta-numData)}_insertElements(start,count,resetNewElements=!0){const meta=this._cachedMeta,data=meta.data,end=start+count;let i;const move=arr=>{for(arr.length+=count,i=arr.length-1;i>=end;i--)arr[i]=arr[i-count]};for(move(data),i=start;i<end;++i)data[i]=new this.dataElementType;this._parsing&&move(meta._parsed),this.parse(start,count),resetNewElements&&this.updateElements(data,start,count,"reset")}updateElements(element,start,count,mode){}_removeElements(start,count){const meta=this._cachedMeta;if(this._parsing){const removed=meta._parsed.splice(start,count);meta._stacked&&clearStacks(meta,removed)}meta.data.splice(start,count)}_sync(args){if(this._parsing)this._syncList.push(args);else{const[method,arg1,arg2]=args;this[method](arg1,arg2)}this.chart._dataChanges.push([this.index,...args])}_onDataPush(){const count=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-count,count])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(start,count){count&&this._sync(["_removeElements",start,count]);const newCount=arguments.length-2;newCount&&this._sync(["_insertElements",start,newCount])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function computeMinSampleSize(meta){const scale=meta.iScale,values=function getAllScaleValues(scale,type){if(!scale._cache.$bar){const visibleMetas=scale.getMatchingVisibleMetas(type);let values=[];for(let i=0,ilen=visibleMetas.length;i<ilen;i++)values=values.concat(visibleMetas[i].controller.getAllParsedValues(scale));scale._cache.$bar=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__._)(values.sort(((a,b)=>a-b)))}return scale._cache.$bar}(scale,meta.type);let i,ilen,curr,prev,min=scale._length;const updateMinAndPrev=()=>{32767!==curr&&-32768!==curr&&((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.h)(prev)&&(min=Math.min(min,Math.abs(curr-prev)||min)),prev=curr)};for(i=0,ilen=values.length;i<ilen;++i)curr=scale.getPixelForValue(values[i]),updateMinAndPrev();for(prev=void 0,i=0,ilen=scale.ticks.length;i<ilen;++i)curr=scale.getPixelForTick(i),updateMinAndPrev();return min}function parseValue(entry,item,vScale,i){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.b)(entry)?function parseFloatBar(entry,item,vScale,i){const startValue=vScale.parse(entry[0],i),endValue=vScale.parse(entry[1],i),min=Math.min(startValue,endValue),max=Math.max(startValue,endValue);let barStart=min,barEnd=max;Math.abs(min)>Math.abs(max)&&(barStart=max,barEnd=min),item[vScale.axis]=barEnd,item._custom={barStart,barEnd,start:startValue,end:endValue,min,max}}(entry,item,vScale,i):item[vScale.axis]=vScale.parse(entry,i),item}function parseArrayOrPrimitive(meta,data,start,count){const iScale=meta.iScale,vScale=meta.vScale,labels=iScale.getLabels(),singleScale=iScale===vScale,parsed=[];let i,ilen,item,entry;for(i=start,ilen=start+count;i<ilen;++i)entry=data[i],item={},item[iScale.axis]=singleScale||iScale.parse(labels[i],i),parsed.push(parseValue(entry,item,vScale,i));return parsed}function isFloatBar(custom){return custom&&void 0!==custom.barStart&&void 0!==custom.barEnd}function setBorderSkipped(properties,options,stack,index){let edge=options.borderSkipped;const res={};if(!edge)return void(properties.borderSkipped=res);if(!0===edge)return void(properties.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start,end,reverse,top,bottom}=function borderProps(properties){let reverse,start,end,top,bottom;return properties.horizontal?(reverse=properties.base>properties.x,start="left",end="right"):(reverse=properties.base<properties.y,start="bottom",end="top"),reverse?(top="end",bottom="start"):(top="start",bottom="end"),{start,end,reverse,top,bottom}}(properties);"middle"===edge&&stack&&(properties.enableBorderRadius=!0,(stack._top||0)===index?edge=top:(stack._bottom||0)===index?edge=bottom:(res[parseEdge(bottom,start,end,reverse)]=!0,edge=top)),res[parseEdge(edge,start,end,reverse)]=!0,properties.borderSkipped=res}function parseEdge(edge,a,b,reverse){return edge=reverse?startEnd(edge=function swap(orig,v1,v2){return orig===v1?v2:orig===v2?v1:orig}(edge,a,b),b,a):startEnd(edge,a,b)}function startEnd(v,start,end){return"start"===v?start:"end"===v?end:v}function setInflateAmount(properties,{inflateAmount},ratio){properties.inflateAmount="auto"===inflateAmount?1===ratio?.33:0:inflateAmount}class DoughnutController extends DatasetController{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:name=>"spacing"!==name,_indexable:name=>"spacing"!==name&&!name.startsWith("borderDash")&&!name.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(chart){const data=chart.data;if(data.labels.length&&data.datasets.length){const{labels:{pointStyle,color}}=chart.legend.options;return data.labels.map(((label,i)=>{const style=chart.getDatasetMeta(0).controller.getStyle(i);return{text:label,fillStyle:style.backgroundColor,strokeStyle:style.borderColor,fontColor:color,lineWidth:style.borderWidth,pointStyle,hidden:!chart.getDataVisibility(i),index:i}}))}return[]}},onClick(e,legendItem,legend){legend.chart.toggleDataVisibility(legendItem.index),legend.chart.update()}}}};constructor(chart,datasetIndex){super(chart,datasetIndex),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(start,count){const data=this.getDataset().data,meta=this._cachedMeta;if(!1===this._parsing)meta._parsed=data;else{let i,ilen,getter=i=>+data[i];if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(data[start])){const{key="value"}=this._parsing;getter=i=>+(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.f)(data[i],key)}for(i=start,ilen=start+count;i<ilen;++i)meta._parsed[i]=getter(i)}}_getRotation(){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.t)(this.options.rotation-90)}_getCircumference(){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.t)(this.options.circumference)}_getRotationExtents(){let min=_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T,max=-_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const controller=this.chart.getDatasetMeta(i).controller,rotation=controller._getRotation(),circumference=controller._getCircumference();min=Math.min(min,rotation),max=Math.max(max,rotation+circumference)}return{rotation:min,circumference:max-min}}update(mode){const chart=this.chart,{chartArea}=chart,meta=this._cachedMeta,arcs=meta.data,spacing=this.getMaxBorderWidth()+this.getMaxOffset(arcs)+this.options.spacing,maxSize=Math.max((Math.min(chartArea.width,chartArea.height)-spacing)/2,0),cutout=Math.min((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.m)(this.options.cutout,maxSize),1),chartWeight=this._getRingWeight(this.index),{circumference,rotation}=this._getRotationExtents(),{ratioX,ratioY,offsetX,offsetY}=function getRatioAndOffset(rotation,circumference,cutout){let ratioX=1,ratioY=1,offsetX=0,offsetY=0;if(circumference<_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T){const startAngle=rotation,endAngle=startAngle+circumference,startX=Math.cos(startAngle),startY=Math.sin(startAngle),endX=Math.cos(endAngle),endY=Math.sin(endAngle),calcMax=(angle,a,b)=>(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.p)(angle,startAngle,endAngle,!0)?1:Math.max(a,a*cutout,b,b*cutout),calcMin=(angle,a,b)=>(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.p)(angle,startAngle,endAngle,!0)?-1:Math.min(a,a*cutout,b,b*cutout),maxX=calcMax(0,startX,endX),maxY=calcMax(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.H,startY,endY),minX=calcMin(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.P,startX,endX),minY=calcMin(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.P+_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.H,startY,endY);ratioX=(maxX-minX)/2,ratioY=(maxY-minY)/2,offsetX=-(maxX+minX)/2,offsetY=-(maxY+minY)/2}return{ratioX,ratioY,offsetX,offsetY}}(rotation,circumference,cutout),maxWidth=(chartArea.width-spacing)/ratioX,maxHeight=(chartArea.height-spacing)/ratioY,maxRadius=Math.max(Math.min(maxWidth,maxHeight)/2,0),outerRadius=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.n)(this.options.radius,maxRadius),radiusLength=(outerRadius-Math.max(outerRadius*cutout,0))/this._getVisibleDatasetWeightTotal();this.offsetX=offsetX*outerRadius,this.offsetY=offsetY*outerRadius,meta.total=this.calculateTotal(),this.outerRadius=outerRadius-radiusLength*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-radiusLength*chartWeight,0),this.updateElements(arcs,0,arcs.length,mode)}_circumference(i,reset){const opts=this.options,meta=this._cachedMeta,circumference=this._getCircumference();return reset&&opts.animation.animateRotate||!this.chart.getDataVisibility(i)||null===meta._parsed[i]||meta.data[i].hidden?0:this.calculateCircumference(meta._parsed[i]*circumference/_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T)}updateElements(arcs,start,count,mode){const reset="reset"===mode,chart=this.chart,chartArea=chart.chartArea,animationOpts=chart.options.animation,centerX=(chartArea.left+chartArea.right)/2,centerY=(chartArea.top+chartArea.bottom)/2,animateScale=reset&&animationOpts.animateScale,innerRadius=animateScale?0:this.innerRadius,outerRadius=animateScale?0:this.outerRadius,{sharedOptions,includeOptions}=this._getSharedOptions(start,mode);let i,startAngle=this._getRotation();for(i=0;i<start;++i)startAngle+=this._circumference(i,reset);for(i=start;i<start+count;++i){const circumference=this._circumference(i,reset),arc=arcs[i],properties={x:centerX+this.offsetX,y:centerY+this.offsetY,startAngle,endAngle:startAngle+circumference,circumference,outerRadius,innerRadius};includeOptions&&(properties.options=sharedOptions||this.resolveDataElementOptions(i,arc.active?"active":mode)),startAngle+=circumference,this.updateElement(arc,i,properties,mode)}}calculateTotal(){const meta=this._cachedMeta,metaData=meta.data;let i,total=0;for(i=0;i<metaData.length;i++){const value=meta._parsed[i];null===value||isNaN(value)||!this.chart.getDataVisibility(i)||metaData[i].hidden||(total+=Math.abs(value))}return total}calculateCircumference(value){const total=this._cachedMeta.total;return total>0&&!isNaN(value)?_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T*(Math.abs(value)/total):0}getLabelAndValue(index){const meta=this._cachedMeta,chart=this.chart,labels=chart.data.labels||[],value=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.o)(meta._parsed[index],chart.options.locale);return{label:labels[index]||"",value}}getMaxBorderWidth(arcs){let max=0;const chart=this.chart;let i,ilen,meta,controller,options;if(!arcs)for(i=0,ilen=chart.data.datasets.length;i<ilen;++i)if(chart.isDatasetVisible(i)){meta=chart.getDatasetMeta(i),arcs=meta.data,controller=meta.controller;break}if(!arcs)return 0;for(i=0,ilen=arcs.length;i<ilen;++i)options=controller.resolveDataElementOptions(i),"inner"!==options.borderAlign&&(max=Math.max(max,options.borderWidth||0,options.hoverBorderWidth||0));return max}getMaxOffset(arcs){let max=0;for(let i=0,ilen=arcs.length;i<ilen;++i){const options=this.resolveDataElementOptions(i);max=Math.max(max,options.offset||0,options.hoverOffset||0)}return max}_getRingWeightOffset(datasetIndex){let ringWeightOffset=0;for(let i=0;i<datasetIndex;++i)this.chart.isDatasetVisible(i)&&(ringWeightOffset+=this._getRingWeight(i));return ringWeightOffset}_getRingWeight(datasetIndex){return Math.max((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(this.chart.data.datasets[datasetIndex].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class PolarAreaController extends DatasetController{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(chart){const data=chart.data;if(data.labels.length&&data.datasets.length){const{labels:{pointStyle,color}}=chart.legend.options;return data.labels.map(((label,i)=>{const style=chart.getDatasetMeta(0).controller.getStyle(i);return{text:label,fillStyle:style.backgroundColor,strokeStyle:style.borderColor,fontColor:color,lineWidth:style.borderWidth,pointStyle,hidden:!chart.getDataVisibility(i),index:i}}))}return[]}},onClick(e,legendItem,legend){legend.chart.toggleDataVisibility(legendItem.index),legend.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(chart,datasetIndex){super(chart,datasetIndex),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(index){const meta=this._cachedMeta,chart=this.chart,labels=chart.data.labels||[],value=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.o)(meta._parsed[index].r,chart.options.locale);return{label:labels[index]||"",value}}parseObjectData(meta,data,start,count){return _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.y.bind(this)(meta,data,start,count)}update(mode){const arcs=this._cachedMeta.data;this._updateRadius(),this.updateElements(arcs,0,arcs.length,mode)}getMinMax(){const meta=this._cachedMeta,range={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return meta.data.forEach(((element,index)=>{const parsed=this.getParsed(index).r;!isNaN(parsed)&&this.chart.getDataVisibility(index)&&(parsed<range.min&&(range.min=parsed),parsed>range.max&&(range.max=parsed))})),range}_updateRadius(){const chart=this.chart,chartArea=chart.chartArea,opts=chart.options,minSize=Math.min(chartArea.right-chartArea.left,chartArea.bottom-chartArea.top),outerRadius=Math.max(minSize/2,0),radiusLength=(outerRadius-Math.max(opts.cutoutPercentage?outerRadius/100*opts.cutoutPercentage:1,0))/chart.getVisibleDatasetCount();this.outerRadius=outerRadius-radiusLength*this.index,this.innerRadius=this.outerRadius-radiusLength}updateElements(arcs,start,count,mode){const reset="reset"===mode,chart=this.chart,animationOpts=chart.options.animation,scale=this._cachedMeta.rScale,centerX=scale.xCenter,centerY=scale.yCenter,datasetStartAngle=scale.getIndexAngle(0)-.5*_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.P;let i,angle=datasetStartAngle;const defaultAngle=360/this.countVisibleElements();for(i=0;i<start;++i)angle+=this._computeAngle(i,mode,defaultAngle);for(i=start;i<start+count;i++){const arc=arcs[i];let startAngle=angle,endAngle=angle+this._computeAngle(i,mode,defaultAngle),outerRadius=chart.getDataVisibility(i)?scale.getDistanceFromCenterForValue(this.getParsed(i).r):0;angle=endAngle,reset&&(animationOpts.animateScale&&(outerRadius=0),animationOpts.animateRotate&&(startAngle=endAngle=datasetStartAngle));const properties={x:centerX,y:centerY,innerRadius:0,outerRadius,startAngle,endAngle,options:this.resolveDataElementOptions(i,arc.active?"active":mode)};this.updateElement(arc,i,properties,mode)}}countVisibleElements(){const meta=this._cachedMeta;let count=0;return meta.data.forEach(((element,index)=>{!isNaN(this.getParsed(index).r)&&this.chart.getDataVisibility(index)&&count++})),count}_computeAngle(index,mode,defaultAngle){return this.chart.getDataVisibility(index)?(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.t)(this.resolveDataElementOptions(index,mode).angle||defaultAngle):0}}var controllers=Object.freeze({__proto__:null,BarController:class BarController extends DatasetController{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(meta,data,start,count){return parseArrayOrPrimitive(meta,data,start,count)}parseArrayData(meta,data,start,count){return parseArrayOrPrimitive(meta,data,start,count)}parseObjectData(meta,data,start,count){const{iScale,vScale}=meta,{xAxisKey="x",yAxisKey="y"}=this._parsing,iAxisKey="x"===iScale.axis?xAxisKey:yAxisKey,vAxisKey="x"===vScale.axis?xAxisKey:yAxisKey,parsed=[];let i,ilen,item,obj;for(i=start,ilen=start+count;i<ilen;++i)obj=data[i],item={},item[iScale.axis]=iScale.parse((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.f)(obj,iAxisKey),i),parsed.push(parseValue((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.f)(obj,vAxisKey),item,vScale,i));return parsed}updateRangeFromParsed(range,scale,parsed,stack){super.updateRangeFromParsed(range,scale,parsed,stack);const custom=parsed._custom;custom&&scale===this._cachedMeta.vScale&&(range.min=Math.min(range.min,custom.min),range.max=Math.max(range.max,custom.max))}getMaxOverflow(){return 0}getLabelAndValue(index){const meta=this._cachedMeta,{iScale,vScale}=meta,parsed=this.getParsed(index),custom=parsed._custom,value=isFloatBar(custom)?"["+custom.start+", "+custom.end+"]":""+vScale.getLabelForValue(parsed[vScale.axis]);return{label:""+iScale.getLabelForValue(parsed[iScale.axis]),value}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(mode){const meta=this._cachedMeta;this.updateElements(meta.data,0,meta.data.length,mode)}updateElements(bars,start,count,mode){const reset="reset"===mode,{index,_cachedMeta:{vScale}}=this,base=vScale.getBasePixel(),horizontal=vScale.isHorizontal(),ruler=this._getRuler(),{sharedOptions,includeOptions}=this._getSharedOptions(start,mode);for(let i=start;i<start+count;i++){const parsed=this.getParsed(i),vpixels=reset||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(parsed[vScale.axis])?{base,head:base}:this._calculateBarValuePixels(i),ipixels=this._calculateBarIndexPixels(i,ruler),stack=(parsed._stacks||{})[vScale.axis],properties={horizontal,base:vpixels.base,enableBorderRadius:!stack||isFloatBar(parsed._custom)||index===stack._top||index===stack._bottom,x:horizontal?vpixels.head:ipixels.center,y:horizontal?ipixels.center:vpixels.head,height:horizontal?ipixels.size:Math.abs(vpixels.size),width:horizontal?Math.abs(vpixels.size):ipixels.size};includeOptions&&(properties.options=sharedOptions||this.resolveDataElementOptions(i,bars[i].active?"active":mode));const options=properties.options||bars[i].options;setBorderSkipped(properties,options,stack,index),setInflateAmount(properties,options,ruler.ratio),this.updateElement(bars[i],i,properties,mode)}}_getStacks(last,dataIndex){const{iScale}=this._cachedMeta,metasets=iScale.getMatchingVisibleMetas(this._type).filter((meta=>meta.controller.options.grouped)),stacked=iScale.options.stacked,stacks=[],skipNull=meta=>{const parsed=meta.controller.getParsed(dataIndex),val=parsed&&parsed[meta.vScale.axis];if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(val)||isNaN(val))return!0};for(const meta of metasets)if((void 0===dataIndex||!skipNull(meta))&&((!1===stacked||-1===stacks.indexOf(meta.stack)||void 0===stacked&&void 0===meta.stack)&&stacks.push(meta.stack),meta.index===last))break;return stacks.length||stacks.push(void 0),stacks}_getStackCount(index){return this._getStacks(void 0,index).length}_getStackIndex(datasetIndex,name,dataIndex){const stacks=this._getStacks(datasetIndex,dataIndex),index=void 0!==name?stacks.indexOf(name):-1;return-1===index?stacks.length-1:index}_getRuler(){const opts=this.options,meta=this._cachedMeta,iScale=meta.iScale,pixels=[];let i,ilen;for(i=0,ilen=meta.data.length;i<ilen;++i)pixels.push(iScale.getPixelForValue(this.getParsed(i)[iScale.axis],i));const barThickness=opts.barThickness;return{min:barThickness||computeMinSampleSize(meta),pixels,start:iScale._startPixel,end:iScale._endPixel,stackCount:this._getStackCount(),scale:iScale,grouped:opts.grouped,ratio:barThickness?1:opts.categoryPercentage*opts.barPercentage}}_calculateBarValuePixels(index){const{_cachedMeta:{vScale,_stacked,index:datasetIndex},options:{base:baseValue,minBarLength}}=this,actualBase=baseValue||0,parsed=this.getParsed(index),custom=parsed._custom,floating=isFloatBar(custom);let head,size,value=parsed[vScale.axis],start=0,length=_stacked?this.applyStack(vScale,parsed,_stacked):value;length!==value&&(start=length-value,length=value),floating&&(value=custom.barStart,length=custom.barEnd-custom.barStart,0!==value&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.s)(value)!==(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.s)(custom.barEnd)&&(start=0),start+=value);const startValue=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(baseValue)||floating?start:baseValue;let base=vScale.getPixelForValue(startValue);if(head=this.chart.getDataVisibility(index)?vScale.getPixelForValue(start+length):base,size=head-base,Math.abs(size)<minBarLength){size=function barSign(size,vScale,actualBase){return 0!==size?(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.s)(size):(vScale.isHorizontal()?1:-1)*(vScale.min>=actualBase?1:-1)}(size,vScale,actualBase)*minBarLength,value===actualBase&&(base-=size/2);const startPixel=vScale.getPixelForDecimal(0),endPixel=vScale.getPixelForDecimal(1),min=Math.min(startPixel,endPixel),max=Math.max(startPixel,endPixel);base=Math.max(Math.min(base,max),min),head=base+size,_stacked&&!floating&&(parsed._stacks[vScale.axis]._visualValues[datasetIndex]=vScale.getValueForPixel(head)-vScale.getValueForPixel(base))}if(base===vScale.getPixelForValue(actualBase)){const halfGrid=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.s)(size)*vScale.getLineWidthForValue(actualBase)/2;base+=halfGrid,size-=halfGrid}return{size,base,head,center:head+size/2}}_calculateBarIndexPixels(index,ruler){const scale=ruler.scale,options=this.options,skipNull=options.skipNull,maxBarThickness=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(options.maxBarThickness,1/0);let center,size;if(ruler.grouped){const stackCount=skipNull?this._getStackCount(index):ruler.stackCount,range="flex"===options.barThickness?function computeFlexCategoryTraits(index,ruler,options,stackCount){const pixels=ruler.pixels,curr=pixels[index];let prev=index>0?pixels[index-1]:null,next=index<pixels.length-1?pixels[index+1]:null;const percent=options.categoryPercentage;null===prev&&(prev=curr-(null===next?ruler.end-ruler.start:next-curr)),null===next&&(next=curr+curr-prev);const start=curr-(curr-Math.min(prev,next))/2*percent;return{chunk:Math.abs(next-prev)/2*percent/stackCount,ratio:options.barPercentage,start}}(index,ruler,options,stackCount):function computeFitCategoryTraits(index,ruler,options,stackCount){const thickness=options.barThickness;let size,ratio;return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(thickness)?(size=ruler.min*options.categoryPercentage,ratio=options.barPercentage):(size=thickness*stackCount,ratio=1),{chunk:size/stackCount,ratio,start:ruler.pixels[index]-size/2}}(index,ruler,options,stackCount),stackIndex=this._getStackIndex(this.index,this._cachedMeta.stack,skipNull?index:void 0);center=range.start+range.chunk*stackIndex+range.chunk/2,size=Math.min(maxBarThickness,range.chunk*range.ratio)}else center=scale.getPixelForValue(this.getParsed(index)[scale.axis],index),size=Math.min(maxBarThickness,ruler.min*ruler.ratio);return{base:center-size/2,head:center+size/2,center,size}}draw(){const meta=this._cachedMeta,vScale=meta.vScale,rects=meta.data,ilen=rects.length;let i=0;for(;i<ilen;++i)null!==this.getParsed(i)[vScale.axis]&&rects[i].draw(this._ctx)}},BubbleController:class BubbleController extends DatasetController{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(meta,data,start,count){const parsed=super.parsePrimitiveData(meta,data,start,count);for(let i=0;i<parsed.length;i++)parsed[i]._custom=this.resolveDataElementOptions(i+start).radius;return parsed}parseArrayData(meta,data,start,count){const parsed=super.parseArrayData(meta,data,start,count);for(let i=0;i<parsed.length;i++){const item=data[start+i];parsed[i]._custom=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(item[2],this.resolveDataElementOptions(i+start).radius)}return parsed}parseObjectData(meta,data,start,count){const parsed=super.parseObjectData(meta,data,start,count);for(let i=0;i<parsed.length;i++){const item=data[start+i];parsed[i]._custom=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(item&&item.r&&+item.r,this.resolveDataElementOptions(i+start).radius)}return parsed}getMaxOverflow(){const data=this._cachedMeta.data;let max=0;for(let i=data.length-1;i>=0;--i)max=Math.max(max,data[i].size(this.resolveDataElementOptions(i))/2);return max>0&&max}getLabelAndValue(index){const meta=this._cachedMeta,labels=this.chart.data.labels||[],{xScale,yScale}=meta,parsed=this.getParsed(index),x=xScale.getLabelForValue(parsed.x),y=yScale.getLabelForValue(parsed.y),r=parsed._custom;return{label:labels[index]||"",value:"("+x+", "+y+(r?", "+r:"")+")"}}update(mode){const points=this._cachedMeta.data;this.updateElements(points,0,points.length,mode)}updateElements(points,start,count,mode){const reset="reset"===mode,{iScale,vScale}=this._cachedMeta,{sharedOptions,includeOptions}=this._getSharedOptions(start,mode),iAxis=iScale.axis,vAxis=vScale.axis;for(let i=start;i<start+count;i++){const point=points[i],parsed=!reset&&this.getParsed(i),properties={},iPixel=properties[iAxis]=reset?iScale.getPixelForDecimal(.5):iScale.getPixelForValue(parsed[iAxis]),vPixel=properties[vAxis]=reset?vScale.getBasePixel():vScale.getPixelForValue(parsed[vAxis]);properties.skip=isNaN(iPixel)||isNaN(vPixel),includeOptions&&(properties.options=sharedOptions||this.resolveDataElementOptions(i,point.active?"active":mode),reset&&(properties.options.radius=0)),this.updateElement(point,i,properties,mode)}}resolveDataElementOptions(index,mode){const parsed=this.getParsed(index);let values=super.resolveDataElementOptions(index,mode);values.$shared&&(values=Object.assign({},values,{$shared:!1}));const radius=values.radius;return"active"!==mode&&(values.radius=0),values.radius+=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(parsed&&parsed._custom,radius),values}},DoughnutController,LineController:class LineController extends DatasetController{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(mode){const meta=this._cachedMeta,{dataset:line,data:points=[],_dataset}=meta,animationsDisabled=this.chart._animationsDisabled;let{start,count}=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.q)(meta,points,animationsDisabled);this._drawStart=start,this._drawCount=count,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.w)(meta)&&(start=0,count=points.length),line._chart=this.chart,line._datasetIndex=this.index,line._decimated=!!_dataset._decimated,line.points=points;const options=this.resolveDatasetElementOptions(mode);this.options.showLine||(options.borderWidth=0),options.segment=this.options.segment,this.updateElement(line,void 0,{animated:!animationsDisabled,options},mode),this.updateElements(points,start,count,mode)}updateElements(points,start,count,mode){const reset="reset"===mode,{iScale,vScale,_stacked,_dataset}=this._cachedMeta,{sharedOptions,includeOptions}=this._getSharedOptions(start,mode),iAxis=iScale.axis,vAxis=vScale.axis,{spanGaps,segment}=this.options,maxGapLength=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.x)(spanGaps)?spanGaps:Number.POSITIVE_INFINITY,directUpdate=this.chart._animationsDisabled||reset||"none"===mode,end=start+count,pointsCount=points.length;let prevParsed=start>0&&this.getParsed(start-1);for(let i=0;i<pointsCount;++i){const point=points[i],properties=directUpdate?point:{};if(i<start||i>=end){properties.skip=!0;continue}const parsed=this.getParsed(i),nullData=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(parsed[vAxis]),iPixel=properties[iAxis]=iScale.getPixelForValue(parsed[iAxis],i),vPixel=properties[vAxis]=reset||nullData?vScale.getBasePixel():vScale.getPixelForValue(_stacked?this.applyStack(vScale,parsed,_stacked):parsed[vAxis],i);properties.skip=isNaN(iPixel)||isNaN(vPixel)||nullData,properties.stop=i>0&&Math.abs(parsed[iAxis]-prevParsed[iAxis])>maxGapLength,segment&&(properties.parsed=parsed,properties.raw=_dataset.data[i]),includeOptions&&(properties.options=sharedOptions||this.resolveDataElementOptions(i,point.active?"active":mode)),directUpdate||this.updateElement(point,i,properties,mode),prevParsed=parsed}}getMaxOverflow(){const meta=this._cachedMeta,dataset=meta.dataset,border=dataset.options&&dataset.options.borderWidth||0,data=meta.data||[];if(!data.length)return border;const firstPoint=data[0].size(this.resolveDataElementOptions(0)),lastPoint=data[data.length-1].size(this.resolveDataElementOptions(data.length-1));return Math.max(border,firstPoint,lastPoint)/2}draw(){const meta=this._cachedMeta;meta.dataset.updateControlPoints(this.chart.chartArea,meta.iScale.axis),super.draw()}},PieController:class PieController extends DoughnutController{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController,RadarController:class RadarController extends DatasetController{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(index){const vScale=this._cachedMeta.vScale,parsed=this.getParsed(index);return{label:vScale.getLabels()[index],value:""+vScale.getLabelForValue(parsed[vScale.axis])}}parseObjectData(meta,data,start,count){return _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.y.bind(this)(meta,data,start,count)}update(mode){const meta=this._cachedMeta,line=meta.dataset,points=meta.data||[],labels=meta.iScale.getLabels();if(line.points=points,"resize"!==mode){const options=this.resolveDatasetElementOptions(mode);this.options.showLine||(options.borderWidth=0);const properties={_loop:!0,_fullLoop:labels.length===points.length,options};this.updateElement(line,void 0,properties,mode)}this.updateElements(points,0,points.length,mode)}updateElements(points,start,count,mode){const scale=this._cachedMeta.rScale,reset="reset"===mode;for(let i=start;i<start+count;i++){const point=points[i],options=this.resolveDataElementOptions(i,point.active?"active":mode),pointPosition=scale.getPointPositionForValue(i,this.getParsed(i).r),x=reset?scale.xCenter:pointPosition.x,y=reset?scale.yCenter:pointPosition.y,properties={x,y,angle:pointPosition.angle,skip:isNaN(x)||isNaN(y),options};this.updateElement(point,i,properties,mode)}}},ScatterController:class ScatterController extends DatasetController{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(index){const meta=this._cachedMeta,labels=this.chart.data.labels||[],{xScale,yScale}=meta,parsed=this.getParsed(index),x=xScale.getLabelForValue(parsed.x),y=yScale.getLabelForValue(parsed.y);return{label:labels[index]||"",value:"("+x+", "+y+")"}}update(mode){const meta=this._cachedMeta,{data:points=[]}=meta,animationsDisabled=this.chart._animationsDisabled;let{start,count}=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.q)(meta,points,animationsDisabled);if(this._drawStart=start,this._drawCount=count,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.w)(meta)&&(start=0,count=points.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:line,_dataset}=meta;line._chart=this.chart,line._datasetIndex=this.index,line._decimated=!!_dataset._decimated,line.points=points;const options=this.resolveDatasetElementOptions(mode);options.segment=this.options.segment,this.updateElement(line,void 0,{animated:!animationsDisabled,options},mode)}else this.datasetElementType&&(delete meta.dataset,this.datasetElementType=!1);this.updateElements(points,start,count,mode)}addElements(){const{showLine}=this.options;!this.datasetElementType&&showLine&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(points,start,count,mode){const reset="reset"===mode,{iScale,vScale,_stacked,_dataset}=this._cachedMeta,firstOpts=this.resolveDataElementOptions(start,mode),sharedOptions=this.getSharedOptions(firstOpts),includeOptions=this.includeOptions(mode,sharedOptions),iAxis=iScale.axis,vAxis=vScale.axis,{spanGaps,segment}=this.options,maxGapLength=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.x)(spanGaps)?spanGaps:Number.POSITIVE_INFINITY,directUpdate=this.chart._animationsDisabled||reset||"none"===mode;let prevParsed=start>0&&this.getParsed(start-1);for(let i=start;i<start+count;++i){const point=points[i],parsed=this.getParsed(i),properties=directUpdate?point:{},nullData=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(parsed[vAxis]),iPixel=properties[iAxis]=iScale.getPixelForValue(parsed[iAxis],i),vPixel=properties[vAxis]=reset||nullData?vScale.getBasePixel():vScale.getPixelForValue(_stacked?this.applyStack(vScale,parsed,_stacked):parsed[vAxis],i);properties.skip=isNaN(iPixel)||isNaN(vPixel)||nullData,properties.stop=i>0&&Math.abs(parsed[iAxis]-prevParsed[iAxis])>maxGapLength,segment&&(properties.parsed=parsed,properties.raw=_dataset.data[i]),includeOptions&&(properties.options=sharedOptions||this.resolveDataElementOptions(i,point.active?"active":mode)),directUpdate||this.updateElement(point,i,properties,mode),prevParsed=parsed}this.updateSharedOptions(sharedOptions,mode,firstOpts)}getMaxOverflow(){const meta=this._cachedMeta,data=meta.data||[];if(!this.options.showLine){let max=0;for(let i=data.length-1;i>=0;--i)max=Math.max(max,data[i].size(this.resolveDataElementOptions(i))/2);return max>0&&max}const dataset=meta.dataset,border=dataset.options&&dataset.options.borderWidth||0;if(!data.length)return border;const firstPoint=data[0].size(this.resolveDataElementOptions(0)),lastPoint=data[data.length-1].size(this.resolveDataElementOptions(data.length-1));return Math.max(border,firstPoint,lastPoint)/2}}});function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapterBase{static override(members){Object.assign(DateAdapterBase.prototype,members)}options;constructor(options){this.options=options||{}}init(){}formats(){return abstract()}parse(){return abstract()}format(){return abstract()}add(){return abstract()}diff(){return abstract()}startOf(){return abstract()}endOf(){return abstract()}}var adapters={_date:DateAdapterBase};function binarySearch(metaset,axis,value,intersect){const{controller,data,_sorted}=metaset,iScale=controller._cachedMeta.iScale;if(iScale&&axis===iScale.axis&&"r"!==axis&&_sorted&&data.length){const lookupMethod=iScale._reversePixels?_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.A:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.B;if(!intersect)return lookupMethod(data,axis,value);if(controller._sharedOptions){const el=data[0],range="function"==typeof el.getRange&&el.getRange(axis);if(range){const start=lookupMethod(data,axis,value-range),end=lookupMethod(data,axis,value+range);return{lo:start.lo,hi:end.hi}}}}return{lo:0,hi:data.length-1}}function evaluateInteractionItems(chart,axis,position,handler,intersect){const metasets=chart.getSortedVisibleDatasetMetas(),value=position[axis];for(let i=0,ilen=metasets.length;i<ilen;++i){const{index,data}=metasets[i],{lo,hi}=binarySearch(metasets[i],axis,value,intersect);for(let j=lo;j<=hi;++j){const element=data[j];element.skip||handler(element,index,j)}}}function getIntersectItems(chart,position,axis,useFinalPosition,includeInvisible){const items=[];if(!includeInvisible&&!chart.isPointInArea(position))return items;return evaluateInteractionItems(chart,axis,position,(function(element,datasetIndex,index){(includeInvisible||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.C)(element,chart.chartArea,0))&&element.inRange(position.x,position.y,useFinalPosition)&&items.push({element,datasetIndex,index})}),!0),items}function getNearestCartesianItems(chart,position,axis,intersect,useFinalPosition,includeInvisible){let items=[];const distanceMetric=function getDistanceMetricForAxis(axis){const useX=-1!==axis.indexOf("x"),useY=-1!==axis.indexOf("y");return function(pt1,pt2){const deltaX=useX?Math.abs(pt1.x-pt2.x):0,deltaY=useY?Math.abs(pt1.y-pt2.y):0;return Math.sqrt(Math.pow(deltaX,2)+Math.pow(deltaY,2))}}(axis);let minDistance=Number.POSITIVE_INFINITY;return evaluateInteractionItems(chart,axis,position,(function evaluationFunc(element,datasetIndex,index){const inRange=element.inRange(position.x,position.y,useFinalPosition);if(intersect&&!inRange)return;const center=element.getCenterPoint(useFinalPosition);if(!(!!includeInvisible||chart.isPointInArea(center))&&!inRange)return;const distance=distanceMetric(position,center);distance<minDistance?(items=[{element,datasetIndex,index}],minDistance=distance):distance===minDistance&&items.push({element,datasetIndex,index})})),items}function getNearestItems(chart,position,axis,intersect,useFinalPosition,includeInvisible){return includeInvisible||chart.isPointInArea(position)?"r"!==axis||intersect?getNearestCartesianItems(chart,position,axis,intersect,useFinalPosition,includeInvisible):function getNearestRadialItems(chart,position,axis,useFinalPosition){let items=[];return evaluateInteractionItems(chart,axis,position,(function evaluationFunc(element,datasetIndex,index){const{startAngle,endAngle}=element.getProps(["startAngle","endAngle"],useFinalPosition),{angle}=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.D)(element,{x:position.x,y:position.y});(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.p)(angle,startAngle,endAngle)&&items.push({element,datasetIndex,index})})),items}(chart,position,axis,useFinalPosition):[]}function getAxisItems(chart,position,axis,intersect,useFinalPosition){const items=[],rangeMethod="x"===axis?"inXRange":"inYRange";let intersectsItem=!1;return evaluateInteractionItems(chart,axis,position,((element,datasetIndex,index)=>{element[rangeMethod](position[axis],useFinalPosition)&&(items.push({element,datasetIndex,index}),intersectsItem=intersectsItem||element.inRange(position.x,position.y,useFinalPosition))})),intersect&&!intersectsItem?[]:items}var Interaction={evaluateInteractionItems,modes:{index(chart,e,options,useFinalPosition){const position=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.z)(e,chart),axis=options.axis||"x",includeInvisible=options.includeInvisible||!1,items=options.intersect?getIntersectItems(chart,position,axis,useFinalPosition,includeInvisible):getNearestItems(chart,position,axis,!1,useFinalPosition,includeInvisible),elements=[];return items.length?(chart.getSortedVisibleDatasetMetas().forEach((meta=>{const index=items[0].index,element=meta.data[index];element&&!element.skip&&elements.push({element,datasetIndex:meta.index,index})})),elements):[]},dataset(chart,e,options,useFinalPosition){const position=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.z)(e,chart),axis=options.axis||"xy",includeInvisible=options.includeInvisible||!1;let items=options.intersect?getIntersectItems(chart,position,axis,useFinalPosition,includeInvisible):getNearestItems(chart,position,axis,!1,useFinalPosition,includeInvisible);if(items.length>0){const datasetIndex=items[0].datasetIndex,data=chart.getDatasetMeta(datasetIndex).data;items=[];for(let i=0;i<data.length;++i)items.push({element:data[i],datasetIndex,index:i})}return items},point:(chart,e,options,useFinalPosition)=>getIntersectItems(chart,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.z)(e,chart),options.axis||"xy",useFinalPosition,options.includeInvisible||!1),nearest(chart,e,options,useFinalPosition){const position=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.z)(e,chart),axis=options.axis||"xy",includeInvisible=options.includeInvisible||!1;return getNearestItems(chart,position,axis,options.intersect,useFinalPosition,includeInvisible)},x:(chart,e,options,useFinalPosition)=>getAxisItems(chart,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.z)(e,chart),"x",options.intersect,useFinalPosition),y:(chart,e,options,useFinalPosition)=>getAxisItems(chart,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.z)(e,chart),"y",options.intersect,useFinalPosition)}};const STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(array,position){return array.filter((v=>v.pos===position))}function filterDynamicPositionByAxis(array,axis){return array.filter((v=>-1===STATIC_POSITIONS.indexOf(v.pos)&&v.box.axis===axis))}function sortByWeight(array,reverse){return array.sort(((a,b)=>{const v0=reverse?b:a,v1=reverse?a:b;return v0.weight===v1.weight?v0.index-v1.index:v0.weight-v1.weight}))}function setLayoutDims(layouts,params){const stacks=function buildStacks(layouts){const stacks={};for(const wrap of layouts){const{stack,pos,stackWeight}=wrap;if(!stack||!STATIC_POSITIONS.includes(pos))continue;const _stack=stacks[stack]||(stacks[stack]={count:0,placed:0,weight:0,size:0});_stack.count++,_stack.weight+=stackWeight}return stacks}(layouts),{vBoxMaxWidth,hBoxMaxHeight}=params;let i,ilen,layout;for(i=0,ilen=layouts.length;i<ilen;++i){layout=layouts[i];const{fullSize}=layout.box,stack=stacks[layout.stack],factor=stack&&layout.stackWeight/stack.weight;layout.horizontal?(layout.width=factor?factor*vBoxMaxWidth:fullSize&&params.availableWidth,layout.height=hBoxMaxHeight):(layout.width=vBoxMaxWidth,layout.height=factor?factor*hBoxMaxHeight:fullSize&&params.availableHeight)}return stacks}function getCombinedMax(maxPadding,chartArea,a,b){return Math.max(maxPadding[a],chartArea[a])+Math.max(maxPadding[b],chartArea[b])}function updateMaxPadding(maxPadding,boxPadding){maxPadding.top=Math.max(maxPadding.top,boxPadding.top),maxPadding.left=Math.max(maxPadding.left,boxPadding.left),maxPadding.bottom=Math.max(maxPadding.bottom,boxPadding.bottom),maxPadding.right=Math.max(maxPadding.right,boxPadding.right)}function updateDims(chartArea,params,layout,stacks){const{pos,box}=layout,maxPadding=chartArea.maxPadding;if(!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(pos)){layout.size&&(chartArea[pos]-=layout.size);const stack=stacks[layout.stack]||{size:0,count:1};stack.size=Math.max(stack.size,layout.horizontal?box.height:box.width),layout.size=stack.size/stack.count,chartArea[pos]+=layout.size}box.getPadding&&updateMaxPadding(maxPadding,box.getPadding());const newWidth=Math.max(0,params.outerWidth-getCombinedMax(maxPadding,chartArea,"left","right")),newHeight=Math.max(0,params.outerHeight-getCombinedMax(maxPadding,chartArea,"top","bottom")),widthChanged=newWidth!==chartArea.w,heightChanged=newHeight!==chartArea.h;return chartArea.w=newWidth,chartArea.h=newHeight,layout.horizontal?{same:widthChanged,other:heightChanged}:{same:heightChanged,other:widthChanged}}function getMargins(horizontal,chartArea){const maxPadding=chartArea.maxPadding;function marginForPositions(positions){const margin={left:0,top:0,right:0,bottom:0};return positions.forEach((pos=>{margin[pos]=Math.max(chartArea[pos],maxPadding[pos])})),margin}return marginForPositions(horizontal?["left","right"]:["top","bottom"])}function fitBoxes(boxes,chartArea,params,stacks){const refitBoxes=[];let i,ilen,layout,box,refit,changed;for(i=0,ilen=boxes.length,refit=0;i<ilen;++i){layout=boxes[i],box=layout.box,box.update(layout.width||chartArea.w,layout.height||chartArea.h,getMargins(layout.horizontal,chartArea));const{same,other}=updateDims(chartArea,params,layout,stacks);refit|=same&&refitBoxes.length,changed=changed||other,box.fullSize||refitBoxes.push(layout)}return refit&&fitBoxes(refitBoxes,chartArea,params,stacks)||changed}function setBoxDims(box,left,top,width,height){box.top=top,box.left=left,box.right=left+width,box.bottom=top+height,box.width=width,box.height=height}function placeBoxes(boxes,chartArea,params,stacks){const userPadding=params.padding;let{x,y}=chartArea;for(const layout of boxes){const box=layout.box,stack=stacks[layout.stack]||{count:1,placed:0,weight:1},weight=layout.stackWeight/stack.weight||1;if(layout.horizontal){const width=chartArea.w*weight,height=stack.size||box.height;(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.h)(stack.start)&&(y=stack.start),box.fullSize?setBoxDims(box,userPadding.left,y,params.outerWidth-userPadding.right-userPadding.left,height):setBoxDims(box,chartArea.left+stack.placed,y,width,height),stack.start=y,stack.placed+=width,y=box.bottom}else{const height=chartArea.h*weight,width=stack.size||box.width;(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.h)(stack.start)&&(x=stack.start),box.fullSize?setBoxDims(box,x,userPadding.top,width,params.outerHeight-userPadding.bottom-userPadding.top):setBoxDims(box,x,chartArea.top+stack.placed,width,height),stack.start=x,stack.placed+=height,x=box.right}}chartArea.x=x,chartArea.y=y}var layouts={addBox(chart,item){chart.boxes||(chart.boxes=[]),item.fullSize=item.fullSize||!1,item.position=item.position||"top",item.weight=item.weight||0,item._layers=item._layers||function(){return[{z:0,draw(chartArea){item.draw(chartArea)}}]},chart.boxes.push(item)},removeBox(chart,layoutItem){const index=chart.boxes?chart.boxes.indexOf(layoutItem):-1;-1!==index&&chart.boxes.splice(index,1)},configure(chart,item,options){item.fullSize=options.fullSize,item.position=options.position,item.weight=options.weight},update(chart,width,height,minPadding){if(!chart)return;const padding=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(chart.options.layout.padding),availableWidth=Math.max(width-padding.width,0),availableHeight=Math.max(height-padding.height,0),boxes=function buildLayoutBoxes(boxes){const layoutBoxes=function wrapBoxes(boxes){const layoutBoxes=[];let i,ilen,box,pos,stack,stackWeight;for(i=0,ilen=(boxes||[]).length;i<ilen;++i)box=boxes[i],({position:pos,options:{stack,stackWeight=1}}=box),layoutBoxes.push({index:i,box,pos,horizontal:box.isHorizontal(),weight:box.weight,stack:stack&&pos+stack,stackWeight});return layoutBoxes}(boxes),fullSize=sortByWeight(layoutBoxes.filter((wrap=>wrap.box.fullSize)),!0),left=sortByWeight(filterByPosition(layoutBoxes,"left"),!0),right=sortByWeight(filterByPosition(layoutBoxes,"right")),top=sortByWeight(filterByPosition(layoutBoxes,"top"),!0),bottom=sortByWeight(filterByPosition(layoutBoxes,"bottom")),centerHorizontal=filterDynamicPositionByAxis(layoutBoxes,"x"),centerVertical=filterDynamicPositionByAxis(layoutBoxes,"y");return{fullSize,leftAndTop:left.concat(top),rightAndBottom:right.concat(centerVertical).concat(bottom).concat(centerHorizontal),chartArea:filterByPosition(layoutBoxes,"chartArea"),vertical:left.concat(right).concat(centerVertical),horizontal:top.concat(bottom).concat(centerHorizontal)}}(chart.boxes),verticalBoxes=boxes.vertical,horizontalBoxes=boxes.horizontal;(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(chart.boxes,(box=>{"function"==typeof box.beforeLayout&&box.beforeLayout()}));const visibleVerticalBoxCount=verticalBoxes.reduce(((total,wrap)=>wrap.box.options&&!1===wrap.box.options.display?total:total+1),0)||1,params=Object.freeze({outerWidth:width,outerHeight:height,padding,availableWidth,availableHeight,vBoxMaxWidth:availableWidth/2/visibleVerticalBoxCount,hBoxMaxHeight:availableHeight/2}),maxPadding=Object.assign({},padding);updateMaxPadding(maxPadding,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(minPadding));const chartArea=Object.assign({maxPadding,w:availableWidth,h:availableHeight,x:padding.left,y:padding.top},padding),stacks=setLayoutDims(verticalBoxes.concat(horizontalBoxes),params);fitBoxes(boxes.fullSize,chartArea,params,stacks),fitBoxes(verticalBoxes,chartArea,params,stacks),fitBoxes(horizontalBoxes,chartArea,params,stacks)&&fitBoxes(verticalBoxes,chartArea,params,stacks),function handleMaxPadding(chartArea){const maxPadding=chartArea.maxPadding;function updatePos(pos){const change=Math.max(maxPadding[pos]-chartArea[pos],0);return chartArea[pos]+=change,change}chartArea.y+=updatePos("top"),chartArea.x+=updatePos("left"),updatePos("right"),updatePos("bottom")}(chartArea),placeBoxes(boxes.leftAndTop,chartArea,params,stacks),chartArea.x+=chartArea.w,chartArea.y+=chartArea.h,placeBoxes(boxes.rightAndBottom,chartArea,params,stacks),chart.chartArea={left:chartArea.left,top:chartArea.top,right:chartArea.left+chartArea.w,bottom:chartArea.top+chartArea.h,height:chartArea.h,width:chartArea.w},(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(boxes.chartArea,(layout=>{const box=layout.box;Object.assign(box,chart.chartArea),box.update(chartArea.w,chartArea.h,{left:0,top:0,right:0,bottom:0})}))}};class BasePlatform{acquireContext(canvas,aspectRatio){}releaseContext(context){return!1}addEventListener(chart,type,listener){}removeEventListener(chart,type,listener){}getDevicePixelRatio(){return 1}getMaximumSize(element,width,height,aspectRatio){return width=Math.max(0,width||element.width),height=height||element.height,{width,height:Math.max(0,aspectRatio?Math.floor(width/aspectRatio):height)}}isAttached(canvas){return!0}updateConfig(config){}}class BasicPlatform extends BasePlatform{acquireContext(item){return item&&item.getContext&&item.getContext("2d")||null}updateConfig(config){config.options.animation=!1}}const EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=value=>null===value||""===value;const eventListenerOptions=!!_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.K&&{passive:!0};function removeListener(chart,type,listener){chart.canvas.removeEventListener(type,listener,eventListenerOptions)}function nodeListContains(nodeList,canvas){for(const node of nodeList)if(node===canvas||node.contains(canvas))return!0}function createAttachObserver(chart,type,listener){const canvas=chart.canvas,observer=new MutationObserver((entries=>{let trigger=!1;for(const entry of entries)trigger=trigger||nodeListContains(entry.addedNodes,canvas),trigger=trigger&&!nodeListContains(entry.removedNodes,canvas);trigger&&listener()}));return observer.observe(document,{childList:!0,subtree:!0}),observer}function createDetachObserver(chart,type,listener){const canvas=chart.canvas,observer=new MutationObserver((entries=>{let trigger=!1;for(const entry of entries)trigger=trigger||nodeListContains(entry.removedNodes,canvas),trigger=trigger&&!nodeListContains(entry.addedNodes,canvas);trigger&&listener()}));return observer.observe(document,{childList:!0,subtree:!0}),observer}const drpListeningCharts=new Map;let oldDevicePixelRatio=0;function onWindowResize(){const dpr=window.devicePixelRatio;dpr!==oldDevicePixelRatio&&(oldDevicePixelRatio=dpr,drpListeningCharts.forEach(((resize,chart)=>{chart.currentDevicePixelRatio!==dpr&&resize()})))}function createResizeObserver(chart,type,listener){const canvas=chart.canvas,container=canvas&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.I)(canvas);if(!container)return;const resize=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.L)(((width,height)=>{const w=container.clientWidth;listener(width,height),w<container.clientWidth&&listener()}),window),observer=new ResizeObserver((entries=>{const entry=entries[0],width=entry.contentRect.width,height=entry.contentRect.height;0===width&&0===height||resize(width,height)}));return observer.observe(container),function listenDevicePixelRatioChanges(chart,resize){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(chart,resize)}(chart,resize),observer}function releaseObserver(chart,type,observer){observer&&observer.disconnect(),"resize"===type&&function unlistenDevicePixelRatioChanges(chart){drpListeningCharts.delete(chart),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}(chart)}function createProxyAndListen(chart,type,listener){const canvas=chart.canvas,proxy=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.L)((event=>{null!==chart.ctx&&listener(function fromNativeEvent(event,chart){const type=EVENT_TYPES[event.type]||event.type,{x,y}=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.z)(event,chart);return{type,chart,native:event,x:void 0!==x?x:null,y:void 0!==y?y:null}}(event,chart))}),chart);return function addListener(node,type,listener){node.addEventListener(type,listener,eventListenerOptions)}(canvas,type,proxy),proxy}class DomPlatform extends BasePlatform{acquireContext(canvas,aspectRatio){const context=canvas&&canvas.getContext&&canvas.getContext("2d");return context&&context.canvas===canvas?(function initCanvas(canvas,aspectRatio){const style=canvas.style,renderHeight=canvas.getAttribute("height"),renderWidth=canvas.getAttribute("width");if(canvas.$chartjs={initial:{height:renderHeight,width:renderWidth,style:{display:style.display,height:style.height,width:style.width}}},style.display=style.display||"block",style.boxSizing=style.boxSizing||"border-box",isNullOrEmpty(renderWidth)){const displayWidth=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.J)(canvas,"width");void 0!==displayWidth&&(canvas.width=displayWidth)}if(isNullOrEmpty(renderHeight))if(""===canvas.style.height)canvas.height=canvas.width/(aspectRatio||2);else{const displayHeight=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.J)(canvas,"height");void 0!==displayHeight&&(canvas.height=displayHeight)}return canvas}(canvas,aspectRatio),context):null}releaseContext(context){const canvas=context.canvas;if(!canvas.$chartjs)return!1;const initial=canvas.$chartjs.initial;["height","width"].forEach((prop=>{const value=initial[prop];(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(value)?canvas.removeAttribute(prop):canvas.setAttribute(prop,value)}));const style=initial.style||{};return Object.keys(style).forEach((key=>{canvas.style[key]=style[key]})),canvas.width=canvas.width,delete canvas.$chartjs,!0}addEventListener(chart,type,listener){this.removeEventListener(chart,type);const proxies=chart.$proxies||(chart.$proxies={}),handler={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[type]||createProxyAndListen;proxies[type]=handler(chart,type,listener)}removeEventListener(chart,type){const proxies=chart.$proxies||(chart.$proxies={}),proxy=proxies[type];if(!proxy)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[type]||removeListener)(chart,type,proxy),proxies[type]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(canvas,width,height,aspectRatio){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.G)(canvas,width,height,aspectRatio)}isAttached(canvas){const container=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.I)(canvas);return!(!container||!container.isConnected)}}class Element{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(useFinalPosition){const{x,y}=this.getProps(["x","y"],useFinalPosition);return{x,y}}hasValue(){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.x)(this.x)&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.x)(this.y)}getProps(props,final){const anims=this.$animations;if(!final||!anims)return this;const ret={};return props.forEach((prop=>{ret[prop]=anims[prop]&&anims[prop].active()?anims[prop]._to:this[prop]})),ret}}function autoSkip(scale,ticks){const tickOpts=scale.options.ticks,determinedMaxTicks=function determineMaxTicks(scale){const offset=scale.options.offset,tickLength=scale._tickSize(),maxScale=scale._length/tickLength+(offset?0:1),maxChart=scale._maxLength/tickLength;return Math.floor(Math.min(maxScale,maxChart))}(scale),ticksLimit=Math.min(tickOpts.maxTicksLimit||determinedMaxTicks,determinedMaxTicks),majorIndices=tickOpts.major.enabled?function getMajorIndices(ticks){const result=[];let i,ilen;for(i=0,ilen=ticks.length;i<ilen;i++)ticks[i].major&&result.push(i);return result}(ticks):[],numMajorIndices=majorIndices.length,first=majorIndices[0],last=majorIndices[numMajorIndices-1],newTicks=[];if(numMajorIndices>ticksLimit)return function skipMajors(ticks,newTicks,majorIndices,spacing){let i,count=0,next=majorIndices[0];for(spacing=Math.ceil(spacing),i=0;i<ticks.length;i++)i===next&&(newTicks.push(ticks[i]),count++,next=majorIndices[count*spacing])}(ticks,newTicks,majorIndices,numMajorIndices/ticksLimit),newTicks;const spacing=function calculateSpacing(majorIndices,ticks,ticksLimit){const evenMajorSpacing=function getEvenSpacing(arr){const len=arr.length;let i,diff;if(len<2)return!1;for(diff=arr[0],i=1;i<len;++i)if(arr[i]-arr[i-1]!==diff)return!1;return diff}(majorIndices),spacing=ticks.length/ticksLimit;if(!evenMajorSpacing)return Math.max(spacing,1);const factors=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.N)(evenMajorSpacing);for(let i=0,ilen=factors.length-1;i<ilen;i++){const factor=factors[i];if(factor>spacing)return factor}return Math.max(spacing,1)}(majorIndices,ticks,ticksLimit);if(numMajorIndices>0){let i,ilen;const avgMajorSpacing=numMajorIndices>1?Math.round((last-first)/(numMajorIndices-1)):null;for(skip(ticks,newTicks,spacing,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(avgMajorSpacing)?0:first-avgMajorSpacing,first),i=0,ilen=numMajorIndices-1;i<ilen;i++)skip(ticks,newTicks,spacing,majorIndices[i],majorIndices[i+1]);return skip(ticks,newTicks,spacing,last,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(avgMajorSpacing)?ticks.length:last+avgMajorSpacing),newTicks}return skip(ticks,newTicks,spacing),newTicks}function skip(ticks,newTicks,spacing,majorStart,majorEnd){const start=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(majorStart,0),end=Math.min((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(majorEnd,ticks.length),ticks.length);let length,i,next,count=0;for(spacing=Math.ceil(spacing),majorEnd&&(length=majorEnd-majorStart,spacing=length/Math.floor(length/spacing)),next=start;next<0;)count++,next=Math.round(start+count*spacing);for(i=Math.max(start,0);i<end;i++)i===next&&(newTicks.push(ticks[i]),count++,next=Math.round(start+count*spacing))}const offsetFromEdge=(scale,edge,offset)=>"top"===edge||"left"===edge?scale[edge]+offset:scale[edge]-offset,getTicksLimit=(ticksLength,maxTicksLimit)=>Math.min(maxTicksLimit||ticksLength,ticksLength);function sample(arr,numItems){const result=[],increment=arr.length/numItems,len=arr.length;let i=0;for(;i<len;i+=increment)result.push(arr[Math.floor(i)]);return result}function getPixelForGridLine(scale,index,offsetGridLines){const length=scale.ticks.length,validIndex=Math.min(index,length-1),start=scale._startPixel,end=scale._endPixel;let offset,lineValue=scale.getPixelForTick(validIndex);if(!(offsetGridLines&&(offset=1===length?Math.max(lineValue-start,end-lineValue):0===index?(scale.getPixelForTick(1)-lineValue)/2:(lineValue-scale.getPixelForTick(validIndex-1))/2,lineValue+=validIndex<index?offset:-offset,lineValue<start-1e-6||lineValue>end+1e-6)))return lineValue}function getTickMarkLength(options){return options.drawTicks?options.tickLength:0}function getTitleHeight(options,fallback){if(!options.display)return 0;const font=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(options.font,fallback),padding=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(options.padding);return((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.b)(options.text)?options.text.length:1)*font.lineHeight+padding.height}function titleAlign(align,position,reverse){let ret=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a1)(align);return(reverse&&"right"!==position||!reverse&&"right"===position)&&(ret=(align=>"left"===align?"right":"right"===align?"left":align)(ret)),ret}class Scale extends Element{constructor(cfg){super(),this.id=cfg.id,this.type=cfg.type,this.options=void 0,this.ctx=cfg.ctx,this.chart=cfg.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(options){this.options=options.setContext(this.getContext()),this.axis=options.axis,this._userMin=this.parse(options.min),this._userMax=this.parse(options.max),this._suggestedMin=this.parse(options.suggestedMin),this._suggestedMax=this.parse(options.suggestedMax)}parse(raw,index){return raw}getUserBounds(){let{_userMin,_userMax,_suggestedMin,_suggestedMax}=this;return _userMin=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.O)(_userMin,Number.POSITIVE_INFINITY),_userMax=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.O)(_userMax,Number.NEGATIVE_INFINITY),_suggestedMin=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.O)(_suggestedMin,Number.POSITIVE_INFINITY),_suggestedMax=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.O)(_suggestedMax,Number.NEGATIVE_INFINITY),{min:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.O)(_userMin,_suggestedMin),max:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.O)(_userMax,_suggestedMax),minDefined:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(_userMin),maxDefined:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(_userMax)}}getMinMax(canStack){let range,{min,max,minDefined,maxDefined}=this.getUserBounds();if(minDefined&&maxDefined)return{min,max};const metas=this.getMatchingVisibleMetas();for(let i=0,ilen=metas.length;i<ilen;++i)range=metas[i].controller.getMinMax(this,canStack),minDefined||(min=Math.min(min,range.min)),maxDefined||(max=Math.max(max,range.max));return min=maxDefined&&min>max?max:min,max=minDefined&&min>max?min:max,{min:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.O)(min,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.O)(max,min)),max:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.O)(max,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.O)(min,max))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const data=this.chart.data;return this.options.labels||(this.isHorizontal()?data.xLabels:data.yLabels)||data.labels||[]}getLabelItems(chartArea=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(chartArea))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(this.options.beforeUpdate,[this])}update(maxWidth,maxHeight,margins){const{beginAtZero,grace,ticks:tickOpts}=this.options,sampleSize=tickOpts.sampleSize;this.beforeUpdate(),this.maxWidth=maxWidth,this.maxHeight=maxHeight,this._margins=margins=Object.assign({left:0,right:0,top:0,bottom:0},margins),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+margins.left+margins.right:this.height+margins.top+margins.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.R)(this,grace,beginAtZero),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const samplingEnabled=sampleSize<this.ticks.length;this._convertTicksToLabels(samplingEnabled?sample(this.ticks,sampleSize):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),tickOpts.display&&(tickOpts.autoSkip||"auto"===tickOpts.source)&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),samplingEnabled&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let startPixel,endPixel,reversePixels=this.options.reverse;this.isHorizontal()?(startPixel=this.left,endPixel=this.right):(startPixel=this.top,endPixel=this.bottom,reversePixels=!reversePixels),this._startPixel=startPixel,this._endPixel=endPixel,this._reversePixels=reversePixels,this._length=endPixel-startPixel,this._alignToPixels=this.options.alignToPixels}afterUpdate(){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(this.options.afterUpdate,[this])}beforeSetDimensions(){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(this.options.afterSetDimensions,[this])}_callHooks(name){this.chart.notifyPlugins(name,this.getContext()),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(this.options[name],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(ticks){const tickOpts=this.options.ticks;let i,ilen,tick;for(i=0,ilen=ticks.length;i<ilen;i++)tick=ticks[i],tick.label=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(tickOpts.callback,[tick.value,i,ticks],this)}afterTickToLabelConversion(){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const options=this.options,tickOpts=options.ticks,numTicks=getTicksLimit(this.ticks.length,options.ticks.maxTicksLimit),minRotation=tickOpts.minRotation||0,maxRotation=tickOpts.maxRotation;let tickWidth,maxHeight,maxLabelDiagonal,labelRotation=minRotation;if(!this._isVisible()||!tickOpts.display||minRotation>=maxRotation||numTicks<=1||!this.isHorizontal())return void(this.labelRotation=minRotation);const labelSizes=this._getLabelSizes(),maxLabelWidth=labelSizes.widest.width,maxLabelHeight=labelSizes.highest.height,maxWidth=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)(this.chart.width-maxLabelWidth,0,this.maxWidth);tickWidth=options.offset?this.maxWidth/numTicks:maxWidth/(numTicks-1),maxLabelWidth+6>tickWidth&&(tickWidth=maxWidth/(numTicks-(options.offset?.5:1)),maxHeight=this.maxHeight-getTickMarkLength(options.grid)-tickOpts.padding-getTitleHeight(options.title,this.chart.options.font),maxLabelDiagonal=Math.sqrt(maxLabelWidth*maxLabelWidth+maxLabelHeight*maxLabelHeight),labelRotation=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.U)(Math.min(Math.asin((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)((labelSizes.highest.height+6)/tickWidth,-1,1)),Math.asin((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)(maxHeight/maxLabelDiagonal,-1,1))-Math.asin((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)(maxLabelHeight/maxLabelDiagonal,-1,1)))),labelRotation=Math.max(minRotation,Math.min(maxRotation,labelRotation))),this.labelRotation=labelRotation}afterCalculateLabelRotation(){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(this.options.beforeFit,[this])}fit(){const minSize={width:0,height:0},{chart,options:{ticks:tickOpts,title:titleOpts,grid:gridOpts}}=this,display=this._isVisible(),isHorizontal=this.isHorizontal();if(display){const titleHeight=getTitleHeight(titleOpts,chart.options.font);if(isHorizontal?(minSize.width=this.maxWidth,minSize.height=getTickMarkLength(gridOpts)+titleHeight):(minSize.height=this.maxHeight,minSize.width=getTickMarkLength(gridOpts)+titleHeight),tickOpts.display&&this.ticks.length){const{first,last,widest,highest}=this._getLabelSizes(),tickPadding=2*tickOpts.padding,angleRadians=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.t)(this.labelRotation),cos=Math.cos(angleRadians),sin=Math.sin(angleRadians);if(isHorizontal){const labelHeight=tickOpts.mirror?0:sin*widest.width+cos*highest.height;minSize.height=Math.min(this.maxHeight,minSize.height+labelHeight+tickPadding)}else{const labelWidth=tickOpts.mirror?0:cos*widest.width+sin*highest.height;minSize.width=Math.min(this.maxWidth,minSize.width+labelWidth+tickPadding)}this._calculatePadding(first,last,sin,cos)}}this._handleMargins(),isHorizontal?(this.width=this._length=chart.width-this._margins.left-this._margins.right,this.height=minSize.height):(this.width=minSize.width,this.height=this._length=chart.height-this._margins.top-this._margins.bottom)}_calculatePadding(first,last,sin,cos){const{ticks:{align,padding},position}=this.options,isRotated=0!==this.labelRotation,labelsBelowTicks="top"!==position&&"x"===this.axis;if(this.isHorizontal()){const offsetLeft=this.getPixelForTick(0)-this.left,offsetRight=this.right-this.getPixelForTick(this.ticks.length-1);let paddingLeft=0,paddingRight=0;isRotated?labelsBelowTicks?(paddingLeft=cos*first.width,paddingRight=sin*last.height):(paddingLeft=sin*first.height,paddingRight=cos*last.width):"start"===align?paddingRight=last.width:"end"===align?paddingLeft=first.width:"inner"!==align&&(paddingLeft=first.width/2,paddingRight=last.width/2),this.paddingLeft=Math.max((paddingLeft-offsetLeft+padding)*this.width/(this.width-offsetLeft),0),this.paddingRight=Math.max((paddingRight-offsetRight+padding)*this.width/(this.width-offsetRight),0)}else{let paddingTop=last.height/2,paddingBottom=first.height/2;"start"===align?(paddingTop=0,paddingBottom=first.height):"end"===align&&(paddingTop=last.height,paddingBottom=0),this.paddingTop=paddingTop+padding,this.paddingBottom=paddingBottom+padding}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(this.options.afterFit,[this])}isHorizontal(){const{axis,position}=this.options;return"top"===position||"bottom"===position||"x"===axis}isFullSize(){return this.options.fullSize}_convertTicksToLabels(ticks){let i,ilen;for(this.beforeTickToLabelConversion(),this.generateTickLabels(ticks),i=0,ilen=ticks.length;i<ilen;i++)(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(ticks[i].label)&&(ticks.splice(i,1),ilen--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let labelSizes=this._labelSizes;if(!labelSizes){const sampleSize=this.options.ticks.sampleSize;let ticks=this.ticks;sampleSize<ticks.length&&(ticks=sample(ticks,sampleSize)),this._labelSizes=labelSizes=this._computeLabelSizes(ticks,ticks.length,this.options.ticks.maxTicksLimit)}return labelSizes}_computeLabelSizes(ticks,length,maxTicksLimit){const{ctx,_longestTextCache:caches}=this,widths=[],heights=[],increment=Math.floor(length/getTicksLimit(length,maxTicksLimit));let i,j,jlen,label,tickFont,fontString,cache,lineHeight,width,height,nestedLabel,widestLabelSize=0,highestLabelSize=0;for(i=0;i<length;i+=increment){if(label=ticks[i].label,tickFont=this._resolveTickFontOptions(i),ctx.font=fontString=tickFont.string,cache=caches[fontString]=caches[fontString]||{data:{},gc:[]},lineHeight=tickFont.lineHeight,width=height=0,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(label)||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.b)(label)){if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.b)(label))for(j=0,jlen=label.length;j<jlen;++j)nestedLabel=label[j],(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(nestedLabel)||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.b)(nestedLabel)||(width=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.V)(ctx,cache.data,cache.gc,width,nestedLabel),height+=lineHeight)}else width=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.V)(ctx,cache.data,cache.gc,width,label),height=lineHeight;widths.push(width),heights.push(height),widestLabelSize=Math.max(width,widestLabelSize),highestLabelSize=Math.max(height,highestLabelSize)}!function garbageCollect(caches,length){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(caches,(cache=>{const gc=cache.gc,gcLen=gc.length/2;let i;if(gcLen>length){for(i=0;i<gcLen;++i)delete cache.data[gc[i]];gc.splice(0,gcLen)}}))}(caches,length);const widest=widths.indexOf(widestLabelSize),highest=heights.indexOf(highestLabelSize),valueAt=idx=>({width:widths[idx]||0,height:heights[idx]||0});return{first:valueAt(0),last:valueAt(length-1),widest:valueAt(widest),highest:valueAt(highest),widths,heights}}getLabelForValue(value){return value}getPixelForValue(value,index){return NaN}getValueForPixel(pixel){}getPixelForTick(index){const ticks=this.ticks;return index<0||index>ticks.length-1?null:this.getPixelForValue(ticks[index].value)}getPixelForDecimal(decimal){this._reversePixels&&(decimal=1-decimal);const pixel=this._startPixel+decimal*this._length;return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.W)(this._alignToPixels?(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.X)(this.chart,pixel,0):pixel)}getDecimalForPixel(pixel){const decimal=(pixel-this._startPixel)/this._length;return this._reversePixels?1-decimal:decimal}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min,max}=this;return min<0&&max<0?max:min>0&&max>0?min:0}getContext(index){const ticks=this.ticks||[];if(index>=0&&index<ticks.length){const tick=ticks[index];return tick.$context||(tick.$context=function createTickContext(parent,index,tick){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.j)(parent,{tick,index,type:"tick"})}(this.getContext(),index,tick))}return this.$context||(this.$context=function createScaleContext(parent,scale){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.j)(parent,{scale,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const optionTicks=this.options.ticks,rot=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.t)(this.labelRotation),cos=Math.abs(Math.cos(rot)),sin=Math.abs(Math.sin(rot)),labelSizes=this._getLabelSizes(),padding=optionTicks.autoSkipPadding||0,w=labelSizes?labelSizes.widest.width+padding:0,h=labelSizes?labelSizes.highest.height+padding:0;return this.isHorizontal()?h*cos>w*sin?w/cos:h/sin:h*sin<w*cos?h/cos:w/sin}_isVisible(){const display=this.options.display;return"auto"!==display?!!display:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(chartArea){const axis=this.axis,chart=this.chart,options=this.options,{grid,position,border}=options,offset=grid.offset,isHorizontal=this.isHorizontal(),ticksLength=this.ticks.length+(offset?1:0),tl=getTickMarkLength(grid),items=[],borderOpts=border.setContext(this.getContext()),axisWidth=borderOpts.display?borderOpts.width:0,axisHalfWidth=axisWidth/2,alignBorderValue=function(pixel){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.X)(chart,pixel,axisWidth)};let borderValue,i,lineValue,alignedLineValue,tx1,ty1,tx2,ty2,x1,y1,x2,y2;if("top"===position)borderValue=alignBorderValue(this.bottom),ty1=this.bottom-tl,ty2=borderValue-axisHalfWidth,y1=alignBorderValue(chartArea.top)+axisHalfWidth,y2=chartArea.bottom;else if("bottom"===position)borderValue=alignBorderValue(this.top),y1=chartArea.top,y2=alignBorderValue(chartArea.bottom)-axisHalfWidth,ty1=borderValue+axisHalfWidth,ty2=this.top+tl;else if("left"===position)borderValue=alignBorderValue(this.right),tx1=this.right-tl,tx2=borderValue-axisHalfWidth,x1=alignBorderValue(chartArea.left)+axisHalfWidth,x2=chartArea.right;else if("right"===position)borderValue=alignBorderValue(this.left),x1=chartArea.left,x2=alignBorderValue(chartArea.right)-axisHalfWidth,tx1=borderValue+axisHalfWidth,tx2=this.left+tl;else if("x"===axis){if("center"===position)borderValue=alignBorderValue((chartArea.top+chartArea.bottom)/2+.5);else if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(position)){const positionAxisID=Object.keys(position)[0],value=position[positionAxisID];borderValue=alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value))}y1=chartArea.top,y2=chartArea.bottom,ty1=borderValue+axisHalfWidth,ty2=ty1+tl}else if("y"===axis){if("center"===position)borderValue=alignBorderValue((chartArea.left+chartArea.right)/2);else if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(position)){const positionAxisID=Object.keys(position)[0],value=position[positionAxisID];borderValue=alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value))}tx1=borderValue-axisHalfWidth,tx2=tx1-tl,x1=chartArea.left,x2=chartArea.right}const limit=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(options.ticks.maxTicksLimit,ticksLength),step=Math.max(1,Math.ceil(ticksLength/limit));for(i=0;i<ticksLength;i+=step){const context=this.getContext(i),optsAtIndex=grid.setContext(context),optsAtIndexBorder=border.setContext(context),lineWidth=optsAtIndex.lineWidth,lineColor=optsAtIndex.color,borderDash=optsAtIndexBorder.dash||[],borderDashOffset=optsAtIndexBorder.dashOffset,tickWidth=optsAtIndex.tickWidth,tickColor=optsAtIndex.tickColor,tickBorderDash=optsAtIndex.tickBorderDash||[],tickBorderDashOffset=optsAtIndex.tickBorderDashOffset;lineValue=getPixelForGridLine(this,i,offset),void 0!==lineValue&&(alignedLineValue=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.X)(chart,lineValue,lineWidth),isHorizontal?tx1=tx2=x1=x2=alignedLineValue:ty1=ty2=y1=y2=alignedLineValue,items.push({tx1,ty1,tx2,ty2,x1,y1,x2,y2,width:lineWidth,color:lineColor,borderDash,borderDashOffset,tickWidth,tickColor,tickBorderDash,tickBorderDashOffset}))}return this._ticksLength=ticksLength,this._borderValue=borderValue,items}_computeLabelItems(chartArea){const axis=this.axis,options=this.options,{position,ticks:optionTicks}=options,isHorizontal=this.isHorizontal(),ticks=this.ticks,{align,crossAlign,padding,mirror}=optionTicks,tl=getTickMarkLength(options.grid),tickAndPadding=tl+padding,hTickAndPadding=mirror?-padding:tickAndPadding,rotation=-(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.t)(this.labelRotation),items=[];let i,ilen,tick,label,x,y,textAlign,pixel,font,lineHeight,lineCount,textOffset,textBaseline="middle";if("top"===position)y=this.bottom-hTickAndPadding,textAlign=this._getXAxisLabelAlignment();else if("bottom"===position)y=this.top+hTickAndPadding,textAlign=this._getXAxisLabelAlignment();else if("left"===position){const ret=this._getYAxisLabelAlignment(tl);textAlign=ret.textAlign,x=ret.x}else if("right"===position){const ret=this._getYAxisLabelAlignment(tl);textAlign=ret.textAlign,x=ret.x}else if("x"===axis){if("center"===position)y=(chartArea.top+chartArea.bottom)/2+tickAndPadding;else if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(position)){const positionAxisID=Object.keys(position)[0],value=position[positionAxisID];y=this.chart.scales[positionAxisID].getPixelForValue(value)+tickAndPadding}textAlign=this._getXAxisLabelAlignment()}else if("y"===axis){if("center"===position)x=(chartArea.left+chartArea.right)/2-tickAndPadding;else if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(position)){const positionAxisID=Object.keys(position)[0],value=position[positionAxisID];x=this.chart.scales[positionAxisID].getPixelForValue(value)}textAlign=this._getYAxisLabelAlignment(tl).textAlign}"y"===axis&&("start"===align?textBaseline="top":"end"===align&&(textBaseline="bottom"));const labelSizes=this._getLabelSizes();for(i=0,ilen=ticks.length;i<ilen;++i){tick=ticks[i],label=tick.label;const optsAtIndex=optionTicks.setContext(this.getContext(i));pixel=this.getPixelForTick(i)+optionTicks.labelOffset,font=this._resolveTickFontOptions(i),lineHeight=font.lineHeight,lineCount=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.b)(label)?label.length:1;const halfCount=lineCount/2,color=optsAtIndex.color,strokeColor=optsAtIndex.textStrokeColor,strokeWidth=optsAtIndex.textStrokeWidth;let backdrop,tickTextAlign=textAlign;if(isHorizontal?(x=pixel,"inner"===textAlign&&(tickTextAlign=i===ilen-1?this.options.reverse?"left":"right":0===i?this.options.reverse?"right":"left":"center"),textOffset="top"===position?"near"===crossAlign||0!==rotation?-lineCount*lineHeight+lineHeight/2:"center"===crossAlign?-labelSizes.highest.height/2-halfCount*lineHeight+lineHeight:-labelSizes.highest.height+lineHeight/2:"near"===crossAlign||0!==rotation?lineHeight/2:"center"===crossAlign?labelSizes.highest.height/2-halfCount*lineHeight:labelSizes.highest.height-lineCount*lineHeight,mirror&&(textOffset*=-1),0===rotation||optsAtIndex.showLabelBackdrop||(x+=lineHeight/2*Math.sin(rotation))):(y=pixel,textOffset=(1-lineCount)*lineHeight/2),optsAtIndex.showLabelBackdrop){const labelPadding=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(optsAtIndex.backdropPadding),height=labelSizes.heights[i],width=labelSizes.widths[i];let top=textOffset-labelPadding.top,left=0-labelPadding.left;switch(textBaseline){case"middle":top-=height/2;break;case"bottom":top-=height}switch(textAlign){case"center":left-=width/2;break;case"right":left-=width}backdrop={left,top,width:width+labelPadding.width,height:height+labelPadding.height,color:optsAtIndex.backdropColor}}items.push({label,font,textOffset,options:{rotation,color,strokeColor,strokeWidth,textAlign:tickTextAlign,textBaseline,translation:[x,y],backdrop}})}return items}_getXAxisLabelAlignment(){const{position,ticks}=this.options;if(-(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.t)(this.labelRotation))return"top"===position?"left":"right";let align="center";return"start"===ticks.align?align="left":"end"===ticks.align?align="right":"inner"===ticks.align&&(align="inner"),align}_getYAxisLabelAlignment(tl){const{position,ticks:{crossAlign,mirror,padding}}=this.options,tickAndPadding=tl+padding,widest=this._getLabelSizes().widest.width;let textAlign,x;return"left"===position?mirror?(x=this.right+padding,"near"===crossAlign?textAlign="left":"center"===crossAlign?(textAlign="center",x+=widest/2):(textAlign="right",x+=widest)):(x=this.right-tickAndPadding,"near"===crossAlign?textAlign="right":"center"===crossAlign?(textAlign="center",x-=widest/2):(textAlign="left",x=this.left)):"right"===position?mirror?(x=this.left+padding,"near"===crossAlign?textAlign="right":"center"===crossAlign?(textAlign="center",x-=widest/2):(textAlign="left",x-=widest)):(x=this.left+tickAndPadding,"near"===crossAlign?textAlign="left":"center"===crossAlign?(textAlign="center",x+=widest/2):(textAlign="right",x=this.right)):textAlign="right",{textAlign,x}}_computeLabelArea(){if(this.options.ticks.mirror)return;const chart=this.chart,position=this.options.position;return"left"===position||"right"===position?{top:0,left:this.left,bottom:chart.height,right:this.right}:"top"===position||"bottom"===position?{top:this.top,left:0,bottom:this.bottom,right:chart.width}:void 0}drawBackground(){const{ctx,options:{backgroundColor},left,top,width,height}=this;backgroundColor&&(ctx.save(),ctx.fillStyle=backgroundColor,ctx.fillRect(left,top,width,height),ctx.restore())}getLineWidthForValue(value){const grid=this.options.grid;if(!this._isVisible()||!grid.display)return 0;const index=this.ticks.findIndex((t=>t.value===value));if(index>=0){return grid.setContext(this.getContext(index)).lineWidth}return 0}drawGrid(chartArea){const grid=this.options.grid,ctx=this.ctx,items=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(chartArea));let i,ilen;const drawLine=(p1,p2,style)=>{style.width&&style.color&&(ctx.save(),ctx.lineWidth=style.width,ctx.strokeStyle=style.color,ctx.setLineDash(style.borderDash||[]),ctx.lineDashOffset=style.borderDashOffset,ctx.beginPath(),ctx.moveTo(p1.x,p1.y),ctx.lineTo(p2.x,p2.y),ctx.stroke(),ctx.restore())};if(grid.display)for(i=0,ilen=items.length;i<ilen;++i){const item=items[i];grid.drawOnChartArea&&drawLine({x:item.x1,y:item.y1},{x:item.x2,y:item.y2},item),grid.drawTicks&&drawLine({x:item.tx1,y:item.ty1},{x:item.tx2,y:item.ty2},{color:item.tickColor,width:item.tickWidth,borderDash:item.tickBorderDash,borderDashOffset:item.tickBorderDashOffset})}}drawBorder(){const{chart,ctx,options:{border,grid}}=this,borderOpts=border.setContext(this.getContext()),axisWidth=border.display?borderOpts.width:0;if(!axisWidth)return;const lastLineWidth=grid.setContext(this.getContext(0)).lineWidth,borderValue=this._borderValue;let x1,x2,y1,y2;this.isHorizontal()?(x1=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.X)(chart,this.left,axisWidth)-axisWidth/2,x2=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.X)(chart,this.right,lastLineWidth)+lastLineWidth/2,y1=y2=borderValue):(y1=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.X)(chart,this.top,axisWidth)-axisWidth/2,y2=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.X)(chart,this.bottom,lastLineWidth)+lastLineWidth/2,x1=x2=borderValue),ctx.save(),ctx.lineWidth=borderOpts.width,ctx.strokeStyle=borderOpts.color,ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),ctx.stroke(),ctx.restore()}drawLabels(chartArea){if(!this.options.ticks.display)return;const ctx=this.ctx,area=this._computeLabelArea();area&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Y)(ctx,area);const items=this.getLabelItems(chartArea);for(const item of items){const renderTextOptions=item.options,tickFont=item.font,label=item.label,y=item.textOffset;(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Z)(ctx,label,0,y,tickFont,renderTextOptions)}area&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.$)(ctx)}drawTitle(){const{ctx,options:{position,title,reverse}}=this;if(!title.display)return;const font=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(title.font),padding=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(title.padding),align=title.align;let offset=font.lineHeight/2;"bottom"===position||"center"===position||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(position)?(offset+=padding.bottom,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.b)(title.text)&&(offset+=font.lineHeight*(title.text.length-1))):offset+=padding.top;const{titleX,titleY,maxWidth,rotation}=function titleArgs(scale,offset,position,align){const{top,left,bottom,right,chart}=scale,{chartArea,scales}=chart;let maxWidth,titleX,titleY,rotation=0;const height=bottom-top,width=right-left;if(scale.isHorizontal()){if(titleX=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(align,left,right),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(position)){const positionAxisID=Object.keys(position)[0],value=position[positionAxisID];titleY=scales[positionAxisID].getPixelForValue(value)+height-offset}else titleY="center"===position?(chartArea.bottom+chartArea.top)/2+height-offset:offsetFromEdge(scale,position,offset);maxWidth=right-left}else{if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(position)){const positionAxisID=Object.keys(position)[0],value=position[positionAxisID];titleX=scales[positionAxisID].getPixelForValue(value)-width+offset}else titleX="center"===position?(chartArea.left+chartArea.right)/2-width+offset:offsetFromEdge(scale,position,offset);titleY=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(align,bottom,top),rotation="left"===position?-_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.H:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.H}return{titleX,titleY,maxWidth,rotation}}(this,offset,position,align);(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Z)(ctx,title.text,0,0,font,{color:title.color,maxWidth,rotation,textAlign:titleAlign(align,position,reverse),textBaseline:"middle",translation:[titleX,titleY]})}draw(chartArea){this._isVisible()&&(this.drawBackground(),this.drawGrid(chartArea),this.drawBorder(),this.drawTitle(),this.drawLabels(chartArea))}_layers(){const opts=this.options,tz=opts.ticks&&opts.ticks.z||0,gz=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(opts.grid&&opts.grid.z,-1),bz=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(opts.border&&opts.border.z,0);return this._isVisible()&&this.draw===Scale.prototype.draw?[{z:gz,draw:chartArea=>{this.drawBackground(),this.drawGrid(chartArea),this.drawTitle()}},{z:bz,draw:()=>{this.drawBorder()}},{z:tz,draw:chartArea=>{this.drawLabels(chartArea)}}]:[{z:tz,draw:chartArea=>{this.draw(chartArea)}}]}getMatchingVisibleMetas(type){const metas=this.chart.getSortedVisibleDatasetMetas(),axisID=this.axis+"AxisID",result=[];let i,ilen;for(i=0,ilen=metas.length;i<ilen;++i){const meta=metas[i];meta[axisID]!==this.id||type&&meta.type!==type||result.push(meta)}return result}_resolveTickFontOptions(index){const opts=this.options.ticks.setContext(this.getContext(index));return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(opts.font)}_maxDigits(){const fontSize=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/fontSize}}class TypedRegistry{constructor(type,scope,override){this.type=type,this.scope=scope,this.override=override,this.items=Object.create(null)}isForType(type){return Object.prototype.isPrototypeOf.call(this.type.prototype,type.prototype)}register(item){const proto=Object.getPrototypeOf(item);let parentScope;(function isIChartComponent(proto){return"id"in proto&&"defaults"in proto})(proto)&&(parentScope=this.register(proto));const items=this.items,id=item.id,scope=this.scope+"."+id;if(!id)throw new Error("class does not have id: "+item);return id in items||(items[id]=item,function registerDefaults(item,scope,parentScope){const itemDefaults=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a4)(Object.create(null),[parentScope?_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.get(parentScope):{},_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.get(scope),item.defaults]);_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.set(scope,itemDefaults),item.defaultRoutes&&function routeDefaults(scope,routes){Object.keys(routes).forEach((property=>{const propertyParts=property.split("."),sourceName=propertyParts.pop(),sourceScope=[scope].concat(propertyParts).join("."),parts=routes[property].split("."),targetName=parts.pop(),targetScope=parts.join(".");_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.route(sourceScope,sourceName,targetScope,targetName)}))}(scope,item.defaultRoutes);item.descriptors&&_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.describe(scope,item.descriptors)}(item,scope,parentScope),this.override&&_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.override(item.id,item.overrides)),scope}get(id){return this.items[id]}unregister(item){const items=this.items,id=item.id,scope=this.scope;id in items&&delete items[id],scope&&id in _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d[scope]&&(delete _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d[scope][id],this.override&&delete _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a3[id])}}class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...args){this._each("register",args)}remove(...args){this._each("unregister",args)}addControllers(...args){this._each("register",args,this.controllers)}addElements(...args){this._each("register",args,this.elements)}addPlugins(...args){this._each("register",args,this.plugins)}addScales(...args){this._each("register",args,this.scales)}getController(id){return this._get(id,this.controllers,"controller")}getElement(id){return this._get(id,this.elements,"element")}getPlugin(id){return this._get(id,this.plugins,"plugin")}getScale(id){return this._get(id,this.scales,"scale")}removeControllers(...args){this._each("unregister",args,this.controllers)}removeElements(...args){this._each("unregister",args,this.elements)}removePlugins(...args){this._each("unregister",args,this.plugins)}removeScales(...args){this._each("unregister",args,this.scales)}_each(method,args,typedRegistry){[...args].forEach((arg=>{const reg=typedRegistry||this._getRegistryForType(arg);typedRegistry||reg.isForType(arg)||reg===this.plugins&&arg.id?this._exec(method,reg,arg):(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(arg,(item=>{const itemReg=typedRegistry||this._getRegistryForType(item);this._exec(method,itemReg,item)}))}))}_exec(method,registry,component){const camelMethod=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a5)(method);(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(component["before"+camelMethod],[],component),registry[method](component),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(component["after"+camelMethod],[],component)}_getRegistryForType(type){for(let i=0;i<this._typedRegistries.length;i++){const reg=this._typedRegistries[i];if(reg.isForType(type))return reg}return this.plugins}_get(id,typedRegistry,type){const item=typedRegistry.get(id);if(void 0===item)throw new Error('"'+id+'" is not a registered '+type+".");return item}}var registry=new Registry;class PluginService{constructor(){this._init=[]}notify(chart,hook,args,filter){"beforeInit"===hook&&(this._init=this._createDescriptors(chart,!0),this._notify(this._init,chart,"install"));const descriptors=filter?this._descriptors(chart).filter(filter):this._descriptors(chart),result=this._notify(descriptors,chart,hook,args);return"afterDestroy"===hook&&(this._notify(descriptors,chart,"stop"),this._notify(this._init,chart,"uninstall")),result}_notify(descriptors,chart,hook,args){args=args||{};for(const descriptor of descriptors){const plugin=descriptor.plugin,method=plugin[hook],params=[chart,args,descriptor.options];if(!1===(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(method,params,plugin)&&args.cancelable)return!1}return!0}invalidate(){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(chart){if(this._cache)return this._cache;const descriptors=this._cache=this._createDescriptors(chart);return this._notifyStateChanges(chart),descriptors}_createDescriptors(chart,all){const config=chart&&chart.config,options=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(config.options&&config.options.plugins,{}),plugins=function allPlugins(config){const localIds={},plugins=[],keys=Object.keys(registry.plugins.items);for(let i=0;i<keys.length;i++)plugins.push(registry.getPlugin(keys[i]));const local=config.plugins||[];for(let i=0;i<local.length;i++){const plugin=local[i];-1===plugins.indexOf(plugin)&&(plugins.push(plugin),localIds[plugin.id]=!0)}return{plugins,localIds}}(config);return!1!==options||all?function createDescriptors(chart,{plugins,localIds},options,all){const result=[],context=chart.getContext();for(const plugin of plugins){const id=plugin.id,opts=getOpts(options[id],all);null!==opts&&result.push({plugin,options:pluginOpts(chart.config,{plugin,local:localIds[id]},opts,context)})}return result}(chart,plugins,options,all):[]}_notifyStateChanges(chart){const previousDescriptors=this._oldCache||[],descriptors=this._cache,diff=(a,b)=>a.filter((x=>!b.some((y=>x.plugin.id===y.plugin.id))));this._notify(diff(previousDescriptors,descriptors),chart,"stop"),this._notify(diff(descriptors,previousDescriptors),chart,"start")}}function getOpts(options,all){return all||!1!==options?!0===options?{}:options:null}function pluginOpts(config,{plugin,local},opts,context){const keys=config.pluginScopeKeys(plugin),scopes=config.getOptionScopes(opts,keys);return local&&plugin.defaults&&scopes.push(plugin.defaults),config.createResolver(scopes,context,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(type,options){const datasetDefaults=_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.datasets[type]||{};return((options.datasets||{})[type]||{}).indexAxis||options.indexAxis||datasetDefaults.indexAxis||"x"}function idMatchesAxis(id){if("x"===id||"y"===id||"r"===id)return id}function determineAxis(id,...scaleOptions){if(idMatchesAxis(id))return id;for(const opts of scaleOptions){const axis=opts.axis||("top"===(position=opts.position)||"bottom"===position?"x":"left"===position||"right"===position?"y":void 0)||id.length>1&&idMatchesAxis(id[0].toLowerCase());if(axis)return axis}var position;throw new Error(`Cannot determine type of '${id}' axis. Please provide 'axis' or 'position' option.`)}function getAxisFromDataset(id,axis,dataset){if(dataset[axis+"AxisID"]===id)return{axis}}function mergeScaleConfig(config,options){const chartDefaults=_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a3[config.type]||{scales:{}},configScales=options.scales||{},chartIndexAxis=getIndexAxis(config.type,options),scales=Object.create(null);return Object.keys(configScales).forEach((id=>{const scaleConf=configScales[id];if(!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(scaleConf))return console.error(`Invalid scale configuration for scale: ${id}`);if(scaleConf._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${id}`);const axis=determineAxis(id,scaleConf,function retrieveAxisFromDatasets(id,config){if(config.data&&config.data.datasets){const boundDs=config.data.datasets.filter((d=>d.xAxisID===id||d.yAxisID===id));if(boundDs.length)return getAxisFromDataset(id,"x",boundDs[0])||getAxisFromDataset(id,"y",boundDs[0])}return{}}(id,config),_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.scales[scaleConf.type]),defaultId=function getDefaultScaleIDFromAxis(axis,indexAxis){return axis===indexAxis?"_index_":"_value_"}(axis,chartIndexAxis),defaultScaleOptions=chartDefaults.scales||{};scales[id]=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ab)(Object.create(null),[{axis},scaleConf,defaultScaleOptions[axis],defaultScaleOptions[defaultId]])})),config.data.datasets.forEach((dataset=>{const type=dataset.type||config.type,indexAxis=dataset.indexAxis||getIndexAxis(type,options),defaultScaleOptions=(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a3[type]||{}).scales||{};Object.keys(defaultScaleOptions).forEach((defaultID=>{const axis=function getAxisFromDefaultScaleID(id,indexAxis){let axis=id;return"_index_"===id?axis=indexAxis:"_value_"===id&&(axis="x"===indexAxis?"y":"x"),axis}(defaultID,indexAxis),id=dataset[axis+"AxisID"]||axis;scales[id]=scales[id]||Object.create(null),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ab)(scales[id],[{axis},configScales[id],defaultScaleOptions[defaultID]])}))})),Object.keys(scales).forEach((key=>{const scale=scales[key];(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ab)(scale,[_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.scales[scale.type],_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.scale])})),scales}function initOptions(config){const options=config.options||(config.options={});options.plugins=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(options.plugins,{}),options.scales=mergeScaleConfig(config,options)}function initData(data){return(data=data||{}).datasets=data.datasets||[],data.labels=data.labels||[],data}const keyCache=new Map,keysCached=new Set;function cachedKeys(cacheKey,generate){let keys=keyCache.get(cacheKey);return keys||(keys=generate(),keyCache.set(cacheKey,keys),keysCached.add(keys)),keys}const addIfFound=(set,obj,key)=>{const opts=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.f)(obj,key);void 0!==opts&&set.add(opts)};class Config{constructor(config){this._config=function initConfig(config){return(config=config||{}).data=initData(config.data),initOptions(config),config}(config),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(type){this._config.type=type}get data(){return this._config.data}set data(data){this._config.data=initData(data)}get options(){return this._config.options}set options(options){this._config.options=options}get plugins(){return this._config.plugins}update(){const config=this._config;this.clearCache(),initOptions(config)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(datasetType){return cachedKeys(datasetType,(()=>[[`datasets.${datasetType}`,""]]))}datasetAnimationScopeKeys(datasetType,transition){return cachedKeys(`${datasetType}.transition.${transition}`,(()=>[[`datasets.${datasetType}.transitions.${transition}`,`transitions.${transition}`],[`datasets.${datasetType}`,""]]))}datasetElementScopeKeys(datasetType,elementType){return cachedKeys(`${datasetType}-${elementType}`,(()=>[[`datasets.${datasetType}.elements.${elementType}`,`datasets.${datasetType}`,`elements.${elementType}`,""]]))}pluginScopeKeys(plugin){const id=plugin.id;return cachedKeys(`${this.type}-plugin-${id}`,(()=>[[`plugins.${id}`,...plugin.additionalOptionScopes||[]]]))}_cachedScopes(mainScope,resetCache){const _scopeCache=this._scopeCache;let cache=_scopeCache.get(mainScope);return cache&&!resetCache||(cache=new Map,_scopeCache.set(mainScope,cache)),cache}getOptionScopes(mainScope,keyLists,resetCache){const{options,type}=this,cache=this._cachedScopes(mainScope,resetCache),cached=cache.get(keyLists);if(cached)return cached;const scopes=new Set;keyLists.forEach((keys=>{mainScope&&(scopes.add(mainScope),keys.forEach((key=>addIfFound(scopes,mainScope,key)))),keys.forEach((key=>addIfFound(scopes,options,key))),keys.forEach((key=>addIfFound(scopes,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a3[type]||{},key))),keys.forEach((key=>addIfFound(scopes,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d,key))),keys.forEach((key=>addIfFound(scopes,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a6,key)))}));const array=Array.from(scopes);return 0===array.length&&array.push(Object.create(null)),keysCached.has(keyLists)&&cache.set(keyLists,array),array}chartOptionScopes(){const{options,type}=this;return[options,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a3[type]||{},_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.datasets[type]||{},{type},_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a6]}resolveNamedOptions(scopes,names,context,prefixes=[""]){const result={$shared:!0},{resolver,subPrefixes}=getResolver(this._resolverCache,scopes,prefixes);let options=resolver;if(function needContext(proxy,names){const{isScriptable,isIndexable}=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aa)(proxy);for(const prop of names){const scriptable=isScriptable(prop),indexable=isIndexable(prop),value=(indexable||scriptable)&&proxy[prop];if(scriptable&&((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a7)(value)||hasFunction(value))||indexable&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.b)(value))return!0}return!1}(resolver,names)){result.$shared=!1,context=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a7)(context)?context():context;const subResolver=this.createResolver(scopes,context,subPrefixes);options=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a8)(resolver,context,subResolver)}for(const prop of names)result[prop]=options[prop];return result}createResolver(scopes,context,prefixes=[""],descriptorDefaults){const{resolver}=getResolver(this._resolverCache,scopes,prefixes);return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(context)?(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a8)(resolver,context,void 0,descriptorDefaults):resolver}}function getResolver(resolverCache,scopes,prefixes){let cache=resolverCache.get(scopes);cache||(cache=new Map,resolverCache.set(scopes,cache));const cacheKey=prefixes.join();let cached=cache.get(cacheKey);if(!cached){cached={resolver:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a9)(scopes,prefixes),subPrefixes:prefixes.filter((p=>!p.toLowerCase().includes("hover")))},cache.set(cacheKey,cached)}return cached}const hasFunction=value=>(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(value)&&Object.getOwnPropertyNames(value).reduce(((acc,key)=>acc||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a7)(value[key])),!1);const KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(position,axis){return"top"===position||"bottom"===position||-1===KNOWN_POSITIONS.indexOf(position)&&"x"===axis}function compare2Level(l1,l2){return function(a,b){return a[l1]===b[l1]?a[l2]-b[l2]:a[l1]-b[l1]}}function onAnimationsComplete(context){const chart=context.chart,animationOptions=chart.options.animation;chart.notifyPlugins("afterRender"),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(animationOptions&&animationOptions.onComplete,[context],chart)}function onAnimationProgress(context){const chart=context.chart,animationOptions=chart.options.animation;(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(animationOptions&&animationOptions.onProgress,[context],chart)}function getCanvas(item){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.M)()&&"string"==typeof item?item=document.getElementById(item):item&&item.length&&(item=item[0]),item&&item.canvas&&(item=item.canvas),item}const instances={},getChart=key=>{const canvas=getCanvas(key);return Object.values(instances).filter((c=>c.canvas===canvas)).pop()};function moveNumericKeys(obj,start,move){const keys=Object.keys(obj);for(const key of keys){const intKey=+key;if(intKey>=start){const value=obj[key];delete obj[key],(move>0||intKey>start)&&(obj[intKey+move]=value)}}}function getSizeForArea(scale,chartArea,field){return scale.options.clip?scale[field]:chartArea[field]}class Chart{static defaults=_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d;static instances=instances;static overrides=_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a3;static registry=registry;static version="4.4.0";static getChart=getChart;static register(...items){registry.add(...items),invalidatePlugins()}static unregister(...items){registry.remove(...items),invalidatePlugins()}constructor(item,userConfig){const config=this.config=new Config(userConfig),initialCanvas=getCanvas(item),existingChart=getChart(initialCanvas);if(existingChart)throw new Error("Canvas is already in use. Chart with ID '"+existingChart.id+"' must be destroyed before the canvas with ID '"+existingChart.canvas.id+"' can be reused.");const options=config.createResolver(config.chartOptionScopes(),this.getContext());this.platform=new(config.platform||function _detectPlatform(canvas){return!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.M)()||"undefined"!=typeof OffscreenCanvas&&canvas instanceof OffscreenCanvas?BasicPlatform:DomPlatform}(initialCanvas)),this.platform.updateConfig(config);const context=this.platform.acquireContext(initialCanvas,options.aspectRatio),canvas=context&&context.canvas,height=canvas&&canvas.height,width=canvas&&canvas.width;this.id=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ac)(),this.ctx=context,this.canvas=canvas,this.width=width,this.height=height,this._options=options,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ad)((mode=>this.update(mode)),options.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,context&&canvas?(animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio,maintainAspectRatio},width,height,_aspectRatio}=this;return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(aspectRatio)?maintainAspectRatio&&_aspectRatio?_aspectRatio:height?width/height:null:aspectRatio}get data(){return this.config.data}set data(data){this.config.data=data}get options(){return this._options}set options(options){this.config.options=options}get registry(){return registry}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ae)(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.af)(this.canvas,this.ctx),this}stop(){return animator.stop(this),this}resize(width,height){animator.running(this)?this._resizeBeforeDraw={width,height}:this._resize(width,height)}_resize(width,height){const options=this.options,canvas=this.canvas,aspectRatio=options.maintainAspectRatio&&this.aspectRatio,newSize=this.platform.getMaximumSize(canvas,width,height,aspectRatio),newRatio=options.devicePixelRatio||this.platform.getDevicePixelRatio(),mode=this.width?"resize":"attach";this.width=newSize.width,this.height=newSize.height,this._aspectRatio=this.aspectRatio,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ae)(this,newRatio,!0)&&(this.notifyPlugins("resize",{size:newSize}),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(options.onResize,[this,newSize],this),this.attached&&this._doResize(mode)&&this.render())}ensureScalesHaveIDs(){const scalesOptions=this.options.scales||{};(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(scalesOptions,((axisOptions,axisID)=>{axisOptions.id=axisID}))}buildOrUpdateScales(){const options=this.options,scaleOpts=options.scales,scales=this.scales,updated=Object.keys(scales).reduce(((obj,id)=>(obj[id]=!1,obj)),{});let items=[];scaleOpts&&(items=items.concat(Object.keys(scaleOpts).map((id=>{const scaleOptions=scaleOpts[id],axis=determineAxis(id,scaleOptions),isRadial="r"===axis,isHorizontal="x"===axis;return{options:scaleOptions,dposition:isRadial?"chartArea":isHorizontal?"bottom":"left",dtype:isRadial?"radialLinear":isHorizontal?"category":"linear"}})))),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(items,(item=>{const scaleOptions=item.options,id=scaleOptions.id,axis=determineAxis(id,scaleOptions),scaleType=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(scaleOptions.type,item.dtype);void 0!==scaleOptions.position&&positionIsHorizontal(scaleOptions.position,axis)===positionIsHorizontal(item.dposition)||(scaleOptions.position=item.dposition),updated[id]=!0;let scale=null;if(id in scales&&scales[id].type===scaleType)scale=scales[id];else{scale=new(registry.getScale(scaleType))({id,type:scaleType,ctx:this.ctx,chart:this}),scales[scale.id]=scale}scale.init(scaleOptions,options)})),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(updated,((hasUpdated,id)=>{hasUpdated||delete scales[id]})),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(scales,(scale=>{layouts.configure(this,scale,scale.options),layouts.addBox(this,scale)}))}_updateMetasets(){const metasets=this._metasets,numData=this.data.datasets.length,numMeta=metasets.length;if(metasets.sort(((a,b)=>a.index-b.index)),numMeta>numData){for(let i=numData;i<numMeta;++i)this._destroyDatasetMeta(i);metasets.splice(numData,numMeta-numData)}this._sortedMetasets=metasets.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:metasets,data:{datasets}}=this;metasets.length>datasets.length&&delete this._stacks,metasets.forEach(((meta,index)=>{0===datasets.filter((x=>x===meta._dataset)).length&&this._destroyDatasetMeta(index)}))}buildOrUpdateControllers(){const newControllers=[],datasets=this.data.datasets;let i,ilen;for(this._removeUnreferencedMetasets(),i=0,ilen=datasets.length;i<ilen;i++){const dataset=datasets[i];let meta=this.getDatasetMeta(i);const type=dataset.type||this.config.type;if(meta.type&&meta.type!==type&&(this._destroyDatasetMeta(i),meta=this.getDatasetMeta(i)),meta.type=type,meta.indexAxis=dataset.indexAxis||getIndexAxis(type,this.options),meta.order=dataset.order||0,meta.index=i,meta.label=""+dataset.label,meta.visible=this.isDatasetVisible(i),meta.controller)meta.controller.updateIndex(i),meta.controller.linkScales();else{const ControllerClass=registry.getController(type),{datasetElementType,dataElementType}=_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.datasets[type];Object.assign(ControllerClass,{dataElementType:registry.getElement(dataElementType),datasetElementType:datasetElementType&&registry.getElement(datasetElementType)}),meta.controller=new ControllerClass(this,i),newControllers.push(meta.controller)}}return this._updateMetasets(),newControllers}_resetElements(){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(this.data.datasets,((dataset,datasetIndex)=>{this.getDatasetMeta(datasetIndex).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(mode){const config=this.config;config.update();const options=this._options=config.createResolver(config.chartOptionScopes(),this.getContext()),animsDisabled=this._animationsDisabled=!options.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode,cancelable:!0}))return;const newControllers=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let minPadding=0;for(let i=0,ilen=this.data.datasets.length;i<ilen;i++){const{controller}=this.getDatasetMeta(i),reset=!animsDisabled&&-1===newControllers.indexOf(controller);controller.buildOrUpdateElements(reset),minPadding=Math.max(+controller.getMaxOverflow(),minPadding)}minPadding=this._minPadding=options.layout.autoPadding?minPadding:0,this._updateLayout(minPadding),animsDisabled||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(newControllers,(controller=>{controller.reset()})),this._updateDatasets(mode),this.notifyPlugins("afterUpdate",{mode}),this._layers.sort(compare2Level("z","_idx"));const{_active,_lastEvent}=this;_lastEvent?this._eventHandler(_lastEvent,!0):_active.length&&this._updateHoverStyles(_active,_active,!0),this.render()}_updateScales(){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(this.scales,(scale=>{layouts.removeBox(this,scale)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const options=this.options,existingEvents=new Set(Object.keys(this._listeners)),newEvents=new Set(options.events);(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ag)(existingEvents,newEvents)&&!!this._responsiveListeners===options.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices}=this,changes=this._getUniformDataChanges()||[];for(const{method,start,count}of changes){moveNumericKeys(_hiddenIndices,start,"_removeElements"===method?-count:count)}}_getUniformDataChanges(){const _dataChanges=this._dataChanges;if(!_dataChanges||!_dataChanges.length)return;this._dataChanges=[];const datasetCount=this.data.datasets.length,makeSet=idx=>new Set(_dataChanges.filter((c=>c[0]===idx)).map(((c,i)=>i+","+c.splice(1).join(",")))),changeSet=makeSet(0);for(let i=1;i<datasetCount;i++)if(!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ag)(changeSet,makeSet(i)))return;return Array.from(changeSet).map((c=>c.split(","))).map((a=>({method:a[1],start:+a[2],count:+a[3]})))}_updateLayout(minPadding){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;layouts.update(this,this.width,this.height,minPadding);const area=this.chartArea,noArea=area.width<=0||area.height<=0;this._layers=[],(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(this.boxes,(box=>{noArea&&"chartArea"===box.position||(box.configure&&box.configure(),this._layers.push(...box._layers()))}),this),this._layers.forEach(((item,index)=>{item._idx=index})),this.notifyPlugins("afterLayout")}_updateDatasets(mode){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode,cancelable:!0})){for(let i=0,ilen=this.data.datasets.length;i<ilen;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,ilen=this.data.datasets.length;i<ilen;++i)this._updateDataset(i,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a7)(mode)?mode({datasetIndex:i}):mode);this.notifyPlugins("afterDatasetsUpdate",{mode})}}_updateDataset(index,mode){const meta=this.getDatasetMeta(index),args={meta,index,mode,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",args)&&(meta.controller._update(mode),args.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",args))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let i;if(this._resizeBeforeDraw){const{width,height}=this._resizeBeforeDraw;this._resize(width,height),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const layers=this._layers;for(i=0;i<layers.length&&layers[i].z<=0;++i)layers[i].draw(this.chartArea);for(this._drawDatasets();i<layers.length;++i)layers[i].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(filterVisible){const metasets=this._sortedMetasets,result=[];let i,ilen;for(i=0,ilen=metasets.length;i<ilen;++i){const meta=metasets[i];filterVisible&&!meta.visible||result.push(meta)}return result}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const metasets=this.getSortedVisibleDatasetMetas();for(let i=metasets.length-1;i>=0;--i)this._drawDataset(metasets[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(meta){const ctx=this.ctx,clip=meta._clip,useClip=!clip.disabled,area=function getDatasetArea(meta,chartArea){const{xScale,yScale}=meta;return xScale&&yScale?{left:getSizeForArea(xScale,chartArea,"left"),right:getSizeForArea(xScale,chartArea,"right"),top:getSizeForArea(yScale,chartArea,"top"),bottom:getSizeForArea(yScale,chartArea,"bottom")}:chartArea}(meta,this.chartArea),args={meta,index:meta.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",args)&&(useClip&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Y)(ctx,{left:!1===clip.left?0:area.left-clip.left,right:!1===clip.right?this.width:area.right+clip.right,top:!1===clip.top?0:area.top-clip.top,bottom:!1===clip.bottom?this.height:area.bottom+clip.bottom}),meta.controller.draw(),useClip&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.$)(ctx),args.cancelable=!1,this.notifyPlugins("afterDatasetDraw",args))}isPointInArea(point){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.C)(point,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,mode,options,useFinalPosition){const method=Interaction.modes[mode];return"function"==typeof method?method(this,e,options,useFinalPosition):[]}getDatasetMeta(datasetIndex){const dataset=this.data.datasets[datasetIndex],metasets=this._metasets;let meta=metasets.filter((x=>x&&x._dataset===dataset)).pop();return meta||(meta={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:dataset&&dataset.order||0,index:datasetIndex,_dataset:dataset,_parsed:[],_sorted:!1},metasets.push(meta)),meta}getContext(){return this.$context||(this.$context=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.j)(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(datasetIndex){const dataset=this.data.datasets[datasetIndex];if(!dataset)return!1;const meta=this.getDatasetMeta(datasetIndex);return"boolean"==typeof meta.hidden?!meta.hidden:!dataset.hidden}setDatasetVisibility(datasetIndex,visible){this.getDatasetMeta(datasetIndex).hidden=!visible}toggleDataVisibility(index){this._hiddenIndices[index]=!this._hiddenIndices[index]}getDataVisibility(index){return!this._hiddenIndices[index]}_updateVisibility(datasetIndex,dataIndex,visible){const mode=visible?"show":"hide",meta=this.getDatasetMeta(datasetIndex),anims=meta.controller._resolveAnimations(void 0,mode);(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.h)(dataIndex)?(meta.data[dataIndex].hidden=!visible,this.update()):(this.setDatasetVisibility(datasetIndex,visible),anims.update(meta,{visible}),this.update((ctx=>ctx.datasetIndex===datasetIndex?mode:void 0)))}hide(datasetIndex,dataIndex){this._updateVisibility(datasetIndex,dataIndex,!1)}show(datasetIndex,dataIndex){this._updateVisibility(datasetIndex,dataIndex,!0)}_destroyDatasetMeta(datasetIndex){const meta=this._metasets[datasetIndex];meta&&meta.controller&&meta.controller._destroy(),delete this._metasets[datasetIndex]}_stop(){let i,ilen;for(this.stop(),animator.remove(this),i=0,ilen=this.data.datasets.length;i<ilen;++i)this._destroyDatasetMeta(i)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas,ctx}=this;this._stop(),this.config.clearCache(),canvas&&(this.unbindEvents(),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.af)(canvas,ctx),this.platform.releaseContext(ctx),this.canvas=null,this.ctx=null),delete instances[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...args){return this.canvas.toDataURL(...args)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const listeners=this._listeners,platform=this.platform,_add=(type,listener)=>{platform.addEventListener(this,type,listener),listeners[type]=listener},listener=(e,x,y)=>{e.offsetX=x,e.offsetY=y,this._eventHandler(e)};(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(this.options.events,(type=>_add(type,listener)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const listeners=this._responsiveListeners,platform=this.platform,_add=(type,listener)=>{platform.addEventListener(this,type,listener),listeners[type]=listener},_remove=(type,listener)=>{listeners[type]&&(platform.removeEventListener(this,type,listener),delete listeners[type])},listener=(width,height)=>{this.canvas&&this.resize(width,height)};let detached;const attached=()=>{_remove("attach",attached),this.attached=!0,this.resize(),_add("resize",listener),_add("detach",detached)};detached=()=>{this.attached=!1,_remove("resize",listener),this._stop(),this._resize(0,0),_add("attach",attached)},platform.isAttached(this.canvas)?attached():detached()}unbindEvents(){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(this._listeners,((listener,type)=>{this.platform.removeEventListener(this,type,listener)})),this._listeners={},(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(this._responsiveListeners,((listener,type)=>{this.platform.removeEventListener(this,type,listener)})),this._responsiveListeners=void 0}updateHoverStyle(items,mode,enabled){const prefix=enabled?"set":"remove";let meta,item,i,ilen;for("dataset"===mode&&(meta=this.getDatasetMeta(items[0].datasetIndex),meta.controller["_"+prefix+"DatasetHoverStyle"]()),i=0,ilen=items.length;i<ilen;++i){item=items[i];const controller=item&&this.getDatasetMeta(item.datasetIndex).controller;controller&&controller[prefix+"HoverStyle"](item.element,item.datasetIndex,item.index)}}getActiveElements(){return this._active||[]}setActiveElements(activeElements){const lastActive=this._active||[],active=activeElements.map((({datasetIndex,index})=>{const meta=this.getDatasetMeta(datasetIndex);if(!meta)throw new Error("No dataset found at index "+datasetIndex);return{datasetIndex,element:meta.data[index],index}}));!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ah)(active,lastActive)&&(this._active=active,this._lastEvent=null,this._updateHoverStyles(active,lastActive))}notifyPlugins(hook,args,filter){return this._plugins.notify(this,hook,args,filter)}isPluginEnabled(pluginId){return 1===this._plugins._cache.filter((p=>p.plugin.id===pluginId)).length}_updateHoverStyles(active,lastActive,replay){const hoverOptions=this.options.hover,diff=(a,b)=>a.filter((x=>!b.some((y=>x.datasetIndex===y.datasetIndex&&x.index===y.index)))),deactivated=diff(lastActive,active),activated=replay?active:diff(active,lastActive);deactivated.length&&this.updateHoverStyle(deactivated,hoverOptions.mode,!1),activated.length&&hoverOptions.mode&&this.updateHoverStyle(activated,hoverOptions.mode,!0)}_eventHandler(e,replay){const args={event:e,replay,cancelable:!0,inChartArea:this.isPointInArea(e)},eventFilter=plugin=>(plugin.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",args,eventFilter))return;const changed=this._handleEvent(e,replay,args.inChartArea);return args.cancelable=!1,this.notifyPlugins("afterEvent",args,eventFilter),(changed||args.changed)&&this.render(),this}_handleEvent(e,replay,inChartArea){const{_active:lastActive=[],options}=this,useFinalPosition=replay,active=this._getActiveElements(e,lastActive,inChartArea,useFinalPosition),isClick=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ai)(e),lastEvent=function determineLastEvent(e,lastEvent,inChartArea,isClick){return inChartArea&&"mouseout"!==e.type?isClick?lastEvent:e:null}(e,this._lastEvent,inChartArea,isClick);inChartArea&&(this._lastEvent=null,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(options.onHover,[e,active,this],this),isClick&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(options.onClick,[e,active,this],this));const changed=!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ah)(active,lastActive);return(changed||replay)&&(this._active=active,this._updateHoverStyles(active,lastActive,replay)),this._lastEvent=lastEvent,changed}_getActiveElements(e,lastActive,inChartArea,useFinalPosition){if("mouseout"===e.type)return[];if(!inChartArea)return lastActive;const hoverOptions=this.options.hover;return this.getElementsAtEventForMode(e,hoverOptions.mode,hoverOptions,useFinalPosition)}}function invalidatePlugins(){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(Chart.instances,(chart=>chart._plugins.invalidate()))}function parseBorderRadius$1(arc,innerRadius,outerRadius,angleDelta){const o=function toRadiusCorners(value){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ak)(value,["outerStart","outerEnd","innerStart","innerEnd"])}(arc.options.borderRadius),halfThickness=(outerRadius-innerRadius)/2,innerLimit=Math.min(halfThickness,angleDelta*innerRadius/2),computeOuterLimit=val=>{const outerArcLimit=(outerRadius-Math.min(halfThickness,val))*angleDelta/2;return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)(val,0,Math.min(halfThickness,outerArcLimit))};return{outerStart:computeOuterLimit(o.outerStart),outerEnd:computeOuterLimit(o.outerEnd),innerStart:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)(o.innerStart,0,innerLimit),innerEnd:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)(o.innerEnd,0,innerLimit)}}function rThetaToXY(r,theta,x,y){return{x:x+r*Math.cos(theta),y:y+r*Math.sin(theta)}}function pathArc(ctx,element,offset,spacing,end,circular){const{x,y,startAngle:start,pixelMargin,innerRadius:innerR}=element,outerRadius=Math.max(element.outerRadius+spacing+offset-pixelMargin,0),innerRadius=innerR>0?innerR+spacing+offset+pixelMargin:0;let spacingOffset=0;const alpha=end-start;if(spacing){const avNogSpacingRadius=((innerR>0?innerR-spacing:0)+(outerRadius>0?outerRadius-spacing:0))/2;spacingOffset=(alpha-(0!==avNogSpacingRadius?alpha*avNogSpacingRadius/(avNogSpacingRadius+spacing):alpha))/2}const angleOffset=(alpha-Math.max(.001,alpha*outerRadius-offset/_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.P)/outerRadius)/2,startAngle=start+angleOffset+spacingOffset,endAngle=end-angleOffset-spacingOffset,{outerStart,outerEnd,innerStart,innerEnd}=parseBorderRadius$1(element,innerRadius,outerRadius,endAngle-startAngle),outerStartAdjustedRadius=outerRadius-outerStart,outerEndAdjustedRadius=outerRadius-outerEnd,outerStartAdjustedAngle=startAngle+outerStart/outerStartAdjustedRadius,outerEndAdjustedAngle=endAngle-outerEnd/outerEndAdjustedRadius,innerStartAdjustedRadius=innerRadius+innerStart,innerEndAdjustedRadius=innerRadius+innerEnd,innerStartAdjustedAngle=startAngle+innerStart/innerStartAdjustedRadius,innerEndAdjustedAngle=endAngle-innerEnd/innerEndAdjustedRadius;if(ctx.beginPath(),circular){const outerMidAdjustedAngle=(outerStartAdjustedAngle+outerEndAdjustedAngle)/2;if(ctx.arc(x,y,outerRadius,outerStartAdjustedAngle,outerMidAdjustedAngle),ctx.arc(x,y,outerRadius,outerMidAdjustedAngle,outerEndAdjustedAngle),outerEnd>0){const pCenter=rThetaToXY(outerEndAdjustedRadius,outerEndAdjustedAngle,x,y);ctx.arc(pCenter.x,pCenter.y,outerEnd,outerEndAdjustedAngle,endAngle+_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.H)}const p4=rThetaToXY(innerEndAdjustedRadius,endAngle,x,y);if(ctx.lineTo(p4.x,p4.y),innerEnd>0){const pCenter=rThetaToXY(innerEndAdjustedRadius,innerEndAdjustedAngle,x,y);ctx.arc(pCenter.x,pCenter.y,innerEnd,endAngle+_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.H,innerEndAdjustedAngle+Math.PI)}const innerMidAdjustedAngle=(endAngle-innerEnd/innerRadius+(startAngle+innerStart/innerRadius))/2;if(ctx.arc(x,y,innerRadius,endAngle-innerEnd/innerRadius,innerMidAdjustedAngle,!0),ctx.arc(x,y,innerRadius,innerMidAdjustedAngle,startAngle+innerStart/innerRadius,!0),innerStart>0){const pCenter=rThetaToXY(innerStartAdjustedRadius,innerStartAdjustedAngle,x,y);ctx.arc(pCenter.x,pCenter.y,innerStart,innerStartAdjustedAngle+Math.PI,startAngle-_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.H)}const p8=rThetaToXY(outerStartAdjustedRadius,startAngle,x,y);if(ctx.lineTo(p8.x,p8.y),outerStart>0){const pCenter=rThetaToXY(outerStartAdjustedRadius,outerStartAdjustedAngle,x,y);ctx.arc(pCenter.x,pCenter.y,outerStart,startAngle-_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.H,outerStartAdjustedAngle)}}else{ctx.moveTo(x,y);const outerStartX=Math.cos(outerStartAdjustedAngle)*outerRadius+x,outerStartY=Math.sin(outerStartAdjustedAngle)*outerRadius+y;ctx.lineTo(outerStartX,outerStartY);const outerEndX=Math.cos(outerEndAdjustedAngle)*outerRadius+x,outerEndY=Math.sin(outerEndAdjustedAngle)*outerRadius+y;ctx.lineTo(outerEndX,outerEndY)}ctx.closePath()}function drawBorder(ctx,element,offset,spacing,circular){const{fullCircles,startAngle,circumference,options}=element,{borderWidth,borderJoinStyle,borderDash,borderDashOffset}=options,inner="inner"===options.borderAlign;if(!borderWidth)return;ctx.setLineDash(borderDash||[]),ctx.lineDashOffset=borderDashOffset,inner?(ctx.lineWidth=2*borderWidth,ctx.lineJoin=borderJoinStyle||"round"):(ctx.lineWidth=borderWidth,ctx.lineJoin=borderJoinStyle||"bevel");let endAngle=element.endAngle;if(fullCircles){pathArc(ctx,element,offset,spacing,endAngle,circular);for(let i=0;i<fullCircles;++i)ctx.stroke();isNaN(circumference)||(endAngle=startAngle+(circumference%_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T||_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T))}inner&&function clipArc(ctx,element,endAngle){const{startAngle,pixelMargin,x,y,outerRadius,innerRadius}=element;let angleMargin=pixelMargin/outerRadius;ctx.beginPath(),ctx.arc(x,y,outerRadius,startAngle-angleMargin,endAngle+angleMargin),innerRadius>pixelMargin?(angleMargin=pixelMargin/innerRadius,ctx.arc(x,y,innerRadius,endAngle+angleMargin,startAngle-angleMargin,!0)):ctx.arc(x,y,pixelMargin,endAngle+_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.H,startAngle-_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.H),ctx.closePath(),ctx.clip()}(ctx,element,endAngle),fullCircles||(pathArc(ctx,element,offset,spacing,endAngle,circular),ctx.stroke())}class ArcElement extends Element{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:name=>"borderDash"!==name};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(cfg){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,cfg&&Object.assign(this,cfg)}inRange(chartX,chartY,useFinalPosition){const point=this.getProps(["x","y"],useFinalPosition),{angle,distance}=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.D)(point,{x:chartX,y:chartY}),{startAngle,endAngle,innerRadius,outerRadius,circumference}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],useFinalPosition),rAdjust=(this.options.spacing+this.options.borderWidth)/2,betweenAngles=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(circumference,endAngle-startAngle)>=_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.p)(angle,startAngle,endAngle),withinRadius=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aj)(distance,innerRadius+rAdjust,outerRadius+rAdjust);return betweenAngles&&withinRadius}getCenterPoint(useFinalPosition){const{x,y,startAngle,endAngle,innerRadius,outerRadius}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],useFinalPosition),{offset,spacing}=this.options,halfAngle=(startAngle+endAngle)/2,halfRadius=(innerRadius+outerRadius+spacing+offset)/2;return{x:x+Math.cos(halfAngle)*halfRadius,y:y+Math.sin(halfAngle)*halfRadius}}tooltipPosition(useFinalPosition){return this.getCenterPoint(useFinalPosition)}draw(ctx){const{options,circumference}=this,offset=(options.offset||0)/4,spacing=(options.spacing||0)/2,circular=options.circular;if(this.pixelMargin="inner"===options.borderAlign?.33:0,this.fullCircles=circumference>_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T?Math.floor(circumference/_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T):0,0===circumference||this.innerRadius<0||this.outerRadius<0)return;ctx.save();const halfAngle=(this.startAngle+this.endAngle)/2;ctx.translate(Math.cos(halfAngle)*offset,Math.sin(halfAngle)*offset);const radiusOffset=offset*(1-Math.sin(Math.min(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.P,circumference||0)));ctx.fillStyle=options.backgroundColor,ctx.strokeStyle=options.borderColor,function drawArc(ctx,element,offset,spacing,circular){const{fullCircles,startAngle,circumference}=element;let endAngle=element.endAngle;if(fullCircles){pathArc(ctx,element,offset,spacing,endAngle,circular);for(let i=0;i<fullCircles;++i)ctx.fill();isNaN(circumference)||(endAngle=startAngle+(circumference%_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T||_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T))}return pathArc(ctx,element,offset,spacing,endAngle,circular),ctx.fill(),endAngle}(ctx,this,radiusOffset,spacing,circular),drawBorder(ctx,this,radiusOffset,spacing,circular),ctx.restore()}}function setStyle(ctx,options,style=options){ctx.lineCap=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(style.borderCapStyle,options.borderCapStyle),ctx.setLineDash((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(style.borderDash,options.borderDash)),ctx.lineDashOffset=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(style.borderDashOffset,options.borderDashOffset),ctx.lineJoin=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(style.borderJoinStyle,options.borderJoinStyle),ctx.lineWidth=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(style.borderWidth,options.borderWidth),ctx.strokeStyle=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(style.borderColor,options.borderColor)}function lineTo(ctx,previous,target){ctx.lineTo(target.x,target.y)}function pathVars(points,segment,params={}){const count=points.length,{start:paramsStart=0,end:paramsEnd=count-1}=params,{start:segmentStart,end:segmentEnd}=segment,start=Math.max(paramsStart,segmentStart),end=Math.min(paramsEnd,segmentEnd),outside=paramsStart<segmentStart&&paramsEnd<segmentStart||paramsStart>segmentEnd&&paramsEnd>segmentEnd;return{count,start,loop:segment.loop,ilen:end<start&&!outside?count+end-start:end-start}}function pathSegment(ctx,line,segment,params){const{points,options}=line,{count,start,loop,ilen}=pathVars(points,segment,params),lineMethod=function getLineMethod(options){return options.stepped?_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ar:options.tension||"monotone"===options.cubicInterpolationMode?_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.as:lineTo}(options);let i,point,prev,{move=!0,reverse}=params||{};for(i=0;i<=ilen;++i)point=points[(start+(reverse?ilen-i:i))%count],point.skip||(move?(ctx.moveTo(point.x,point.y),move=!1):lineMethod(ctx,prev,point,reverse,options.stepped),prev=point);return loop&&(point=points[(start+(reverse?ilen:0))%count],lineMethod(ctx,prev,point,reverse,options.stepped)),!!loop}function fastPathSegment(ctx,line,segment,params){const points=line.points,{count,start,ilen}=pathVars(points,segment,params),{move=!0,reverse}=params||{};let i,point,prevX,minY,maxY,lastY,avgX=0,countX=0;const pointIndex=index=>(start+(reverse?ilen-index:index))%count,drawX=()=>{minY!==maxY&&(ctx.lineTo(avgX,maxY),ctx.lineTo(avgX,minY),ctx.lineTo(avgX,lastY))};for(move&&(point=points[pointIndex(0)],ctx.moveTo(point.x,point.y)),i=0;i<=ilen;++i){if(point=points[pointIndex(i)],point.skip)continue;const x=point.x,y=point.y,truncX=0|x;truncX===prevX?(y<minY?minY=y:y>maxY&&(maxY=y),avgX=(countX*avgX+x)/++countX):(drawX(),ctx.lineTo(x,y),prevX=truncX,countX=0,minY=maxY=y),lastY=y}drawX()}function _getSegmentMethod(line){const opts=line.options,borderDash=opts.borderDash&&opts.borderDash.length;return!(line._decimated||line._loop||opts.tension||"monotone"===opts.cubicInterpolationMode||opts.stepped||borderDash)?fastPathSegment:pathSegment}const usePath2D="function"==typeof Path2D;function draw(ctx,line,start,count){usePath2D&&!line.options.segment?function strokePathWithCache(ctx,line,start,count){let path=line._path;path||(path=line._path=new Path2D,line.path(path,start,count)&&path.closePath()),setStyle(ctx,line.options),ctx.stroke(path)}(ctx,line,start,count):function strokePathDirect(ctx,line,start,count){const{segments,options}=line,segmentMethod=_getSegmentMethod(line);for(const segment of segments)setStyle(ctx,options,segment.style),ctx.beginPath(),segmentMethod(ctx,line,segment,{start,end:start+count-1})&&ctx.closePath(),ctx.stroke()}(ctx,line,start,count)}class LineElement extends Element{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:name=>"borderDash"!==name&&"fill"!==name};constructor(cfg){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,cfg&&Object.assign(this,cfg)}updateControlPoints(chartArea,indexAxis){const options=this.options;if((options.tension||"monotone"===options.cubicInterpolationMode)&&!options.stepped&&!this._pointsUpdated){const loop=options.spanGaps?this._loop:this._fullLoop;(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.al)(this._points,options,chartArea,loop,indexAxis),this._pointsUpdated=!0}}set points(points){this._points=points,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.am)(this,this.options.segment))}first(){const segments=this.segments,points=this.points;return segments.length&&points[segments[0].start]}last(){const segments=this.segments,points=this.points,count=segments.length;return count&&points[segments[count-1].end]}interpolate(point,property){const options=this.options,value=point[property],points=this.points,segments=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.an)(this,{property,start:value,end:value});if(!segments.length)return;const result=[],_interpolate=function _getInterpolationMethod(options){return options.stepped?_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ao:options.tension||"monotone"===options.cubicInterpolationMode?_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ap:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aq}(options);let i,ilen;for(i=0,ilen=segments.length;i<ilen;++i){const{start,end}=segments[i],p1=points[start],p2=points[end];if(p1===p2){result.push(p1);continue}const interpolated=_interpolate(p1,p2,Math.abs((value-p1[property])/(p2[property]-p1[property])),options.stepped);interpolated[property]=point[property],result.push(interpolated)}return 1===result.length?result[0]:result}pathSegment(ctx,segment,params){return _getSegmentMethod(this)(ctx,this,segment,params)}path(ctx,start,count){const segments=this.segments,segmentMethod=_getSegmentMethod(this);let loop=this._loop;start=start||0,count=count||this.points.length-start;for(const segment of segments)loop&=segmentMethod(ctx,this,segment,{start,end:start+count-1});return!!loop}draw(ctx,chartArea,start,count){const options=this.options||{};(this.points||[]).length&&options.borderWidth&&(ctx.save(),draw(ctx,this,start,count),ctx.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function inRange$1(el,pos,axis,useFinalPosition){const options=el.options,{[axis]:value}=el.getProps([axis],useFinalPosition);return Math.abs(pos-value)<options.radius+options.hitRadius}class PointElement extends Element{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(cfg){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,cfg&&Object.assign(this,cfg)}inRange(mouseX,mouseY,useFinalPosition){const options=this.options,{x,y}=this.getProps(["x","y"],useFinalPosition);return Math.pow(mouseX-x,2)+Math.pow(mouseY-y,2)<Math.pow(options.hitRadius+options.radius,2)}inXRange(mouseX,useFinalPosition){return inRange$1(this,mouseX,"x",useFinalPosition)}inYRange(mouseY,useFinalPosition){return inRange$1(this,mouseY,"y",useFinalPosition)}getCenterPoint(useFinalPosition){const{x,y}=this.getProps(["x","y"],useFinalPosition);return{x,y}}size(options){let radius=(options=options||this.options||{}).radius||0;radius=Math.max(radius,radius&&options.hoverRadius||0);return 2*(radius+(radius&&options.borderWidth||0))}draw(ctx,area){const options=this.options;this.skip||options.radius<.1||!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.C)(this,area,this.size(options)/2)||(ctx.strokeStyle=options.borderColor,ctx.lineWidth=options.borderWidth,ctx.fillStyle=options.backgroundColor,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.at)(ctx,options,this.x,this.y))}getRange(){const options=this.options||{};return options.radius+options.hitRadius}}function getBarBounds(bar,useFinalPosition){const{x,y,base,width,height}=bar.getProps(["x","y","base","width","height"],useFinalPosition);let left,right,top,bottom,half;return bar.horizontal?(half=height/2,left=Math.min(x,base),right=Math.max(x,base),top=y-half,bottom=y+half):(half=width/2,left=x-half,right=x+half,top=Math.min(y,base),bottom=Math.max(y,base)),{left,top,right,bottom}}function skipOrLimit(skip,value,min,max){return skip?0:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)(value,min,max)}function boundingRects(bar){const bounds=getBarBounds(bar),width=bounds.right-bounds.left,height=bounds.bottom-bounds.top,border=function parseBorderWidth(bar,maxW,maxH){const value=bar.options.borderWidth,skip=bar.borderSkipped,o=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.av)(value);return{t:skipOrLimit(skip.top,o.top,0,maxH),r:skipOrLimit(skip.right,o.right,0,maxW),b:skipOrLimit(skip.bottom,o.bottom,0,maxH),l:skipOrLimit(skip.left,o.left,0,maxW)}}(bar,width/2,height/2),radius=function parseBorderRadius(bar,maxW,maxH){const{enableBorderRadius}=bar.getProps(["enableBorderRadius"]),value=bar.options.borderRadius,o=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aw)(value),maxR=Math.min(maxW,maxH),skip=bar.borderSkipped,enableBorder=enableBorderRadius||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(value);return{topLeft:skipOrLimit(!enableBorder||skip.top||skip.left,o.topLeft,0,maxR),topRight:skipOrLimit(!enableBorder||skip.top||skip.right,o.topRight,0,maxR),bottomLeft:skipOrLimit(!enableBorder||skip.bottom||skip.left,o.bottomLeft,0,maxR),bottomRight:skipOrLimit(!enableBorder||skip.bottom||skip.right,o.bottomRight,0,maxR)}}(bar,width/2,height/2);return{outer:{x:bounds.left,y:bounds.top,w:width,h:height,radius},inner:{x:bounds.left+border.l,y:bounds.top+border.t,w:width-border.l-border.r,h:height-border.t-border.b,radius:{topLeft:Math.max(0,radius.topLeft-Math.max(border.t,border.l)),topRight:Math.max(0,radius.topRight-Math.max(border.t,border.r)),bottomLeft:Math.max(0,radius.bottomLeft-Math.max(border.b,border.l)),bottomRight:Math.max(0,radius.bottomRight-Math.max(border.b,border.r))}}}}function inRange(bar,x,y,useFinalPosition){const skipX=null===x,skipY=null===y,bounds=bar&&!(skipX&&skipY)&&getBarBounds(bar,useFinalPosition);return bounds&&(skipX||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aj)(x,bounds.left,bounds.right))&&(skipY||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aj)(y,bounds.top,bounds.bottom))}function addNormalRectPath(ctx,rect){ctx.rect(rect.x,rect.y,rect.w,rect.h)}function inflateRect(rect,amount,refRect={}){const x=rect.x!==refRect.x?-amount:0,y=rect.y!==refRect.y?-amount:0,w=(rect.x+rect.w!==refRect.x+refRect.w?amount:0)-x,h=(rect.y+rect.h!==refRect.y+refRect.h?amount:0)-y;return{x:rect.x+x,y:rect.y+y,w:rect.w+w,h:rect.h+h,radius:rect.radius}}class BarElement extends Element{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(cfg){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,cfg&&Object.assign(this,cfg)}draw(ctx){const{inflateAmount,options:{borderColor,backgroundColor}}=this,{inner,outer}=boundingRects(this),addRectPath=function hasRadius(radius){return radius.topLeft||radius.topRight||radius.bottomLeft||radius.bottomRight}(outer.radius)?_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.au:addNormalRectPath;ctx.save(),outer.w===inner.w&&outer.h===inner.h||(ctx.beginPath(),addRectPath(ctx,inflateRect(outer,inflateAmount,inner)),ctx.clip(),addRectPath(ctx,inflateRect(inner,-inflateAmount,outer)),ctx.fillStyle=borderColor,ctx.fill("evenodd")),ctx.beginPath(),addRectPath(ctx,inflateRect(inner,inflateAmount)),ctx.fillStyle=backgroundColor,ctx.fill(),ctx.restore()}inRange(mouseX,mouseY,useFinalPosition){return inRange(this,mouseX,mouseY,useFinalPosition)}inXRange(mouseX,useFinalPosition){return inRange(this,mouseX,null,useFinalPosition)}inYRange(mouseY,useFinalPosition){return inRange(this,null,mouseY,useFinalPosition)}getCenterPoint(useFinalPosition){const{x,y,base,horizontal}=this.getProps(["x","y","base","horizontal"],useFinalPosition);return{x:horizontal?(x+base)/2:x,y:horizontal?y:(y+base)/2}}getRange(axis){return"x"===axis?this.width/2:this.height/2}}var elements=Object.freeze({__proto__:null,ArcElement,BarElement,LineElement,PointElement});const BORDER_COLORS=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],BACKGROUND_COLORS=BORDER_COLORS.map((color=>color.replace("rgb(","rgba(").replace(")",", 0.5)")));function getBorderColor(i){return BORDER_COLORS[i%BORDER_COLORS.length]}function getBackgroundColor(i){return BACKGROUND_COLORS[i%BACKGROUND_COLORS.length]}function getColorizer(chart){let i=0;return(dataset,datasetIndex)=>{const controller=chart.getDatasetMeta(datasetIndex).controller;controller instanceof DoughnutController?i=function colorizeDoughnutDataset(dataset,i){return dataset.backgroundColor=dataset.data.map((()=>getBorderColor(i++))),i}(dataset,i):controller instanceof PolarAreaController?i=function colorizePolarAreaDataset(dataset,i){return dataset.backgroundColor=dataset.data.map((()=>getBackgroundColor(i++))),i}(dataset,i):controller&&(i=function colorizeDefaultDataset(dataset,i){return dataset.borderColor=getBorderColor(i),dataset.backgroundColor=getBackgroundColor(i),++i}(dataset,i))}}function containsColorsDefinitions(descriptors){let k;for(k in descriptors)if(descriptors[k].borderColor||descriptors[k].backgroundColor)return!0;return!1}var plugin_colors={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(chart,_args,options){if(!options.enabled)return;const{data:{datasets},options:chartOptions}=chart.config,{elements}=chartOptions;if(!options.forceOverride&&(containsColorsDefinitions(datasets)||function containsColorsDefinition(descriptor){return descriptor&&(descriptor.borderColor||descriptor.backgroundColor)}(chartOptions)||elements&&containsColorsDefinitions(elements)))return;const colorizer=getColorizer(chart);datasets.forEach(colorizer)}};function cleanDecimatedDataset(dataset){if(dataset._decimated){const data=dataset._data;delete dataset._decimated,delete dataset._data,Object.defineProperty(dataset,"data",{configurable:!0,enumerable:!0,writable:!0,value:data})}}function cleanDecimatedData(chart){chart.data.datasets.forEach((dataset=>{cleanDecimatedDataset(dataset)}))}var plugin_decimation={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(chart,args,options)=>{if(!options.enabled)return void cleanDecimatedData(chart);const availableWidth=chart.width;chart.data.datasets.forEach(((dataset,datasetIndex)=>{const{_data,indexAxis}=dataset,meta=chart.getDatasetMeta(datasetIndex),data=_data||dataset.data;if("y"===(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a)([indexAxis,chart.options.indexAxis]))return;if(!meta.controller.supportsDecimation)return;const xAxis=chart.scales[meta.xAxisID];if("linear"!==xAxis.type&&"time"!==xAxis.type)return;if(chart.options.parsing)return;let{start,count}=function getStartAndCountOfVisiblePointsSimplified(meta,points){const pointCount=points.length;let count,start=0;const{iScale}=meta,{min,max,minDefined,maxDefined}=iScale.getUserBounds();return minDefined&&(start=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.B)(points,iScale.axis,min).lo,0,pointCount-1)),count=maxDefined?(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.B)(points,iScale.axis,max).hi+1,start,pointCount)-start:pointCount-start,{start,count}}(meta,data);if(count<=(options.threshold||4*availableWidth))return void cleanDecimatedDataset(dataset);let decimated;switch((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(_data)&&(dataset._data=data,delete dataset.data,Object.defineProperty(dataset,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(d){this._data=d}})),options.algorithm){case"lttb":decimated=function lttbDecimation(data,start,count,availableWidth,options){const samples=options.samples||availableWidth;if(samples>=count)return data.slice(start,start+count);const decimated=[],bucketWidth=(count-2)/(samples-2);let sampledIndex=0;const endIndex=start+count-1;let i,maxAreaPoint,maxArea,area,nextA,a=start;for(decimated[sampledIndex++]=data[a],i=0;i<samples-2;i++){let j,avgX=0,avgY=0;const avgRangeStart=Math.floor((i+1)*bucketWidth)+1+start,avgRangeEnd=Math.min(Math.floor((i+2)*bucketWidth)+1,count)+start,avgRangeLength=avgRangeEnd-avgRangeStart;for(j=avgRangeStart;j<avgRangeEnd;j++)avgX+=data[j].x,avgY+=data[j].y;avgX/=avgRangeLength,avgY/=avgRangeLength;const rangeOffs=Math.floor(i*bucketWidth)+1+start,rangeTo=Math.min(Math.floor((i+1)*bucketWidth)+1,count)+start,{x:pointAx,y:pointAy}=data[a];for(maxArea=area=-1,j=rangeOffs;j<rangeTo;j++)area=.5*Math.abs((pointAx-avgX)*(data[j].y-pointAy)-(pointAx-data[j].x)*(avgY-pointAy)),area>maxArea&&(maxArea=area,maxAreaPoint=data[j],nextA=j);decimated[sampledIndex++]=maxAreaPoint,a=nextA}return decimated[sampledIndex++]=data[endIndex],decimated}(data,start,count,availableWidth,options);break;case"min-max":decimated=function minMaxDecimation(data,start,count,availableWidth){let i,point,x,y,prevX,minIndex,maxIndex,startIndex,minY,maxY,avgX=0,countX=0;const decimated=[],endIndex=start+count-1,xMin=data[start].x,dx=data[endIndex].x-xMin;for(i=start;i<start+count;++i){point=data[i],x=(point.x-xMin)/dx*availableWidth,y=point.y;const truncX=0|x;if(truncX===prevX)y<minY?(minY=y,minIndex=i):y>maxY&&(maxY=y,maxIndex=i),avgX=(countX*avgX+point.x)/++countX;else{const lastIndex=i-1;if(!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(minIndex)&&!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(maxIndex)){const intermediateIndex1=Math.min(minIndex,maxIndex),intermediateIndex2=Math.max(minIndex,maxIndex);intermediateIndex1!==startIndex&&intermediateIndex1!==lastIndex&&decimated.push({...data[intermediateIndex1],x:avgX}),intermediateIndex2!==startIndex&&intermediateIndex2!==lastIndex&&decimated.push({...data[intermediateIndex2],x:avgX})}i>0&&lastIndex!==startIndex&&decimated.push(data[lastIndex]),decimated.push(point),prevX=truncX,countX=0,minY=maxY=y,minIndex=maxIndex=startIndex=i}}return decimated}(data,start,count,availableWidth);break;default:throw new Error(`Unsupported decimation algorithm '${options.algorithm}'`)}dataset._decimated=decimated}))},destroy(chart){cleanDecimatedData(chart)}};function _getBounds(property,first,last,loop){if(loop)return;let start=first[property],end=last[property];return"angle"===property&&(start=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ay)(start),end=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ay)(end)),{property,start,end}}function _findSegmentEnd(start,end,points){for(;end>start;end--){const point=points[end];if(!isNaN(point.x)&&!isNaN(point.y))break}return end}function _getEdge(a,b,prop,fn){return a&&b?fn(a[prop],b[prop]):a?a[prop]:b?b[prop]:0}function _createBoundaryLine(boundary,line){let points=[],_loop=!1;return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.b)(boundary)?(_loop=!0,points=boundary):points=function _pointsFromSegments(boundary,line){const{x=null,y=null}=boundary||{},linePoints=line.points,points=[];return line.segments.forEach((({start,end})=>{end=_findSegmentEnd(start,end,linePoints);const first=linePoints[start],last=linePoints[end];null!==y?(points.push({x:first.x,y}),points.push({x:last.x,y})):null!==x&&(points.push({x,y:first.y}),points.push({x,y:last.y}))})),points}(boundary,line),points.length?new LineElement({points,options:{tension:0},_loop,_fullLoop:_loop}):null}function _shouldApplyFill(source){return source&&!1!==source.fill}function _resolveTarget(sources,index,propagate){let fill=sources[index].fill;const visited=[index];let target;if(!propagate)return fill;for(;!1!==fill&&-1===visited.indexOf(fill);){if(!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(fill))return fill;if(target=sources[fill],!target)return!1;if(target.visible)return fill;visited.push(fill),fill=target.fill}return!1}function _decodeFill(line,index,count){const fill=function parseFillOption(line){const options=line.options,fillOption=options.fill;let fill=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(fillOption&&fillOption.target,fillOption);void 0===fill&&(fill=!!options.backgroundColor);if(!1===fill||null===fill)return!1;if(!0===fill)return"origin";return fill}(line);if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(fill))return!isNaN(fill.value)&&fill;let target=parseFloat(fill);return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(target)&&Math.floor(target)===target?function decodeTargetIndex(firstCh,index,target,count){"-"!==firstCh&&"+"!==firstCh||(target=index+target);if(target===index||target<0||target>=count)return!1;return target}(fill[0],index,target,count):["origin","start","end","stack","shape"].indexOf(fill)>=0&&fill}function addPointsBelow(points,sourcePoint,linesBelow){const postponed=[];for(let j=0;j<linesBelow.length;j++){const line=linesBelow[j],{first,last,point}=findPoint(line,sourcePoint,"x");if(!(!point||first&&last))if(first)postponed.unshift(point);else if(points.push(point),!last)break}points.push(...postponed)}function findPoint(line,sourcePoint,property){const point=line.interpolate(sourcePoint,property);if(!point)return{};const pointValue=point[property],segments=line.segments,linePoints=line.points;let first=!1,last=!1;for(let i=0;i<segments.length;i++){const segment=segments[i],firstValue=linePoints[segment.start][property],lastValue=linePoints[segment.end][property];if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aj)(pointValue,firstValue,lastValue)){first=pointValue===firstValue,last=pointValue===lastValue;break}}return{first,last,point}}class simpleArc{constructor(opts){this.x=opts.x,this.y=opts.y,this.radius=opts.radius}pathSegment(ctx,bounds,opts){const{x,y,radius}=this;return bounds=bounds||{start:0,end:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T},ctx.arc(x,y,radius,bounds.end,bounds.start,!0),!opts.bounds}interpolate(point){const{x,y,radius}=this,angle=point.angle;return{x:x+Math.cos(angle)*radius,y:y+Math.sin(angle)*radius,angle}}}function _getTarget(source){const{chart,fill,line}=source;if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(fill))return function getLineByIndex(chart,index){const meta=chart.getDatasetMeta(index),visible=meta&&chart.isDatasetVisible(index);return visible?meta.dataset:null}(chart,fill);if("stack"===fill)return function _buildStackLine(source){const{scale,index,line}=source,points=[],segments=line.segments,sourcePoints=line.points,linesBelow=function getLinesBelow(scale,index){const below=[],metas=scale.getMatchingVisibleMetas("line");for(let i=0;i<metas.length;i++){const meta=metas[i];if(meta.index===index)break;meta.hidden||below.unshift(meta.dataset)}return below}(scale,index);linesBelow.push(_createBoundaryLine({x:null,y:scale.bottom},line));for(let i=0;i<segments.length;i++){const segment=segments[i];for(let j=segment.start;j<=segment.end;j++)addPointsBelow(points,sourcePoints[j],linesBelow)}return new LineElement({points,options:{}})}(source);if("shape"===fill)return!0;const boundary=function computeBoundary(source){const scale=source.scale||{};if(scale.getPointPositionForValue)return function computeCircularBoundary(source){const{scale,fill}=source,options=scale.options,length=scale.getLabels().length,start=options.reverse?scale.max:scale.min,value=function _getTargetValue(fill,scale,startValue){let value;return value="start"===fill?startValue:"end"===fill?scale.options.reverse?scale.min:scale.max:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(fill)?fill.value:scale.getBaseValue(),value}(fill,scale,start),target=[];if(options.grid.circular){const center=scale.getPointPositionForValue(0,start);return new simpleArc({x:center.x,y:center.y,radius:scale.getDistanceFromCenterForValue(value)})}for(let i=0;i<length;++i)target.push(scale.getPointPositionForValue(i,value));return target}(source);return function computeLinearBoundary(source){const{scale={},fill}=source,pixel=function _getTargetPixel(fill,scale){let pixel=null;return"start"===fill?pixel=scale.bottom:"end"===fill?pixel=scale.top:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(fill)?pixel=scale.getPixelForValue(fill.value):scale.getBasePixel&&(pixel=scale.getBasePixel()),pixel}(fill,scale);if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(pixel)){const horizontal=scale.isHorizontal();return{x:horizontal?pixel:null,y:horizontal?null:pixel}}return null}(source)}(source);return boundary instanceof simpleArc?boundary:_createBoundaryLine(boundary,line)}function _drawfill(ctx,source,area){const target=_getTarget(source),{line,scale,axis}=source,lineOpts=line.options,fillOption=lineOpts.fill,color=lineOpts.backgroundColor,{above=color,below=color}=fillOption||{};target&&line.points.length&&((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Y)(ctx,area),function doFill(ctx,cfg){const{line,target,above,below,area,scale}=cfg,property=line._loop?"angle":cfg.axis;ctx.save(),"x"===property&&below!==above&&(clipVertical(ctx,target,area.top),fill(ctx,{line,target,color:above,scale,property}),ctx.restore(),ctx.save(),clipVertical(ctx,target,area.bottom));fill(ctx,{line,target,color:below,scale,property}),ctx.restore()}(ctx,{line,target,above,below,area,scale,axis}),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.$)(ctx))}function clipVertical(ctx,target,clipY){const{segments,points}=target;let first=!0,lineLoop=!1;ctx.beginPath();for(const segment of segments){const{start,end}=segment,firstPoint=points[start],lastPoint=points[_findSegmentEnd(start,end,points)];first?(ctx.moveTo(firstPoint.x,firstPoint.y),first=!1):(ctx.lineTo(firstPoint.x,clipY),ctx.lineTo(firstPoint.x,firstPoint.y)),lineLoop=!!target.pathSegment(ctx,segment,{move:lineLoop}),lineLoop?ctx.closePath():ctx.lineTo(lastPoint.x,clipY)}ctx.lineTo(target.first().x,clipY),ctx.closePath(),ctx.clip()}function fill(ctx,cfg){const{line,target,property,color,scale}=cfg,segments=function _segments(line,target,property){const segments=line.segments,points=line.points,tpoints=target.points,parts=[];for(const segment of segments){let{start,end}=segment;end=_findSegmentEnd(start,end,points);const bounds=_getBounds(property,points[start],points[end],segment.loop);if(!target.segments){parts.push({source:segment,target:bounds,start:points[start],end:points[end]});continue}const targetSegments=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.an)(target,bounds);for(const tgt of targetSegments){const subBounds=_getBounds(property,tpoints[tgt.start],tpoints[tgt.end],tgt.loop),fillSources=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ax)(segment,points,subBounds);for(const fillSource of fillSources)parts.push({source:fillSource,target:tgt,start:{[property]:_getEdge(bounds,subBounds,"start",Math.max)},end:{[property]:_getEdge(bounds,subBounds,"end",Math.min)}})}}return parts}(line,target,property);for(const{source:src,target:tgt,start,end}of segments){const{style:{backgroundColor=color}={}}=src,notShape=!0!==target;ctx.save(),ctx.fillStyle=backgroundColor,clipBounds(ctx,scale,notShape&&_getBounds(property,start,end)),ctx.beginPath();const lineLoop=!!line.pathSegment(ctx,src);let loop;if(notShape){lineLoop?ctx.closePath():interpolatedLineTo(ctx,target,end,property);const targetLoop=!!target.pathSegment(ctx,tgt,{move:lineLoop,reverse:!0});loop=lineLoop&&targetLoop,loop||interpolatedLineTo(ctx,target,start,property)}ctx.closePath(),ctx.fill(loop?"evenodd":"nonzero"),ctx.restore()}}function clipBounds(ctx,scale,bounds){const{top,bottom}=scale.chart.chartArea,{property,start,end}=bounds||{};"x"===property&&(ctx.beginPath(),ctx.rect(start,top,end-start,bottom-top),ctx.clip())}function interpolatedLineTo(ctx,target,point,property){const interpolatedPoint=target.interpolate(point,property);interpolatedPoint&&ctx.lineTo(interpolatedPoint.x,interpolatedPoint.y)}var index={id:"filler",afterDatasetsUpdate(chart,_args,options){const count=(chart.data.datasets||[]).length,sources=[];let meta,i,line,source;for(i=0;i<count;++i)meta=chart.getDatasetMeta(i),line=meta.dataset,source=null,line&&line.options&&line instanceof LineElement&&(source={visible:chart.isDatasetVisible(i),index:i,fill:_decodeFill(line,i,count),chart,axis:meta.controller.options.indexAxis,scale:meta.vScale,line}),meta.$filler=source,sources.push(source);for(i=0;i<count;++i)source=sources[i],source&&!1!==source.fill&&(source.fill=_resolveTarget(sources,i,options.propagate))},beforeDraw(chart,_args,options){const draw="beforeDraw"===options.drawTime,metasets=chart.getSortedVisibleDatasetMetas(),area=chart.chartArea;for(let i=metasets.length-1;i>=0;--i){const source=metasets[i].$filler;source&&(source.line.updateControlPoints(area,source.axis),draw&&source.fill&&_drawfill(chart.ctx,source,area))}},beforeDatasetsDraw(chart,_args,options){if("beforeDatasetsDraw"!==options.drawTime)return;const metasets=chart.getSortedVisibleDatasetMetas();for(let i=metasets.length-1;i>=0;--i){const source=metasets[i].$filler;_shouldApplyFill(source)&&_drawfill(chart.ctx,source,chart.chartArea)}},beforeDatasetDraw(chart,args,options){const source=args.meta.$filler;_shouldApplyFill(source)&&"beforeDatasetDraw"===options.drawTime&&_drawfill(chart.ctx,source,chart.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const getBoxSize=(labelOpts,fontSize)=>{let{boxHeight=fontSize,boxWidth=fontSize}=labelOpts;return labelOpts.usePointStyle&&(boxHeight=Math.min(boxHeight,fontSize),boxWidth=labelOpts.pointStyleWidth||Math.min(boxWidth,fontSize)),{boxWidth,boxHeight,itemHeight:Math.max(fontSize,boxHeight)}};class Legend extends Element{constructor(config){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=config.chart,this.options=config.options,this.ctx=config.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(maxWidth,maxHeight,margins){this.maxWidth=maxWidth,this.maxHeight=maxHeight,this._margins=margins,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const labelOpts=this.options.labels||{};let legendItems=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(labelOpts.generateLabels,[this.chart],this)||[];labelOpts.filter&&(legendItems=legendItems.filter((item=>labelOpts.filter(item,this.chart.data)))),labelOpts.sort&&(legendItems=legendItems.sort(((a,b)=>labelOpts.sort(a,b,this.chart.data)))),this.options.reverse&&legendItems.reverse(),this.legendItems=legendItems}fit(){const{options,ctx}=this;if(!options.display)return void(this.width=this.height=0);const labelOpts=options.labels,labelFont=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(labelOpts.font),fontSize=labelFont.size,titleHeight=this._computeTitleHeight(),{boxWidth,itemHeight}=getBoxSize(labelOpts,fontSize);let width,height;ctx.font=labelFont.string,this.isHorizontal()?(width=this.maxWidth,height=this._fitRows(titleHeight,fontSize,boxWidth,itemHeight)+10):(height=this.maxHeight,width=this._fitCols(titleHeight,labelFont,boxWidth,itemHeight)+10),this.width=Math.min(width,options.maxWidth||this.maxWidth),this.height=Math.min(height,options.maxHeight||this.maxHeight)}_fitRows(titleHeight,fontSize,boxWidth,itemHeight){const{ctx,maxWidth,options:{labels:{padding}}}=this,hitboxes=this.legendHitBoxes=[],lineWidths=this.lineWidths=[0],lineHeight=itemHeight+padding;let totalHeight=titleHeight;ctx.textAlign="left",ctx.textBaseline="middle";let row=-1,top=-lineHeight;return this.legendItems.forEach(((legendItem,i)=>{const itemWidth=boxWidth+fontSize/2+ctx.measureText(legendItem.text).width;(0===i||lineWidths[lineWidths.length-1]+itemWidth+2*padding>maxWidth)&&(totalHeight+=lineHeight,lineWidths[lineWidths.length-(i>0?0:1)]=0,top+=lineHeight,row++),hitboxes[i]={left:0,top,row,width:itemWidth,height:itemHeight},lineWidths[lineWidths.length-1]+=itemWidth+padding})),totalHeight}_fitCols(titleHeight,labelFont,boxWidth,_itemHeight){const{ctx,maxHeight,options:{labels:{padding}}}=this,hitboxes=this.legendHitBoxes=[],columnSizes=this.columnSizes=[],heightLimit=maxHeight-titleHeight;let totalWidth=padding,currentColWidth=0,currentColHeight=0,left=0,col=0;return this.legendItems.forEach(((legendItem,i)=>{const{itemWidth,itemHeight}=function calculateItemSize(boxWidth,labelFont,ctx,legendItem,_itemHeight){const itemWidth=function calculateItemWidth(legendItem,boxWidth,labelFont,ctx){let legendItemText=legendItem.text;legendItemText&&"string"!=typeof legendItemText&&(legendItemText=legendItemText.reduce(((a,b)=>a.length>b.length?a:b)));return boxWidth+labelFont.size/2+ctx.measureText(legendItemText).width}(legendItem,boxWidth,labelFont,ctx),itemHeight=function calculateItemHeight(_itemHeight,legendItem,fontLineHeight){let itemHeight=_itemHeight;"string"!=typeof legendItem.text&&(itemHeight=calculateLegendItemHeight(legendItem,fontLineHeight));return itemHeight}(_itemHeight,legendItem,labelFont.lineHeight);return{itemWidth,itemHeight}}(boxWidth,labelFont,ctx,legendItem,_itemHeight);i>0&&currentColHeight+itemHeight+2*padding>heightLimit&&(totalWidth+=currentColWidth+padding,columnSizes.push({width:currentColWidth,height:currentColHeight}),left+=currentColWidth+padding,col++,currentColWidth=currentColHeight=0),hitboxes[i]={left,top:currentColHeight,col,width:itemWidth,height:itemHeight},currentColWidth=Math.max(currentColWidth,itemWidth),currentColHeight+=itemHeight+padding})),totalWidth+=currentColWidth,columnSizes.push({width:currentColWidth,height:currentColHeight}),totalWidth}adjustHitBoxes(){if(!this.options.display)return;const titleHeight=this._computeTitleHeight(),{legendHitBoxes:hitboxes,options:{align,labels:{padding},rtl}}=this,rtlHelper=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.az)(rtl,this.left,this.width);if(this.isHorizontal()){let row=0,left=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(align,this.left+padding,this.right-this.lineWidths[row]);for(const hitbox of hitboxes)row!==hitbox.row&&(row=hitbox.row,left=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(align,this.left+padding,this.right-this.lineWidths[row])),hitbox.top+=this.top+titleHeight+padding,hitbox.left=rtlHelper.leftForLtr(rtlHelper.x(left),hitbox.width),left+=hitbox.width+padding}else{let col=0,top=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(align,this.top+titleHeight+padding,this.bottom-this.columnSizes[col].height);for(const hitbox of hitboxes)hitbox.col!==col&&(col=hitbox.col,top=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(align,this.top+titleHeight+padding,this.bottom-this.columnSizes[col].height)),hitbox.top=top,hitbox.left+=this.left+padding,hitbox.left=rtlHelper.leftForLtr(rtlHelper.x(hitbox.left),hitbox.width),top+=hitbox.height+padding}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const ctx=this.ctx;(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Y)(ctx,this),this._draw(),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.$)(ctx)}}_draw(){const{options:opts,columnSizes,lineWidths,ctx}=this,{align,labels:labelOpts}=opts,defaultColor=_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.color,rtlHelper=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.az)(opts.rtl,this.left,this.width),labelFont=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(labelOpts.font),{padding}=labelOpts,fontSize=labelFont.size,halfFontSize=fontSize/2;let cursor;this.drawTitle(),ctx.textAlign=rtlHelper.textAlign("left"),ctx.textBaseline="middle",ctx.lineWidth=.5,ctx.font=labelFont.string;const{boxWidth,boxHeight,itemHeight}=getBoxSize(labelOpts,fontSize),isHorizontal=this.isHorizontal(),titleHeight=this._computeTitleHeight();cursor=isHorizontal?{x:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(align,this.left+padding,this.right-lineWidths[0]),y:this.top+padding+titleHeight,line:0}:{x:this.left+padding,y:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(align,this.top+titleHeight+padding,this.bottom-columnSizes[0].height),line:0},(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aA)(this.ctx,opts.textDirection);const lineHeight=itemHeight+padding;this.legendItems.forEach(((legendItem,i)=>{ctx.strokeStyle=legendItem.fontColor,ctx.fillStyle=legendItem.fontColor;const textWidth=ctx.measureText(legendItem.text).width,textAlign=rtlHelper.textAlign(legendItem.textAlign||(legendItem.textAlign=labelOpts.textAlign)),width=boxWidth+halfFontSize+textWidth;let x=cursor.x,y=cursor.y;rtlHelper.setWidth(this.width),isHorizontal?i>0&&x+width+padding>this.right&&(y=cursor.y+=lineHeight,cursor.line++,x=cursor.x=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(align,this.left+padding,this.right-lineWidths[cursor.line])):i>0&&y+lineHeight>this.bottom&&(x=cursor.x=x+columnSizes[cursor.line].width+padding,cursor.line++,y=cursor.y=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(align,this.top+titleHeight+padding,this.bottom-columnSizes[cursor.line].height));if(function(x,y,legendItem){if(isNaN(boxWidth)||boxWidth<=0||isNaN(boxHeight)||boxHeight<0)return;ctx.save();const lineWidth=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(legendItem.lineWidth,1);if(ctx.fillStyle=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(legendItem.fillStyle,defaultColor),ctx.lineCap=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(legendItem.lineCap,"butt"),ctx.lineDashOffset=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(legendItem.lineDashOffset,0),ctx.lineJoin=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(legendItem.lineJoin,"miter"),ctx.lineWidth=lineWidth,ctx.strokeStyle=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(legendItem.strokeStyle,defaultColor),ctx.setLineDash((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(legendItem.lineDash,[])),labelOpts.usePointStyle){const drawOptions={radius:boxHeight*Math.SQRT2/2,pointStyle:legendItem.pointStyle,rotation:legendItem.rotation,borderWidth:lineWidth},centerX=rtlHelper.xPlus(x,boxWidth/2),centerY=y+halfFontSize;(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aD)(ctx,drawOptions,centerX,centerY,labelOpts.pointStyleWidth&&boxWidth)}else{const yBoxTop=y+Math.max((fontSize-boxHeight)/2,0),xBoxLeft=rtlHelper.leftForLtr(x,boxWidth),borderRadius=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aw)(legendItem.borderRadius);ctx.beginPath(),Object.values(borderRadius).some((v=>0!==v))?(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.au)(ctx,{x:xBoxLeft,y:yBoxTop,w:boxWidth,h:boxHeight,radius:borderRadius}):ctx.rect(xBoxLeft,yBoxTop,boxWidth,boxHeight),ctx.fill(),0!==lineWidth&&ctx.stroke()}ctx.restore()}(rtlHelper.x(x),y,legendItem),x=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aB)(textAlign,x+boxWidth+halfFontSize,isHorizontal?x+width:this.right,opts.rtl),function(x,y,legendItem){(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Z)(ctx,legendItem.text,x,y+itemHeight/2,labelFont,{strikethrough:legendItem.hidden,textAlign:rtlHelper.textAlign(legendItem.textAlign)})}(rtlHelper.x(x),y,legendItem),isHorizontal)cursor.x+=width+padding;else if("string"!=typeof legendItem.text){const fontLineHeight=labelFont.lineHeight;cursor.y+=calculateLegendItemHeight(legendItem,fontLineHeight)+padding}else cursor.y+=lineHeight})),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aC)(this.ctx,opts.textDirection)}drawTitle(){const opts=this.options,titleOpts=opts.title,titleFont=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(titleOpts.font),titlePadding=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(titleOpts.padding);if(!titleOpts.display)return;const rtlHelper=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.az)(opts.rtl,this.left,this.width),ctx=this.ctx,position=titleOpts.position,halfFontSize=titleFont.size/2,topPaddingPlusHalfFontSize=titlePadding.top+halfFontSize;let y,left=this.left,maxWidth=this.width;if(this.isHorizontal())maxWidth=Math.max(...this.lineWidths),y=this.top+topPaddingPlusHalfFontSize,left=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(opts.align,left,this.right-maxWidth);else{const maxHeight=this.columnSizes.reduce(((acc,size)=>Math.max(acc,size.height)),0);y=topPaddingPlusHalfFontSize+(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(opts.align,this.top,this.bottom-maxHeight-opts.labels.padding-this._computeTitleHeight())}const x=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(position,left,left+maxWidth);ctx.textAlign=rtlHelper.textAlign((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a1)(position)),ctx.textBaseline="middle",ctx.strokeStyle=titleOpts.color,ctx.fillStyle=titleOpts.color,ctx.font=titleFont.string,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Z)(ctx,titleOpts.text,x,y,titleFont)}_computeTitleHeight(){const titleOpts=this.options.title,titleFont=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(titleOpts.font),titlePadding=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(titleOpts.padding);return titleOpts.display?titleFont.lineHeight+titlePadding.height:0}_getLegendItemAt(x,y){let i,hitBox,lh;if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aj)(x,this.left,this.right)&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aj)(y,this.top,this.bottom))for(lh=this.legendHitBoxes,i=0;i<lh.length;++i)if(hitBox=lh[i],(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aj)(x,hitBox.left,hitBox.left+hitBox.width)&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aj)(y,hitBox.top,hitBox.top+hitBox.height))return this.legendItems[i];return null}handleEvent(e){const opts=this.options;if(!function isListened(type,opts){if(("mousemove"===type||"mouseout"===type)&&(opts.onHover||opts.onLeave))return!0;if(opts.onClick&&("click"===type||"mouseup"===type))return!0;return!1}(e.type,opts))return;const hoveredItem=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const previous=this._hoveredItem,sameItem=(b=hoveredItem,null!==(a=previous)&&null!==b&&a.datasetIndex===b.datasetIndex&&a.index===b.index);previous&&!sameItem&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(opts.onLeave,[e,previous,this],this),this._hoveredItem=hoveredItem,hoveredItem&&!sameItem&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(opts.onHover,[e,hoveredItem,this],this)}else hoveredItem&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(opts.onClick,[e,hoveredItem,this],this);var a,b}}function calculateLegendItemHeight(legendItem,fontLineHeight){return fontLineHeight*(legendItem.text?legendItem.text.length:0)}var plugin_legend={id:"legend",_element:Legend,start(chart,_args,options){const legend=chart.legend=new Legend({ctx:chart.ctx,options,chart});layouts.configure(chart,legend,options),layouts.addBox(chart,legend)},stop(chart){layouts.removeBox(chart,chart.legend),delete chart.legend},beforeUpdate(chart,_args,options){const legend=chart.legend;layouts.configure(chart,legend,options),legend.options=options},afterUpdate(chart){const legend=chart.legend;legend.buildLabels(),legend.adjustHitBoxes()},afterEvent(chart,args){args.replay||chart.legend.handleEvent(args.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,legendItem,legend){const index=legendItem.datasetIndex,ci=legend.chart;ci.isDatasetVisible(index)?(ci.hide(index),legendItem.hidden=!0):(ci.show(index),legendItem.hidden=!1)},onHover:null,onLeave:null,labels:{color:ctx=>ctx.chart.options.color,boxWidth:40,padding:10,generateLabels(chart){const datasets=chart.data.datasets,{labels:{usePointStyle,pointStyle,textAlign,color,useBorderRadius,borderRadius}}=chart.legend.options;return chart._getSortedDatasetMetas().map((meta=>{const style=meta.controller.getStyle(usePointStyle?0:void 0),borderWidth=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(style.borderWidth);return{text:datasets[meta.index].label,fillStyle:style.backgroundColor,fontColor:color,hidden:!meta.visible,lineCap:style.borderCapStyle,lineDash:style.borderDash,lineDashOffset:style.borderDashOffset,lineJoin:style.borderJoinStyle,lineWidth:(borderWidth.width+borderWidth.height)/4,strokeStyle:style.borderColor,pointStyle:pointStyle||style.pointStyle,rotation:style.rotation,textAlign:textAlign||style.textAlign,borderRadius:useBorderRadius&&(borderRadius||style.borderRadius),datasetIndex:meta.index}}),this)}},title:{color:ctx=>ctx.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:name=>!name.startsWith("on"),labels:{_scriptable:name=>!["generateLabels","filter","sort"].includes(name)}}};class Title extends Element{constructor(config){super(),this.chart=config.chart,this.options=config.options,this.ctx=config.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(maxWidth,maxHeight){const opts=this.options;if(this.left=0,this.top=0,!opts.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=maxWidth,this.height=this.bottom=maxHeight;const lineCount=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.b)(opts.text)?opts.text.length:1;this._padding=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(opts.padding);const textSize=lineCount*(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(opts.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=textSize:this.width=textSize}isHorizontal(){const pos=this.options.position;return"top"===pos||"bottom"===pos}_drawArgs(offset){const{top,left,bottom,right,options}=this,align=options.align;let maxWidth,titleX,titleY,rotation=0;return this.isHorizontal()?(titleX=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(align,left,right),titleY=top+offset,maxWidth=right-left):("left"===options.position?(titleX=left+offset,titleY=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(align,bottom,top),rotation=-.5*_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.P):(titleX=right-offset,titleY=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a2)(align,top,bottom),rotation=.5*_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.P),maxWidth=bottom-top),{titleX,titleY,maxWidth,rotation}}draw(){const ctx=this.ctx,opts=this.options;if(!opts.display)return;const fontOpts=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(opts.font),offset=fontOpts.lineHeight/2+this._padding.top,{titleX,titleY,maxWidth,rotation}=this._drawArgs(offset);(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Z)(ctx,opts.text,0,0,fontOpts,{color:opts.color,maxWidth,rotation,textAlign:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a1)(opts.align),textBaseline:"middle",translation:[titleX,titleY]})}}var plugin_title={id:"title",_element:Title,start(chart,_args,options){!function createTitle(chart,titleOpts){const title=new Title({ctx:chart.ctx,options:titleOpts,chart});layouts.configure(chart,title,titleOpts),layouts.addBox(chart,title),chart.titleBlock=title}(chart,options)},stop(chart){const titleBlock=chart.titleBlock;layouts.removeBox(chart,titleBlock),delete chart.titleBlock},beforeUpdate(chart,_args,options){const title=chart.titleBlock;layouts.configure(chart,title,options),title.options=options},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const map=new WeakMap;var plugin_subtitle={id:"subtitle",start(chart,_args,options){const title=new Title({ctx:chart.ctx,options,chart});layouts.configure(chart,title,options),layouts.addBox(chart,title),map.set(chart,title)},stop(chart){layouts.removeBox(chart,map.get(chart)),map.delete(chart)},beforeUpdate(chart,_args,options){const title=map.get(chart);layouts.configure(chart,title,options),title.options=options},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const positioners={average(items){if(!items.length)return!1;let i,len,x=0,y=0,count=0;for(i=0,len=items.length;i<len;++i){const el=items[i].element;if(el&&el.hasValue()){const pos=el.tooltipPosition();x+=pos.x,y+=pos.y,++count}}return{x:x/count,y:y/count}},nearest(items,eventPosition){if(!items.length)return!1;let i,len,nearestElement,x=eventPosition.x,y=eventPosition.y,minDistance=Number.POSITIVE_INFINITY;for(i=0,len=items.length;i<len;++i){const el=items[i].element;if(el&&el.hasValue()){const center=el.getCenterPoint(),d=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aE)(eventPosition,center);d<minDistance&&(minDistance=d,nearestElement=el)}}if(nearestElement){const tp=nearestElement.tooltipPosition();x=tp.x,y=tp.y}return{x,y}}};function pushOrConcat(base,toPush){return toPush&&((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.b)(toPush)?Array.prototype.push.apply(base,toPush):base.push(toPush)),base}function splitNewlines(str){return("string"==typeof str||str instanceof String)&&str.indexOf("\n")>-1?str.split("\n"):str}function createTooltipItem(chart,item){const{element,datasetIndex,index}=item,controller=chart.getDatasetMeta(datasetIndex).controller,{label,value}=controller.getLabelAndValue(index);return{chart,label,parsed:controller.getParsed(index),raw:chart.data.datasets[datasetIndex].data[index],formattedValue:value,dataset:controller.getDataset(),dataIndex:index,datasetIndex,element}}function getTooltipSize(tooltip,options){const ctx=tooltip.chart.ctx,{body,footer,title}=tooltip,{boxWidth,boxHeight}=options,bodyFont=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(options.bodyFont),titleFont=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(options.titleFont),footerFont=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(options.footerFont),titleLineCount=title.length,footerLineCount=footer.length,bodyLineItemCount=body.length,padding=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(options.padding);let height=padding.height,width=0,combinedBodyLength=body.reduce(((count,bodyItem)=>count+bodyItem.before.length+bodyItem.lines.length+bodyItem.after.length),0);if(combinedBodyLength+=tooltip.beforeBody.length+tooltip.afterBody.length,titleLineCount&&(height+=titleLineCount*titleFont.lineHeight+(titleLineCount-1)*options.titleSpacing+options.titleMarginBottom),combinedBodyLength){height+=bodyLineItemCount*(options.displayColors?Math.max(boxHeight,bodyFont.lineHeight):bodyFont.lineHeight)+(combinedBodyLength-bodyLineItemCount)*bodyFont.lineHeight+(combinedBodyLength-1)*options.bodySpacing}footerLineCount&&(height+=options.footerMarginTop+footerLineCount*footerFont.lineHeight+(footerLineCount-1)*options.footerSpacing);let widthPadding=0;const maxLineWidth=function(line){width=Math.max(width,ctx.measureText(line).width+widthPadding)};return ctx.save(),ctx.font=titleFont.string,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(tooltip.title,maxLineWidth),ctx.font=bodyFont.string,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(tooltip.beforeBody.concat(tooltip.afterBody),maxLineWidth),widthPadding=options.displayColors?boxWidth+2+options.boxPadding:0,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(body,(bodyItem=>{(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(bodyItem.before,maxLineWidth),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(bodyItem.lines,maxLineWidth),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(bodyItem.after,maxLineWidth)})),widthPadding=0,ctx.font=footerFont.string,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(tooltip.footer,maxLineWidth),ctx.restore(),width+=padding.width,{width,height}}function determineXAlign(chart,options,size,yAlign){const{x,width}=size,{width:chartWidth,chartArea:{left,right}}=chart;let xAlign="center";return"center"===yAlign?xAlign=x<=(left+right)/2?"left":"right":x<=width/2?xAlign="left":x>=chartWidth-width/2&&(xAlign="right"),function doesNotFitWithAlign(xAlign,chart,options,size){const{x,width}=size,caret=options.caretSize+options.caretPadding;return"left"===xAlign&&x+width+caret>chart.width||"right"===xAlign&&x-width-caret<0||void 0}(xAlign,chart,options,size)&&(xAlign="center"),xAlign}function determineAlignment(chart,options,size){const yAlign=size.yAlign||options.yAlign||function determineYAlign(chart,size){const{y,height}=size;return y<height/2?"top":y>chart.height-height/2?"bottom":"center"}(chart,size);return{xAlign:size.xAlign||options.xAlign||determineXAlign(chart,options,size,yAlign),yAlign}}function getBackgroundPoint(options,size,alignment,chart){const{caretSize,caretPadding,cornerRadius}=options,{xAlign,yAlign}=alignment,paddingAndSize=caretSize+caretPadding,{topLeft,topRight,bottomLeft,bottomRight}=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aw)(cornerRadius);let x=function alignX(size,xAlign){let{x,width}=size;return"right"===xAlign?x-=width:"center"===xAlign&&(x-=width/2),x}(size,xAlign);const y=function alignY(size,yAlign,paddingAndSize){let{y,height}=size;return"top"===yAlign?y+=paddingAndSize:y-="bottom"===yAlign?height+paddingAndSize:height/2,y}(size,yAlign,paddingAndSize);return"center"===yAlign?"left"===xAlign?x+=paddingAndSize:"right"===xAlign&&(x-=paddingAndSize):"left"===xAlign?x-=Math.max(topLeft,bottomLeft)+caretSize:"right"===xAlign&&(x+=Math.max(topRight,bottomRight)+caretSize),{x:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)(x,0,chart.width-size.width),y:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)(y,0,chart.height-size.height)}}function getAlignedX(tooltip,align,options){const padding=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(options.padding);return"center"===align?tooltip.x+tooltip.width/2:"right"===align?tooltip.x+tooltip.width-padding.right:tooltip.x+padding.left}function getBeforeAfterBodyLines(callback){return pushOrConcat([],splitNewlines(callback))}function overrideCallbacks(callbacks,context){const override=context&&context.dataset&&context.dataset.tooltip&&context.dataset.tooltip.callbacks;return override?callbacks.override(override):callbacks}const defaultCallbacks={beforeTitle:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aF,title(tooltipItems){if(tooltipItems.length>0){const item=tooltipItems[0],labels=item.chart.data.labels,labelCount=labels?labels.length:0;if(this&&this.options&&"dataset"===this.options.mode)return item.dataset.label||"";if(item.label)return item.label;if(labelCount>0&&item.dataIndex<labelCount)return labels[item.dataIndex]}return""},afterTitle:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aF,beforeBody:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aF,beforeLabel:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aF,label(tooltipItem){if(this&&this.options&&"dataset"===this.options.mode)return tooltipItem.label+": "+tooltipItem.formattedValue||tooltipItem.formattedValue;let label=tooltipItem.dataset.label||"";label&&(label+=": ");const value=tooltipItem.formattedValue;return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(value)||(label+=value),label},labelColor(tooltipItem){const options=tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex).controller.getStyle(tooltipItem.dataIndex);return{borderColor:options.borderColor,backgroundColor:options.backgroundColor,borderWidth:options.borderWidth,borderDash:options.borderDash,borderDashOffset:options.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(tooltipItem){const options=tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex).controller.getStyle(tooltipItem.dataIndex);return{pointStyle:options.pointStyle,rotation:options.rotation}},afterLabel:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aF,afterBody:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aF,beforeFooter:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aF,footer:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aF,afterFooter:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aF};function invokeCallbackWithFallback(callbacks,name,ctx,arg){const result=callbacks[name].call(ctx,arg);return void 0===result?defaultCallbacks[name].call(ctx,arg):result}class Tooltip extends Element{static positioners=positioners;constructor(config){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=config.chart,this.options=config.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(options){this.options=options,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const cached=this._cachedAnimations;if(cached)return cached;const chart=this.chart,options=this.options.setContext(this.getContext()),opts=options.enabled&&chart.options.animation&&options.animations,animations=new Animations(this.chart,opts);return opts._cacheable&&(this._cachedAnimations=Object.freeze(animations)),animations}getContext(){return this.$context||(this.$context=function createTooltipContext(parent,tooltip,tooltipItems){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.j)(parent,{tooltip,tooltipItems,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(context,options){const{callbacks}=options,beforeTitle=invokeCallbackWithFallback(callbacks,"beforeTitle",this,context),title=invokeCallbackWithFallback(callbacks,"title",this,context),afterTitle=invokeCallbackWithFallback(callbacks,"afterTitle",this,context);let lines=[];return lines=pushOrConcat(lines,splitNewlines(beforeTitle)),lines=pushOrConcat(lines,splitNewlines(title)),lines=pushOrConcat(lines,splitNewlines(afterTitle)),lines}getBeforeBody(tooltipItems,options){return getBeforeAfterBodyLines(invokeCallbackWithFallback(options.callbacks,"beforeBody",this,tooltipItems))}getBody(tooltipItems,options){const{callbacks}=options,bodyItems=[];return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(tooltipItems,(context=>{const bodyItem={before:[],lines:[],after:[]},scoped=overrideCallbacks(callbacks,context);pushOrConcat(bodyItem.before,splitNewlines(invokeCallbackWithFallback(scoped,"beforeLabel",this,context))),pushOrConcat(bodyItem.lines,invokeCallbackWithFallback(scoped,"label",this,context)),pushOrConcat(bodyItem.after,splitNewlines(invokeCallbackWithFallback(scoped,"afterLabel",this,context))),bodyItems.push(bodyItem)})),bodyItems}getAfterBody(tooltipItems,options){return getBeforeAfterBodyLines(invokeCallbackWithFallback(options.callbacks,"afterBody",this,tooltipItems))}getFooter(tooltipItems,options){const{callbacks}=options,beforeFooter=invokeCallbackWithFallback(callbacks,"beforeFooter",this,tooltipItems),footer=invokeCallbackWithFallback(callbacks,"footer",this,tooltipItems),afterFooter=invokeCallbackWithFallback(callbacks,"afterFooter",this,tooltipItems);let lines=[];return lines=pushOrConcat(lines,splitNewlines(beforeFooter)),lines=pushOrConcat(lines,splitNewlines(footer)),lines=pushOrConcat(lines,splitNewlines(afterFooter)),lines}_createItems(options){const active=this._active,data=this.chart.data,labelColors=[],labelPointStyles=[],labelTextColors=[];let i,len,tooltipItems=[];for(i=0,len=active.length;i<len;++i)tooltipItems.push(createTooltipItem(this.chart,active[i]));return options.filter&&(tooltipItems=tooltipItems.filter(((element,index,array)=>options.filter(element,index,array,data)))),options.itemSort&&(tooltipItems=tooltipItems.sort(((a,b)=>options.itemSort(a,b,data)))),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(tooltipItems,(context=>{const scoped=overrideCallbacks(options.callbacks,context);labelColors.push(invokeCallbackWithFallback(scoped,"labelColor",this,context)),labelPointStyles.push(invokeCallbackWithFallback(scoped,"labelPointStyle",this,context)),labelTextColors.push(invokeCallbackWithFallback(scoped,"labelTextColor",this,context))})),this.labelColors=labelColors,this.labelPointStyles=labelPointStyles,this.labelTextColors=labelTextColors,this.dataPoints=tooltipItems,tooltipItems}update(changed,replay){const options=this.options.setContext(this.getContext()),active=this._active;let properties,tooltipItems=[];if(active.length){const position=positioners[options.position].call(this,active,this._eventPosition);tooltipItems=this._createItems(options),this.title=this.getTitle(tooltipItems,options),this.beforeBody=this.getBeforeBody(tooltipItems,options),this.body=this.getBody(tooltipItems,options),this.afterBody=this.getAfterBody(tooltipItems,options),this.footer=this.getFooter(tooltipItems,options);const size=this._size=getTooltipSize(this,options),positionAndSize=Object.assign({},position,size),alignment=determineAlignment(this.chart,options,positionAndSize),backgroundPoint=getBackgroundPoint(options,positionAndSize,alignment,this.chart);this.xAlign=alignment.xAlign,this.yAlign=alignment.yAlign,properties={opacity:1,x:backgroundPoint.x,y:backgroundPoint.y,width:size.width,height:size.height,caretX:position.x,caretY:position.y}}else 0!==this.opacity&&(properties={opacity:0});this._tooltipItems=tooltipItems,this.$context=void 0,properties&&this._resolveAnimations().update(this,properties),changed&&options.external&&options.external.call(this,{chart:this.chart,tooltip:this,replay})}drawCaret(tooltipPoint,ctx,size,options){const caretPosition=this.getCaretPosition(tooltipPoint,size,options);ctx.lineTo(caretPosition.x1,caretPosition.y1),ctx.lineTo(caretPosition.x2,caretPosition.y2),ctx.lineTo(caretPosition.x3,caretPosition.y3)}getCaretPosition(tooltipPoint,size,options){const{xAlign,yAlign}=this,{caretSize,cornerRadius}=options,{topLeft,topRight,bottomLeft,bottomRight}=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aw)(cornerRadius),{x:ptX,y:ptY}=tooltipPoint,{width,height}=size;let x1,x2,x3,y1,y2,y3;return"center"===yAlign?(y2=ptY+height/2,"left"===xAlign?(x1=ptX,x2=x1-caretSize,y1=y2+caretSize,y3=y2-caretSize):(x1=ptX+width,x2=x1+caretSize,y1=y2-caretSize,y3=y2+caretSize),x3=x1):(x2="left"===xAlign?ptX+Math.max(topLeft,bottomLeft)+caretSize:"right"===xAlign?ptX+width-Math.max(topRight,bottomRight)-caretSize:this.caretX,"top"===yAlign?(y1=ptY,y2=y1-caretSize,x1=x2-caretSize,x3=x2+caretSize):(y1=ptY+height,y2=y1+caretSize,x1=x2+caretSize,x3=x2-caretSize),y3=y1),{x1,x2,x3,y1,y2,y3}}drawTitle(pt,ctx,options){const title=this.title,length=title.length;let titleFont,titleSpacing,i;if(length){const rtlHelper=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.az)(options.rtl,this.x,this.width);for(pt.x=getAlignedX(this,options.titleAlign,options),ctx.textAlign=rtlHelper.textAlign(options.titleAlign),ctx.textBaseline="middle",titleFont=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(options.titleFont),titleSpacing=options.titleSpacing,ctx.fillStyle=options.titleColor,ctx.font=titleFont.string,i=0;i<length;++i)ctx.fillText(title[i],rtlHelper.x(pt.x),pt.y+titleFont.lineHeight/2),pt.y+=titleFont.lineHeight+titleSpacing,i+1===length&&(pt.y+=options.titleMarginBottom-titleSpacing)}}_drawColorBox(ctx,pt,i,rtlHelper,options){const labelColor=this.labelColors[i],labelPointStyle=this.labelPointStyles[i],{boxHeight,boxWidth}=options,bodyFont=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(options.bodyFont),colorX=getAlignedX(this,"left",options),rtlColorX=rtlHelper.x(colorX),yOffSet=boxHeight<bodyFont.lineHeight?(bodyFont.lineHeight-boxHeight)/2:0,colorY=pt.y+yOffSet;if(options.usePointStyle){const drawOptions={radius:Math.min(boxWidth,boxHeight)/2,pointStyle:labelPointStyle.pointStyle,rotation:labelPointStyle.rotation,borderWidth:1},centerX=rtlHelper.leftForLtr(rtlColorX,boxWidth)+boxWidth/2,centerY=colorY+boxHeight/2;ctx.strokeStyle=options.multiKeyBackground,ctx.fillStyle=options.multiKeyBackground,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.at)(ctx,drawOptions,centerX,centerY),ctx.strokeStyle=labelColor.borderColor,ctx.fillStyle=labelColor.backgroundColor,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.at)(ctx,drawOptions,centerX,centerY)}else{ctx.lineWidth=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.i)(labelColor.borderWidth)?Math.max(...Object.values(labelColor.borderWidth)):labelColor.borderWidth||1,ctx.strokeStyle=labelColor.borderColor,ctx.setLineDash(labelColor.borderDash||[]),ctx.lineDashOffset=labelColor.borderDashOffset||0;const outerX=rtlHelper.leftForLtr(rtlColorX,boxWidth),innerX=rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX,1),boxWidth-2),borderRadius=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aw)(labelColor.borderRadius);Object.values(borderRadius).some((v=>0!==v))?(ctx.beginPath(),ctx.fillStyle=options.multiKeyBackground,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.au)(ctx,{x:outerX,y:colorY,w:boxWidth,h:boxHeight,radius:borderRadius}),ctx.fill(),ctx.stroke(),ctx.fillStyle=labelColor.backgroundColor,ctx.beginPath(),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.au)(ctx,{x:innerX,y:colorY+1,w:boxWidth-2,h:boxHeight-2,radius:borderRadius}),ctx.fill()):(ctx.fillStyle=options.multiKeyBackground,ctx.fillRect(outerX,colorY,boxWidth,boxHeight),ctx.strokeRect(outerX,colorY,boxWidth,boxHeight),ctx.fillStyle=labelColor.backgroundColor,ctx.fillRect(innerX,colorY+1,boxWidth-2,boxHeight-2))}ctx.fillStyle=this.labelTextColors[i]}drawBody(pt,ctx,options){const{body}=this,{bodySpacing,bodyAlign,displayColors,boxHeight,boxWidth,boxPadding}=options,bodyFont=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(options.bodyFont);let bodyLineHeight=bodyFont.lineHeight,xLinePadding=0;const rtlHelper=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.az)(options.rtl,this.x,this.width),fillLineOfText=function(line){ctx.fillText(line,rtlHelper.x(pt.x+xLinePadding),pt.y+bodyLineHeight/2),pt.y+=bodyLineHeight+bodySpacing},bodyAlignForCalculation=rtlHelper.textAlign(bodyAlign);let bodyItem,textColor,lines,i,j,ilen,jlen;for(ctx.textAlign=bodyAlign,ctx.textBaseline="middle",ctx.font=bodyFont.string,pt.x=getAlignedX(this,bodyAlignForCalculation,options),ctx.fillStyle=options.bodyColor,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(this.beforeBody,fillLineOfText),xLinePadding=displayColors&&"right"!==bodyAlignForCalculation?"center"===bodyAlign?boxWidth/2+boxPadding:boxWidth+2+boxPadding:0,i=0,ilen=body.length;i<ilen;++i){for(bodyItem=body[i],textColor=this.labelTextColors[i],ctx.fillStyle=textColor,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(bodyItem.before,fillLineOfText),lines=bodyItem.lines,displayColors&&lines.length&&(this._drawColorBox(ctx,pt,i,rtlHelper,options),bodyLineHeight=Math.max(bodyFont.lineHeight,boxHeight)),j=0,jlen=lines.length;j<jlen;++j)fillLineOfText(lines[j]),bodyLineHeight=bodyFont.lineHeight;(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(bodyItem.after,fillLineOfText)}xLinePadding=0,bodyLineHeight=bodyFont.lineHeight,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.F)(this.afterBody,fillLineOfText),pt.y-=bodySpacing}drawFooter(pt,ctx,options){const footer=this.footer,length=footer.length;let footerFont,i;if(length){const rtlHelper=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.az)(options.rtl,this.x,this.width);for(pt.x=getAlignedX(this,options.footerAlign,options),pt.y+=options.footerMarginTop,ctx.textAlign=rtlHelper.textAlign(options.footerAlign),ctx.textBaseline="middle",footerFont=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(options.footerFont),ctx.fillStyle=options.footerColor,ctx.font=footerFont.string,i=0;i<length;++i)ctx.fillText(footer[i],rtlHelper.x(pt.x),pt.y+footerFont.lineHeight/2),pt.y+=footerFont.lineHeight+options.footerSpacing}}drawBackground(pt,ctx,tooltipSize,options){const{xAlign,yAlign}=this,{x,y}=pt,{width,height}=tooltipSize,{topLeft,topRight,bottomLeft,bottomRight}=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aw)(options.cornerRadius);ctx.fillStyle=options.backgroundColor,ctx.strokeStyle=options.borderColor,ctx.lineWidth=options.borderWidth,ctx.beginPath(),ctx.moveTo(x+topLeft,y),"top"===yAlign&&this.drawCaret(pt,ctx,tooltipSize,options),ctx.lineTo(x+width-topRight,y),ctx.quadraticCurveTo(x+width,y,x+width,y+topRight),"center"===yAlign&&"right"===xAlign&&this.drawCaret(pt,ctx,tooltipSize,options),ctx.lineTo(x+width,y+height-bottomRight),ctx.quadraticCurveTo(x+width,y+height,x+width-bottomRight,y+height),"bottom"===yAlign&&this.drawCaret(pt,ctx,tooltipSize,options),ctx.lineTo(x+bottomLeft,y+height),ctx.quadraticCurveTo(x,y+height,x,y+height-bottomLeft),"center"===yAlign&&"left"===xAlign&&this.drawCaret(pt,ctx,tooltipSize,options),ctx.lineTo(x,y+topLeft),ctx.quadraticCurveTo(x,y,x+topLeft,y),ctx.closePath(),ctx.fill(),options.borderWidth>0&&ctx.stroke()}_updateAnimationTarget(options){const chart=this.chart,anims=this.$animations,animX=anims&&anims.x,animY=anims&&anims.y;if(animX||animY){const position=positioners[options.position].call(this,this._active,this._eventPosition);if(!position)return;const size=this._size=getTooltipSize(this,options),positionAndSize=Object.assign({},position,this._size),alignment=determineAlignment(chart,options,positionAndSize),point=getBackgroundPoint(options,positionAndSize,alignment,chart);animX._to===point.x&&animY._to===point.y||(this.xAlign=alignment.xAlign,this.yAlign=alignment.yAlign,this.width=size.width,this.height=size.height,this.caretX=position.x,this.caretY=position.y,this._resolveAnimations().update(this,point))}}_willRender(){return!!this.opacity}draw(ctx){const options=this.options.setContext(this.getContext());let opacity=this.opacity;if(!opacity)return;this._updateAnimationTarget(options);const tooltipSize={width:this.width,height:this.height},pt={x:this.x,y:this.y};opacity=Math.abs(opacity)<.001?0:opacity;const padding=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(options.padding),hasTooltipContent=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;options.enabled&&hasTooltipContent&&(ctx.save(),ctx.globalAlpha=opacity,this.drawBackground(pt,ctx,tooltipSize,options),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aA)(ctx,options.textDirection),pt.y+=padding.top,this.drawTitle(pt,ctx,options),this.drawBody(pt,ctx,options),this.drawFooter(pt,ctx,options),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aC)(ctx,options.textDirection),ctx.restore())}getActiveElements(){return this._active||[]}setActiveElements(activeElements,eventPosition){const lastActive=this._active,active=activeElements.map((({datasetIndex,index})=>{const meta=this.chart.getDatasetMeta(datasetIndex);if(!meta)throw new Error("Cannot find a dataset at index "+datasetIndex);return{datasetIndex,element:meta.data[index],index}})),changed=!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ah)(lastActive,active),positionChanged=this._positionChanged(active,eventPosition);(changed||positionChanged)&&(this._active=active,this._eventPosition=eventPosition,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,replay,inChartArea=!0){if(replay&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const options=this.options,lastActive=this._active||[],active=this._getActiveElements(e,lastActive,replay,inChartArea),positionChanged=this._positionChanged(active,e),changed=replay||!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ah)(active,lastActive)||positionChanged;return changed&&(this._active=active,(options.enabled||options.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,replay))),changed}_getActiveElements(e,lastActive,replay,inChartArea){const options=this.options;if("mouseout"===e.type)return[];if(!inChartArea)return lastActive;const active=this.chart.getElementsAtEventForMode(e,options.mode,options,replay);return options.reverse&&active.reverse(),active}_positionChanged(active,e){const{caretX,caretY,options}=this,position=positioners[options.position].call(this,active,e);return!1!==position&&(caretX!==position.x||caretY!==position.y)}}var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners,afterInit(chart,_args,options){options&&(chart.tooltip=new Tooltip({chart,options}))},beforeUpdate(chart,_args,options){chart.tooltip&&chart.tooltip.initialize(options)},reset(chart,_args,options){chart.tooltip&&chart.tooltip.initialize(options)},afterDraw(chart){const tooltip=chart.tooltip;if(tooltip&&tooltip._willRender()){const args={tooltip};if(!1===chart.notifyPlugins("beforeTooltipDraw",{...args,cancelable:!0}))return;tooltip.draw(chart.ctx),chart.notifyPlugins("afterTooltipDraw",args)}},afterEvent(chart,args){if(chart.tooltip){const useFinalPosition=args.replay;chart.tooltip.handleEvent(args.event,useFinalPosition,args.inChartArea)&&(args.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(ctx,opts)=>opts.bodyFont.size,boxWidth:(ctx,opts)=>opts.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:defaultCallbacks},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:name=>"filter"!==name&&"itemSort"!==name&&"external"!==name,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},plugins=Object.freeze({__proto__:null,Colors:plugin_colors,Decimation:plugin_decimation,Filler:index,Legend:plugin_legend,SubTitle:plugin_subtitle,Title:plugin_title,Tooltip:plugin_tooltip});function findOrAddLabel(labels,raw,index,addedLabels){const first=labels.indexOf(raw);if(-1===first)return((labels,raw,index,addedLabels)=>("string"==typeof raw?(index=labels.push(raw)-1,addedLabels.unshift({index,label:raw})):isNaN(raw)&&(index=null),index))(labels,raw,index,addedLabels);return first!==labels.lastIndexOf(raw)?index:first}function _getLabelForValue(value){const labels=this.getLabels();return value>=0&&value<labels.length?labels[value]:value}function relativeLabelSize(value,minSpacing,{horizontal,minRotation}){const rad=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.t)(minRotation),ratio=(horizontal?Math.sin(rad):Math.cos(rad))||.001,length=.75*minSpacing*(""+value).length;return Math.min(minSpacing/ratio,length)}class LinearScaleBase extends Scale{constructor(cfg){super(cfg),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(raw,index){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(raw)||("number"==typeof raw||raw instanceof Number)&&!isFinite(+raw)?null:+raw}handleTickRangeOptions(){const{beginAtZero}=this.options,{minDefined,maxDefined}=this.getUserBounds();let{min,max}=this;const setMin=v=>min=minDefined?min:v,setMax=v=>max=maxDefined?max:v;if(beginAtZero){const minSign=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.s)(min),maxSign=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.s)(max);minSign<0&&maxSign<0?setMax(0):minSign>0&&maxSign>0&&setMin(0)}if(min===max){let offset=0===max?1:Math.abs(.05*max);setMax(max+offset),beginAtZero||setMin(min-offset)}this.min=min,this.max=max}getTickLimit(){const tickOpts=this.options.ticks;let maxTicks,{maxTicksLimit,stepSize}=tickOpts;return stepSize?(maxTicks=Math.ceil(this.max/stepSize)-Math.floor(this.min/stepSize)+1,maxTicks>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${stepSize} would result generating up to ${maxTicks} ticks. Limiting to 1000.`),maxTicks=1e3)):(maxTicks=this.computeTickLimit(),maxTicksLimit=maxTicksLimit||11),maxTicksLimit&&(maxTicks=Math.min(maxTicksLimit,maxTicks)),maxTicks}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const opts=this.options,tickOpts=opts.ticks;let maxTicks=this.getTickLimit();maxTicks=Math.max(2,maxTicks);const ticks=function generateTicks$1(generationOptions,dataRange){const ticks=[],{bounds,step,min,max,precision,count,maxTicks,maxDigits,includeBounds}=generationOptions,unit=step||1,maxSpaces=maxTicks-1,{min:rmin,max:rmax}=dataRange,minDefined=!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(min),maxDefined=!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(max),countDefined=!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(count),minSpacing=(rmax-rmin)/(maxDigits+1);let factor,niceMin,niceMax,numSpaces,spacing=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aH)((rmax-rmin)/maxSpaces/unit)*unit;if(spacing<1e-14&&!minDefined&&!maxDefined)return[{value:rmin},{value:rmax}];numSpaces=Math.ceil(rmax/spacing)-Math.floor(rmin/spacing),numSpaces>maxSpaces&&(spacing=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aH)(numSpaces*spacing/maxSpaces/unit)*unit),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(precision)||(factor=Math.pow(10,precision),spacing=Math.ceil(spacing*factor)/factor),"ticks"===bounds?(niceMin=Math.floor(rmin/spacing)*spacing,niceMax=Math.ceil(rmax/spacing)*spacing):(niceMin=rmin,niceMax=rmax),minDefined&&maxDefined&&step&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aI)((max-min)/step,spacing/1e3)?(numSpaces=Math.round(Math.min((max-min)/spacing,maxTicks)),spacing=(max-min)/numSpaces,niceMin=min,niceMax=max):countDefined?(niceMin=minDefined?min:niceMin,niceMax=maxDefined?max:niceMax,numSpaces=count-1,spacing=(niceMax-niceMin)/numSpaces):(numSpaces=(niceMax-niceMin)/spacing,numSpaces=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aJ)(numSpaces,Math.round(numSpaces),spacing/1e3)?Math.round(numSpaces):Math.ceil(numSpaces));const decimalPlaces=Math.max((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aK)(spacing),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aK)(niceMin));factor=Math.pow(10,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(precision)?decimalPlaces:precision),niceMin=Math.round(niceMin*factor)/factor,niceMax=Math.round(niceMax*factor)/factor;let j=0;for(minDefined&&(includeBounds&&niceMin!==min?(ticks.push({value:min}),niceMin<min&&j++,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aJ)(Math.round((niceMin+j*spacing)*factor)/factor,min,relativeLabelSize(min,minSpacing,generationOptions))&&j++):niceMin<min&&j++);j<numSpaces;++j){const tickValue=Math.round((niceMin+j*spacing)*factor)/factor;if(maxDefined&&tickValue>max)break;ticks.push({value:tickValue})}return maxDefined&&includeBounds&&niceMax!==max?ticks.length&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aJ)(ticks[ticks.length-1].value,max,relativeLabelSize(max,minSpacing,generationOptions))?ticks[ticks.length-1].value=max:ticks.push({value:max}):maxDefined&&niceMax!==max||ticks.push({value:niceMax}),ticks}({maxTicks,bounds:opts.bounds,min:opts.min,max:opts.max,precision:tickOpts.precision,step:tickOpts.stepSize,count:tickOpts.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:tickOpts.minRotation||0,includeBounds:!1!==tickOpts.includeBounds},this._range||this);return"ticks"===opts.bounds&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aG)(ticks,this,"value"),opts.reverse?(ticks.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),ticks}configure(){const ticks=this.ticks;let start=this.min,end=this.max;if(super.configure(),this.options.offset&&ticks.length){const offset=(end-start)/Math.max(ticks.length-1,1)/2;start-=offset,end+=offset}this._startValue=start,this._endValue=end,this._valueRange=end-start}getLabelForValue(value){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.o)(value,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{static id="linear";static defaults={ticks:{callback:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aL.formatters.numeric}};determineDataLimits(){const{min,max}=this.getMinMax(!0);this.min=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(min)?min:0,this.max=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(max)?max:1,this.handleTickRangeOptions()}computeTickLimit(){const horizontal=this.isHorizontal(),length=horizontal?this.width:this.height,minRotation=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.t)(this.options.ticks.minRotation),ratio=(horizontal?Math.sin(minRotation):Math.cos(minRotation))||.001,tickFont=this._resolveTickFontOptions(0);return Math.ceil(length/Math.min(40,tickFont.lineHeight/ratio))}getPixelForValue(value){return null===value?NaN:this.getPixelForDecimal((value-this._startValue)/this._valueRange)}getValueForPixel(pixel){return this._startValue+this.getDecimalForPixel(pixel)*this._valueRange}}const log10Floor=v=>Math.floor((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aM)(v)),changeExponent=(v,m)=>Math.pow(10,log10Floor(v)+m);function isMajor(tickVal){return 1===tickVal/Math.pow(10,log10Floor(tickVal))}function steps(min,max,rangeExp){const rangeStep=Math.pow(10,rangeExp),start=Math.floor(min/rangeStep);return Math.ceil(max/rangeStep)-start}function generateTicks(generationOptions,{min,max}){min=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.O)(generationOptions.min,min);const ticks=[],minExp=log10Floor(min);let exp=function startExp(min,max){let rangeExp=log10Floor(max-min);for(;steps(min,max,rangeExp)>10;)rangeExp++;for(;steps(min,max,rangeExp)<10;)rangeExp--;return Math.min(rangeExp,log10Floor(min))}(min,max),precision=exp<0?Math.pow(10,Math.abs(exp)):1;const stepSize=Math.pow(10,exp),base=minExp>exp?Math.pow(10,minExp):0,start=Math.round((min-base)*precision)/precision,offset=Math.floor((min-base)/stepSize/10)*stepSize*10;let significand=Math.floor((start-offset)/Math.pow(10,exp)),value=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.O)(generationOptions.min,Math.round((base+offset+significand*Math.pow(10,exp))*precision)/precision);for(;value<max;)ticks.push({value,major:isMajor(value),significand}),significand>=10?significand=significand<15?15:20:significand++,significand>=20&&(exp++,significand=2,precision=exp>=0?1:precision),value=Math.round((base+offset+significand*Math.pow(10,exp))*precision)/precision;const lastTick=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.O)(generationOptions.max,value);return ticks.push({value:lastTick,major:isMajor(lastTick),significand}),ticks}class LogarithmicScale extends Scale{static id="logarithmic";static defaults={ticks:{callback:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aL.formatters.logarithmic,major:{enabled:!0}}};constructor(cfg){super(cfg),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(raw,index){const value=LinearScaleBase.prototype.parse.apply(this,[raw,index]);if(0!==value)return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(value)&&value>0?value:null;this._zero=!0}determineDataLimits(){const{min,max}=this.getMinMax(!0);this.min=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(min)?Math.max(0,min):null,this.max=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(max)?Math.max(0,max):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(this._userMin)&&(this.min=min===changeExponent(this.min,0)?changeExponent(this.min,-1):changeExponent(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined,maxDefined}=this.getUserBounds();let min=this.min,max=this.max;const setMin=v=>min=minDefined?min:v,setMax=v=>max=maxDefined?max:v;min===max&&(min<=0?(setMin(1),setMax(10)):(setMin(changeExponent(min,-1)),setMax(changeExponent(max,1)))),min<=0&&setMin(changeExponent(max,-1)),max<=0&&setMax(changeExponent(min,1)),this.min=min,this.max=max}buildTicks(){const opts=this.options,ticks=generateTicks({min:this._userMin,max:this._userMax},this);return"ticks"===opts.bounds&&(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aG)(ticks,this,"value"),opts.reverse?(ticks.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),ticks}getLabelForValue(value){return void 0===value?"0":(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.o)(value,this.chart.options.locale,this.options.ticks.format)}configure(){const start=this.min;super.configure(),this._startValue=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aM)(start),this._valueRange=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aM)(this.max)-(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aM)(start)}getPixelForValue(value){return void 0!==value&&0!==value||(value=this.min),null===value||isNaN(value)?NaN:this.getPixelForDecimal(value===this.min?0:((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aM)(value)-this._startValue)/this._valueRange)}getValueForPixel(pixel){const decimal=this.getDecimalForPixel(pixel);return Math.pow(10,this._startValue+decimal*this._valueRange)}}function getTickBackdropHeight(opts){const tickOpts=opts.ticks;if(tickOpts.display&&opts.display){const padding=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(tickOpts.backdropPadding);return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(tickOpts.font&&tickOpts.font.size,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.d.font.size)+padding.height}return 0}function determineLimits(angle,pos,size,min,max){return angle===min||angle===max?{start:pos-size/2,end:pos+size/2}:angle<min||angle>max?{start:pos-size,end:pos}:{start:pos,end:pos+size}}function fitWithPointLabels(scale){const orig={l:scale.left+scale._padding.left,r:scale.right-scale._padding.right,t:scale.top+scale._padding.top,b:scale.bottom-scale._padding.bottom},limits=Object.assign({},orig),labelSizes=[],padding=[],valueCount=scale._pointLabels.length,pointLabelOpts=scale.options.pointLabels,additionalAngle=pointLabelOpts.centerPointLabels?_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.P/valueCount:0;for(let i=0;i<valueCount;i++){const opts=pointLabelOpts.setContext(scale.getPointLabelContext(i));padding[i]=opts.padding;const pointPosition=scale.getPointPosition(i,scale.drawingArea+padding[i],additionalAngle),plFont=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(opts.font),textSize=(ctx=scale.ctx,font=plFont,label=scale._pointLabels[i],label=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.b)(label)?label:[label],{w:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aN)(ctx,font.string,label),h:label.length*font.lineHeight});labelSizes[i]=textSize;const angleRadians=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ay)(scale.getIndexAngle(i)+additionalAngle),angle=Math.round((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.U)(angleRadians));updateLimits(limits,orig,angleRadians,determineLimits(angle,pointPosition.x,textSize.w,0,180),determineLimits(angle,pointPosition.y,textSize.h,90,270))}var ctx,font,label;scale.setCenterPoint(orig.l-limits.l,limits.r-orig.r,orig.t-limits.t,limits.b-orig.b),scale._pointLabelItems=function buildPointLabelItems(scale,labelSizes,padding){const items=[],valueCount=scale._pointLabels.length,opts=scale.options,{centerPointLabels,display}=opts.pointLabels,itemOpts={extra:getTickBackdropHeight(opts)/2,additionalAngle:centerPointLabels?_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.P/valueCount:0};let area;for(let i=0;i<valueCount;i++){itemOpts.padding=padding[i],itemOpts.size=labelSizes[i];const item=createPointLabelItem(scale,i,itemOpts);items.push(item),"auto"===display&&(item.visible=isNotOverlapped(item,area),item.visible&&(area=item))}return items}(scale,labelSizes,padding)}function updateLimits(limits,orig,angle,hLimits,vLimits){const sin=Math.abs(Math.sin(angle)),cos=Math.abs(Math.cos(angle));let x=0,y=0;hLimits.start<orig.l?(x=(orig.l-hLimits.start)/sin,limits.l=Math.min(limits.l,orig.l-x)):hLimits.end>orig.r&&(x=(hLimits.end-orig.r)/sin,limits.r=Math.max(limits.r,orig.r+x)),vLimits.start<orig.t?(y=(orig.t-vLimits.start)/cos,limits.t=Math.min(limits.t,orig.t-y)):vLimits.end>orig.b&&(y=(vLimits.end-orig.b)/cos,limits.b=Math.max(limits.b,orig.b+y))}function createPointLabelItem(scale,index,itemOpts){const outerDistance=scale.drawingArea,{extra,additionalAngle,padding,size}=itemOpts,pointLabelPosition=scale.getPointPosition(index,outerDistance+extra+padding,additionalAngle),angle=Math.round((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.U)((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ay)(pointLabelPosition.angle+_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.H))),y=function yForAngle(y,h,angle){90===angle||270===angle?y-=h/2:(angle>270||angle<90)&&(y-=h);return y}(pointLabelPosition.y,size.h,angle),textAlign=function getTextAlignForAngle(angle){if(0===angle||180===angle)return"center";if(angle<180)return"left";return"right"}(angle),left=function leftForTextAlign(x,w,align){"right"===align?x-=w:"center"===align&&(x-=w/2);return x}(pointLabelPosition.x,size.w,textAlign);return{visible:!0,x:pointLabelPosition.x,y,textAlign,left,top:y,right:left+size.w,bottom:y+size.h}}function isNotOverlapped(item,area){if(!area)return!0;const{left,top,right,bottom}=item;return!((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.C)({x:left,y:top},area)||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.C)({x:left,y:bottom},area)||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.C)({x:right,y:top},area)||(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.C)({x:right,y:bottom},area))}function drawPointLabelBox(ctx,opts,item){const{left,top,right,bottom}=item,{backdropColor}=opts;if(!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(backdropColor)){const borderRadius=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aw)(opts.borderRadius),padding=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(opts.backdropPadding);ctx.fillStyle=backdropColor;const backdropLeft=left-padding.left,backdropTop=top-padding.top,backdropWidth=right-left+padding.width,backdropHeight=bottom-top+padding.height;Object.values(borderRadius).some((v=>0!==v))?(ctx.beginPath(),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.au)(ctx,{x:backdropLeft,y:backdropTop,w:backdropWidth,h:backdropHeight,radius:borderRadius}),ctx.fill()):ctx.fillRect(backdropLeft,backdropTop,backdropWidth,backdropHeight)}}function pathRadiusLine(scale,radius,circular,labelCount){const{ctx}=scale;if(circular)ctx.arc(scale.xCenter,scale.yCenter,radius,0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T);else{let pointPosition=scale.getPointPosition(0,radius);ctx.moveTo(pointPosition.x,pointPosition.y);for(let i=1;i<labelCount;i++)pointPosition=scale.getPointPosition(i,radius),ctx.lineTo(pointPosition.x,pointPosition.y)}}class RadialLinearScale extends LinearScaleBase{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aL.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:label=>label,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(cfg){super(cfg),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const padding=this._padding=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(getTickBackdropHeight(this.options)/2),w=this.width=this.maxWidth-padding.width,h=this.height=this.maxHeight-padding.height;this.xCenter=Math.floor(this.left+w/2+padding.left),this.yCenter=Math.floor(this.top+h/2+padding.top),this.drawingArea=Math.floor(Math.min(w,h)/2)}determineDataLimits(){const{min,max}=this.getMinMax(!1);this.min=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(min)&&!isNaN(min)?min:0,this.max=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(max)&&!isNaN(max)?max:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}generateTickLabels(ticks){LinearScaleBase.prototype.generateTickLabels.call(this,ticks),this._pointLabels=this.getLabels().map(((value,index)=>{const label=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(this.options.pointLabels.callback,[value,index],this);return label||0===label?label:""})).filter(((v,i)=>this.chart.getDataVisibility(i)))}fit(){const opts=this.options;opts.display&&opts.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(leftMovement,rightMovement,topMovement,bottomMovement){this.xCenter+=Math.floor((leftMovement-rightMovement)/2),this.yCenter+=Math.floor((topMovement-bottomMovement)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(leftMovement,rightMovement,topMovement,bottomMovement))}getIndexAngle(index){const angleMultiplier=_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.T/(this._pointLabels.length||1),startAngle=this.options.startAngle||0;return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ay)(index*angleMultiplier+(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.t)(startAngle))}getDistanceFromCenterForValue(value){if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(value))return NaN;const scalingFactor=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-value)*scalingFactor:(value-this.min)*scalingFactor}getValueForDistanceFromCenter(distance){if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(distance))return NaN;const scaledDistance=distance/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-scaledDistance:this.min+scaledDistance}getPointLabelContext(index){const pointLabels=this._pointLabels||[];if(index>=0&&index<pointLabels.length){const pointLabel=pointLabels[index];return function createPointLabelContext(parent,index,label){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.j)(parent,{label,index,type:"pointLabel"})}(this.getContext(),index,pointLabel)}}getPointPosition(index,distanceFromCenter,additionalAngle=0){const angle=this.getIndexAngle(index)-_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.H+additionalAngle;return{x:Math.cos(angle)*distanceFromCenter+this.xCenter,y:Math.sin(angle)*distanceFromCenter+this.yCenter,angle}}getPointPositionForValue(index,value){return this.getPointPosition(index,this.getDistanceFromCenterForValue(value))}getBasePosition(index){return this.getPointPositionForValue(index||0,this.getBaseValue())}getPointLabelPosition(index){const{left,top,right,bottom}=this._pointLabelItems[index];return{left,top,right,bottom}}drawBackground(){const{backgroundColor,grid:{circular}}=this.options;if(backgroundColor){const ctx=this.ctx;ctx.save(),ctx.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),circular,this._pointLabels.length),ctx.closePath(),ctx.fillStyle=backgroundColor,ctx.fill(),ctx.restore()}}drawGrid(){const ctx=this.ctx,opts=this.options,{angleLines,grid,border}=opts,labelCount=this._pointLabels.length;let i,offset,position;if(opts.pointLabels.display&&function drawPointLabels(scale,labelCount){const{ctx,options:{pointLabels}}=scale;for(let i=labelCount-1;i>=0;i--){const item=scale._pointLabelItems[i];if(!item.visible)continue;const optsAtIndex=pointLabels.setContext(scale.getPointLabelContext(i));drawPointLabelBox(ctx,optsAtIndex,item);const plFont=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(optsAtIndex.font),{x,y,textAlign}=item;(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Z)(ctx,scale._pointLabels[i],x,y+plFont.lineHeight/2,plFont,{color:optsAtIndex.color,textAlign,textBaseline:"middle"})}}(this,labelCount),grid.display&&this.ticks.forEach(((tick,index)=>{if(0!==index){offset=this.getDistanceFromCenterForValue(tick.value);const context=this.getContext(index),optsAtIndex=grid.setContext(context),optsAtIndexBorder=border.setContext(context);!function drawRadiusLine(scale,gridLineOpts,radius,labelCount,borderOpts){const ctx=scale.ctx,circular=gridLineOpts.circular,{color,lineWidth}=gridLineOpts;!circular&&!labelCount||!color||!lineWidth||radius<0||(ctx.save(),ctx.strokeStyle=color,ctx.lineWidth=lineWidth,ctx.setLineDash(borderOpts.dash),ctx.lineDashOffset=borderOpts.dashOffset,ctx.beginPath(),pathRadiusLine(scale,radius,circular,labelCount),ctx.closePath(),ctx.stroke(),ctx.restore())}(this,optsAtIndex,offset,labelCount,optsAtIndexBorder)}})),angleLines.display){for(ctx.save(),i=labelCount-1;i>=0;i--){const optsAtIndex=angleLines.setContext(this.getPointLabelContext(i)),{color,lineWidth}=optsAtIndex;lineWidth&&color&&(ctx.lineWidth=lineWidth,ctx.strokeStyle=color,ctx.setLineDash(optsAtIndex.borderDash),ctx.lineDashOffset=optsAtIndex.borderDashOffset,offset=this.getDistanceFromCenterForValue(opts.ticks.reverse?this.min:this.max),position=this.getPointPosition(i,offset),ctx.beginPath(),ctx.moveTo(this.xCenter,this.yCenter),ctx.lineTo(position.x,position.y),ctx.stroke())}ctx.restore()}}drawBorder(){}drawLabels(){const ctx=this.ctx,opts=this.options,tickOpts=opts.ticks;if(!tickOpts.display)return;const startAngle=this.getIndexAngle(0);let offset,width;ctx.save(),ctx.translate(this.xCenter,this.yCenter),ctx.rotate(startAngle),ctx.textAlign="center",ctx.textBaseline="middle",this.ticks.forEach(((tick,index)=>{if(0===index&&!opts.reverse)return;const optsAtIndex=tickOpts.setContext(this.getContext(index)),tickFont=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.a0)(optsAtIndex.font);if(offset=this.getDistanceFromCenterForValue(this.ticks[index].value),optsAtIndex.showLabelBackdrop){ctx.font=tickFont.string,width=ctx.measureText(tick.label).width,ctx.fillStyle=optsAtIndex.backdropColor;const padding=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.E)(optsAtIndex.backdropPadding);ctx.fillRect(-width/2-padding.left,-offset-tickFont.size/2-padding.top,width+padding.width,tickFont.size+padding.height)}(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Z)(ctx,tick.label,0,-offset,tickFont,{color:optsAtIndex.color,strokeColor:optsAtIndex.textStrokeColor,strokeWidth:optsAtIndex.textStrokeWidth})})),ctx.restore()}drawTitle(){}}const INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(a,b){return a-b}function parse(scale,input){if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(input))return null;const adapter=scale._adapter,{parser,round,isoWeekday}=scale._parseOpts;let value=input;return"function"==typeof parser&&(value=parser(value)),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(value)||(value="string"==typeof parser?adapter.parse(value,parser):adapter.parse(value)),null===value?null:(round&&(value="week"!==round||!(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.x)(isoWeekday)&&!0!==isoWeekday?adapter.startOf(value,round):adapter.startOf(value,"isoWeek",isoWeekday)),+value)}function determineUnitForAutoTicks(minUnit,min,max,capacity){const ilen=UNITS.length;for(let i=UNITS.indexOf(minUnit);i<ilen-1;++i){const interval=INTERVALS[UNITS[i]],factor=interval.steps?interval.steps:Number.MAX_SAFE_INTEGER;if(interval.common&&Math.ceil((max-min)/(factor*interval.size))<=capacity)return UNITS[i]}return UNITS[ilen-1]}function addTick(ticks,time,timestamps){if(timestamps){if(timestamps.length){const{lo,hi}=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aP)(timestamps,time);ticks[timestamps[lo]>=time?timestamps[lo]:timestamps[hi]]=!0}}else ticks[time]=!0}function ticksFromTimestamps(scale,values,majorUnit){const ticks=[],map={},ilen=values.length;let i,value;for(i=0;i<ilen;++i)value=values[i],map[value]=i,ticks.push({value,major:!1});return 0!==ilen&&majorUnit?function setMajorTicks(scale,ticks,map,majorUnit){const adapter=scale._adapter,first=+adapter.startOf(ticks[0].value,majorUnit),last=ticks[ticks.length-1].value;let major,index;for(major=first;major<=last;major=+adapter.add(major,1,majorUnit))index=map[major],index>=0&&(ticks[index].major=!0);return ticks}(scale,ticks,map,majorUnit):ticks}class TimeScale extends Scale{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(props){super(props),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(scaleOpts,opts={}){const time=scaleOpts.time||(scaleOpts.time={}),adapter=this._adapter=new adapters._date(scaleOpts.adapters.date);adapter.init(opts),(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.ab)(time.displayFormats,adapter.formats()),this._parseOpts={parser:time.parser,round:time.round,isoWeekday:time.isoWeekday},super.init(scaleOpts),this._normalized=opts.normalized}parse(raw,index){return void 0===raw?null:parse(this,raw)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const options=this.options,adapter=this._adapter,unit=options.time.unit||"day";let{min,max,minDefined,maxDefined}=this.getUserBounds();function _applyBounds(bounds){minDefined||isNaN(bounds.min)||(min=Math.min(min,bounds.min)),maxDefined||isNaN(bounds.max)||(max=Math.max(max,bounds.max))}minDefined&&maxDefined||(_applyBounds(this._getLabelBounds()),"ticks"===options.bounds&&"labels"===options.ticks.source||_applyBounds(this.getMinMax(!1))),min=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(min)&&!isNaN(min)?min:+adapter.startOf(Date.now(),unit),max=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.g)(max)&&!isNaN(max)?max:+adapter.endOf(Date.now(),unit)+1,this.min=Math.min(min,max-1),this.max=Math.max(min+1,max)}_getLabelBounds(){const arr=this.getLabelTimestamps();let min=Number.POSITIVE_INFINITY,max=Number.NEGATIVE_INFINITY;return arr.length&&(min=arr[0],max=arr[arr.length-1]),{min,max}}buildTicks(){const options=this.options,timeOpts=options.time,tickOpts=options.ticks,timestamps="labels"===tickOpts.source?this.getLabelTimestamps():this._generate();"ticks"===options.bounds&&timestamps.length&&(this.min=this._userMin||timestamps[0],this.max=this._userMax||timestamps[timestamps.length-1]);const min=this.min,max=this.max,ticks=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.aO)(timestamps,min,max);return this._unit=timeOpts.unit||(tickOpts.autoSkip?determineUnitForAutoTicks(timeOpts.minUnit,this.min,this.max,this._getLabelCapacity(min)):function determineUnitForFormatting(scale,numTicks,minUnit,min,max){for(let i=UNITS.length-1;i>=UNITS.indexOf(minUnit);i--){const unit=UNITS[i];if(INTERVALS[unit].common&&scale._adapter.diff(max,min,unit)>=numTicks-1)return unit}return UNITS[minUnit?UNITS.indexOf(minUnit):0]}(this,ticks.length,timeOpts.minUnit,this.min,this.max)),this._majorUnit=tickOpts.major.enabled&&"year"!==this._unit?function determineMajorUnit(unit){for(let i=UNITS.indexOf(unit)+1,ilen=UNITS.length;i<ilen;++i)if(INTERVALS[UNITS[i]].common)return UNITS[i]}(this._unit):void 0,this.initOffsets(timestamps),options.reverse&&ticks.reverse(),ticksFromTimestamps(this,ticks,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((tick=>+tick.value)))}initOffsets(timestamps=[]){let first,last,start=0,end=0;this.options.offset&&timestamps.length&&(first=this.getDecimalForValue(timestamps[0]),start=1===timestamps.length?1-first:(this.getDecimalForValue(timestamps[1])-first)/2,last=this.getDecimalForValue(timestamps[timestamps.length-1]),end=1===timestamps.length?last:(last-this.getDecimalForValue(timestamps[timestamps.length-2]))/2);const limit=timestamps.length<3?.5:.25;start=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)(start,0,limit),end=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)(end,0,limit),this._offsets={start,end,factor:1/(start+1+end)}}_generate(){const adapter=this._adapter,min=this.min,max=this.max,options=this.options,timeOpts=options.time,minor=timeOpts.unit||determineUnitForAutoTicks(timeOpts.minUnit,min,max,this._getLabelCapacity(min)),stepSize=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(options.ticks.stepSize,1),weekday="week"===minor&&timeOpts.isoWeekday,hasWeekday=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.x)(weekday)||!0===weekday,ticks={};let time,count,first=min;if(hasWeekday&&(first=+adapter.startOf(first,"isoWeek",weekday)),first=+adapter.startOf(first,hasWeekday?"day":minor),adapter.diff(max,min,minor)>1e5*stepSize)throw new Error(min+" and "+max+" are too far apart with stepSize of "+stepSize+" "+minor);const timestamps="data"===options.ticks.source&&this.getDataTimestamps();for(time=first,count=0;time<max;time=+adapter.add(time,stepSize,minor),count++)addTick(ticks,time,timestamps);return time!==max&&"ticks"!==options.bounds&&1!==count||addTick(ticks,time,timestamps),Object.keys(ticks).sort(sorter).map((x=>+x))}getLabelForValue(value){const adapter=this._adapter,timeOpts=this.options.time;return timeOpts.tooltipFormat?adapter.format(value,timeOpts.tooltipFormat):adapter.format(value,timeOpts.displayFormats.datetime)}format(value,format){const formats=this.options.time.displayFormats,unit=this._unit,fmt=format||formats[unit];return this._adapter.format(value,fmt)}_tickFormatFunction(time,index,ticks,format){const options=this.options,formatter=options.ticks.callback;if(formatter)return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.Q)(formatter,[time,index,ticks],this);const formats=options.time.displayFormats,unit=this._unit,majorUnit=this._majorUnit,minorFormat=unit&&formats[unit],majorFormat=majorUnit&&formats[majorUnit],tick=ticks[index],major=majorUnit&&majorFormat&&tick&&tick.major;return this._adapter.format(time,format||(major?majorFormat:minorFormat))}generateTickLabels(ticks){let i,ilen,tick;for(i=0,ilen=ticks.length;i<ilen;++i)tick=ticks[i],tick.label=this._tickFormatFunction(tick.value,i,ticks)}getDecimalForValue(value){return null===value?NaN:(value-this.min)/(this.max-this.min)}getPixelForValue(value){const offsets=this._offsets,pos=this.getDecimalForValue(value);return this.getPixelForDecimal((offsets.start+pos)*offsets.factor)}getValueForPixel(pixel){const offsets=this._offsets,pos=this.getDecimalForPixel(pixel)/offsets.factor-offsets.end;return this.min+pos*(this.max-this.min)}_getLabelSize(label){const ticksOpts=this.options.ticks,tickLabelWidth=this.ctx.measureText(label).width,angle=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.t)(this.isHorizontal()?ticksOpts.maxRotation:ticksOpts.minRotation),cosRotation=Math.cos(angle),sinRotation=Math.sin(angle),tickFontSize=this._resolveTickFontOptions(0).size;return{w:tickLabelWidth*cosRotation+tickFontSize*sinRotation,h:tickLabelWidth*sinRotation+tickFontSize*cosRotation}}_getLabelCapacity(exampleTime){const timeOpts=this.options.time,displayFormats=timeOpts.displayFormats,format=displayFormats[timeOpts.unit]||displayFormats.millisecond,exampleLabel=this._tickFormatFunction(exampleTime,0,ticksFromTimestamps(this,[exampleTime],this._majorUnit),format),size=this._getLabelSize(exampleLabel),capacity=Math.floor(this.isHorizontal()?this.width/size.w:this.height/size.h)-1;return capacity>0?capacity:1}getDataTimestamps(){let i,ilen,timestamps=this._cache.data||[];if(timestamps.length)return timestamps;const metas=this.getMatchingVisibleMetas();if(this._normalized&&metas.length)return this._cache.data=metas[0].controller.getAllParsedValues(this);for(i=0,ilen=metas.length;i<ilen;++i)timestamps=timestamps.concat(metas[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(timestamps)}getLabelTimestamps(){const timestamps=this._cache.labels||[];let i,ilen;if(timestamps.length)return timestamps;const labels=this.getLabels();for(i=0,ilen=labels.length;i<ilen;++i)timestamps.push(parse(this,labels[i]));return this._cache.labels=this._normalized?timestamps:this.normalize(timestamps)}normalize(values){return(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__._)(values.sort(sorter))}}function interpolate(table,val,reverse){let prevSource,nextSource,prevTarget,nextTarget,lo=0,hi=table.length-1;reverse?(val>=table[lo].pos&&val<=table[hi].pos&&({lo,hi}=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.B)(table,"pos",val)),({pos:prevSource,time:prevTarget}=table[lo]),({pos:nextSource,time:nextTarget}=table[hi])):(val>=table[lo].time&&val<=table[hi].time&&({lo,hi}=(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.B)(table,"time",val)),({time:prevSource,pos:prevTarget}=table[lo]),({time:nextSource,pos:nextTarget}=table[hi]));const span=nextSource-prevSource;return span?prevTarget+(nextTarget-prevTarget)*(val-prevSource)/span:prevTarget}var scales=Object.freeze({__proto__:null,CategoryScale:class CategoryScale extends Scale{static id="category";static defaults={ticks:{callback:_getLabelForValue}};constructor(cfg){super(cfg),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(scaleOptions){const added=this._addedLabels;if(added.length){const labels=this.getLabels();for(const{index,label}of added)labels[index]===label&&labels.splice(index,1);this._addedLabels=[]}super.init(scaleOptions)}parse(raw,index){if((0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.k)(raw))return null;const labels=this.getLabels();return((index,max)=>null===index?null:(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.S)(Math.round(index),0,max))(index=isFinite(index)&&labels[index]===raw?index:findOrAddLabel(labels,raw,(0,_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_0__.v)(index,raw),this._addedLabels),labels.length-1)}determineDataLimits(){const{minDefined,maxDefined}=this.getUserBounds();let{min,max}=this.getMinMax(!0);"ticks"===this.options.bounds&&(minDefined||(min=0),maxDefined||(max=this.getLabels().length-1)),this.min=min,this.max=max}buildTicks(){const min=this.min,max=this.max,offset=this.options.offset,ticks=[];let labels=this.getLabels();labels=0===min&&max===labels.length-1?labels:labels.slice(min,max+1),this._valueRange=Math.max(labels.length-(offset?0:1),1),this._startValue=this.min-(offset?.5:0);for(let value=min;value<=max;value++)ticks.push({value});return ticks}getLabelForValue(value){return _getLabelForValue.call(this,value)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(value){return"number"!=typeof value&&(value=this.parse(value)),null===value?NaN:this.getPixelForDecimal((value-this._startValue)/this._valueRange)}getPixelForTick(index){const ticks=this.ticks;return index<0||index>ticks.length-1?null:this.getPixelForValue(ticks[index].value)}getValueForPixel(pixel){return Math.round(this._startValue+this.getDecimalForPixel(pixel)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale,LogarithmicScale,RadialLinearScale,TimeScale,TimeSeriesScale:class TimeSeriesScale extends TimeScale{static id="timeseries";static defaults=TimeScale.defaults;constructor(props){super(props),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const timestamps=this._getTimestampsForTable(),table=this._table=this.buildLookupTable(timestamps);this._minPos=interpolate(table,this.min),this._tableRange=interpolate(table,this.max)-this._minPos,super.initOffsets(timestamps)}buildLookupTable(timestamps){const{min,max}=this,items=[],table=[];let i,ilen,prev,curr,next;for(i=0,ilen=timestamps.length;i<ilen;++i)curr=timestamps[i],curr>=min&&curr<=max&&items.push(curr);if(items.length<2)return[{time:min,pos:0},{time:max,pos:1}];for(i=0,ilen=items.length;i<ilen;++i)next=items[i+1],prev=items[i-1],curr=items[i],Math.round((next+prev)/2)!==curr&&table.push({time:curr,pos:i/(ilen-1)});return table}_generate(){const min=this.min,max=this.max;let timestamps=super.getDataTimestamps();return timestamps.includes(min)&&timestamps.length||timestamps.splice(0,0,min),timestamps.includes(max)&&1!==timestamps.length||timestamps.push(max),timestamps.sort(((a,b)=>a-b))}_getTimestampsForTable(){let timestamps=this._cache.all||[];if(timestamps.length)return timestamps;const data=this.getDataTimestamps(),label=this.getLabelTimestamps();return timestamps=data.length&&label.length?this.normalize(data.concat(label)):data.length?data:label,timestamps=this._cache.all=timestamps,timestamps}getDecimalForValue(value){return(interpolate(this._table,value)-this._minPos)/this._tableRange}getValueForPixel(pixel){const offsets=this._offsets,decimal=this.getDecimalForPixel(pixel)/offsets.factor-offsets.end;return interpolate(this._table,decimal*this._tableRange+this._minPos,!0)}}});const registerables=[controllers,elements,plugins,scales]},"./node_modules/chart.js/dist/chunks/helpers.segment.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function round(v){return v+.5|0}__webpack_require__.d(__webpack_exports__,{$:()=>unclipArea,A:()=>_rlookupByKey,B:()=>_lookupByKey,C:()=>_isPointInArea,D:()=>getAngleFromPoint,E:()=>toPadding,F:()=>each,G:()=>getMaximumSize,H:()=>HALF_PI,I:()=>_getParentNode,J:()=>readUsedSize,K:()=>supportsEventListenerOptions,L:()=>throttled,M:()=>_isDomSupported,N:()=>_factorize,O:()=>finiteOrDefault,P:()=>PI,Q:()=>callback,R:()=>_addGrace,S:()=>_limitValue,T:()=>TAU,U:()=>toDegrees,V:()=>_measureText,W:()=>_int16Range,X:()=>_alignPixel,Y:()=>clipArea,Z:()=>renderText,_:()=>_arrayUnique,a:()=>resolve,a0:()=>toFont,a1:()=>_toLeftRightCenter,a2:()=>_alignStartEnd,a3:()=>overrides,a4:()=>merge,a5:()=>_capitalize,a6:()=>descriptors,a7:()=>isFunction,a8:()=>_attachContext,a9:()=>_createResolver,aA:()=>overrideTextDirection,aB:()=>_textX,aC:()=>restoreTextDirection,aD:()=>drawPointLegend,aE:()=>distanceBetweenPoints,aF:()=>noop,aG:()=>_setMinAndMaxByKey,aH:()=>niceNum,aI:()=>almostWhole,aJ:()=>almostEquals,aK:()=>_decimalPlaces,aL:()=>Ticks,aM:()=>log10,aN:()=>_longestText,aO:()=>_filterBetween,aP:()=>_lookup,aa:()=>_descriptors,ab:()=>mergeIf,ac:()=>uid,ad:()=>debounce,ae:()=>retinaScale,af:()=>clearCanvas,ag:()=>setsEqual,ah:()=>_elementsEqual,ai:()=>_isClickEvent,aj:()=>_isBetween,ak:()=>_readValueToProps,al:()=>_updateBezierControlPoints,am:()=>_computeSegments,an:()=>_boundSegments,ao:()=>_steppedInterpolation,ap:()=>_bezierInterpolation,aq:()=>_pointInLine,ar:()=>_steppedLineTo,as:()=>_bezierCurveTo,at:()=>drawPoint,au:()=>addRoundedRectPath,av:()=>toTRBL,aw:()=>toTRBLCorners,ax:()=>_boundSegment,ay:()=>_normalizeAngle,az:()=>getRtlAdapter,b:()=>isArray,b3:()=>RAD_PER_DEG,b4:()=>QUARTER_PI,b5:()=>TWO_THIRDS_PI,c:()=>color,d:()=>defaults,e:()=>effects,f:()=>resolveObjectKey,g:()=>isNumberFinite,h:()=>defined,i:()=>isObject,j:()=>createContext,k:()=>isNullOrUndef,l:()=>listenArrayEvents,m:()=>toPercentage,n:()=>toDimension,o:()=>formatNumber,p:()=>_angleBetween,q:()=>_getStartAndCountOfVisiblePoints,r:()=>requestAnimFrame,s:()=>sign,t:()=>toRadians,u:()=>unlistenArrayEvents,v:()=>valueOrDefault,w:()=>_scaleRangesChanged,x:()=>isNumber,y:()=>_parseObjectDataRadialScale,z:()=>getRelativePosition});const lim=(v,l,h)=>Math.max(Math.min(v,h),l);function p2b(v){return lim(round(2.55*v),0,255)}function n2b(v){return lim(round(255*v),0,255)}function b2n(v){return lim(round(v/2.55)/100,0,1)}function n2p(v){return lim(round(100*v),0,100)}const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex=[..."0123456789ABCDEF"],h1=b=>hex[15&b],h2=b=>hex[(240&b)>>4]+hex[15&b],eq=b=>(240&b)>>4==(15&b);function hexString(v){var f=(v=>eq(v.r)&&eq(v.g)&&eq(v.b)&&eq(v.a))(v)?h1:h2;return v?"#"+f(v.r)+f(v.g)+f(v.b)+((a,f)=>a<255?f(a):"")(v.a,f):void 0}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(h,s,l){const a=s*Math.min(l,1-l),f=(n,k=(n+h/30)%12)=>l-a*Math.max(Math.min(k-3,9-k,1),-1);return[f(0),f(8),f(4)]}function hsv2rgbn(h,s,v){const f=(n,k=(n+h/60)%6)=>v-v*s*Math.max(Math.min(k,4-k,1),0);return[f(5),f(3),f(1)]}function hwb2rgbn(h,w,b){const rgb=hsl2rgbn(h,1,.5);let i;for(w+b>1&&(i=1/(w+b),w*=i,b*=i),i=0;i<3;i++)rgb[i]*=1-w-b,rgb[i]+=w;return rgb}function rgb2hsl(v){const r=v.r/255,g=v.g/255,b=v.b/255,max=Math.max(r,g,b),min=Math.min(r,g,b),l=(max+min)/2;let h,s,d;return max!==min&&(d=max-min,s=l>.5?d/(2-max-min):d/(max+min),h=function hueValue(r,g,b,d,max){return r===max?(g-b)/d+(g<b?6:0):g===max?(b-r)/d+2:(r-g)/d+4}(r,g,b,d,max),h=60*h+.5),[0|h,s||0,l]}function calln(f,a,b,c){return(Array.isArray(a)?f(a[0],a[1],a[2]):f(a,b,c)).map(n2b)}function hsl2rgb(h,s,l){return calln(hsl2rgbn,h,s,l)}function hue(h){return(h%360+360)%360}function hueParse(str){const m=HUE_RE.exec(str);let v,a=255;if(!m)return;m[5]!==v&&(a=m[6]?p2b(+m[5]):n2b(+m[5]));const h=hue(+m[2]),p1=+m[3]/100,p2=+m[4]/100;return v="hwb"===m[1]?function hwb2rgb(h,w,b){return calln(hwb2rgbn,h,w,b)}(h,p1,p2):"hsv"===m[1]?function hsv2rgb(h,s,v){return calln(hsv2rgbn,h,s,v)}(h,p1,p2):hsl2rgb(h,p1,p2),{r:v[0],g:v[1],b:v[2],a}}const map={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let names;function nameParse(str){names||(names=function unpack(){const unpacked={},keys=Object.keys(names$1),tkeys=Object.keys(map);let i,j,k,ok,nk;for(i=0;i<keys.length;i++){for(ok=nk=keys[i],j=0;j<tkeys.length;j++)k=tkeys[j],nk=nk.replace(k,map[k]);k=parseInt(names$1[ok],16),unpacked[nk]=[k>>16&255,k>>8&255,255&k]}return unpacked}(),names.transparent=[0,0,0,0]);const a=names[str.toLowerCase()];return a&&{r:a[0],g:a[1],b:a[2],a:4===a.length?a[3]:255}}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const to=v=>v<=.0031308?12.92*v:1.055*Math.pow(v,1/2.4)-.055,from=v=>v<=.04045?v/12.92:Math.pow((v+.055)/1.055,2.4);function modHSL(v,i,ratio){if(v){let tmp=rgb2hsl(v);tmp[i]=Math.max(0,Math.min(tmp[i]+tmp[i]*ratio,0===i?360:1)),tmp=hsl2rgb(tmp),v.r=tmp[0],v.g=tmp[1],v.b=tmp[2]}}function clone(v,proto){return v?Object.assign(proto||{},v):v}function fromObject(input){var v={r:0,g:0,b:0,a:255};return Array.isArray(input)?input.length>=3&&(v={r:input[0],g:input[1],b:input[2],a:255},input.length>3&&(v.a=n2b(input[3]))):(v=clone(input,{r:0,g:0,b:0,a:1})).a=n2b(v.a),v}function functionParse(str){return"r"===str.charAt(0)?function rgbParse(str){const m=RGB_RE.exec(str);let r,g,b,a=255;if(m){if(m[7]!==r){const v=+m[7];a=m[8]?p2b(v):lim(255*v,0,255)}return r=+m[1],g=+m[3],b=+m[5],r=255&(m[2]?p2b(r):lim(r,0,255)),g=255&(m[4]?p2b(g):lim(g,0,255)),b=255&(m[6]?p2b(b):lim(b,0,255)),{r,g,b,a}}}(str):hueParse(str)}class Color{constructor(input){if(input instanceof Color)return input;const type=typeof input;let v;"object"===type?v=fromObject(input):"string"===type&&(v=function hexParse(str){var ret,len=str.length;return"#"===str[0]&&(4===len||5===len?ret={r:255&17*map$1[str[1]],g:255&17*map$1[str[2]],b:255&17*map$1[str[3]],a:5===len?17*map$1[str[4]]:255}:7!==len&&9!==len||(ret={r:map$1[str[1]]<<4|map$1[str[2]],g:map$1[str[3]]<<4|map$1[str[4]],b:map$1[str[5]]<<4|map$1[str[6]],a:9===len?map$1[str[7]]<<4|map$1[str[8]]:255})),ret}(input)||nameParse(input)||functionParse(input)),this._rgb=v,this._valid=!!v}get valid(){return this._valid}get rgb(){var v=clone(this._rgb);return v&&(v.a=b2n(v.a)),v}set rgb(obj){this._rgb=fromObject(obj)}rgbString(){return this._valid?function rgbString(v){return v&&(v.a<255?`rgba(${v.r}, ${v.g}, ${v.b}, ${b2n(v.a)})`:`rgb(${v.r}, ${v.g}, ${v.b})`)}(this._rgb):void 0}hexString(){return this._valid?hexString(this._rgb):void 0}hslString(){return this._valid?function hslString(v){if(!v)return;const a=rgb2hsl(v),h=a[0],s=n2p(a[1]),l=n2p(a[2]);return v.a<255?`hsla(${h}, ${s}%, ${l}%, ${b2n(v.a)})`:`hsl(${h}, ${s}%, ${l}%)`}(this._rgb):void 0}mix(color,weight){if(color){const c1=this.rgb,c2=color.rgb;let w2;const p=weight===w2?.5:weight,w=2*p-1,a=c1.a-c2.a,w1=((w*a==-1?w:(w+a)/(1+w*a))+1)/2;w2=1-w1,c1.r=255&w1*c1.r+w2*c2.r+.5,c1.g=255&w1*c1.g+w2*c2.g+.5,c1.b=255&w1*c1.b+w2*c2.b+.5,c1.a=p*c1.a+(1-p)*c2.a,this.rgb=c1}return this}interpolate(color,t){return color&&(this._rgb=function interpolate(rgb1,rgb2,t){const r=from(b2n(rgb1.r)),g=from(b2n(rgb1.g)),b=from(b2n(rgb1.b));return{r:n2b(to(r+t*(from(b2n(rgb2.r))-r))),g:n2b(to(g+t*(from(b2n(rgb2.g))-g))),b:n2b(to(b+t*(from(b2n(rgb2.b))-b))),a:rgb1.a+t*(rgb2.a-rgb1.a)}}(this._rgb,color._rgb,t)),this}clone(){return new Color(this.rgb)}alpha(a){return this._rgb.a=n2b(a),this}clearer(ratio){return this._rgb.a*=1-ratio,this}greyscale(){const rgb=this._rgb,val=round(.3*rgb.r+.59*rgb.g+.11*rgb.b);return rgb.r=rgb.g=rgb.b=val,this}opaquer(ratio){return this._rgb.a*=1+ratio,this}negate(){const v=this._rgb;return v.r=255-v.r,v.g=255-v.g,v.b=255-v.b,this}lighten(ratio){return modHSL(this._rgb,2,ratio),this}darken(ratio){return modHSL(this._rgb,2,-ratio),this}saturate(ratio){return modHSL(this._rgb,1,ratio),this}desaturate(ratio){return modHSL(this._rgb,1,-ratio),this}rotate(deg){return function rotate(v,deg){var h=rgb2hsl(v);h[0]=hue(h[0]+deg),h=hsl2rgb(h),v.r=h[0],v.g=h[1],v.b=h[2]}(this._rgb,deg),this}}function noop(){}const uid=(()=>{let id=0;return()=>id++})();function isNullOrUndef(value){return null==value}function isArray(value){if(Array.isArray&&Array.isArray(value))return!0;const type=Object.prototype.toString.call(value);return"[object"===type.slice(0,7)&&"Array]"===type.slice(-6)}function isObject(value){return null!==value&&"[object Object]"===Object.prototype.toString.call(value)}function isNumberFinite(value){return("number"==typeof value||value instanceof Number)&&isFinite(+value)}function finiteOrDefault(value,defaultValue){return isNumberFinite(value)?value:defaultValue}function valueOrDefault(value,defaultValue){return void 0===value?defaultValue:value}const toPercentage=(value,dimension)=>"string"==typeof value&&value.endsWith("%")?parseFloat(value)/100:+value/dimension,toDimension=(value,dimension)=>"string"==typeof value&&value.endsWith("%")?parseFloat(value)/100*dimension:+value;function callback(fn,args,thisArg){if(fn&&"function"==typeof fn.call)return fn.apply(thisArg,args)}function each(loopable,fn,thisArg,reverse){let i,len,keys;if(isArray(loopable))if(len=loopable.length,reverse)for(i=len-1;i>=0;i--)fn.call(thisArg,loopable[i],i);else for(i=0;i<len;i++)fn.call(thisArg,loopable[i],i);else if(isObject(loopable))for(keys=Object.keys(loopable),len=keys.length,i=0;i<len;i++)fn.call(thisArg,loopable[keys[i]],keys[i])}function _elementsEqual(a0,a1){let i,ilen,v0,v1;if(!a0||!a1||a0.length!==a1.length)return!1;for(i=0,ilen=a0.length;i<ilen;++i)if(v0=a0[i],v1=a1[i],v0.datasetIndex!==v1.datasetIndex||v0.index!==v1.index)return!1;return!0}function helpers_segment_clone(source){if(isArray(source))return source.map(helpers_segment_clone);if(isObject(source)){const target=Object.create(null),keys=Object.keys(source),klen=keys.length;let k=0;for(;k<klen;++k)target[keys[k]]=helpers_segment_clone(source[keys[k]]);return target}return source}function isValidKey(key){return-1===["__proto__","prototype","constructor"].indexOf(key)}function _merger(key,target,source,options){if(!isValidKey(key))return;const tval=target[key],sval=source[key];isObject(tval)&&isObject(sval)?merge(tval,sval,options):target[key]=helpers_segment_clone(sval)}function merge(target,source,options){const sources=isArray(source)?source:[source],ilen=sources.length;if(!isObject(target))return target;const merger=(options=options||{}).merger||_merger;let current;for(let i=0;i<ilen;++i){if(current=sources[i],!isObject(current))continue;const keys=Object.keys(current);for(let k=0,klen=keys.length;k<klen;++k)merger(keys[k],target,current,options)}return target}function mergeIf(target,source){return merge(target,source,{merger:_mergerIf})}function _mergerIf(key,target,source){if(!isValidKey(key))return;const tval=target[key],sval=source[key];isObject(tval)&&isObject(sval)?mergeIf(tval,sval):Object.prototype.hasOwnProperty.call(target,key)||(target[key]=helpers_segment_clone(sval))}const keyResolvers={"":v=>v,x:o=>o.x,y:o=>o.y};function resolveObjectKey(obj,key){const resolver=keyResolvers[key]||(keyResolvers[key]=function _getKeyResolver(key){const keys=function _splitKey(key){const parts=key.split("."),keys=[];let tmp="";for(const part of parts)tmp+=part,tmp.endsWith("\\")?tmp=tmp.slice(0,-1)+".":(keys.push(tmp),tmp="");return keys}(key);return obj=>{for(const k of keys){if(""===k)break;obj=obj&&obj[k]}return obj}}(key));return resolver(obj)}function _capitalize(str){return str.charAt(0).toUpperCase()+str.slice(1)}const defined=value=>void 0!==value,isFunction=value=>"function"==typeof value,setsEqual=(a,b)=>{if(a.size!==b.size)return!1;for(const item of a)if(!b.has(item))return!1;return!0};function _isClickEvent(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}const PI=Math.PI,TAU=2*PI,PITAU=TAU+PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=2*PI/3,log10=Math.log10,sign=Math.sign;function almostEquals(x,y,epsilon){return Math.abs(x-y)<epsilon}function niceNum(range){const roundedRange=Math.round(range);range=almostEquals(range,roundedRange,range/1e3)?roundedRange:range;const niceRange=Math.pow(10,Math.floor(log10(range))),fraction=range/niceRange;return(fraction<=1?1:fraction<=2?2:fraction<=5?5:10)*niceRange}function _factorize(value){const result=[],sqrt=Math.sqrt(value);let i;for(i=1;i<sqrt;i++)value%i==0&&(result.push(i),result.push(value/i));return sqrt===(0|sqrt)&&result.push(sqrt),result.sort(((a,b)=>a-b)).pop(),result}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function almostWhole(x,epsilon){const rounded=Math.round(x);return rounded-epsilon<=x&&rounded+epsilon>=x}function _setMinAndMaxByKey(array,target,property){let i,ilen,value;for(i=0,ilen=array.length;i<ilen;i++)value=array[i][property],isNaN(value)||(target.min=Math.min(target.min,value),target.max=Math.max(target.max,value))}function toRadians(degrees){return degrees*(PI/180)}function toDegrees(radians){return radians*(180/PI)}function _decimalPlaces(x){if(!isNumberFinite(x))return;let e=1,p=0;for(;Math.round(x*e)/e!==x;)e*=10,p++;return p}function getAngleFromPoint(centrePoint,anglePoint){const distanceFromXCenter=anglePoint.x-centrePoint.x,distanceFromYCenter=anglePoint.y-centrePoint.y,radialDistanceFromCenter=Math.sqrt(distanceFromXCenter*distanceFromXCenter+distanceFromYCenter*distanceFromYCenter);let angle=Math.atan2(distanceFromYCenter,distanceFromXCenter);return angle<-.5*PI&&(angle+=TAU),{angle,distance:radialDistanceFromCenter}}function distanceBetweenPoints(pt1,pt2){return Math.sqrt(Math.pow(pt2.x-pt1.x,2)+Math.pow(pt2.y-pt1.y,2))}function _angleDiff(a,b){return(a-b+PITAU)%TAU-PI}function _normalizeAngle(a){return(a%TAU+TAU)%TAU}function _angleBetween(angle,start,end,sameAngleIsFullCircle){const a=_normalizeAngle(angle),s=_normalizeAngle(start),e=_normalizeAngle(end),angleToStart=_normalizeAngle(s-a),angleToEnd=_normalizeAngle(e-a),startToAngle=_normalizeAngle(a-s),endToAngle=_normalizeAngle(a-e);return a===s||a===e||sameAngleIsFullCircle&&s===e||angleToStart>angleToEnd&&startToAngle<endToAngle}function _limitValue(value,min,max){return Math.max(min,Math.min(max,value))}function _int16Range(value){return _limitValue(value,-32768,32767)}function _isBetween(value,start,end,epsilon=1e-6){return value>=Math.min(start,end)-epsilon&&value<=Math.max(start,end)+epsilon}function _lookup(table,value,cmp){cmp=cmp||(index=>table[index]<value);let mid,hi=table.length-1,lo=0;for(;hi-lo>1;)mid=lo+hi>>1,cmp(mid)?lo=mid:hi=mid;return{lo,hi}}const _lookupByKey=(table,key,value,last)=>_lookup(table,value,last?index=>{const ti=table[index][key];return ti<value||ti===value&&table[index+1][key]===value}:index=>table[index][key]<value),_rlookupByKey=(table,key,value)=>_lookup(table,value,(index=>table[index][key]>=value));function _filterBetween(values,min,max){let start=0,end=values.length;for(;start<end&&values[start]<min;)start++;for(;end>start&&values[end-1]>max;)end--;return start>0||end<values.length?values.slice(start,end):values}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(array,listener){array._chartjs?array._chartjs.listeners.push(listener):(Object.defineProperty(array,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[listener]}}),arrayEvents.forEach((key=>{const method="_onData"+_capitalize(key),base=array[key];Object.defineProperty(array,key,{configurable:!0,enumerable:!1,value(...args){const res=base.apply(this,args);return array._chartjs.listeners.forEach((object=>{"function"==typeof object[method]&&object[method](...args)})),res}})})))}function unlistenArrayEvents(array,listener){const stub=array._chartjs;if(!stub)return;const listeners=stub.listeners,index=listeners.indexOf(listener);-1!==index&&listeners.splice(index,1),listeners.length>0||(arrayEvents.forEach((key=>{delete array[key]})),delete array._chartjs)}function _arrayUnique(items){const set=new Set(items);return set.size===items.length?items:Array.from(set)}const requestAnimFrame="undefined"==typeof window?function(callback){return callback()}:window.requestAnimationFrame;function throttled(fn,thisArg){let argsToUse=[],ticking=!1;return function(...args){argsToUse=args,ticking||(ticking=!0,requestAnimFrame.call(window,(()=>{ticking=!1,fn.apply(thisArg,argsToUse)})))}}function debounce(fn,delay){let timeout;return function(...args){return delay?(clearTimeout(timeout),timeout=setTimeout(fn,delay,args)):fn.apply(this,args),delay}}const _toLeftRightCenter=align=>"start"===align?"left":"end"===align?"right":"center",_alignStartEnd=(align,start,end)=>"start"===align?start:"end"===align?end:(start+end)/2,_textX=(align,left,right,rtl)=>align===(rtl?"left":"right")?right:"center"===align?(left+right)/2:left;function _getStartAndCountOfVisiblePoints(meta,points,animationsDisabled){const pointCount=points.length;let start=0,count=pointCount;if(meta._sorted){const{iScale,_parsed}=meta,axis=iScale.axis,{min,max,minDefined,maxDefined}=iScale.getUserBounds();minDefined&&(start=_limitValue(Math.min(_lookupByKey(_parsed,axis,min).lo,animationsDisabled?pointCount:_lookupByKey(points,axis,iScale.getPixelForValue(min)).lo),0,pointCount-1)),count=maxDefined?_limitValue(Math.max(_lookupByKey(_parsed,iScale.axis,max,!0).hi+1,animationsDisabled?0:_lookupByKey(points,axis,iScale.getPixelForValue(max),!0).hi+1),start,pointCount)-start:pointCount-start}return{start,count}}function _scaleRangesChanged(meta){const{xScale,yScale,_scaleRanges}=meta,newRanges={xmin:xScale.min,xmax:xScale.max,ymin:yScale.min,ymax:yScale.max};if(!_scaleRanges)return meta._scaleRanges=newRanges,!0;const changed=_scaleRanges.xmin!==xScale.min||_scaleRanges.xmax!==xScale.max||_scaleRanges.ymin!==yScale.min||_scaleRanges.ymax!==yScale.max;return Object.assign(_scaleRanges,newRanges),changed}const atEdge=t=>0===t||1===t,elasticIn=(t,s,p)=>-Math.pow(2,10*(t-=1))*Math.sin((t-s)*TAU/p),elasticOut=(t,s,p)=>Math.pow(2,-10*t)*Math.sin((t-s)*TAU/p)+1,effects={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*HALF_PI),easeOutSine:t=>Math.sin(t*HALF_PI),easeInOutSine:t=>-.5*(Math.cos(PI*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>atEdge(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>atEdge(t)?t:elasticIn(t,.075,.3),easeOutElastic:t=>atEdge(t)?t:elasticOut(t,.075,.3),easeInOutElastic(t){const s=.1125;return atEdge(t)?t:t<.5?.5*elasticIn(2*t,s,.45):.5+.5*elasticOut(2*t-1,s,.45)},easeInBack(t){const s=1.70158;return t*t*((s+1)*t-s)},easeOutBack(t){const s=1.70158;return(t-=1)*t*((s+1)*t+s)+1},easeInOutBack(t){let s=1.70158;return(t/=.5)<1?t*t*((1+(s*=1.525))*t-s)*.5:.5*((t-=2)*t*((1+(s*=1.525))*t+s)+2)},easeInBounce:t=>1-effects.easeOutBounce(1-t),easeOutBounce(t){const m=7.5625,d=2.75;return t<1/d?m*t*t:t<2/d?m*(t-=1.5/d)*t+.75:t<2.5/d?m*(t-=2.25/d)*t+.9375:m*(t-=2.625/d)*t+.984375},easeInOutBounce:t=>t<.5?.5*effects.easeInBounce(2*t):.5*effects.easeOutBounce(2*t-1)+.5};function isPatternOrGradient(value){if(value&&"object"==typeof value){const type=value.toString();return"[object CanvasPattern]"===type||"[object CanvasGradient]"===type}return!1}function color(value){return isPatternOrGradient(value)?value:new Color(value)}function getHoverColor(value){return isPatternOrGradient(value)?value:new Color(value).saturate(.5).darken(.1).hexString()}const numbers=["x","y","borderWidth","radius","tension"],colors=["color","borderColor","backgroundColor"];const intlCache=new Map;function formatNumber(num,locale,options){return function getNumberFormat(locale,options){options=options||{};const cacheKey=locale+JSON.stringify(options);let formatter=intlCache.get(cacheKey);return formatter||(formatter=new Intl.NumberFormat(locale,options),intlCache.set(cacheKey,formatter)),formatter}(locale,options).format(num)}const formatters={values:value=>isArray(value)?value:""+value,numeric(tickValue,index,ticks){if(0===tickValue)return"0";const locale=this.chart.options.locale;let notation,delta=tickValue;if(ticks.length>1){const maxTick=Math.max(Math.abs(ticks[0].value),Math.abs(ticks[ticks.length-1].value));(maxTick<1e-4||maxTick>1e15)&&(notation="scientific"),delta=function calculateDelta(tickValue,ticks){let delta=ticks.length>3?ticks[2].value-ticks[1].value:ticks[1].value-ticks[0].value;Math.abs(delta)>=1&&tickValue!==Math.floor(tickValue)&&(delta=tickValue-Math.floor(tickValue));return delta}(tickValue,ticks)}const logDelta=log10(Math.abs(delta)),numDecimal=isNaN(logDelta)?1:Math.max(Math.min(-1*Math.floor(logDelta),20),0),options={notation,minimumFractionDigits:numDecimal,maximumFractionDigits:numDecimal};return Object.assign(options,this.options.ticks.format),formatNumber(tickValue,locale,options)},logarithmic(tickValue,index,ticks){if(0===tickValue)return"0";const remain=ticks[index].significand||tickValue/Math.pow(10,Math.floor(log10(tickValue)));return[1,2,3,5,10,15].includes(remain)||index>.8*ticks.length?formatters.numeric.call(this,tickValue,index,ticks):""}};var Ticks={formatters};const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(node,key){if(!key)return node;const keys=key.split(".");for(let i=0,n=keys.length;i<n;++i){const k=keys[i];node=node[k]||(node[k]=Object.create(null))}return node}function set(root,scope,values){return"string"==typeof scope?merge(getScope$1(root,scope),values):merge(getScope$1(root,""),scope)}class Defaults{constructor(_descriptors,_appliers){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=context=>context.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(ctx,options)=>getHoverColor(options.backgroundColor),this.hoverBorderColor=(ctx,options)=>getHoverColor(options.borderColor),this.hoverColor=(ctx,options)=>getHoverColor(options.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(_descriptors),this.apply(_appliers)}set(scope,values){return set(this,scope,values)}get(scope){return getScope$1(this,scope)}describe(scope,values){return set(descriptors,scope,values)}override(scope,values){return set(overrides,scope,values)}route(scope,name,targetScope,targetName){const scopeObject=getScope$1(this,scope),targetScopeObject=getScope$1(this,targetScope),privateName="_"+name;Object.defineProperties(scopeObject,{[privateName]:{value:scopeObject[name],writable:!0},[name]:{enumerable:!0,get(){const local=this[privateName],target=targetScopeObject[targetName];return isObject(local)?Object.assign({},target,local):valueOrDefault(local,target)},set(value){this[privateName]=value}}})}apply(appliers){appliers.forEach((apply=>apply(this)))}}var defaults=new Defaults({_scriptable:name=>!name.startsWith("on"),_indexable:name=>"events"!==name,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function applyAnimationsDefaults(defaults){defaults.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),defaults.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:name=>"onProgress"!==name&&"onComplete"!==name&&"fn"!==name}),defaults.set("animations",{colors:{type:"color",properties:colors},numbers:{type:"number",properties:numbers}}),defaults.describe("animations",{_fallback:"animation"}),defaults.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:v=>0|v}}}})},function applyLayoutsDefaults(defaults){defaults.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function applyScaleDefaults(defaults){defaults.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(_ctx,options)=>options.lineWidth,tickColor:(_ctx,options)=>options.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),defaults.route("scale.ticks","color","","color"),defaults.route("scale.grid","color","","borderColor"),defaults.route("scale.border","color","","borderColor"),defaults.route("scale.title","color","","color"),defaults.describe("scale",{_fallback:!1,_scriptable:name=>!name.startsWith("before")&&!name.startsWith("after")&&"callback"!==name&&"parser"!==name,_indexable:name=>"borderDash"!==name&&"tickBorderDash"!==name&&"dash"!==name}),defaults.describe("scales",{_fallback:"scale"}),defaults.describe("scale.ticks",{_scriptable:name=>"backdropPadding"!==name&&"callback"!==name,_indexable:name=>"backdropPadding"!==name})}]);function _measureText(ctx,data,gc,longest,string){let textWidth=data[string];return textWidth||(textWidth=data[string]=ctx.measureText(string).width,gc.push(string)),textWidth>longest&&(longest=textWidth),longest}function _longestText(ctx,font,arrayOfThings,cache){let data=(cache=cache||{}).data=cache.data||{},gc=cache.garbageCollect=cache.garbageCollect||[];cache.font!==font&&(data=cache.data={},gc=cache.garbageCollect=[],cache.font=font),ctx.save(),ctx.font=font;let longest=0;const ilen=arrayOfThings.length;let i,j,jlen,thing,nestedThing;for(i=0;i<ilen;i++)if(thing=arrayOfThings[i],null==thing||isArray(thing)){if(isArray(thing))for(j=0,jlen=thing.length;j<jlen;j++)nestedThing=thing[j],null==nestedThing||isArray(nestedThing)||(longest=_measureText(ctx,data,gc,longest,nestedThing))}else longest=_measureText(ctx,data,gc,longest,thing);ctx.restore();const gcLen=gc.length/2;if(gcLen>arrayOfThings.length){for(i=0;i<gcLen;i++)delete data[gc[i]];gc.splice(0,gcLen)}return longest}function _alignPixel(chart,pixel,width){const devicePixelRatio=chart.currentDevicePixelRatio,halfWidth=0!==width?Math.max(width/2,.5):0;return Math.round((pixel-halfWidth)*devicePixelRatio)/devicePixelRatio+halfWidth}function clearCanvas(canvas,ctx){(ctx=ctx||canvas.getContext("2d")).save(),ctx.resetTransform(),ctx.clearRect(0,0,canvas.width,canvas.height),ctx.restore()}function drawPoint(ctx,options,x,y){drawPointLegend(ctx,options,x,y,null)}function drawPointLegend(ctx,options,x,y,w){let type,xOffset,yOffset,size,cornerRadius,width,xOffsetW,yOffsetW;const style=options.pointStyle,rotation=options.rotation,radius=options.radius;let rad=(rotation||0)*RAD_PER_DEG;if(style&&"object"==typeof style&&(type=style.toString(),"[object HTMLImageElement]"===type||"[object HTMLCanvasElement]"===type))return ctx.save(),ctx.translate(x,y),ctx.rotate(rad),ctx.drawImage(style,-style.width/2,-style.height/2,style.width,style.height),void ctx.restore();if(!(isNaN(radius)||radius<=0)){switch(ctx.beginPath(),style){default:w?ctx.ellipse(x,y,w/2,radius,0,0,TAU):ctx.arc(x,y,radius,0,TAU),ctx.closePath();break;case"triangle":width=w?w/2:radius,ctx.moveTo(x+Math.sin(rad)*width,y-Math.cos(rad)*radius),rad+=TWO_THIRDS_PI,ctx.lineTo(x+Math.sin(rad)*width,y-Math.cos(rad)*radius),rad+=TWO_THIRDS_PI,ctx.lineTo(x+Math.sin(rad)*width,y-Math.cos(rad)*radius),ctx.closePath();break;case"rectRounded":cornerRadius=.516*radius,size=radius-cornerRadius,xOffset=Math.cos(rad+QUARTER_PI)*size,xOffsetW=Math.cos(rad+QUARTER_PI)*(w?w/2-cornerRadius:size),yOffset=Math.sin(rad+QUARTER_PI)*size,yOffsetW=Math.sin(rad+QUARTER_PI)*(w?w/2-cornerRadius:size),ctx.arc(x-xOffsetW,y-yOffset,cornerRadius,rad-PI,rad-HALF_PI),ctx.arc(x+yOffsetW,y-xOffset,cornerRadius,rad-HALF_PI,rad),ctx.arc(x+xOffsetW,y+yOffset,cornerRadius,rad,rad+HALF_PI),ctx.arc(x-yOffsetW,y+xOffset,cornerRadius,rad+HALF_PI,rad+PI),ctx.closePath();break;case"rect":if(!rotation){size=Math.SQRT1_2*radius,width=w?w/2:size,ctx.rect(x-width,y-size,2*width,2*size);break}rad+=QUARTER_PI;case"rectRot":xOffsetW=Math.cos(rad)*(w?w/2:radius),xOffset=Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,yOffsetW=Math.sin(rad)*(w?w/2:radius),ctx.moveTo(x-xOffsetW,y-yOffset),ctx.lineTo(x+yOffsetW,y-xOffset),ctx.lineTo(x+xOffsetW,y+yOffset),ctx.lineTo(x-yOffsetW,y+xOffset),ctx.closePath();break;case"crossRot":rad+=QUARTER_PI;case"cross":xOffsetW=Math.cos(rad)*(w?w/2:radius),xOffset=Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,yOffsetW=Math.sin(rad)*(w?w/2:radius),ctx.moveTo(x-xOffsetW,y-yOffset),ctx.lineTo(x+xOffsetW,y+yOffset),ctx.moveTo(x+yOffsetW,y-xOffset),ctx.lineTo(x-yOffsetW,y+xOffset);break;case"star":xOffsetW=Math.cos(rad)*(w?w/2:radius),xOffset=Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,yOffsetW=Math.sin(rad)*(w?w/2:radius),ctx.moveTo(x-xOffsetW,y-yOffset),ctx.lineTo(x+xOffsetW,y+yOffset),ctx.moveTo(x+yOffsetW,y-xOffset),ctx.lineTo(x-yOffsetW,y+xOffset),rad+=QUARTER_PI,xOffsetW=Math.cos(rad)*(w?w/2:radius),xOffset=Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,yOffsetW=Math.sin(rad)*(w?w/2:radius),ctx.moveTo(x-xOffsetW,y-yOffset),ctx.lineTo(x+xOffsetW,y+yOffset),ctx.moveTo(x+yOffsetW,y-xOffset),ctx.lineTo(x-yOffsetW,y+xOffset);break;case"line":xOffset=w?w/2:Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,ctx.moveTo(x-xOffset,y-yOffset),ctx.lineTo(x+xOffset,y+yOffset);break;case"dash":ctx.moveTo(x,y),ctx.lineTo(x+Math.cos(rad)*(w?w/2:radius),y+Math.sin(rad)*radius);break;case!1:ctx.closePath()}ctx.fill(),options.borderWidth>0&&ctx.stroke()}}function _isPointInArea(point,area,margin){return margin=margin||.5,!area||point&&point.x>area.left-margin&&point.x<area.right+margin&&point.y>area.top-margin&&point.y<area.bottom+margin}function clipArea(ctx,area){ctx.save(),ctx.beginPath(),ctx.rect(area.left,area.top,area.right-area.left,area.bottom-area.top),ctx.clip()}function unclipArea(ctx){ctx.restore()}function _steppedLineTo(ctx,previous,target,flip,mode){if(!previous)return ctx.lineTo(target.x,target.y);if("middle"===mode){const midpoint=(previous.x+target.x)/2;ctx.lineTo(midpoint,previous.y),ctx.lineTo(midpoint,target.y)}else"after"===mode!=!!flip?ctx.lineTo(previous.x,target.y):ctx.lineTo(target.x,previous.y);ctx.lineTo(target.x,target.y)}function _bezierCurveTo(ctx,previous,target,flip){if(!previous)return ctx.lineTo(target.x,target.y);ctx.bezierCurveTo(flip?previous.cp1x:previous.cp2x,flip?previous.cp1y:previous.cp2y,flip?target.cp2x:target.cp1x,flip?target.cp2y:target.cp1y,target.x,target.y)}function decorateText(ctx,x,y,line,opts){if(opts.strikethrough||opts.underline){const metrics=ctx.measureText(line),left=x-metrics.actualBoundingBoxLeft,right=x+metrics.actualBoundingBoxRight,top=y-metrics.actualBoundingBoxAscent,bottom=y+metrics.actualBoundingBoxDescent,yDecoration=opts.strikethrough?(top+bottom)/2:bottom;ctx.strokeStyle=ctx.fillStyle,ctx.beginPath(),ctx.lineWidth=opts.decorationWidth||2,ctx.moveTo(left,yDecoration),ctx.lineTo(right,yDecoration),ctx.stroke()}}function drawBackdrop(ctx,opts){const oldColor=ctx.fillStyle;ctx.fillStyle=opts.color,ctx.fillRect(opts.left,opts.top,opts.width,opts.height),ctx.fillStyle=oldColor}function renderText(ctx,text,x,y,font,opts={}){const lines=isArray(text)?text:[text],stroke=opts.strokeWidth>0&&""!==opts.strokeColor;let i,line;for(ctx.save(),ctx.font=font.string,function setRenderOpts(ctx,opts){opts.translation&&ctx.translate(opts.translation[0],opts.translation[1]),isNullOrUndef(opts.rotation)||ctx.rotate(opts.rotation),opts.color&&(ctx.fillStyle=opts.color),opts.textAlign&&(ctx.textAlign=opts.textAlign),opts.textBaseline&&(ctx.textBaseline=opts.textBaseline)}(ctx,opts),i=0;i<lines.length;++i)line=lines[i],opts.backdrop&&drawBackdrop(ctx,opts.backdrop),stroke&&(opts.strokeColor&&(ctx.strokeStyle=opts.strokeColor),isNullOrUndef(opts.strokeWidth)||(ctx.lineWidth=opts.strokeWidth),ctx.strokeText(line,x,y,opts.maxWidth)),ctx.fillText(line,x,y,opts.maxWidth),decorateText(ctx,x,y,line,opts),y+=Number(font.lineHeight);ctx.restore()}function addRoundedRectPath(ctx,rect){const{x,y,w,h,radius}=rect;ctx.arc(x+radius.topLeft,y+radius.topLeft,radius.topLeft,1.5*PI,PI,!0),ctx.lineTo(x,y+h-radius.bottomLeft),ctx.arc(x+radius.bottomLeft,y+h-radius.bottomLeft,radius.bottomLeft,PI,HALF_PI,!0),ctx.lineTo(x+w-radius.bottomRight,y+h),ctx.arc(x+w-radius.bottomRight,y+h-radius.bottomRight,radius.bottomRight,HALF_PI,0,!0),ctx.lineTo(x+w,y+radius.topRight),ctx.arc(x+w-radius.topRight,y+radius.topRight,radius.topRight,0,-HALF_PI,!0),ctx.lineTo(x+radius.topLeft,y)}const LINE_HEIGHT=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,FONT_STYLE=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function toLineHeight(value,size){const matches=(""+value).match(LINE_HEIGHT);if(!matches||"normal"===matches[1])return 1.2*size;switch(value=+matches[2],matches[3]){case"px":return value;case"%":value/=100}return size*value}const numberOrZero=v=>+v||0;function _readValueToProps(value,props){const ret={},objProps=isObject(props),keys=objProps?Object.keys(props):props,read=isObject(value)?objProps?prop=>valueOrDefault(value[prop],value[props[prop]]):prop=>value[prop]:()=>value;for(const prop of keys)ret[prop]=numberOrZero(read(prop));return ret}function toTRBL(value){return _readValueToProps(value,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(value){return _readValueToProps(value,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(value){const obj=toTRBL(value);return obj.width=obj.left+obj.right,obj.height=obj.top+obj.bottom,obj}function toFont(options,fallback){options=options||{},fallback=fallback||defaults.font;let size=valueOrDefault(options.size,fallback.size);"string"==typeof size&&(size=parseInt(size,10));let style=valueOrDefault(options.style,fallback.style);style&&!(""+style).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+style+'"'),style=void 0);const font={family:valueOrDefault(options.family,fallback.family),lineHeight:toLineHeight(valueOrDefault(options.lineHeight,fallback.lineHeight),size),size,style,weight:valueOrDefault(options.weight,fallback.weight),string:""};return font.string=function toFontString(font){return!font||isNullOrUndef(font.size)||isNullOrUndef(font.family)?null:(font.style?font.style+" ":"")+(font.weight?font.weight+" ":"")+font.size+"px "+font.family}(font),font}function resolve(inputs,context,index,info){let i,ilen,value,cacheable=!0;for(i=0,ilen=inputs.length;i<ilen;++i)if(value=inputs[i],void 0!==value&&(void 0!==context&&"function"==typeof value&&(value=value(context),cacheable=!1),void 0!==index&&isArray(value)&&(value=value[index%value.length],cacheable=!1),void 0!==value))return info&&!cacheable&&(info.cacheable=!1),value}function _addGrace(minmax,grace,beginAtZero){const{min,max}=minmax,change=toDimension(grace,(max-min)/2),keepZero=(value,add)=>beginAtZero&&0===value?0:value+add;return{min:keepZero(min,-Math.abs(change)),max:keepZero(max,change)}}function createContext(parentContext,context){return Object.assign(Object.create(parentContext),context)}function _createResolver(scopes,prefixes=[""],rootScopes,fallback,getTarget=(()=>scopes[0])){const finalRootScopes=rootScopes||scopes;void 0===fallback&&(fallback=_resolve("_fallback",scopes));const cache={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:scopes,_rootScopes:finalRootScopes,_fallback:fallback,_getTarget:getTarget,override:scope=>_createResolver([scope,...scopes],prefixes,finalRootScopes,fallback)};return new Proxy(cache,{deleteProperty:(target,prop)=>(delete target[prop],delete target._keys,delete scopes[0][prop],!0),get:(target,prop)=>_cached(target,prop,(()=>function _resolveWithPrefixes(prop,prefixes,scopes,proxy){let value;for(const prefix of prefixes)if(value=_resolve(readKey(prefix,prop),scopes),void 0!==value)return needsSubResolver(prop,value)?createSubResolver(scopes,proxy,prop,value):value}(prop,prefixes,scopes,target))),getOwnPropertyDescriptor:(target,prop)=>Reflect.getOwnPropertyDescriptor(target._scopes[0],prop),getPrototypeOf:()=>Reflect.getPrototypeOf(scopes[0]),has:(target,prop)=>getKeysFromAllScopes(target).includes(prop),ownKeys:target=>getKeysFromAllScopes(target),set(target,prop,value){const storage=target._storage||(target._storage=getTarget());return target[prop]=storage[prop]=value,delete target._keys,!0}})}function _attachContext(proxy,context,subProxy,descriptorDefaults){const cache={_cacheable:!1,_proxy:proxy,_context:context,_subProxy:subProxy,_stack:new Set,_descriptors:_descriptors(proxy,descriptorDefaults),setContext:ctx=>_attachContext(proxy,ctx,subProxy,descriptorDefaults),override:scope=>_attachContext(proxy.override(scope),context,subProxy,descriptorDefaults)};return new Proxy(cache,{deleteProperty:(target,prop)=>(delete target[prop],delete proxy[prop],!0),get:(target,prop,receiver)=>_cached(target,prop,(()=>function _resolveWithContext(target,prop,receiver){const{_proxy,_context,_subProxy,_descriptors:descriptors}=target;let value=_proxy[prop];isFunction(value)&&descriptors.isScriptable(prop)&&(value=function _resolveScriptable(prop,getValue,target,receiver){const{_proxy,_context,_subProxy,_stack}=target;if(_stack.has(prop))throw new Error("Recursion detected: "+Array.from(_stack).join("->")+"->"+prop);_stack.add(prop);let value=getValue(_context,_subProxy||receiver);_stack.delete(prop),needsSubResolver(prop,value)&&(value=createSubResolver(_proxy._scopes,_proxy,prop,value));return value}(prop,value,target,receiver));isArray(value)&&value.length&&(value=function _resolveArray(prop,value,target,isIndexable){const{_proxy,_context,_subProxy,_descriptors:descriptors}=target;if(void 0!==_context.index&&isIndexable(prop))return value[_context.index%value.length];if(isObject(value[0])){const arr=value,scopes=_proxy._scopes.filter((s=>s!==arr));value=[];for(const item of arr){const resolver=createSubResolver(scopes,_proxy,prop,item);value.push(_attachContext(resolver,_context,_subProxy&&_subProxy[prop],descriptors))}}return value}(prop,value,target,descriptors.isIndexable));needsSubResolver(prop,value)&&(value=_attachContext(value,_context,_subProxy&&_subProxy[prop],descriptors));return value}(target,prop,receiver))),getOwnPropertyDescriptor:(target,prop)=>target._descriptors.allKeys?Reflect.has(proxy,prop)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(proxy,prop),getPrototypeOf:()=>Reflect.getPrototypeOf(proxy),has:(target,prop)=>Reflect.has(proxy,prop),ownKeys:()=>Reflect.ownKeys(proxy),set:(target,prop,value)=>(proxy[prop]=value,delete target[prop],!0)})}function _descriptors(proxy,defaults={scriptable:!0,indexable:!0}){const{_scriptable=defaults.scriptable,_indexable=defaults.indexable,_allKeys=defaults.allKeys}=proxy;return{allKeys:_allKeys,scriptable:_scriptable,indexable:_indexable,isScriptable:isFunction(_scriptable)?_scriptable:()=>_scriptable,isIndexable:isFunction(_indexable)?_indexable:()=>_indexable}}const readKey=(prefix,name)=>prefix?prefix+_capitalize(name):name,needsSubResolver=(prop,value)=>isObject(value)&&"adapters"!==prop&&(null===Object.getPrototypeOf(value)||value.constructor===Object);function _cached(target,prop,resolve){if(Object.prototype.hasOwnProperty.call(target,prop))return target[prop];const value=resolve();return target[prop]=value,value}function resolveFallback(fallback,prop,value){return isFunction(fallback)?fallback(prop,value):fallback}const getScope=(key,parent)=>!0===key?parent:"string"==typeof key?resolveObjectKey(parent,key):void 0;function addScopes(set,parentScopes,key,parentFallback,value){for(const parent of parentScopes){const scope=getScope(key,parent);if(scope){set.add(scope);const fallback=resolveFallback(scope._fallback,key,value);if(void 0!==fallback&&fallback!==key&&fallback!==parentFallback)return fallback}else if(!1===scope&&void 0!==parentFallback&&key!==parentFallback)return null}return!1}function createSubResolver(parentScopes,resolver,prop,value){const rootScopes=resolver._rootScopes,fallback=resolveFallback(resolver._fallback,prop,value),allScopes=[...parentScopes,...rootScopes],set=new Set;set.add(value);let key=addScopesFromKey(set,allScopes,prop,fallback||prop,value);return null!==key&&((void 0===fallback||fallback===prop||(key=addScopesFromKey(set,allScopes,fallback,key,value),null!==key))&&_createResolver(Array.from(set),[""],rootScopes,fallback,(()=>function subGetTarget(resolver,prop,value){const parent=resolver._getTarget();prop in parent||(parent[prop]={});const target=parent[prop];if(isArray(target)&&isObject(value))return value;return target||{}}(resolver,prop,value))))}function addScopesFromKey(set,allScopes,key,fallback,item){for(;key;)key=addScopes(set,allScopes,key,fallback,item);return key}function _resolve(key,scopes){for(const scope of scopes){if(!scope)continue;const value=scope[key];if(void 0!==value)return value}}function getKeysFromAllScopes(target){let keys=target._keys;return keys||(keys=target._keys=function resolveKeysFromAllScopes(scopes){const set=new Set;for(const scope of scopes)for(const key of Object.keys(scope).filter((k=>!k.startsWith("_"))))set.add(key);return Array.from(set)}(target._scopes)),keys}function _parseObjectDataRadialScale(meta,data,start,count){const{iScale}=meta,{key="r"}=this._parsing,parsed=new Array(count);let i,ilen,index,item;for(i=0,ilen=count;i<ilen;++i)index=i+start,item=data[index],parsed[i]={r:iScale.parse(resolveObjectKey(item,key),index)};return parsed}const EPSILON=Number.EPSILON||1e-14,getPoint=(points,i)=>i<points.length&&!points[i].skip&&points[i],getValueAxis=indexAxis=>"x"===indexAxis?"y":"x";function splineCurve(firstPoint,middlePoint,afterPoint,t){const previous=firstPoint.skip?middlePoint:firstPoint,current=middlePoint,next=afterPoint.skip?middlePoint:afterPoint,d01=distanceBetweenPoints(current,previous),d12=distanceBetweenPoints(next,current);let s01=d01/(d01+d12),s12=d12/(d01+d12);s01=isNaN(s01)?0:s01,s12=isNaN(s12)?0:s12;const fa=t*s01,fb=t*s12;return{previous:{x:current.x-fa*(next.x-previous.x),y:current.y-fa*(next.y-previous.y)},next:{x:current.x+fb*(next.x-previous.x),y:current.y+fb*(next.y-previous.y)}}}function splineCurveMonotone(points,indexAxis="x"){const valueAxis=getValueAxis(indexAxis),pointsLen=points.length,deltaK=Array(pointsLen).fill(0),mK=Array(pointsLen);let i,pointBefore,pointCurrent,pointAfter=getPoint(points,0);for(i=0;i<pointsLen;++i)if(pointBefore=pointCurrent,pointCurrent=pointAfter,pointAfter=getPoint(points,i+1),pointCurrent){if(pointAfter){const slopeDelta=pointAfter[indexAxis]-pointCurrent[indexAxis];deltaK[i]=0!==slopeDelta?(pointAfter[valueAxis]-pointCurrent[valueAxis])/slopeDelta:0}mK[i]=pointBefore?pointAfter?sign(deltaK[i-1])!==sign(deltaK[i])?0:(deltaK[i-1]+deltaK[i])/2:deltaK[i-1]:deltaK[i]}!function monotoneAdjust(points,deltaK,mK){const pointsLen=points.length;let alphaK,betaK,tauK,squaredMagnitude,pointCurrent,pointAfter=getPoint(points,0);for(let i=0;i<pointsLen-1;++i)pointCurrent=pointAfter,pointAfter=getPoint(points,i+1),pointCurrent&&pointAfter&&(almostEquals(deltaK[i],0,EPSILON)?mK[i]=mK[i+1]=0:(alphaK=mK[i]/deltaK[i],betaK=mK[i+1]/deltaK[i],squaredMagnitude=Math.pow(alphaK,2)+Math.pow(betaK,2),squaredMagnitude<=9||(tauK=3/Math.sqrt(squaredMagnitude),mK[i]=alphaK*tauK*deltaK[i],mK[i+1]=betaK*tauK*deltaK[i])))}(points,deltaK,mK),function monotoneCompute(points,mK,indexAxis="x"){const valueAxis=getValueAxis(indexAxis),pointsLen=points.length;let delta,pointBefore,pointCurrent,pointAfter=getPoint(points,0);for(let i=0;i<pointsLen;++i){if(pointBefore=pointCurrent,pointCurrent=pointAfter,pointAfter=getPoint(points,i+1),!pointCurrent)continue;const iPixel=pointCurrent[indexAxis],vPixel=pointCurrent[valueAxis];pointBefore&&(delta=(iPixel-pointBefore[indexAxis])/3,pointCurrent[`cp1${indexAxis}`]=iPixel-delta,pointCurrent[`cp1${valueAxis}`]=vPixel-delta*mK[i]),pointAfter&&(delta=(pointAfter[indexAxis]-iPixel)/3,pointCurrent[`cp2${indexAxis}`]=iPixel+delta,pointCurrent[`cp2${valueAxis}`]=vPixel+delta*mK[i])}}(points,mK,indexAxis)}function capControlPoint(pt,min,max){return Math.max(Math.min(pt,max),min)}function _updateBezierControlPoints(points,options,area,loop,indexAxis){let i,ilen,point,controlPoints;if(options.spanGaps&&(points=points.filter((pt=>!pt.skip))),"monotone"===options.cubicInterpolationMode)splineCurveMonotone(points,indexAxis);else{let prev=loop?points[points.length-1]:points[0];for(i=0,ilen=points.length;i<ilen;++i)point=points[i],controlPoints=splineCurve(prev,point,points[Math.min(i+1,ilen-(loop?0:1))%ilen],options.tension),point.cp1x=controlPoints.previous.x,point.cp1y=controlPoints.previous.y,point.cp2x=controlPoints.next.x,point.cp2y=controlPoints.next.y,prev=point}options.capBezierPoints&&function capBezierPoints(points,area){let i,ilen,point,inArea,inAreaPrev,inAreaNext=_isPointInArea(points[0],area);for(i=0,ilen=points.length;i<ilen;++i)inAreaPrev=inArea,inArea=inAreaNext,inAreaNext=i<ilen-1&&_isPointInArea(points[i+1],area),inArea&&(point=points[i],inAreaPrev&&(point.cp1x=capControlPoint(point.cp1x,area.left,area.right),point.cp1y=capControlPoint(point.cp1y,area.top,area.bottom)),inAreaNext&&(point.cp2x=capControlPoint(point.cp2x,area.left,area.right),point.cp2y=capControlPoint(point.cp2y,area.top,area.bottom)))}(points,area)}function _isDomSupported(){return"undefined"!=typeof window&&"undefined"!=typeof document}function _getParentNode(domNode){let parent=domNode.parentNode;return parent&&"[object ShadowRoot]"===parent.toString()&&(parent=parent.host),parent}function parseMaxStyle(styleValue,node,parentProperty){let valueInPixels;return"string"==typeof styleValue?(valueInPixels=parseInt(styleValue,10),-1!==styleValue.indexOf("%")&&(valueInPixels=valueInPixels/100*node.parentNode[parentProperty])):valueInPixels=styleValue,valueInPixels}const getComputedStyle=element=>element.ownerDocument.defaultView.getComputedStyle(element,null);const positions=["top","right","bottom","left"];function getPositionedStyle(styles,style,suffix){const result={};suffix=suffix?"-"+suffix:"";for(let i=0;i<4;i++){const pos=positions[i];result[pos]=parseFloat(styles[style+"-"+pos+suffix])||0}return result.width=result.left+result.right,result.height=result.top+result.bottom,result}const useOffsetPos=(x,y,target)=>(x>0||y>0)&&(!target||!target.shadowRoot);function getRelativePosition(event,chart){if("native"in event)return event;const{canvas,currentDevicePixelRatio}=chart,style=getComputedStyle(canvas),borderBox="border-box"===style.boxSizing,paddings=getPositionedStyle(style,"padding"),borders=getPositionedStyle(style,"border","width"),{x,y,box}=function getCanvasPosition(e,canvas){const touches=e.touches,source=touches&&touches.length?touches[0]:e,{offsetX,offsetY}=source;let x,y,box=!1;if(useOffsetPos(offsetX,offsetY,e.target))x=offsetX,y=offsetY;else{const rect=canvas.getBoundingClientRect();x=source.clientX-rect.left,y=source.clientY-rect.top,box=!0}return{x,y,box}}(event,canvas),xOffset=paddings.left+(box&&borders.left),yOffset=paddings.top+(box&&borders.top);let{width,height}=chart;return borderBox&&(width-=paddings.width+borders.width,height-=paddings.height+borders.height),{x:Math.round((x-xOffset)/width*canvas.width/currentDevicePixelRatio),y:Math.round((y-yOffset)/height*canvas.height/currentDevicePixelRatio)}}const round1=v=>Math.round(10*v)/10;function getMaximumSize(canvas,bbWidth,bbHeight,aspectRatio){const style=getComputedStyle(canvas),margins=getPositionedStyle(style,"margin"),maxWidth=parseMaxStyle(style.maxWidth,canvas,"clientWidth")||INFINITY,maxHeight=parseMaxStyle(style.maxHeight,canvas,"clientHeight")||INFINITY,containerSize=function getContainerSize(canvas,width,height){let maxWidth,maxHeight;if(void 0===width||void 0===height){const container=_getParentNode(canvas);if(container){const rect=container.getBoundingClientRect(),containerStyle=getComputedStyle(container),containerBorder=getPositionedStyle(containerStyle,"border","width"),containerPadding=getPositionedStyle(containerStyle,"padding");width=rect.width-containerPadding.width-containerBorder.width,height=rect.height-containerPadding.height-containerBorder.height,maxWidth=parseMaxStyle(containerStyle.maxWidth,container,"clientWidth"),maxHeight=parseMaxStyle(containerStyle.maxHeight,container,"clientHeight")}else width=canvas.clientWidth,height=canvas.clientHeight}return{width,height,maxWidth:maxWidth||INFINITY,maxHeight:maxHeight||INFINITY}}(canvas,bbWidth,bbHeight);let{width,height}=containerSize;if("content-box"===style.boxSizing){const borders=getPositionedStyle(style,"border","width"),paddings=getPositionedStyle(style,"padding");width-=paddings.width+borders.width,height-=paddings.height+borders.height}width=Math.max(0,width-margins.width),height=Math.max(0,aspectRatio?width/aspectRatio:height-margins.height),width=round1(Math.min(width,maxWidth,containerSize.maxWidth)),height=round1(Math.min(height,maxHeight,containerSize.maxHeight)),width&&!height&&(height=round1(width/2));return(void 0!==bbWidth||void 0!==bbHeight)&&aspectRatio&&containerSize.height&&height>containerSize.height&&(height=containerSize.height,width=round1(Math.floor(height*aspectRatio))),{width,height}}function retinaScale(chart,forceRatio,forceStyle){const pixelRatio=forceRatio||1,deviceHeight=Math.floor(chart.height*pixelRatio),deviceWidth=Math.floor(chart.width*pixelRatio);chart.height=Math.floor(chart.height),chart.width=Math.floor(chart.width);const canvas=chart.canvas;return canvas.style&&(forceStyle||!canvas.style.height&&!canvas.style.width)&&(canvas.style.height=`${chart.height}px`,canvas.style.width=`${chart.width}px`),(chart.currentDevicePixelRatio!==pixelRatio||canvas.height!==deviceHeight||canvas.width!==deviceWidth)&&(chart.currentDevicePixelRatio=pixelRatio,canvas.height=deviceHeight,canvas.width=deviceWidth,chart.ctx.setTransform(pixelRatio,0,0,pixelRatio,0,0),!0)}const supportsEventListenerOptions=function(){let passiveSupported=!1;try{const options={get passive(){return passiveSupported=!0,!1}};window.addEventListener("test",null,options),window.removeEventListener("test",null,options)}catch(e){}return passiveSupported}();function readUsedSize(element,property){const value=function getStyle(el,property){return getComputedStyle(el).getPropertyValue(property)}(element,property),matches=value&&value.match(/^(\d+)(\.\d+)?px$/);return matches?+matches[1]:void 0}function _pointInLine(p1,p2,t,mode){return{x:p1.x+t*(p2.x-p1.x),y:p1.y+t*(p2.y-p1.y)}}function _steppedInterpolation(p1,p2,t,mode){return{x:p1.x+t*(p2.x-p1.x),y:"middle"===mode?t<.5?p1.y:p2.y:"after"===mode?t<1?p1.y:p2.y:t>0?p2.y:p1.y}}function _bezierInterpolation(p1,p2,t,mode){const cp1={x:p1.cp2x,y:p1.cp2y},cp2={x:p2.cp1x,y:p2.cp1y},a=_pointInLine(p1,cp1,t),b=_pointInLine(cp1,cp2,t),c=_pointInLine(cp2,p2,t),d=_pointInLine(a,b,t),e=_pointInLine(b,c,t);return _pointInLine(d,e,t)}const getRightToLeftAdapter=function(rectX,width){return{x:x=>rectX+rectX+width-x,setWidth(w){width=w},textAlign:align=>"center"===align?align:"right"===align?"left":"right",xPlus:(x,value)=>x-value,leftForLtr:(x,itemWidth)=>x-itemWidth}},getLeftToRightAdapter=function(){return{x:x=>x,setWidth(w){},textAlign:align=>align,xPlus:(x,value)=>x+value,leftForLtr:(x,_itemWidth)=>x}};function getRtlAdapter(rtl,rectX,width){return rtl?getRightToLeftAdapter(rectX,width):getLeftToRightAdapter()}function overrideTextDirection(ctx,direction){let style,original;"ltr"!==direction&&"rtl"!==direction||(style=ctx.canvas.style,original=[style.getPropertyValue("direction"),style.getPropertyPriority("direction")],style.setProperty("direction",direction,"important"),ctx.prevTextDirection=original)}function restoreTextDirection(ctx,original){void 0!==original&&(delete ctx.prevTextDirection,ctx.canvas.style.setProperty("direction",original[0],original[1]))}function propertyFn(property){return"angle"===property?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:(a,b)=>a-b,normalize:x=>x}}function normalizeSegment({start,end,count,loop,style}){return{start:start%count,end:end%count,loop:loop&&(end-start+1)%count==0,style}}function _boundSegment(segment,points,bounds){if(!bounds)return[segment];const{property,start:startBound,end:endBound}=bounds,count=points.length,{compare,between,normalize}=propertyFn(property),{start,end,loop,style}=function getSegment(segment,points,bounds){const{property,start:startBound,end:endBound}=bounds,{between,normalize}=propertyFn(property),count=points.length;let i,ilen,{start,end,loop}=segment;if(loop){for(start+=count,end+=count,i=0,ilen=count;i<ilen&&between(normalize(points[start%count][property]),startBound,endBound);++i)start--,end--;start%=count,end%=count}return end<start&&(end+=count),{start,end,loop,style:segment.style}}(segment,points,bounds),result=[];let value,point,prevValue,inside=!1,subStart=null;const shouldStart=()=>inside||between(startBound,prevValue,value)&&0!==compare(startBound,prevValue),shouldStop=()=>!inside||0===compare(endBound,value)||between(endBound,prevValue,value);for(let i=start,prev=start;i<=end;++i)point=points[i%count],point.skip||(value=normalize(point[property]),value!==prevValue&&(inside=between(value,startBound,endBound),null===subStart&&shouldStart()&&(subStart=0===compare(value,startBound)?i:prev),null!==subStart&&shouldStop()&&(result.push(normalizeSegment({start:subStart,end:i,loop,count,style})),subStart=null),prev=i,prevValue=value));return null!==subStart&&result.push(normalizeSegment({start:subStart,end,loop,count,style})),result}function _boundSegments(line,bounds){const result=[],segments=line.segments;for(let i=0;i<segments.length;i++){const sub=_boundSegment(segments[i],line.points,bounds);sub.length&&result.push(...sub)}return result}function _computeSegments(line,segmentOptions){const points=line.points,spanGaps=line.options.spanGaps,count=points.length;if(!count)return[];const loop=!!line._loop,{start,end}=function findStartAndEnd(points,count,loop,spanGaps){let start=0,end=count-1;if(loop&&!spanGaps)for(;start<count&&!points[start].skip;)start++;for(;start<count&&points[start].skip;)start++;for(start%=count,loop&&(end+=start);end>start&&points[end%count].skip;)end--;return end%=count,{start,end}}(points,count,loop,spanGaps);if(!0===spanGaps)return splitByStyles(line,[{start,end,loop}],points,segmentOptions);return splitByStyles(line,function solidSegments(points,start,max,loop){const count=points.length,result=[];let end,last=start,prev=points[start];for(end=start+1;end<=max;++end){const cur=points[end%count];cur.skip||cur.stop?prev.skip||(loop=!1,result.push({start:start%count,end:(end-1)%count,loop}),start=last=cur.stop?end:null):(last=end,prev.skip&&(start=end)),prev=cur}return null!==last&&result.push({start:start%count,end:last%count,loop}),result}(points,start,end<start?end+count:end,!!line._fullLoop&&0===start&&end===count-1),points,segmentOptions)}function splitByStyles(line,segments,points,segmentOptions){return segmentOptions&&segmentOptions.setContext&&points?function doSplitByStyles(line,segments,points,segmentOptions){const chartContext=line._chart.getContext(),baseStyle=readStyle(line.options),{_datasetIndex:datasetIndex,options:{spanGaps}}=line,count=points.length,result=[];let prevStyle=baseStyle,start=segments[0].start,i=start;function addStyle(s,e,l,st){const dir=spanGaps?-1:1;if(s!==e){for(s+=count;points[s%count].skip;)s-=dir;for(;points[e%count].skip;)e+=dir;s%count!=e%count&&(result.push({start:s%count,end:e%count,loop:l,style:st}),prevStyle=st,start=e%count)}}for(const segment of segments){start=spanGaps?start:segment.start;let style,prev=points[start%count];for(i=start+1;i<=segment.end;i++){const pt=points[i%count];style=readStyle(segmentOptions.setContext(createContext(chartContext,{type:"segment",p0:prev,p1:pt,p0DataIndex:(i-1)%count,p1DataIndex:i%count,datasetIndex}))),styleChanged(style,prevStyle)&&addStyle(start,i-1,segment.loop,prevStyle),prev=pt,prevStyle=style}start<i-1&&addStyle(start,i-1,segment.loop,prevStyle)}return result}(line,segments,points,segmentOptions):segments}function readStyle(options){return{backgroundColor:options.backgroundColor,borderCapStyle:options.borderCapStyle,borderDash:options.borderDash,borderDashOffset:options.borderDashOffset,borderJoinStyle:options.borderJoinStyle,borderWidth:options.borderWidth,borderColor:options.borderColor}}function styleChanged(style,prevStyle){if(!prevStyle)return!1;const cache=[],replacer=function(key,value){return isPatternOrGradient(value)?(cache.includes(value)||cache.push(value),cache.indexOf(value)):value};return JSON.stringify(style,replacer)!==JSON.stringify(prevStyle,replacer)}},"./node_modules/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.esm.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{var chart=__webpack_require__("./node_modules/chart.js/dist/chart.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function requiredArgs(required,args){if(args.length<required)throw new TypeError(required+" argument"+(required>1?"s":"")+" required, but only "+args.length+" present")}function toDate(argument){requiredArgs(1,arguments);var argStr=Object.prototype.toString.call(argument);return argument instanceof Date||"object"===_typeof(argument)&&"[object Date]"===argStr?new Date(argument.getTime()):"number"==typeof argument||"[object Number]"===argStr?new Date(argument):("string"!=typeof argument&&"[object String]"!==argStr||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}var formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};const _lib_formatDistance=function formatDistance(token,count,options){var result,tokenValue=formatDistanceLocale[token];return result="string"==typeof tokenValue?tokenValue:1===count?tokenValue.one:tokenValue.other.replace("{{count}}",count.toString()),null!=options&&options.addSuffix?options.comparison&&options.comparison>0?"in "+result:result+" ago":result};function buildFormatLongFn(args){return function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},width=options.width?String(options.width):args.defaultWidth;return args.formats[width]||args.formats[args.defaultWidth]}}var formatLong={date:buildFormatLongFn({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:buildFormatLongFn({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})};var formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function buildLocalizeFn(args){return function(dirtyIndex,options){var valuesArray;if("formatting"===(null!=options&&options.context?String(options.context):"standalone")&&args.formattingValues){var defaultWidth=args.defaultFormattingWidth||args.defaultWidth,width=null!=options&&options.width?String(options.width):defaultWidth;valuesArray=args.formattingValues[width]||args.formattingValues[defaultWidth]}else{var _defaultWidth=args.defaultWidth,_width=null!=options&&options.width?String(options.width):args.defaultWidth;valuesArray=args.values[_width]||args.values[_defaultWidth]}return valuesArray[args.argumentCallback?args.argumentCallback(dirtyIndex):dirtyIndex]}}function buildMatchFn(args){return function(string){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},width=options.width,matchPattern=width&&args.matchPatterns[width]||args.matchPatterns[args.defaultMatchWidth],matchResult=string.match(matchPattern);if(!matchResult)return null;var value,matchedString=matchResult[0],parsePatterns=width&&args.parsePatterns[width]||args.parsePatterns[args.defaultParseWidth],key=Array.isArray(parsePatterns)?function findIndex(array,predicate){for(var key=0;key<array.length;key++)if(predicate(array[key]))return key;return}(parsePatterns,(function(pattern){return pattern.test(matchedString)})):function findKey(object,predicate){for(var key in object)if(object.hasOwnProperty(key)&&predicate(object[key]))return key;return}(parsePatterns,(function(pattern){return pattern.test(matchedString)}));return value=args.valueCallback?args.valueCallback(key):key,{value:value=options.valueCallback?options.valueCallback(value):value,rest:string.slice(matchedString.length)}}}const defaultLocale={code:"en-US",formatDistance:_lib_formatDistance,formatLong,formatRelative:function formatRelative(token,_date,_baseDate,_options){return formatRelativeLocale[token]},localize:{ordinalNumber:function ordinalNumber(dirtyNumber,_options){var number=Number(dirtyNumber),rem100=number%100;if(rem100>20||rem100<10)switch(rem100%10){case 1:return number+"st";case 2:return number+"nd";case 3:return number+"rd"}return number+"th"},era:buildLocalizeFn({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:buildLocalizeFn({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function argumentCallback(quarter){return quarter-1}}),month:buildLocalizeFn({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:buildLocalizeFn({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:function buildMatchPatternFn(args){return function(string){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},matchResult=string.match(args.matchPattern);if(!matchResult)return null;var matchedString=matchResult[0],parseResult=string.match(args.parsePattern);if(!parseResult)return null;var value=args.valueCallback?args.valueCallback(parseResult[0]):parseResult[0];return{value:value=options.valueCallback?options.valueCallback(value):value,rest:string.slice(matchedString.length)}}}({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function valueCallback(value){return parseInt(value,10)}}),era:buildMatchFn({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function valueCallback(index){return index+1}}),month:buildMatchFn({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function toInteger(dirtyNumber){if(null===dirtyNumber||!0===dirtyNumber||!1===dirtyNumber)return NaN;var number=Number(dirtyNumber);return isNaN(number)?number:number<0?Math.ceil(number):Math.floor(number)}function addMilliseconds(dirtyDate,dirtyAmount){requiredArgs(2,arguments);var timestamp=toDate(dirtyDate).getTime(),amount=toInteger(dirtyAmount);return new Date(timestamp+amount)}function subMilliseconds(dirtyDate,dirtyAmount){return requiredArgs(2,arguments),addMilliseconds(dirtyDate,-toInteger(dirtyAmount))}function assign_assign(target,object){if(null==target)throw new TypeError("assign requires that input parameter not be null or undefined");for(var property in object)Object.prototype.hasOwnProperty.call(object,property)&&(target[property]=object[property]);return target}var dateLongFormatter=function dateLongFormatter(pattern,formatLong){switch(pattern){case"P":return formatLong.date({width:"short"});case"PP":return formatLong.date({width:"medium"});case"PPP":return formatLong.date({width:"long"});default:return formatLong.date({width:"full"})}},timeLongFormatter=function timeLongFormatter(pattern,formatLong){switch(pattern){case"p":return formatLong.time({width:"short"});case"pp":return formatLong.time({width:"medium"});case"ppp":return formatLong.time({width:"long"});default:return formatLong.time({width:"full"})}},longFormatters={p:timeLongFormatter,P:function dateTimeLongFormatter(pattern,formatLong){var dateTimeFormat,matchResult=pattern.match(/(P+)(p+)?/)||[],datePattern=matchResult[1],timePattern=matchResult[2];if(!timePattern)return dateLongFormatter(pattern,formatLong);switch(datePattern){case"P":dateTimeFormat=formatLong.dateTime({width:"short"});break;case"PP":dateTimeFormat=formatLong.dateTime({width:"medium"});break;case"PPP":dateTimeFormat=formatLong.dateTime({width:"long"});break;default:dateTimeFormat=formatLong.dateTime({width:"full"})}return dateTimeFormat.replace("{{date}}",dateLongFormatter(datePattern,formatLong)).replace("{{time}}",timeLongFormatter(timePattern,formatLong))}};const format_longFormatters=longFormatters;function getTimezoneOffsetInMilliseconds(date){var utcDate=new Date(Date.UTC(date.getFullYear(),date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds()));return utcDate.setUTCFullYear(date.getFullYear()),date.getTime()-utcDate.getTime()}var protectedDayOfYearTokens=["D","DD"],protectedWeekYearTokens=["YY","YYYY"];function isProtectedDayOfYearToken(token){return-1!==protectedDayOfYearTokens.indexOf(token)}function isProtectedWeekYearToken(token){return-1!==protectedWeekYearTokens.indexOf(token)}function throwProtectedError(token,format,input){if("YYYY"===token)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(format,"`) for formatting years to the input `").concat(input,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("YY"===token)throw new RangeError("Use `yy` instead of `YY` (in `".concat(format,"`) for formatting years to the input `").concat(input,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("D"===token)throw new RangeError("Use `d` instead of `D` (in `".concat(format,"`) for formatting days of the month to the input `").concat(input,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if("DD"===token)throw new RangeError("Use `dd` instead of `DD` (in `".concat(format,"`) for formatting days of the month to the input `").concat(input,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var assertThisInitialized=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),setPrototypeOf=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&(0,setPrototypeOf.A)(subClass,superClass)}var getPrototypeOf=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),isNativeReflectConstruct=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js");function _createSuper(Derived){var hasNativeReflectConstruct=(0,isNativeReflectConstruct.A)();return function _createSuperInternal(){var result,Super=(0,getPrototypeOf.A)(Derived);if(hasNativeReflectConstruct){var NewTarget=(0,getPrototypeOf.A)(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return(0,assertThisInitialized.A)(self)}(this,result)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Setter=function(){function Setter(){_classCallCheck(this,Setter),_defineProperty(this,"priority",void 0),_defineProperty(this,"subPriority",0)}return _createClass(Setter,[{key:"validate",value:function validate(_utcDate,_options){return!0}}]),Setter}(),ValueSetter=function(_Setter){_inherits(ValueSetter,_Setter);var _super=_createSuper(ValueSetter);function ValueSetter(value,validateValue,setValue,priority,subPriority){var _this;return _classCallCheck(this,ValueSetter),(_this=_super.call(this)).value=value,_this.validateValue=validateValue,_this.setValue=setValue,_this.priority=priority,subPriority&&(_this.subPriority=subPriority),_this}return _createClass(ValueSetter,[{key:"validate",value:function validate(utcDate,options){return this.validateValue(utcDate,this.value,options)}},{key:"set",value:function set(utcDate,flags,options){return this.setValue(utcDate,flags,this.value,options)}}]),ValueSetter}(Setter),DateToSystemTimezoneSetter=function(_Setter2){_inherits(DateToSystemTimezoneSetter,_Setter2);var _super2=_createSuper(DateToSystemTimezoneSetter);function DateToSystemTimezoneSetter(){var _this2;_classCallCheck(this,DateToSystemTimezoneSetter);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this2=_super2.call.apply(_super2,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this2),"priority",10),_defineProperty((0,assertThisInitialized.A)(_this2),"subPriority",-1),_this2}return _createClass(DateToSystemTimezoneSetter,[{key:"set",value:function set(date,flags){if(flags.timestampIsSet)return date;var convertedDate=new Date(0);return convertedDate.setFullYear(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate()),convertedDate.setHours(date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds(),date.getUTCMilliseconds()),convertedDate}}]),DateToSystemTimezoneSetter}(Setter),Parser=function(){function Parser(){_classCallCheck(this,Parser),_defineProperty(this,"incompatibleTokens",void 0),_defineProperty(this,"priority",void 0),_defineProperty(this,"subPriority",void 0)}return _createClass(Parser,[{key:"run",value:function run(dateString,token,match,options){var result=this.parse(dateString,token,match,options);return result?{setter:new ValueSetter(result.value,this.validate,this.set,this.priority,this.subPriority),rest:result.rest}:null}},{key:"validate",value:function validate(_utcDate,_value,_options){return!0}}]),Parser}(),EraParser=function(_Parser){_inherits(EraParser,_Parser);var _super=_createSuper(EraParser);function EraParser(){var _this;_classCallCheck(this,EraParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",140),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["R","u","t","T"]),_this}return _createClass(EraParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"G":case"GG":case"GGG":return match.era(dateString,{width:"abbreviated"})||match.era(dateString,{width:"narrow"});case"GGGGG":return match.era(dateString,{width:"narrow"});default:return match.era(dateString,{width:"wide"})||match.era(dateString,{width:"abbreviated"})||match.era(dateString,{width:"narrow"})}}},{key:"set",value:function set(date,flags,value){return flags.era=value,date.setUTCFullYear(value,0,1),date.setUTCHours(0,0,0,0),date}}]),EraParser}(Parser),millisecondsInMinute=(Math.pow(10,8),6e4),millisecondsInHour=36e5,numericPatterns_month=/^(1[0-2]|0?\d)/,numericPatterns_date=/^(3[0-1]|[0-2]?\d)/,numericPatterns_dayOfYear=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,numericPatterns_week=/^(5[0-3]|[0-4]?\d)/,numericPatterns_hour23h=/^(2[0-3]|[0-1]?\d)/,numericPatterns_hour24h=/^(2[0-4]|[0-1]?\d)/,numericPatterns_hour11h=/^(1[0-1]|0?\d)/,numericPatterns_hour12h=/^(1[0-2]|0?\d)/,numericPatterns_minute=/^[0-5]?\d/,numericPatterns_second=/^[0-5]?\d/,numericPatterns_singleDigit=/^\d/,numericPatterns_twoDigits=/^\d{1,2}/,numericPatterns_threeDigits=/^\d{1,3}/,numericPatterns_fourDigits=/^\d{1,4}/,numericPatterns_anyDigitsSigned=/^-?\d+/,numericPatterns_singleDigitSigned=/^-?\d/,numericPatterns_twoDigitsSigned=/^-?\d{1,2}/,numericPatterns_threeDigitsSigned=/^-?\d{1,3}/,numericPatterns_fourDigitsSigned=/^-?\d{1,4}/,timezonePatterns_basicOptionalMinutes=/^([+-])(\d{2})(\d{2})?|Z/,timezonePatterns_basic=/^([+-])(\d{2})(\d{2})|Z/,timezonePatterns_basicOptionalSeconds=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,timezonePatterns_extended=/^([+-])(\d{2}):(\d{2})|Z/,timezonePatterns_extendedOptionalSeconds=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function mapValue(parseFnResult,mapFn){return parseFnResult?{value:mapFn(parseFnResult.value),rest:parseFnResult.rest}:parseFnResult}function parseNumericPattern(pattern,dateString){var matchResult=dateString.match(pattern);return matchResult?{value:parseInt(matchResult[0],10),rest:dateString.slice(matchResult[0].length)}:null}function parseTimezonePattern(pattern,dateString){var matchResult=dateString.match(pattern);if(!matchResult)return null;if("Z"===matchResult[0])return{value:0,rest:dateString.slice(1)};var sign="+"===matchResult[1]?1:-1,hours=matchResult[2]?parseInt(matchResult[2],10):0,minutes=matchResult[3]?parseInt(matchResult[3],10):0,seconds=matchResult[5]?parseInt(matchResult[5],10):0;return{value:sign*(hours*millisecondsInHour+minutes*millisecondsInMinute+1e3*seconds),rest:dateString.slice(matchResult[0].length)}}function parseAnyDigitsSigned(dateString){return parseNumericPattern(numericPatterns_anyDigitsSigned,dateString)}function parseNDigits(n,dateString){switch(n){case 1:return parseNumericPattern(numericPatterns_singleDigit,dateString);case 2:return parseNumericPattern(numericPatterns_twoDigits,dateString);case 3:return parseNumericPattern(numericPatterns_threeDigits,dateString);case 4:return parseNumericPattern(numericPatterns_fourDigits,dateString);default:return parseNumericPattern(new RegExp("^\\d{1,"+n+"}"),dateString)}}function parseNDigitsSigned(n,dateString){switch(n){case 1:return parseNumericPattern(numericPatterns_singleDigitSigned,dateString);case 2:return parseNumericPattern(numericPatterns_twoDigitsSigned,dateString);case 3:return parseNumericPattern(numericPatterns_threeDigitsSigned,dateString);case 4:return parseNumericPattern(numericPatterns_fourDigitsSigned,dateString);default:return parseNumericPattern(new RegExp("^-?\\d{1,"+n+"}"),dateString)}}function dayPeriodEnumToHours(dayPeriod){switch(dayPeriod){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function normalizeTwoDigitYear(twoDigitYear,currentYear){var result,isCommonEra=currentYear>0,absCurrentYear=isCommonEra?currentYear:1-currentYear;if(absCurrentYear<=50)result=twoDigitYear||100;else{var rangeEnd=absCurrentYear+50;result=twoDigitYear+100*Math.floor(rangeEnd/100)-(twoDigitYear>=rangeEnd%100?100:0)}return isCommonEra?result:1-result}function isLeapYearIndex(year){return year%400==0||year%4==0&&year%100!=0}var YearParser=function(_Parser){_inherits(YearParser,_Parser);var _super=_createSuper(YearParser);function YearParser(){var _this;_classCallCheck(this,YearParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",130),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),_this}return _createClass(YearParser,[{key:"parse",value:function parse(dateString,token,match){var valueCallback=function valueCallback(year){return{year,isTwoDigitYear:"yy"===token}};switch(token){case"y":return mapValue(parseNDigits(4,dateString),valueCallback);case"yo":return mapValue(match.ordinalNumber(dateString,{unit:"year"}),valueCallback);default:return mapValue(parseNDigits(token.length,dateString),valueCallback)}}},{key:"validate",value:function validate(_date,value){return value.isTwoDigitYear||value.year>0}},{key:"set",value:function set(date,flags,value){var currentYear=date.getUTCFullYear();if(value.isTwoDigitYear){var normalizedTwoDigitYear=normalizeTwoDigitYear(value.year,currentYear);return date.setUTCFullYear(normalizedTwoDigitYear,0,1),date.setUTCHours(0,0,0,0),date}var year="era"in flags&&1!==flags.era?1-value.year:value.year;return date.setUTCFullYear(year,0,1),date.setUTCHours(0,0,0,0),date}}]),YearParser}(Parser),defaultOptions={};function getDefaultOptions(){return defaultOptions}function startOfUTCWeek(dirtyDate,options){var _ref,_ref2,_ref3,_options$weekStartsOn,_options$locale,_options$locale$optio,_defaultOptions$local,_defaultOptions$local2;requiredArgs(1,arguments);var defaultOptions=getDefaultOptions(),weekStartsOn=toInteger(null!==(_ref=null!==(_ref2=null!==(_ref3=null!==(_options$weekStartsOn=null==options?void 0:options.weekStartsOn)&&void 0!==_options$weekStartsOn?_options$weekStartsOn:null==options||null===(_options$locale=options.locale)||void 0===_options$locale||null===(_options$locale$optio=_options$locale.options)||void 0===_options$locale$optio?void 0:_options$locale$optio.weekStartsOn)&&void 0!==_ref3?_ref3:defaultOptions.weekStartsOn)&&void 0!==_ref2?_ref2:null===(_defaultOptions$local=defaultOptions.locale)||void 0===_defaultOptions$local||null===(_defaultOptions$local2=_defaultOptions$local.options)||void 0===_defaultOptions$local2?void 0:_defaultOptions$local2.weekStartsOn)&&void 0!==_ref?_ref:0);if(!(weekStartsOn>=0&&weekStartsOn<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var date=toDate(dirtyDate),day=date.getUTCDay(),diff=(day<weekStartsOn?7:0)+day-weekStartsOn;return date.setUTCDate(date.getUTCDate()-diff),date.setUTCHours(0,0,0,0),date}function getUTCWeekYear(dirtyDate,options){var _ref,_ref2,_ref3,_options$firstWeekCon,_options$locale,_options$locale$optio,_defaultOptions$local,_defaultOptions$local2;requiredArgs(1,arguments);var date=toDate(dirtyDate),year=date.getUTCFullYear(),defaultOptions=getDefaultOptions(),firstWeekContainsDate=toInteger(null!==(_ref=null!==(_ref2=null!==(_ref3=null!==(_options$firstWeekCon=null==options?void 0:options.firstWeekContainsDate)&&void 0!==_options$firstWeekCon?_options$firstWeekCon:null==options||null===(_options$locale=options.locale)||void 0===_options$locale||null===(_options$locale$optio=_options$locale.options)||void 0===_options$locale$optio?void 0:_options$locale$optio.firstWeekContainsDate)&&void 0!==_ref3?_ref3:defaultOptions.firstWeekContainsDate)&&void 0!==_ref2?_ref2:null===(_defaultOptions$local=defaultOptions.locale)||void 0===_defaultOptions$local||null===(_defaultOptions$local2=_defaultOptions$local.options)||void 0===_defaultOptions$local2?void 0:_defaultOptions$local2.firstWeekContainsDate)&&void 0!==_ref?_ref:1);if(!(firstWeekContainsDate>=1&&firstWeekContainsDate<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var firstWeekOfNextYear=new Date(0);firstWeekOfNextYear.setUTCFullYear(year+1,0,firstWeekContainsDate),firstWeekOfNextYear.setUTCHours(0,0,0,0);var startOfNextYear=startOfUTCWeek(firstWeekOfNextYear,options),firstWeekOfThisYear=new Date(0);firstWeekOfThisYear.setUTCFullYear(year,0,firstWeekContainsDate),firstWeekOfThisYear.setUTCHours(0,0,0,0);var startOfThisYear=startOfUTCWeek(firstWeekOfThisYear,options);return date.getTime()>=startOfNextYear.getTime()?year+1:date.getTime()>=startOfThisYear.getTime()?year:year-1}var LocalWeekYearParser=function(_Parser){_inherits(LocalWeekYearParser,_Parser);var _super=_createSuper(LocalWeekYearParser);function LocalWeekYearParser(){var _this;_classCallCheck(this,LocalWeekYearParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",130),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),_this}return _createClass(LocalWeekYearParser,[{key:"parse",value:function parse(dateString,token,match){var valueCallback=function valueCallback(year){return{year,isTwoDigitYear:"YY"===token}};switch(token){case"Y":return mapValue(parseNDigits(4,dateString),valueCallback);case"Yo":return mapValue(match.ordinalNumber(dateString,{unit:"year"}),valueCallback);default:return mapValue(parseNDigits(token.length,dateString),valueCallback)}}},{key:"validate",value:function validate(_date,value){return value.isTwoDigitYear||value.year>0}},{key:"set",value:function set(date,flags,value,options){var currentYear=getUTCWeekYear(date,options);if(value.isTwoDigitYear){var normalizedTwoDigitYear=normalizeTwoDigitYear(value.year,currentYear);return date.setUTCFullYear(normalizedTwoDigitYear,0,options.firstWeekContainsDate),date.setUTCHours(0,0,0,0),startOfUTCWeek(date,options)}var year="era"in flags&&1!==flags.era?1-value.year:value.year;return date.setUTCFullYear(year,0,options.firstWeekContainsDate),date.setUTCHours(0,0,0,0),startOfUTCWeek(date,options)}}]),LocalWeekYearParser}(Parser);function startOfUTCISOWeek(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate),day=date.getUTCDay(),diff=(day<1?7:0)+day-1;return date.setUTCDate(date.getUTCDate()-diff),date.setUTCHours(0,0,0,0),date}var ISOWeekYearParser=function(_Parser){_inherits(ISOWeekYearParser,_Parser);var _super=_createSuper(ISOWeekYearParser);function ISOWeekYearParser(){var _this;_classCallCheck(this,ISOWeekYearParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",130),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),_this}return _createClass(ISOWeekYearParser,[{key:"parse",value:function parse(dateString,token){return parseNDigitsSigned("R"===token?4:token.length,dateString)}},{key:"set",value:function set(_date,_flags,value){var firstWeekOfYear=new Date(0);return firstWeekOfYear.setUTCFullYear(value,0,4),firstWeekOfYear.setUTCHours(0,0,0,0),startOfUTCISOWeek(firstWeekOfYear)}}]),ISOWeekYearParser}(Parser),ExtendedYearParser=function(_Parser){_inherits(ExtendedYearParser,_Parser);var _super=_createSuper(ExtendedYearParser);function ExtendedYearParser(){var _this;_classCallCheck(this,ExtendedYearParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",130),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),_this}return _createClass(ExtendedYearParser,[{key:"parse",value:function parse(dateString,token){return parseNDigitsSigned("u"===token?4:token.length,dateString)}},{key:"set",value:function set(date,_flags,value){return date.setUTCFullYear(value,0,1),date.setUTCHours(0,0,0,0),date}}]),ExtendedYearParser}(Parser),QuarterParser=function(_Parser){_inherits(QuarterParser,_Parser);var _super=_createSuper(QuarterParser);function QuarterParser(){var _this;_classCallCheck(this,QuarterParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",120),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),_this}return _createClass(QuarterParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"Q":case"QQ":return parseNDigits(token.length,dateString);case"Qo":return match.ordinalNumber(dateString,{unit:"quarter"});case"QQQ":return match.quarter(dateString,{width:"abbreviated",context:"formatting"})||match.quarter(dateString,{width:"narrow",context:"formatting"});case"QQQQQ":return match.quarter(dateString,{width:"narrow",context:"formatting"});default:return match.quarter(dateString,{width:"wide",context:"formatting"})||match.quarter(dateString,{width:"abbreviated",context:"formatting"})||match.quarter(dateString,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function validate(_date,value){return value>=1&&value<=4}},{key:"set",value:function set(date,_flags,value){return date.setUTCMonth(3*(value-1),1),date.setUTCHours(0,0,0,0),date}}]),QuarterParser}(Parser),StandAloneQuarterParser=function(_Parser){_inherits(StandAloneQuarterParser,_Parser);var _super=_createSuper(StandAloneQuarterParser);function StandAloneQuarterParser(){var _this;_classCallCheck(this,StandAloneQuarterParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",120),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),_this}return _createClass(StandAloneQuarterParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"q":case"qq":return parseNDigits(token.length,dateString);case"qo":return match.ordinalNumber(dateString,{unit:"quarter"});case"qqq":return match.quarter(dateString,{width:"abbreviated",context:"standalone"})||match.quarter(dateString,{width:"narrow",context:"standalone"});case"qqqqq":return match.quarter(dateString,{width:"narrow",context:"standalone"});default:return match.quarter(dateString,{width:"wide",context:"standalone"})||match.quarter(dateString,{width:"abbreviated",context:"standalone"})||match.quarter(dateString,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function validate(_date,value){return value>=1&&value<=4}},{key:"set",value:function set(date,_flags,value){return date.setUTCMonth(3*(value-1),1),date.setUTCHours(0,0,0,0),date}}]),StandAloneQuarterParser}(Parser),MonthParser=function(_Parser){_inherits(MonthParser,_Parser);var _super=_createSuper(MonthParser);function MonthParser(){var _this;_classCallCheck(this,MonthParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),_defineProperty((0,assertThisInitialized.A)(_this),"priority",110),_this}return _createClass(MonthParser,[{key:"parse",value:function parse(dateString,token,match){var valueCallback=function valueCallback(value){return value-1};switch(token){case"M":return mapValue(parseNumericPattern(numericPatterns_month,dateString),valueCallback);case"MM":return mapValue(parseNDigits(2,dateString),valueCallback);case"Mo":return mapValue(match.ordinalNumber(dateString,{unit:"month"}),valueCallback);case"MMM":return match.month(dateString,{width:"abbreviated",context:"formatting"})||match.month(dateString,{width:"narrow",context:"formatting"});case"MMMMM":return match.month(dateString,{width:"narrow",context:"formatting"});default:return match.month(dateString,{width:"wide",context:"formatting"})||match.month(dateString,{width:"abbreviated",context:"formatting"})||match.month(dateString,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=11}},{key:"set",value:function set(date,_flags,value){return date.setUTCMonth(value,1),date.setUTCHours(0,0,0,0),date}}]),MonthParser}(Parser),StandAloneMonthParser=function(_Parser){_inherits(StandAloneMonthParser,_Parser);var _super=_createSuper(StandAloneMonthParser);function StandAloneMonthParser(){var _this;_classCallCheck(this,StandAloneMonthParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",110),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),_this}return _createClass(StandAloneMonthParser,[{key:"parse",value:function parse(dateString,token,match){var valueCallback=function valueCallback(value){return value-1};switch(token){case"L":return mapValue(parseNumericPattern(numericPatterns_month,dateString),valueCallback);case"LL":return mapValue(parseNDigits(2,dateString),valueCallback);case"Lo":return mapValue(match.ordinalNumber(dateString,{unit:"month"}),valueCallback);case"LLL":return match.month(dateString,{width:"abbreviated",context:"standalone"})||match.month(dateString,{width:"narrow",context:"standalone"});case"LLLLL":return match.month(dateString,{width:"narrow",context:"standalone"});default:return match.month(dateString,{width:"wide",context:"standalone"})||match.month(dateString,{width:"abbreviated",context:"standalone"})||match.month(dateString,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=11}},{key:"set",value:function set(date,_flags,value){return date.setUTCMonth(value,1),date.setUTCHours(0,0,0,0),date}}]),StandAloneMonthParser}(Parser);var MILLISECONDS_IN_WEEK=6048e5;function getUTCWeek(dirtyDate,options){requiredArgs(1,arguments);var date=toDate(dirtyDate),diff=startOfUTCWeek(date,options).getTime()-function startOfUTCWeekYear(dirtyDate,options){var _ref,_ref2,_ref3,_options$firstWeekCon,_options$locale,_options$locale$optio,_defaultOptions$local,_defaultOptions$local2;requiredArgs(1,arguments);var defaultOptions=getDefaultOptions(),firstWeekContainsDate=toInteger(null!==(_ref=null!==(_ref2=null!==(_ref3=null!==(_options$firstWeekCon=null==options?void 0:options.firstWeekContainsDate)&&void 0!==_options$firstWeekCon?_options$firstWeekCon:null==options||null===(_options$locale=options.locale)||void 0===_options$locale||null===(_options$locale$optio=_options$locale.options)||void 0===_options$locale$optio?void 0:_options$locale$optio.firstWeekContainsDate)&&void 0!==_ref3?_ref3:defaultOptions.firstWeekContainsDate)&&void 0!==_ref2?_ref2:null===(_defaultOptions$local=defaultOptions.locale)||void 0===_defaultOptions$local||null===(_defaultOptions$local2=_defaultOptions$local.options)||void 0===_defaultOptions$local2?void 0:_defaultOptions$local2.firstWeekContainsDate)&&void 0!==_ref?_ref:1),year=getUTCWeekYear(dirtyDate,options),firstWeek=new Date(0);return firstWeek.setUTCFullYear(year,0,firstWeekContainsDate),firstWeek.setUTCHours(0,0,0,0),startOfUTCWeek(firstWeek,options)}(date,options).getTime();return Math.round(diff/MILLISECONDS_IN_WEEK)+1}var LocalWeekParser=function(_Parser){_inherits(LocalWeekParser,_Parser);var _super=_createSuper(LocalWeekParser);function LocalWeekParser(){var _this;_classCallCheck(this,LocalWeekParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",100),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),_this}return _createClass(LocalWeekParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"w":return parseNumericPattern(numericPatterns_week,dateString);case"wo":return match.ordinalNumber(dateString,{unit:"week"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=1&&value<=53}},{key:"set",value:function set(date,_flags,value,options){return startOfUTCWeek(function setUTCWeek(dirtyDate,dirtyWeek,options){requiredArgs(2,arguments);var date=toDate(dirtyDate),week=toInteger(dirtyWeek),diff=getUTCWeek(date,options)-week;return date.setUTCDate(date.getUTCDate()-7*diff),date}(date,value,options),options)}}]),LocalWeekParser}(Parser);function getUTCISOWeekYear(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate),year=date.getUTCFullYear(),fourthOfJanuaryOfNextYear=new Date(0);fourthOfJanuaryOfNextYear.setUTCFullYear(year+1,0,4),fourthOfJanuaryOfNextYear.setUTCHours(0,0,0,0);var startOfNextYear=startOfUTCISOWeek(fourthOfJanuaryOfNextYear),fourthOfJanuaryOfThisYear=new Date(0);fourthOfJanuaryOfThisYear.setUTCFullYear(year,0,4),fourthOfJanuaryOfThisYear.setUTCHours(0,0,0,0);var startOfThisYear=startOfUTCISOWeek(fourthOfJanuaryOfThisYear);return date.getTime()>=startOfNextYear.getTime()?year+1:date.getTime()>=startOfThisYear.getTime()?year:year-1}var getUTCISOWeek_MILLISECONDS_IN_WEEK=6048e5;function getUTCISOWeek(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate),diff=startOfUTCISOWeek(date).getTime()-function startOfUTCISOWeekYear(dirtyDate){requiredArgs(1,arguments);var year=getUTCISOWeekYear(dirtyDate),fourthOfJanuary=new Date(0);return fourthOfJanuary.setUTCFullYear(year,0,4),fourthOfJanuary.setUTCHours(0,0,0,0),startOfUTCISOWeek(fourthOfJanuary)}(date).getTime();return Math.round(diff/getUTCISOWeek_MILLISECONDS_IN_WEEK)+1}var ISOWeekParser=function(_Parser){_inherits(ISOWeekParser,_Parser);var _super=_createSuper(ISOWeekParser);function ISOWeekParser(){var _this;_classCallCheck(this,ISOWeekParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",100),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),_this}return _createClass(ISOWeekParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"I":return parseNumericPattern(numericPatterns_week,dateString);case"Io":return match.ordinalNumber(dateString,{unit:"week"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=1&&value<=53}},{key:"set",value:function set(date,_flags,value){return startOfUTCISOWeek(function setUTCISOWeek(dirtyDate,dirtyISOWeek){requiredArgs(2,arguments);var date=toDate(dirtyDate),isoWeek=toInteger(dirtyISOWeek),diff=getUTCISOWeek(date)-isoWeek;return date.setUTCDate(date.getUTCDate()-7*diff),date}(date,value))}}]),ISOWeekParser}(Parser),DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],DAYS_IN_MONTH_LEAP_YEAR=[31,29,31,30,31,30,31,31,30,31,30,31],DateParser=function(_Parser){_inherits(DateParser,_Parser);var _super=_createSuper(DateParser);function DateParser(){var _this;_classCallCheck(this,DateParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",90),_defineProperty((0,assertThisInitialized.A)(_this),"subPriority",1),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),_this}return _createClass(DateParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"d":return parseNumericPattern(numericPatterns_date,dateString);case"do":return match.ordinalNumber(dateString,{unit:"date"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(date,value){var isLeapYear=isLeapYearIndex(date.getUTCFullYear()),month=date.getUTCMonth();return isLeapYear?value>=1&&value<=DAYS_IN_MONTH_LEAP_YEAR[month]:value>=1&&value<=DAYS_IN_MONTH[month]}},{key:"set",value:function set(date,_flags,value){return date.setUTCDate(value),date.setUTCHours(0,0,0,0),date}}]),DateParser}(Parser),DayOfYearParser=function(_Parser){_inherits(DayOfYearParser,_Parser);var _super=_createSuper(DayOfYearParser);function DayOfYearParser(){var _this;_classCallCheck(this,DayOfYearParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",90),_defineProperty((0,assertThisInitialized.A)(_this),"subpriority",1),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),_this}return _createClass(DayOfYearParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"D":case"DD":return parseNumericPattern(numericPatterns_dayOfYear,dateString);case"Do":return match.ordinalNumber(dateString,{unit:"date"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(date,value){return isLeapYearIndex(date.getUTCFullYear())?value>=1&&value<=366:value>=1&&value<=365}},{key:"set",value:function set(date,_flags,value){return date.setUTCMonth(0,value),date.setUTCHours(0,0,0,0),date}}]),DayOfYearParser}(Parser);function setUTCDay(dirtyDate,dirtyDay,options){var _ref,_ref2,_ref3,_options$weekStartsOn,_options$locale,_options$locale$optio,_defaultOptions$local,_defaultOptions$local2;requiredArgs(2,arguments);var defaultOptions=getDefaultOptions(),weekStartsOn=toInteger(null!==(_ref=null!==(_ref2=null!==(_ref3=null!==(_options$weekStartsOn=null==options?void 0:options.weekStartsOn)&&void 0!==_options$weekStartsOn?_options$weekStartsOn:null==options||null===(_options$locale=options.locale)||void 0===_options$locale||null===(_options$locale$optio=_options$locale.options)||void 0===_options$locale$optio?void 0:_options$locale$optio.weekStartsOn)&&void 0!==_ref3?_ref3:defaultOptions.weekStartsOn)&&void 0!==_ref2?_ref2:null===(_defaultOptions$local=defaultOptions.locale)||void 0===_defaultOptions$local||null===(_defaultOptions$local2=_defaultOptions$local.options)||void 0===_defaultOptions$local2?void 0:_defaultOptions$local2.weekStartsOn)&&void 0!==_ref?_ref:0);if(!(weekStartsOn>=0&&weekStartsOn<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var date=toDate(dirtyDate),day=toInteger(dirtyDay),diff=((day%7+7)%7<weekStartsOn?7:0)+day-date.getUTCDay();return date.setUTCDate(date.getUTCDate()+diff),date}var DayParser=function(_Parser){_inherits(DayParser,_Parser);var _super=_createSuper(DayParser);function DayParser(){var _this;_classCallCheck(this,DayParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",90),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["D","i","e","c","t","T"]),_this}return _createClass(DayParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"E":case"EE":case"EEE":return match.day(dateString,{width:"abbreviated",context:"formatting"})||match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"});case"EEEEE":return match.day(dateString,{width:"narrow",context:"formatting"});case"EEEEEE":return match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"});default:return match.day(dateString,{width:"wide",context:"formatting"})||match.day(dateString,{width:"abbreviated",context:"formatting"})||match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=6}},{key:"set",value:function set(date,_flags,value,options){return(date=setUTCDay(date,value,options)).setUTCHours(0,0,0,0),date}}]),DayParser}(Parser),LocalDayParser=function(_Parser){_inherits(LocalDayParser,_Parser);var _super=_createSuper(LocalDayParser);function LocalDayParser(){var _this;_classCallCheck(this,LocalDayParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",90),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),_this}return _createClass(LocalDayParser,[{key:"parse",value:function parse(dateString,token,match,options){var valueCallback=function valueCallback(value){var wholeWeekDays=7*Math.floor((value-1)/7);return(value+options.weekStartsOn+6)%7+wholeWeekDays};switch(token){case"e":case"ee":return mapValue(parseNDigits(token.length,dateString),valueCallback);case"eo":return mapValue(match.ordinalNumber(dateString,{unit:"day"}),valueCallback);case"eee":return match.day(dateString,{width:"abbreviated",context:"formatting"})||match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"});case"eeeee":return match.day(dateString,{width:"narrow",context:"formatting"});case"eeeeee":return match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"});default:return match.day(dateString,{width:"wide",context:"formatting"})||match.day(dateString,{width:"abbreviated",context:"formatting"})||match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=6}},{key:"set",value:function set(date,_flags,value,options){return(date=setUTCDay(date,value,options)).setUTCHours(0,0,0,0),date}}]),LocalDayParser}(Parser),StandAloneLocalDayParser=function(_Parser){_inherits(StandAloneLocalDayParser,_Parser);var _super=_createSuper(StandAloneLocalDayParser);function StandAloneLocalDayParser(){var _this;_classCallCheck(this,StandAloneLocalDayParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",90),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),_this}return _createClass(StandAloneLocalDayParser,[{key:"parse",value:function parse(dateString,token,match,options){var valueCallback=function valueCallback(value){var wholeWeekDays=7*Math.floor((value-1)/7);return(value+options.weekStartsOn+6)%7+wholeWeekDays};switch(token){case"c":case"cc":return mapValue(parseNDigits(token.length,dateString),valueCallback);case"co":return mapValue(match.ordinalNumber(dateString,{unit:"day"}),valueCallback);case"ccc":return match.day(dateString,{width:"abbreviated",context:"standalone"})||match.day(dateString,{width:"short",context:"standalone"})||match.day(dateString,{width:"narrow",context:"standalone"});case"ccccc":return match.day(dateString,{width:"narrow",context:"standalone"});case"cccccc":return match.day(dateString,{width:"short",context:"standalone"})||match.day(dateString,{width:"narrow",context:"standalone"});default:return match.day(dateString,{width:"wide",context:"standalone"})||match.day(dateString,{width:"abbreviated",context:"standalone"})||match.day(dateString,{width:"short",context:"standalone"})||match.day(dateString,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=6}},{key:"set",value:function set(date,_flags,value,options){return(date=setUTCDay(date,value,options)).setUTCHours(0,0,0,0),date}}]),StandAloneLocalDayParser}(Parser);var ISODayParser=function(_Parser){_inherits(ISODayParser,_Parser);var _super=_createSuper(ISODayParser);function ISODayParser(){var _this;_classCallCheck(this,ISODayParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",90),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),_this}return _createClass(ISODayParser,[{key:"parse",value:function parse(dateString,token,match){var valueCallback=function valueCallback(value){return 0===value?7:value};switch(token){case"i":case"ii":return parseNDigits(token.length,dateString);case"io":return match.ordinalNumber(dateString,{unit:"day"});case"iii":return mapValue(match.day(dateString,{width:"abbreviated",context:"formatting"})||match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"}),valueCallback);case"iiiii":return mapValue(match.day(dateString,{width:"narrow",context:"formatting"}),valueCallback);case"iiiiii":return mapValue(match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"}),valueCallback);default:return mapValue(match.day(dateString,{width:"wide",context:"formatting"})||match.day(dateString,{width:"abbreviated",context:"formatting"})||match.day(dateString,{width:"short",context:"formatting"})||match.day(dateString,{width:"narrow",context:"formatting"}),valueCallback)}}},{key:"validate",value:function validate(_date,value){return value>=1&&value<=7}},{key:"set",value:function set(date,_flags,value){return date=function setUTCISODay(dirtyDate,dirtyDay){requiredArgs(2,arguments);var day=toInteger(dirtyDay);day%7==0&&(day-=7);var date=toDate(dirtyDate),diff=((day%7+7)%7<1?7:0)+day-date.getUTCDay();return date.setUTCDate(date.getUTCDate()+diff),date}(date,value),date.setUTCHours(0,0,0,0),date}}]),ISODayParser}(Parser),AMPMParser=function(_Parser){_inherits(AMPMParser,_Parser);var _super=_createSuper(AMPMParser);function AMPMParser(){var _this;_classCallCheck(this,AMPMParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",80),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["b","B","H","k","t","T"]),_this}return _createClass(AMPMParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"a":case"aa":case"aaa":return match.dayPeriod(dateString,{width:"abbreviated",context:"formatting"})||match.dayPeriod(dateString,{width:"narrow",context:"formatting"});case"aaaaa":return match.dayPeriod(dateString,{width:"narrow",context:"formatting"});default:return match.dayPeriod(dateString,{width:"wide",context:"formatting"})||match.dayPeriod(dateString,{width:"abbreviated",context:"formatting"})||match.dayPeriod(dateString,{width:"narrow",context:"formatting"})}}},{key:"set",value:function set(date,_flags,value){return date.setUTCHours(dayPeriodEnumToHours(value),0,0,0),date}}]),AMPMParser}(Parser),AMPMMidnightParser=function(_Parser){_inherits(AMPMMidnightParser,_Parser);var _super=_createSuper(AMPMMidnightParser);function AMPMMidnightParser(){var _this;_classCallCheck(this,AMPMMidnightParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",80),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["a","B","H","k","t","T"]),_this}return _createClass(AMPMMidnightParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"b":case"bb":case"bbb":return match.dayPeriod(dateString,{width:"abbreviated",context:"formatting"})||match.dayPeriod(dateString,{width:"narrow",context:"formatting"});case"bbbbb":return match.dayPeriod(dateString,{width:"narrow",context:"formatting"});default:return match.dayPeriod(dateString,{width:"wide",context:"formatting"})||match.dayPeriod(dateString,{width:"abbreviated",context:"formatting"})||match.dayPeriod(dateString,{width:"narrow",context:"formatting"})}}},{key:"set",value:function set(date,_flags,value){return date.setUTCHours(dayPeriodEnumToHours(value),0,0,0),date}}]),AMPMMidnightParser}(Parser),DayPeriodParser=function(_Parser){_inherits(DayPeriodParser,_Parser);var _super=_createSuper(DayPeriodParser);function DayPeriodParser(){var _this;_classCallCheck(this,DayPeriodParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",80),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["a","b","t","T"]),_this}return _createClass(DayPeriodParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"B":case"BB":case"BBB":return match.dayPeriod(dateString,{width:"abbreviated",context:"formatting"})||match.dayPeriod(dateString,{width:"narrow",context:"formatting"});case"BBBBB":return match.dayPeriod(dateString,{width:"narrow",context:"formatting"});default:return match.dayPeriod(dateString,{width:"wide",context:"formatting"})||match.dayPeriod(dateString,{width:"abbreviated",context:"formatting"})||match.dayPeriod(dateString,{width:"narrow",context:"formatting"})}}},{key:"set",value:function set(date,_flags,value){return date.setUTCHours(dayPeriodEnumToHours(value),0,0,0),date}}]),DayPeriodParser}(Parser),Hour1to12Parser=function(_Parser){_inherits(Hour1to12Parser,_Parser);var _super=_createSuper(Hour1to12Parser);function Hour1to12Parser(){var _this;_classCallCheck(this,Hour1to12Parser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",70),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["H","K","k","t","T"]),_this}return _createClass(Hour1to12Parser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"h":return parseNumericPattern(numericPatterns_hour12h,dateString);case"ho":return match.ordinalNumber(dateString,{unit:"hour"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=1&&value<=12}},{key:"set",value:function set(date,_flags,value){var isPM=date.getUTCHours()>=12;return isPM&&value<12?date.setUTCHours(value+12,0,0,0):isPM||12!==value?date.setUTCHours(value,0,0,0):date.setUTCHours(0,0,0,0),date}}]),Hour1to12Parser}(Parser),Hour0to23Parser=function(_Parser){_inherits(Hour0to23Parser,_Parser);var _super=_createSuper(Hour0to23Parser);function Hour0to23Parser(){var _this;_classCallCheck(this,Hour0to23Parser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",70),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["a","b","h","K","k","t","T"]),_this}return _createClass(Hour0to23Parser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"H":return parseNumericPattern(numericPatterns_hour23h,dateString);case"Ho":return match.ordinalNumber(dateString,{unit:"hour"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=23}},{key:"set",value:function set(date,_flags,value){return date.setUTCHours(value,0,0,0),date}}]),Hour0to23Parser}(Parser),Hour0To11Parser=function(_Parser){_inherits(Hour0To11Parser,_Parser);var _super=_createSuper(Hour0To11Parser);function Hour0To11Parser(){var _this;_classCallCheck(this,Hour0To11Parser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",70),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["h","H","k","t","T"]),_this}return _createClass(Hour0To11Parser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"K":return parseNumericPattern(numericPatterns_hour11h,dateString);case"Ko":return match.ordinalNumber(dateString,{unit:"hour"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=11}},{key:"set",value:function set(date,_flags,value){return date.getUTCHours()>=12&&value<12?date.setUTCHours(value+12,0,0,0):date.setUTCHours(value,0,0,0),date}}]),Hour0To11Parser}(Parser),Hour1To24Parser=function(_Parser){_inherits(Hour1To24Parser,_Parser);var _super=_createSuper(Hour1To24Parser);function Hour1To24Parser(){var _this;_classCallCheck(this,Hour1To24Parser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",70),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["a","b","h","H","K","t","T"]),_this}return _createClass(Hour1To24Parser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"k":return parseNumericPattern(numericPatterns_hour24h,dateString);case"ko":return match.ordinalNumber(dateString,{unit:"hour"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=1&&value<=24}},{key:"set",value:function set(date,_flags,value){var hours=value<=24?value%24:value;return date.setUTCHours(hours,0,0,0),date}}]),Hour1To24Parser}(Parser),MinuteParser=function(_Parser){_inherits(MinuteParser,_Parser);var _super=_createSuper(MinuteParser);function MinuteParser(){var _this;_classCallCheck(this,MinuteParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",60),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["t","T"]),_this}return _createClass(MinuteParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"m":return parseNumericPattern(numericPatterns_minute,dateString);case"mo":return match.ordinalNumber(dateString,{unit:"minute"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=59}},{key:"set",value:function set(date,_flags,value){return date.setUTCMinutes(value,0,0),date}}]),MinuteParser}(Parser),SecondParser=function(_Parser){_inherits(SecondParser,_Parser);var _super=_createSuper(SecondParser);function SecondParser(){var _this;_classCallCheck(this,SecondParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",50),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["t","T"]),_this}return _createClass(SecondParser,[{key:"parse",value:function parse(dateString,token,match){switch(token){case"s":return parseNumericPattern(numericPatterns_second,dateString);case"so":return match.ordinalNumber(dateString,{unit:"second"});default:return parseNDigits(token.length,dateString)}}},{key:"validate",value:function validate(_date,value){return value>=0&&value<=59}},{key:"set",value:function set(date,_flags,value){return date.setUTCSeconds(value,0),date}}]),SecondParser}(Parser),FractionOfSecondParser=function(_Parser){_inherits(FractionOfSecondParser,_Parser);var _super=_createSuper(FractionOfSecondParser);function FractionOfSecondParser(){var _this;_classCallCheck(this,FractionOfSecondParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",30),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["t","T"]),_this}return _createClass(FractionOfSecondParser,[{key:"parse",value:function parse(dateString,token){return mapValue(parseNDigits(token.length,dateString),(function valueCallback(value){return Math.floor(value*Math.pow(10,3-token.length))}))}},{key:"set",value:function set(date,_flags,value){return date.setUTCMilliseconds(value),date}}]),FractionOfSecondParser}(Parser),ISOTimezoneWithZParser=function(_Parser){_inherits(ISOTimezoneWithZParser,_Parser);var _super=_createSuper(ISOTimezoneWithZParser);function ISOTimezoneWithZParser(){var _this;_classCallCheck(this,ISOTimezoneWithZParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",10),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["t","T","x"]),_this}return _createClass(ISOTimezoneWithZParser,[{key:"parse",value:function parse(dateString,token){switch(token){case"X":return parseTimezonePattern(timezonePatterns_basicOptionalMinutes,dateString);case"XX":return parseTimezonePattern(timezonePatterns_basic,dateString);case"XXXX":return parseTimezonePattern(timezonePatterns_basicOptionalSeconds,dateString);case"XXXXX":return parseTimezonePattern(timezonePatterns_extendedOptionalSeconds,dateString);default:return parseTimezonePattern(timezonePatterns_extended,dateString)}}},{key:"set",value:function set(date,flags,value){return flags.timestampIsSet?date:new Date(date.getTime()-value)}}]),ISOTimezoneWithZParser}(Parser),ISOTimezoneParser=function(_Parser){_inherits(ISOTimezoneParser,_Parser);var _super=_createSuper(ISOTimezoneParser);function ISOTimezoneParser(){var _this;_classCallCheck(this,ISOTimezoneParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",10),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens",["t","T","X"]),_this}return _createClass(ISOTimezoneParser,[{key:"parse",value:function parse(dateString,token){switch(token){case"x":return parseTimezonePattern(timezonePatterns_basicOptionalMinutes,dateString);case"xx":return parseTimezonePattern(timezonePatterns_basic,dateString);case"xxxx":return parseTimezonePattern(timezonePatterns_basicOptionalSeconds,dateString);case"xxxxx":return parseTimezonePattern(timezonePatterns_extendedOptionalSeconds,dateString);default:return parseTimezonePattern(timezonePatterns_extended,dateString)}}},{key:"set",value:function set(date,flags,value){return flags.timestampIsSet?date:new Date(date.getTime()-value)}}]),ISOTimezoneParser}(Parser),TimestampSecondsParser=function(_Parser){_inherits(TimestampSecondsParser,_Parser);var _super=_createSuper(TimestampSecondsParser);function TimestampSecondsParser(){var _this;_classCallCheck(this,TimestampSecondsParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",40),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens","*"),_this}return _createClass(TimestampSecondsParser,[{key:"parse",value:function parse(dateString){return parseAnyDigitsSigned(dateString)}},{key:"set",value:function set(_date,_flags,value){return[new Date(1e3*value),{timestampIsSet:!0}]}}]),TimestampSecondsParser}(Parser),TimestampMillisecondsParser=function(_Parser){_inherits(TimestampMillisecondsParser,_Parser);var _super=_createSuper(TimestampMillisecondsParser);function TimestampMillisecondsParser(){var _this;_classCallCheck(this,TimestampMillisecondsParser);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty((0,assertThisInitialized.A)(_this),"priority",20),_defineProperty((0,assertThisInitialized.A)(_this),"incompatibleTokens","*"),_this}return _createClass(TimestampMillisecondsParser,[{key:"parse",value:function parse(dateString){return parseAnyDigitsSigned(dateString)}},{key:"set",value:function set(_date,_flags,value){return[new Date(value),{timestampIsSet:!0}]}}]),TimestampMillisecondsParser}(Parser),parsers={G:new EraParser,y:new YearParser,Y:new LocalWeekYearParser,R:new ISOWeekYearParser,u:new ExtendedYearParser,Q:new QuarterParser,q:new StandAloneQuarterParser,M:new MonthParser,L:new StandAloneMonthParser,w:new LocalWeekParser,I:new ISOWeekParser,d:new DateParser,D:new DayOfYearParser,E:new DayParser,e:new LocalDayParser,c:new StandAloneLocalDayParser,i:new ISODayParser,a:new AMPMParser,b:new AMPMMidnightParser,B:new DayPeriodParser,h:new Hour1to12Parser,H:new Hour0to23Parser,K:new Hour0To11Parser,k:new Hour1To24Parser,m:new MinuteParser,s:new SecondParser,S:new FractionOfSecondParser,X:new ISOTimezoneWithZParser,x:new ISOTimezoneParser,t:new TimestampSecondsParser,T:new TimestampMillisecondsParser},formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,notWhitespaceRegExp=/\S/,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function parse(dirtyDateString,dirtyFormatString,dirtyReferenceDate,options){var _ref,_options$locale,_ref2,_ref3,_ref4,_options$firstWeekCon,_options$locale2,_options$locale2$opti,_defaultOptions$local,_defaultOptions$local2,_ref5,_ref6,_ref7,_options$weekStartsOn,_options$locale3,_options$locale3$opti,_defaultOptions$local3,_defaultOptions$local4;requiredArgs(3,arguments);var dateString=String(dirtyDateString),formatString=String(dirtyFormatString),defaultOptions=getDefaultOptions(),locale=null!==(_ref=null!==(_options$locale=null==options?void 0:options.locale)&&void 0!==_options$locale?_options$locale:defaultOptions.locale)&&void 0!==_ref?_ref:defaultLocale;if(!locale.match)throw new RangeError("locale must contain match property");var firstWeekContainsDate=toInteger(null!==(_ref2=null!==(_ref3=null!==(_ref4=null!==(_options$firstWeekCon=null==options?void 0:options.firstWeekContainsDate)&&void 0!==_options$firstWeekCon?_options$firstWeekCon:null==options||null===(_options$locale2=options.locale)||void 0===_options$locale2||null===(_options$locale2$opti=_options$locale2.options)||void 0===_options$locale2$opti?void 0:_options$locale2$opti.firstWeekContainsDate)&&void 0!==_ref4?_ref4:defaultOptions.firstWeekContainsDate)&&void 0!==_ref3?_ref3:null===(_defaultOptions$local=defaultOptions.locale)||void 0===_defaultOptions$local||null===(_defaultOptions$local2=_defaultOptions$local.options)||void 0===_defaultOptions$local2?void 0:_defaultOptions$local2.firstWeekContainsDate)&&void 0!==_ref2?_ref2:1);if(!(firstWeekContainsDate>=1&&firstWeekContainsDate<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var weekStartsOn=toInteger(null!==(_ref5=null!==(_ref6=null!==(_ref7=null!==(_options$weekStartsOn=null==options?void 0:options.weekStartsOn)&&void 0!==_options$weekStartsOn?_options$weekStartsOn:null==options||null===(_options$locale3=options.locale)||void 0===_options$locale3||null===(_options$locale3$opti=_options$locale3.options)||void 0===_options$locale3$opti?void 0:_options$locale3$opti.weekStartsOn)&&void 0!==_ref7?_ref7:defaultOptions.weekStartsOn)&&void 0!==_ref6?_ref6:null===(_defaultOptions$local3=defaultOptions.locale)||void 0===_defaultOptions$local3||null===(_defaultOptions$local4=_defaultOptions$local3.options)||void 0===_defaultOptions$local4?void 0:_defaultOptions$local4.weekStartsOn)&&void 0!==_ref5?_ref5:0);if(!(weekStartsOn>=0&&weekStartsOn<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===formatString)return""===dateString?toDate(dirtyReferenceDate):new Date(NaN);var _step,subFnOptions={firstWeekContainsDate,weekStartsOn,locale},setters=[new DateToSystemTimezoneSetter],tokens=formatString.match(longFormattingTokensRegExp).map((function(substring){var firstCharacter=substring[0];return firstCharacter in format_longFormatters?(0,format_longFormatters[firstCharacter])(substring,locale.formatLong):substring})).join("").match(formattingTokensRegExp),usedTokens=[],_iterator=_createForOfIteratorHelper(tokens);try{var _loop=function _loop(){var token=_step.value;null!=options&&options.useAdditionalWeekYearTokens||!isProtectedWeekYearToken(token)||throwProtectedError(token,formatString,dirtyDateString),null!=options&&options.useAdditionalDayOfYearTokens||!isProtectedDayOfYearToken(token)||throwProtectedError(token,formatString,dirtyDateString);var firstCharacter=token[0],parser=parsers[firstCharacter];if(parser){var incompatibleTokens=parser.incompatibleTokens;if(Array.isArray(incompatibleTokens)){var incompatibleToken=usedTokens.find((function(usedToken){return incompatibleTokens.includes(usedToken.token)||usedToken.token===firstCharacter}));if(incompatibleToken)throw new RangeError("The format string mustn't contain `".concat(incompatibleToken.fullToken,"` and `").concat(token,"` at the same time"))}else if("*"===parser.incompatibleTokens&&usedTokens.length>0)throw new RangeError("The format string mustn't contain `".concat(token,"` and any other token at the same time"));usedTokens.push({token:firstCharacter,fullToken:token});var parseResult=parser.run(dateString,token,locale.match,subFnOptions);if(!parseResult)return{v:new Date(NaN)};setters.push(parseResult.setter),dateString=parseResult.rest}else{if(firstCharacter.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+firstCharacter+"`");if("''"===token?token="'":"'"===firstCharacter&&(token=function cleanEscapedString(input){return input.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp,"'")}(token)),0!==dateString.indexOf(token))return{v:new Date(NaN)};dateString=dateString.slice(token.length)}};for(_iterator.s();!(_step=_iterator.n()).done;){var _ret=_loop();if("object"===_typeof(_ret))return _ret.v}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(dateString.length>0&&notWhitespaceRegExp.test(dateString))return new Date(NaN);var uniquePrioritySetters=setters.map((function(setter){return setter.priority})).sort((function(a,b){return b-a})).filter((function(priority,index,array){return array.indexOf(priority)===index})).map((function(priority){return setters.filter((function(setter){return setter.priority===priority})).sort((function(a,b){return b.subPriority-a.subPriority}))})).map((function(setterArray){return setterArray[0]})),date=toDate(dirtyReferenceDate);if(isNaN(date.getTime()))return new Date(NaN);var _step2,utcDate=subMilliseconds(date,getTimezoneOffsetInMilliseconds(date)),flags={},_iterator2=_createForOfIteratorHelper(uniquePrioritySetters);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var setter=_step2.value;if(!setter.validate(utcDate,subFnOptions))return new Date(NaN);var result=setter.set(utcDate,flags,subFnOptions);Array.isArray(result)?(utcDate=result[0],assign_assign(flags,result[1])):utcDate=result}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return utcDate}function parseISO(argument,options){var _options$additionalDi;requiredArgs(1,arguments);var additionalDigits=toInteger(null!==(_options$additionalDi=null==options?void 0:options.additionalDigits)&&void 0!==_options$additionalDi?_options$additionalDi:2);if(2!==additionalDigits&&1!==additionalDigits&&0!==additionalDigits)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof argument&&"[object String]"!==Object.prototype.toString.call(argument))return new Date(NaN);var date,dateStrings=function splitDateString(dateString){var timeString,dateStrings={},array=dateString.split(patterns.dateTimeDelimiter);if(array.length>2)return dateStrings;/:/.test(array[0])?timeString=array[0]:(dateStrings.date=array[0],timeString=array[1],patterns.timeZoneDelimiter.test(dateStrings.date)&&(dateStrings.date=dateString.split(patterns.timeZoneDelimiter)[0],timeString=dateString.substr(dateStrings.date.length,dateString.length)));if(timeString){var token=patterns.timezone.exec(timeString);token?(dateStrings.time=timeString.replace(token[1],""),dateStrings.timezone=token[1]):dateStrings.time=timeString}return dateStrings}(argument);if(dateStrings.date){var parseYearResult=function parseYear(dateString,additionalDigits){var regex=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+additionalDigits)+"})|(\\d{2}|[+-]\\d{"+(2+additionalDigits)+"})$)"),captures=dateString.match(regex);if(!captures)return{year:NaN,restDateString:""};var year=captures[1]?parseInt(captures[1]):null,century=captures[2]?parseInt(captures[2]):null;return{year:null===century?year:100*century,restDateString:dateString.slice((captures[1]||captures[2]).length)}}(dateStrings.date,additionalDigits);date=function parseDate(dateString,year){if(null===year)return new Date(NaN);var captures=dateString.match(dateRegex);if(!captures)return new Date(NaN);var isWeekDate=!!captures[4],dayOfYear=parseDateUnit(captures[1]),month=parseDateUnit(captures[2])-1,day=parseDateUnit(captures[3]),week=parseDateUnit(captures[4]),dayOfWeek=parseDateUnit(captures[5])-1;if(isWeekDate)return function validateWeekDate(_year,week,day){return week>=1&&week<=53&&day>=0&&day<=6}(0,week,dayOfWeek)?function dayOfISOWeekYear(isoWeekYear,week,day){var date=new Date(0);date.setUTCFullYear(isoWeekYear,0,4);var fourthOfJanuaryDay=date.getUTCDay()||7,diff=7*(week-1)+day+1-fourthOfJanuaryDay;return date.setUTCDate(date.getUTCDate()+diff),date}(year,week,dayOfWeek):new Date(NaN);var date=new Date(0);return function validateDate(year,month,date){return month>=0&&month<=11&&date>=1&&date<=(daysInMonths[month]||(parseISO_isLeapYearIndex(year)?29:28))}(year,month,day)&&function validateDayOfYearDate(year,dayOfYear){return dayOfYear>=1&&dayOfYear<=(parseISO_isLeapYearIndex(year)?366:365)}(year,dayOfYear)?(date.setUTCFullYear(year,month,Math.max(dayOfYear,day)),date):new Date(NaN)}(parseYearResult.restDateString,parseYearResult.year)}if(!date||isNaN(date.getTime()))return new Date(NaN);var offset,timestamp=date.getTime(),time=0;if(dateStrings.time&&(time=function parseTime(timeString){var captures=timeString.match(timeRegex);if(!captures)return NaN;var hours=parseTimeUnit(captures[1]),minutes=parseTimeUnit(captures[2]),seconds=parseTimeUnit(captures[3]);if(!function validateTime(hours,minutes,seconds){if(24===hours)return 0===minutes&&0===seconds;return seconds>=0&&seconds<60&&minutes>=0&&minutes<60&&hours>=0&&hours<25}(hours,minutes,seconds))return NaN;return hours*millisecondsInHour+minutes*millisecondsInMinute+1e3*seconds}(dateStrings.time),isNaN(time)))return new Date(NaN);if(!dateStrings.timezone){var dirtyDate=new Date(timestamp+time),result=new Date(0);return result.setFullYear(dirtyDate.getUTCFullYear(),dirtyDate.getUTCMonth(),dirtyDate.getUTCDate()),result.setHours(dirtyDate.getUTCHours(),dirtyDate.getUTCMinutes(),dirtyDate.getUTCSeconds(),dirtyDate.getUTCMilliseconds()),result}return offset=function parseTimezone(timezoneString){if("Z"===timezoneString)return 0;var captures=timezoneString.match(timezoneRegex);if(!captures)return 0;var sign="+"===captures[1]?-1:1,hours=parseInt(captures[2]),minutes=captures[3]&&parseInt(captures[3])||0;if(!function validateTimezone(_hours,minutes){return minutes>=0&&minutes<=59}(0,minutes))return NaN;return sign*(hours*millisecondsInHour+minutes*millisecondsInMinute)}(dateStrings.timezone),isNaN(offset)?new Date(NaN):new Date(timestamp+time+offset)}var patterns={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dateRegex=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,timeRegex=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,timezoneRegex=/^([+-])(\d{2})(?::?(\d{2}))?$/;function parseDateUnit(value){return value?parseInt(value):1}function parseTimeUnit(value){return value&&parseFloat(value.replace(",","."))||0}var daysInMonths=[31,null,31,30,31,30,31,31,30,31,30,31];function parseISO_isLeapYearIndex(year){return year%400==0||year%4==0&&year%100!=0}function isValid(dirtyDate){if(requiredArgs(1,arguments),!function isDate(value){return requiredArgs(1,arguments),value instanceof Date||"object"===_typeof(value)&&"[object Date]"===Object.prototype.toString.call(value)}(dirtyDate)&&"number"!=typeof dirtyDate)return!1;var date=toDate(dirtyDate);return!isNaN(Number(date))}function addLeadingZeros(number,targetLength){for(var sign=number<0?"-":"",output=Math.abs(number).toString();output.length<targetLength;)output="0"+output;return sign+output}const lightFormatters={y:function y(date,token){var signedYear=date.getUTCFullYear(),year=signedYear>0?signedYear:1-signedYear;return addLeadingZeros("yy"===token?year%100:year,token.length)},M:function M(date,token){var month=date.getUTCMonth();return"M"===token?String(month+1):addLeadingZeros(month+1,2)},d:function d(date,token){return addLeadingZeros(date.getUTCDate(),token.length)},a:function a(date,token){var dayPeriodEnumValue=date.getUTCHours()/12>=1?"pm":"am";switch(token){case"a":case"aa":return dayPeriodEnumValue.toUpperCase();case"aaa":return dayPeriodEnumValue;case"aaaaa":return dayPeriodEnumValue[0];default:return"am"===dayPeriodEnumValue?"a.m.":"p.m."}},h:function h(date,token){return addLeadingZeros(date.getUTCHours()%12||12,token.length)},H:function H(date,token){return addLeadingZeros(date.getUTCHours(),token.length)},m:function m(date,token){return addLeadingZeros(date.getUTCMinutes(),token.length)},s:function s(date,token){return addLeadingZeros(date.getUTCSeconds(),token.length)},S:function S(date,token){var numberOfDigits=token.length,milliseconds=date.getUTCMilliseconds();return addLeadingZeros(Math.floor(milliseconds*Math.pow(10,numberOfDigits-3)),token.length)}};var dayPeriodEnum_midnight="midnight",dayPeriodEnum_noon="noon",dayPeriodEnum_morning="morning",dayPeriodEnum_afternoon="afternoon",dayPeriodEnum_evening="evening",dayPeriodEnum_night="night",formatters_formatters={G:function G(date,token,localize){var era=date.getUTCFullYear()>0?1:0;switch(token){case"G":case"GG":case"GGG":return localize.era(era,{width:"abbreviated"});case"GGGGG":return localize.era(era,{width:"narrow"});default:return localize.era(era,{width:"wide"})}},y:function y(date,token,localize){if("yo"===token){var signedYear=date.getUTCFullYear(),year=signedYear>0?signedYear:1-signedYear;return localize.ordinalNumber(year,{unit:"year"})}return lightFormatters.y(date,token)},Y:function Y(date,token,localize,options){var signedWeekYear=getUTCWeekYear(date,options),weekYear=signedWeekYear>0?signedWeekYear:1-signedWeekYear;return"YY"===token?addLeadingZeros(weekYear%100,2):"Yo"===token?localize.ordinalNumber(weekYear,{unit:"year"}):addLeadingZeros(weekYear,token.length)},R:function R(date,token){return addLeadingZeros(getUTCISOWeekYear(date),token.length)},u:function u(date,token){return addLeadingZeros(date.getUTCFullYear(),token.length)},Q:function Q(date,token,localize){var quarter=Math.ceil((date.getUTCMonth()+1)/3);switch(token){case"Q":return String(quarter);case"QQ":return addLeadingZeros(quarter,2);case"Qo":return localize.ordinalNumber(quarter,{unit:"quarter"});case"QQQ":return localize.quarter(quarter,{width:"abbreviated",context:"formatting"});case"QQQQQ":return localize.quarter(quarter,{width:"narrow",context:"formatting"});default:return localize.quarter(quarter,{width:"wide",context:"formatting"})}},q:function q(date,token,localize){var quarter=Math.ceil((date.getUTCMonth()+1)/3);switch(token){case"q":return String(quarter);case"qq":return addLeadingZeros(quarter,2);case"qo":return localize.ordinalNumber(quarter,{unit:"quarter"});case"qqq":return localize.quarter(quarter,{width:"abbreviated",context:"standalone"});case"qqqqq":return localize.quarter(quarter,{width:"narrow",context:"standalone"});default:return localize.quarter(quarter,{width:"wide",context:"standalone"})}},M:function M(date,token,localize){var month=date.getUTCMonth();switch(token){case"M":case"MM":return lightFormatters.M(date,token);case"Mo":return localize.ordinalNumber(month+1,{unit:"month"});case"MMM":return localize.month(month,{width:"abbreviated",context:"formatting"});case"MMMMM":return localize.month(month,{width:"narrow",context:"formatting"});default:return localize.month(month,{width:"wide",context:"formatting"})}},L:function L(date,token,localize){var month=date.getUTCMonth();switch(token){case"L":return String(month+1);case"LL":return addLeadingZeros(month+1,2);case"Lo":return localize.ordinalNumber(month+1,{unit:"month"});case"LLL":return localize.month(month,{width:"abbreviated",context:"standalone"});case"LLLLL":return localize.month(month,{width:"narrow",context:"standalone"});default:return localize.month(month,{width:"wide",context:"standalone"})}},w:function w(date,token,localize,options){var week=getUTCWeek(date,options);return"wo"===token?localize.ordinalNumber(week,{unit:"week"}):addLeadingZeros(week,token.length)},I:function I(date,token,localize){var isoWeek=getUTCISOWeek(date);return"Io"===token?localize.ordinalNumber(isoWeek,{unit:"week"}):addLeadingZeros(isoWeek,token.length)},d:function d(date,token,localize){return"do"===token?localize.ordinalNumber(date.getUTCDate(),{unit:"date"}):lightFormatters.d(date,token)},D:function D(date,token,localize){var dayOfYear=function getUTCDayOfYear(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate),timestamp=date.getTime();date.setUTCMonth(0,1),date.setUTCHours(0,0,0,0);var difference=timestamp-date.getTime();return Math.floor(difference/864e5)+1}(date);return"Do"===token?localize.ordinalNumber(dayOfYear,{unit:"dayOfYear"}):addLeadingZeros(dayOfYear,token.length)},E:function E(date,token,localize){var dayOfWeek=date.getUTCDay();switch(token){case"E":case"EE":case"EEE":return localize.day(dayOfWeek,{width:"abbreviated",context:"formatting"});case"EEEEE":return localize.day(dayOfWeek,{width:"narrow",context:"formatting"});case"EEEEEE":return localize.day(dayOfWeek,{width:"short",context:"formatting"});default:return localize.day(dayOfWeek,{width:"wide",context:"formatting"})}},e:function e(date,token,localize,options){var dayOfWeek=date.getUTCDay(),localDayOfWeek=(dayOfWeek-options.weekStartsOn+8)%7||7;switch(token){case"e":return String(localDayOfWeek);case"ee":return addLeadingZeros(localDayOfWeek,2);case"eo":return localize.ordinalNumber(localDayOfWeek,{unit:"day"});case"eee":return localize.day(dayOfWeek,{width:"abbreviated",context:"formatting"});case"eeeee":return localize.day(dayOfWeek,{width:"narrow",context:"formatting"});case"eeeeee":return localize.day(dayOfWeek,{width:"short",context:"formatting"});default:return localize.day(dayOfWeek,{width:"wide",context:"formatting"})}},c:function c(date,token,localize,options){var dayOfWeek=date.getUTCDay(),localDayOfWeek=(dayOfWeek-options.weekStartsOn+8)%7||7;switch(token){case"c":return String(localDayOfWeek);case"cc":return addLeadingZeros(localDayOfWeek,token.length);case"co":return localize.ordinalNumber(localDayOfWeek,{unit:"day"});case"ccc":return localize.day(dayOfWeek,{width:"abbreviated",context:"standalone"});case"ccccc":return localize.day(dayOfWeek,{width:"narrow",context:"standalone"});case"cccccc":return localize.day(dayOfWeek,{width:"short",context:"standalone"});default:return localize.day(dayOfWeek,{width:"wide",context:"standalone"})}},i:function i(date,token,localize){var dayOfWeek=date.getUTCDay(),isoDayOfWeek=0===dayOfWeek?7:dayOfWeek;switch(token){case"i":return String(isoDayOfWeek);case"ii":return addLeadingZeros(isoDayOfWeek,token.length);case"io":return localize.ordinalNumber(isoDayOfWeek,{unit:"day"});case"iii":return localize.day(dayOfWeek,{width:"abbreviated",context:"formatting"});case"iiiii":return localize.day(dayOfWeek,{width:"narrow",context:"formatting"});case"iiiiii":return localize.day(dayOfWeek,{width:"short",context:"formatting"});default:return localize.day(dayOfWeek,{width:"wide",context:"formatting"})}},a:function a(date,token,localize){var dayPeriodEnumValue=date.getUTCHours()/12>=1?"pm":"am";switch(token){case"a":case"aa":return localize.dayPeriod(dayPeriodEnumValue,{width:"abbreviated",context:"formatting"});case"aaa":return localize.dayPeriod(dayPeriodEnumValue,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return localize.dayPeriod(dayPeriodEnumValue,{width:"narrow",context:"formatting"});default:return localize.dayPeriod(dayPeriodEnumValue,{width:"wide",context:"formatting"})}},b:function b(date,token,localize){var dayPeriodEnumValue,hours=date.getUTCHours();switch(dayPeriodEnumValue=12===hours?dayPeriodEnum_noon:0===hours?dayPeriodEnum_midnight:hours/12>=1?"pm":"am",token){case"b":case"bb":return localize.dayPeriod(dayPeriodEnumValue,{width:"abbreviated",context:"formatting"});case"bbb":return localize.dayPeriod(dayPeriodEnumValue,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return localize.dayPeriod(dayPeriodEnumValue,{width:"narrow",context:"formatting"});default:return localize.dayPeriod(dayPeriodEnumValue,{width:"wide",context:"formatting"})}},B:function B(date,token,localize){var dayPeriodEnumValue,hours=date.getUTCHours();switch(dayPeriodEnumValue=hours>=17?dayPeriodEnum_evening:hours>=12?dayPeriodEnum_afternoon:hours>=4?dayPeriodEnum_morning:dayPeriodEnum_night,token){case"B":case"BB":case"BBB":return localize.dayPeriod(dayPeriodEnumValue,{width:"abbreviated",context:"formatting"});case"BBBBB":return localize.dayPeriod(dayPeriodEnumValue,{width:"narrow",context:"formatting"});default:return localize.dayPeriod(dayPeriodEnumValue,{width:"wide",context:"formatting"})}},h:function h(date,token,localize){if("ho"===token){var hours=date.getUTCHours()%12;return 0===hours&&(hours=12),localize.ordinalNumber(hours,{unit:"hour"})}return lightFormatters.h(date,token)},H:function H(date,token,localize){return"Ho"===token?localize.ordinalNumber(date.getUTCHours(),{unit:"hour"}):lightFormatters.H(date,token)},K:function K(date,token,localize){var hours=date.getUTCHours()%12;return"Ko"===token?localize.ordinalNumber(hours,{unit:"hour"}):addLeadingZeros(hours,token.length)},k:function k(date,token,localize){var hours=date.getUTCHours();return 0===hours&&(hours=24),"ko"===token?localize.ordinalNumber(hours,{unit:"hour"}):addLeadingZeros(hours,token.length)},m:function m(date,token,localize){return"mo"===token?localize.ordinalNumber(date.getUTCMinutes(),{unit:"minute"}):lightFormatters.m(date,token)},s:function s(date,token,localize){return"so"===token?localize.ordinalNumber(date.getUTCSeconds(),{unit:"second"}):lightFormatters.s(date,token)},S:function S(date,token){return lightFormatters.S(date,token)},X:function X(date,token,_localize,options){var timezoneOffset=(options._originalDate||date).getTimezoneOffset();if(0===timezoneOffset)return"Z";switch(token){case"X":return formatTimezoneWithOptionalMinutes(timezoneOffset);case"XXXX":case"XX":return formatTimezone(timezoneOffset);default:return formatTimezone(timezoneOffset,":")}},x:function x(date,token,_localize,options){var timezoneOffset=(options._originalDate||date).getTimezoneOffset();switch(token){case"x":return formatTimezoneWithOptionalMinutes(timezoneOffset);case"xxxx":case"xx":return formatTimezone(timezoneOffset);default:return formatTimezone(timezoneOffset,":")}},O:function O(date,token,_localize,options){var timezoneOffset=(options._originalDate||date).getTimezoneOffset();switch(token){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(timezoneOffset,":");default:return"GMT"+formatTimezone(timezoneOffset,":")}},z:function z(date,token,_localize,options){var timezoneOffset=(options._originalDate||date).getTimezoneOffset();switch(token){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(timezoneOffset,":");default:return"GMT"+formatTimezone(timezoneOffset,":")}},t:function t(date,token,_localize,options){var originalDate=options._originalDate||date;return addLeadingZeros(Math.floor(originalDate.getTime()/1e3),token.length)},T:function T(date,token,_localize,options){return addLeadingZeros((options._originalDate||date).getTime(),token.length)}};function formatTimezoneShort(offset,dirtyDelimiter){var sign=offset>0?"-":"+",absOffset=Math.abs(offset),hours=Math.floor(absOffset/60),minutes=absOffset%60;if(0===minutes)return sign+String(hours);var delimiter=dirtyDelimiter||"";return sign+String(hours)+delimiter+addLeadingZeros(minutes,2)}function formatTimezoneWithOptionalMinutes(offset,dirtyDelimiter){return offset%60==0?(offset>0?"-":"+")+addLeadingZeros(Math.abs(offset)/60,2):formatTimezone(offset,dirtyDelimiter)}function formatTimezone(offset,dirtyDelimiter){var delimiter=dirtyDelimiter||"",sign=offset>0?"-":"+",absOffset=Math.abs(offset);return sign+addLeadingZeros(Math.floor(absOffset/60),2)+delimiter+addLeadingZeros(absOffset%60,2)}const format_formatters=formatters_formatters;var format_formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,format_longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,format_escapedStringRegExp=/^'([^]*?)'?$/,format_doubleQuoteRegExp=/''/g,format_unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(dirtyDate,dirtyFormatStr,options){var _ref,_options$locale,_ref2,_ref3,_ref4,_options$firstWeekCon,_options$locale2,_options$locale2$opti,_defaultOptions$local,_defaultOptions$local2,_ref5,_ref6,_ref7,_options$weekStartsOn,_options$locale3,_options$locale3$opti,_defaultOptions$local3,_defaultOptions$local4;requiredArgs(2,arguments);var formatStr=String(dirtyFormatStr),defaultOptions=getDefaultOptions(),locale=null!==(_ref=null!==(_options$locale=null==options?void 0:options.locale)&&void 0!==_options$locale?_options$locale:defaultOptions.locale)&&void 0!==_ref?_ref:defaultLocale,firstWeekContainsDate=toInteger(null!==(_ref2=null!==(_ref3=null!==(_ref4=null!==(_options$firstWeekCon=null==options?void 0:options.firstWeekContainsDate)&&void 0!==_options$firstWeekCon?_options$firstWeekCon:null==options||null===(_options$locale2=options.locale)||void 0===_options$locale2||null===(_options$locale2$opti=_options$locale2.options)||void 0===_options$locale2$opti?void 0:_options$locale2$opti.firstWeekContainsDate)&&void 0!==_ref4?_ref4:defaultOptions.firstWeekContainsDate)&&void 0!==_ref3?_ref3:null===(_defaultOptions$local=defaultOptions.locale)||void 0===_defaultOptions$local||null===(_defaultOptions$local2=_defaultOptions$local.options)||void 0===_defaultOptions$local2?void 0:_defaultOptions$local2.firstWeekContainsDate)&&void 0!==_ref2?_ref2:1);if(!(firstWeekContainsDate>=1&&firstWeekContainsDate<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var weekStartsOn=toInteger(null!==(_ref5=null!==(_ref6=null!==(_ref7=null!==(_options$weekStartsOn=null==options?void 0:options.weekStartsOn)&&void 0!==_options$weekStartsOn?_options$weekStartsOn:null==options||null===(_options$locale3=options.locale)||void 0===_options$locale3||null===(_options$locale3$opti=_options$locale3.options)||void 0===_options$locale3$opti?void 0:_options$locale3$opti.weekStartsOn)&&void 0!==_ref7?_ref7:defaultOptions.weekStartsOn)&&void 0!==_ref6?_ref6:null===(_defaultOptions$local3=defaultOptions.locale)||void 0===_defaultOptions$local3||null===(_defaultOptions$local4=_defaultOptions$local3.options)||void 0===_defaultOptions$local4?void 0:_defaultOptions$local4.weekStartsOn)&&void 0!==_ref5?_ref5:0);if(!(weekStartsOn>=0&&weekStartsOn<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!locale.localize)throw new RangeError("locale must contain localize property");if(!locale.formatLong)throw new RangeError("locale must contain formatLong property");var originalDate=toDate(dirtyDate);if(!isValid(originalDate))throw new RangeError("Invalid time value");var utcDate=subMilliseconds(originalDate,getTimezoneOffsetInMilliseconds(originalDate)),formatterOptions={firstWeekContainsDate,weekStartsOn,locale,_originalDate:originalDate};return formatStr.match(format_longFormattingTokensRegExp).map((function(substring){var firstCharacter=substring[0];return"p"===firstCharacter||"P"===firstCharacter?(0,format_longFormatters[firstCharacter])(substring,locale.formatLong):substring})).join("").match(format_formattingTokensRegExp).map((function(substring){if("''"===substring)return"'";var firstCharacter=substring[0];if("'"===firstCharacter)return function format_cleanEscapedString(input){var matched=input.match(format_escapedStringRegExp);if(!matched)return input;return matched[1].replace(format_doubleQuoteRegExp,"'")}(substring);var formatter=format_formatters[firstCharacter];if(formatter)return null!=options&&options.useAdditionalWeekYearTokens||!isProtectedWeekYearToken(substring)||throwProtectedError(substring,dirtyFormatStr,String(dirtyDate)),null!=options&&options.useAdditionalDayOfYearTokens||!isProtectedDayOfYearToken(substring)||throwProtectedError(substring,dirtyFormatStr,String(dirtyDate)),formatter(utcDate,substring,locale.localize,formatterOptions);if(firstCharacter.match(format_unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+firstCharacter+"`");return substring})).join("")}function addDays(dirtyDate,dirtyAmount){requiredArgs(2,arguments);var date=toDate(dirtyDate),amount=toInteger(dirtyAmount);return isNaN(amount)?new Date(NaN):amount?(date.setDate(date.getDate()+amount),date):date}function addMonths(dirtyDate,dirtyAmount){requiredArgs(2,arguments);var date=toDate(dirtyDate),amount=toInteger(dirtyAmount);if(isNaN(amount))return new Date(NaN);if(!amount)return date;var dayOfMonth=date.getDate(),endOfDesiredMonth=new Date(date.getTime());return endOfDesiredMonth.setMonth(date.getMonth()+amount+1,0),dayOfMonth>=endOfDesiredMonth.getDate()?endOfDesiredMonth:(date.setFullYear(endOfDesiredMonth.getFullYear(),endOfDesiredMonth.getMonth(),dayOfMonth),date)}function differenceInMilliseconds(dateLeft,dateRight){return requiredArgs(2,arguments),toDate(dateLeft).getTime()-toDate(dateRight).getTime()}var roundingMap={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function trunc(value){return value<0?Math.ceil(value):Math.floor(value)}},defaultRoundingMethod="trunc";function getRoundingMethod(method){return method?roundingMap[method]:roundingMap[defaultRoundingMethod]}function startOfDay(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate);return date.setHours(0,0,0,0),date}var differenceInCalendarDays_MILLISECONDS_IN_DAY=864e5;function compareLocalAsc(dateLeft,dateRight){var diff=dateLeft.getFullYear()-dateRight.getFullYear()||dateLeft.getMonth()-dateRight.getMonth()||dateLeft.getDate()-dateRight.getDate()||dateLeft.getHours()-dateRight.getHours()||dateLeft.getMinutes()-dateRight.getMinutes()||dateLeft.getSeconds()-dateRight.getSeconds()||dateLeft.getMilliseconds()-dateRight.getMilliseconds();return diff<0?-1:diff>0?1:diff}function differenceInDays(dirtyDateLeft,dirtyDateRight){requiredArgs(2,arguments);var dateLeft=toDate(dirtyDateLeft),dateRight=toDate(dirtyDateRight),sign=compareLocalAsc(dateLeft,dateRight),difference=Math.abs(function differenceInCalendarDays(dirtyDateLeft,dirtyDateRight){requiredArgs(2,arguments);var startOfDayLeft=startOfDay(dirtyDateLeft),startOfDayRight=startOfDay(dirtyDateRight),timestampLeft=startOfDayLeft.getTime()-getTimezoneOffsetInMilliseconds(startOfDayLeft),timestampRight=startOfDayRight.getTime()-getTimezoneOffsetInMilliseconds(startOfDayRight);return Math.round((timestampLeft-timestampRight)/differenceInCalendarDays_MILLISECONDS_IN_DAY)}(dateLeft,dateRight));dateLeft.setDate(dateLeft.getDate()-sign*difference);var result=sign*(difference-Number(compareLocalAsc(dateLeft,dateRight)===-sign));return 0===result?0:result}function compareAsc(dirtyDateLeft,dirtyDateRight){requiredArgs(2,arguments);var dateLeft=toDate(dirtyDateLeft),dateRight=toDate(dirtyDateRight),diff=dateLeft.getTime()-dateRight.getTime();return diff<0?-1:diff>0?1:diff}function endOfDay(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate);return date.setHours(23,59,59,999),date}function endOfMonth(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate),month=date.getMonth();return date.setFullYear(date.getFullYear(),month+1,0),date.setHours(23,59,59,999),date}function differenceInMonths(dirtyDateLeft,dirtyDateRight){requiredArgs(2,arguments);var result,dateLeft=toDate(dirtyDateLeft),dateRight=toDate(dirtyDateRight),sign=compareAsc(dateLeft,dateRight),difference=Math.abs(function differenceInCalendarMonths(dirtyDateLeft,dirtyDateRight){requiredArgs(2,arguments);var dateLeft=toDate(dirtyDateLeft),dateRight=toDate(dirtyDateRight);return 12*(dateLeft.getFullYear()-dateRight.getFullYear())+(dateLeft.getMonth()-dateRight.getMonth())}(dateLeft,dateRight));if(difference<1)result=0;else{1===dateLeft.getMonth()&&dateLeft.getDate()>27&&dateLeft.setDate(30),dateLeft.setMonth(dateLeft.getMonth()-sign*difference);var isLastMonthNotFull=compareAsc(dateLeft,dateRight)===-sign;(function isLastDayOfMonth(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate);return endOfDay(date).getTime()===endOfMonth(date).getTime()})(toDate(dirtyDateLeft))&&1===difference&&1===compareAsc(dirtyDateLeft,dateRight)&&(isLastMonthNotFull=!1),result=sign*(difference-Number(isLastMonthNotFull))}return 0===result?0:result}function differenceInYears(dirtyDateLeft,dirtyDateRight){requiredArgs(2,arguments);var dateLeft=toDate(dirtyDateLeft),dateRight=toDate(dirtyDateRight),sign=compareAsc(dateLeft,dateRight),difference=Math.abs(function differenceInCalendarYears(dirtyDateLeft,dirtyDateRight){requiredArgs(2,arguments);var dateLeft=toDate(dirtyDateLeft),dateRight=toDate(dirtyDateRight);return dateLeft.getFullYear()-dateRight.getFullYear()}(dateLeft,dateRight));dateLeft.setFullYear(1584),dateRight.setFullYear(1584);var isLastYearNotFull=compareAsc(dateLeft,dateRight)===-sign,result=sign*(difference-Number(isLastYearNotFull));return 0===result?0:result}function startOfWeek(dirtyDate,options){var _ref,_ref2,_ref3,_options$weekStartsOn,_options$locale,_options$locale$optio,_defaultOptions$local,_defaultOptions$local2;requiredArgs(1,arguments);var defaultOptions=getDefaultOptions(),weekStartsOn=toInteger(null!==(_ref=null!==(_ref2=null!==(_ref3=null!==(_options$weekStartsOn=null==options?void 0:options.weekStartsOn)&&void 0!==_options$weekStartsOn?_options$weekStartsOn:null==options||null===(_options$locale=options.locale)||void 0===_options$locale||null===(_options$locale$optio=_options$locale.options)||void 0===_options$locale$optio?void 0:_options$locale$optio.weekStartsOn)&&void 0!==_ref3?_ref3:defaultOptions.weekStartsOn)&&void 0!==_ref2?_ref2:null===(_defaultOptions$local=defaultOptions.locale)||void 0===_defaultOptions$local||null===(_defaultOptions$local2=_defaultOptions$local.options)||void 0===_defaultOptions$local2?void 0:_defaultOptions$local2.weekStartsOn)&&void 0!==_ref?_ref:0);if(!(weekStartsOn>=0&&weekStartsOn<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var date=toDate(dirtyDate),day=date.getDay(),diff=(day<weekStartsOn?7:0)+day-weekStartsOn;return date.setDate(date.getDate()-diff),date.setHours(0,0,0,0),date}const FORMATS={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};chart.ij._date.override({_id:"date-fns",formats:function(){return FORMATS},parse:function(value,fmt){if(null==value)return null;const type=typeof value;return"number"===type||value instanceof Date?value=toDate(value):"string"===type&&(value="string"==typeof fmt?parse(value,fmt,new Date,this.options):parseISO(value,this.options)),isValid(value)?value.getTime():null},format:function(time,fmt){return format(time,fmt,this.options)},add:function(time,amount,unit){switch(unit){case"millisecond":return addMilliseconds(time,amount);case"second":return function addSeconds(dirtyDate,dirtyAmount){return requiredArgs(2,arguments),addMilliseconds(dirtyDate,1e3*toInteger(dirtyAmount))}(time,amount);case"minute":return function addMinutes(dirtyDate,dirtyAmount){return requiredArgs(2,arguments),addMilliseconds(dirtyDate,6e4*toInteger(dirtyAmount))}(time,amount);case"hour":return function addHours(dirtyDate,dirtyAmount){return requiredArgs(2,arguments),addMilliseconds(dirtyDate,36e5*toInteger(dirtyAmount))}(time,amount);case"day":return addDays(time,amount);case"week":return function addWeeks(dirtyDate,dirtyAmount){return requiredArgs(2,arguments),addDays(dirtyDate,7*toInteger(dirtyAmount))}(time,amount);case"month":return addMonths(time,amount);case"quarter":return function addQuarters(dirtyDate,dirtyAmount){return requiredArgs(2,arguments),addMonths(dirtyDate,3*toInteger(dirtyAmount))}(time,amount);case"year":return function addYears(dirtyDate,dirtyAmount){return requiredArgs(2,arguments),addMonths(dirtyDate,12*toInteger(dirtyAmount))}(time,amount);default:return time}},diff:function(max,min,unit){switch(unit){case"millisecond":return differenceInMilliseconds(max,min);case"second":return function differenceInSeconds(dateLeft,dateRight,options){requiredArgs(2,arguments);var diff=differenceInMilliseconds(dateLeft,dateRight)/1e3;return getRoundingMethod(null==options?void 0:options.roundingMethod)(diff)}(max,min);case"minute":return function differenceInMinutes(dateLeft,dateRight,options){requiredArgs(2,arguments);var diff=differenceInMilliseconds(dateLeft,dateRight)/millisecondsInMinute;return getRoundingMethod(null==options?void 0:options.roundingMethod)(diff)}(max,min);case"hour":return function differenceInHours(dateLeft,dateRight,options){requiredArgs(2,arguments);var diff=differenceInMilliseconds(dateLeft,dateRight)/millisecondsInHour;return getRoundingMethod(null==options?void 0:options.roundingMethod)(diff)}(max,min);case"day":return differenceInDays(max,min);case"week":return function differenceInWeeks(dateLeft,dateRight,options){requiredArgs(2,arguments);var diff=differenceInDays(dateLeft,dateRight)/7;return getRoundingMethod(null==options?void 0:options.roundingMethod)(diff)}(max,min);case"month":return differenceInMonths(max,min);case"quarter":return function differenceInQuarters(dateLeft,dateRight,options){requiredArgs(2,arguments);var diff=differenceInMonths(dateLeft,dateRight)/3;return getRoundingMethod(null==options?void 0:options.roundingMethod)(diff)}(max,min);case"year":return differenceInYears(max,min);default:return 0}},startOf:function(time,unit,weekday){switch(unit){case"second":return function startOfSecond(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate);return date.setMilliseconds(0),date}(time);case"minute":return function startOfMinute(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate);return date.setSeconds(0,0),date}(time);case"hour":return function startOfHour(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate);return date.setMinutes(0,0,0),date}(time);case"day":return startOfDay(time);case"week":return startOfWeek(time);case"isoWeek":return startOfWeek(time,{weekStartsOn:+weekday});case"month":return function startOfMonth(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate);return date.setDate(1),date.setHours(0,0,0,0),date}(time);case"quarter":return function startOfQuarter(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate),currentMonth=date.getMonth(),month=currentMonth-currentMonth%3;return date.setMonth(month,1),date.setHours(0,0,0,0),date}(time);case"year":return function startOfYear(dirtyDate){requiredArgs(1,arguments);var cleanDate=toDate(dirtyDate),date=new Date(0);return date.setFullYear(cleanDate.getFullYear(),0,1),date.setHours(0,0,0,0),date}(time);default:return time}},endOf:function(time,unit){switch(unit){case"second":return function endOfSecond(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate);return date.setMilliseconds(999),date}(time);case"minute":return function endOfMinute(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate);return date.setSeconds(59,999),date}(time);case"hour":return function endOfHour(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate);return date.setMinutes(59,59,999),date}(time);case"day":return endOfDay(time);case"week":return function endOfWeek(dirtyDate,options){var _ref,_ref2,_ref3,_options$weekStartsOn,_options$locale,_options$locale$optio,_defaultOptions$local,_defaultOptions$local2;requiredArgs(1,arguments);var defaultOptions=getDefaultOptions(),weekStartsOn=toInteger(null!==(_ref=null!==(_ref2=null!==(_ref3=null!==(_options$weekStartsOn=null==options?void 0:options.weekStartsOn)&&void 0!==_options$weekStartsOn?_options$weekStartsOn:null==options||null===(_options$locale=options.locale)||void 0===_options$locale||null===(_options$locale$optio=_options$locale.options)||void 0===_options$locale$optio?void 0:_options$locale$optio.weekStartsOn)&&void 0!==_ref3?_ref3:defaultOptions.weekStartsOn)&&void 0!==_ref2?_ref2:null===(_defaultOptions$local=defaultOptions.locale)||void 0===_defaultOptions$local||null===(_defaultOptions$local2=_defaultOptions$local.options)||void 0===_defaultOptions$local2?void 0:_defaultOptions$local2.weekStartsOn)&&void 0!==_ref?_ref:0);if(!(weekStartsOn>=0&&weekStartsOn<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var date=toDate(dirtyDate),day=date.getDay(),diff=6+(day<weekStartsOn?-7:0)-(day-weekStartsOn);return date.setDate(date.getDate()+diff),date.setHours(23,59,59,999),date}(time);case"month":return endOfMonth(time);case"quarter":return function endOfQuarter(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate),currentMonth=date.getMonth(),month=currentMonth-currentMonth%3+3;return date.setMonth(month,0),date.setHours(23,59,59,999),date}(time);case"year":return function endOfYear(dirtyDate){requiredArgs(1,arguments);var date=toDate(dirtyDate),year=date.getFullYear();return date.setFullYear(year+1,0,0),date.setHours(23,59,59,999),date}(time);default:return time}}})},"./node_modules/chartjs-chart-geo/build/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{db:()=>BubbleMapController,hD:()=>ChoroplethController,wC:()=>ColorScale,IV:()=>GeoFeature,ud:()=>ProjectionScale,Ae:()=>SizeScale});var chart=__webpack_require__("./node_modules/chart.js/dist/chart.js"),epsilon=1e-6,epsilon2=1e-12,pi=Math.PI,halfPi=pi/2,quarterPi=pi/4,tau=2*pi,math_degrees=180/pi,math_radians=pi/180,abs=Math.abs,atan=Math.atan,atan2=Math.atan2,cos=Math.cos,ceil=Math.ceil,exp=Math.exp,log=(Math.floor,Math.hypot,Math.log),pow=Math.pow,sin=Math.sin,sign=Math.sign||function(x){return x>0?1:x<0?-1:0},sqrt=Math.sqrt,tan=Math.tan;function acos(x){return x>1?0:x<-1?pi:Math.acos(x)}function asin(x){return x>1?halfPi:x<-1?-halfPi:Math.asin(x)}function azimuthalRaw(scale){return function(x,y){var cx=cos(x),cy=cos(y),k=scale(cx*cy);return k===1/0?[2,0]:[k*cy*sin(x),k*sin(y)]}}function azimuthalInvert(angle){return function(x,y){var z=sqrt(x*x+y*y),c=angle(z),sc=sin(c),cc=cos(c);return[atan2(x*sc,z*cc),asin(z&&y*sc/z)]}}function noop(){}function buffer(){var line,lines=[];return{point:function(x,y,m){line.push([x,y,m])},lineStart:function(){lines.push(line=[])},lineEnd:noop,rejoin:function(){lines.length>1&&lines.push(lines.pop().concat(lines.shift()))},result:function(){var result=lines;return lines=[],line=null,result}}}function pointEqual(a,b){return abs(a[0]-b[0])<epsilon&&abs(a[1]-b[1])<epsilon}function Intersection(point,points,other,entry){this.x=point,this.z=points,this.o=other,this.e=entry,this.v=!1,this.n=this.p=null}function rejoin(segments,compareIntersection,startInside,interpolate,stream){var i,n,subject=[],clip=[];if(segments.forEach((function(segment){if(!((n=segment.length-1)<=0)){var n,x,p0=segment[0],p1=segment[n];if(pointEqual(p0,p1)){if(!p0[2]&&!p1[2]){for(stream.lineStart(),i=0;i<n;++i)stream.point((p0=segment[i])[0],p0[1]);return void stream.lineEnd()}p1[0]+=2*epsilon}subject.push(x=new Intersection(p0,segment,null,!0)),clip.push(x.o=new Intersection(p0,null,x,!1)),subject.push(x=new Intersection(p1,segment,null,!1)),clip.push(x.o=new Intersection(p1,null,x,!0))}})),subject.length){for(clip.sort(compareIntersection),rejoin_link(subject),rejoin_link(clip),i=0,n=clip.length;i<n;++i)clip[i].e=startInside=!startInside;for(var points,point,start=subject[0];;){for(var current=start,isSubject=!0;current.v;)if((current=current.n)===start)return;points=current.z,stream.lineStart();do{if(current.v=current.o.v=!0,current.e){if(isSubject)for(i=0,n=points.length;i<n;++i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.n.x,1,stream);current=current.n}else{if(isSubject)for(points=current.p.z,i=points.length-1;i>=0;--i)stream.point((point=points[i])[0],point[1]);else interpolate(current.x,current.p.x,-1,stream);current=current.p}points=(current=current.o).z,isSubject=!isSubject}while(!current.v);stream.lineEnd()}}}function rejoin_link(array){if(n=array.length){for(var n,b,i=0,a=array[0];++i<n;)a.n=b=array[i],b.p=a,a=b;a.n=b=array[0],b.p=a}}class Adder{constructor(){this._partials=new Float64Array(32),this._n=0}add(x){const p=this._partials;let i=0;for(let j=0;j<this._n&&j<32;j++){const y=p[j],hi=x+y,lo=Math.abs(x)<Math.abs(y)?x-(hi-y):y-(hi-x);lo&&(p[i++]=lo),x=hi}return p[i]=x,this._n=i+1,this}valueOf(){const p=this._partials;let x,y,lo,n=this._n,hi=0;if(n>0){for(hi=p[--n];n>0&&(x=hi,y=p[--n],hi=x+y,lo=y-(hi-x),!lo););n>0&&(lo<0&&p[n-1]<0||lo>0&&p[n-1]>0)&&(y=2*lo,x=hi+y,y==x-hi&&(hi=x))}return hi}}function spherical(cartesian){return[atan2(cartesian[1],cartesian[0]),asin(cartesian[2])]}function cartesian(spherical){var lambda=spherical[0],phi=spherical[1],cosPhi=cos(phi);return[cosPhi*cos(lambda),cosPhi*sin(lambda),sin(phi)]}function cartesianDot(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function cartesianCross(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function cartesianAddInPlace(a,b){a[0]+=b[0],a[1]+=b[1],a[2]+=b[2]}function cartesianScale(vector,k){return[vector[0]*k,vector[1]*k,vector[2]*k]}function cartesianNormalizeInPlace(d){var l=sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2]);d[0]/=l,d[1]/=l,d[2]/=l}function longitude(point){return abs(point[0])<=pi?point[0]:sign(point[0])*((abs(point[0])+pi)%tau-pi)}function polygonContains(polygon,point){var lambda=longitude(point),phi=point[1],sinPhi=sin(phi),normal=[sin(lambda),-cos(lambda),0],angle=0,winding=0,sum=new Adder;1===sinPhi?phi=halfPi+epsilon:-1===sinPhi&&(phi=-halfPi-epsilon);for(var i=0,n=polygon.length;i<n;++i)if(m=(ring=polygon[i]).length)for(var ring,m,point0=ring[m-1],lambda0=longitude(point0),phi0=point0[1]/2+quarterPi,sinPhi0=sin(phi0),cosPhi0=cos(phi0),j=0;j<m;++j,lambda0=lambda1,sinPhi0=sinPhi1,cosPhi0=cosPhi1,point0=point1){var point1=ring[j],lambda1=longitude(point1),phi1=point1[1]/2+quarterPi,sinPhi1=sin(phi1),cosPhi1=cos(phi1),delta=lambda1-lambda0,sign=delta>=0?1:-1,absDelta=sign*delta,antimeridian=absDelta>pi,k=sinPhi0*sinPhi1;if(sum.add(atan2(k*sign*sin(absDelta),cosPhi0*cosPhi1+k*cos(absDelta))),angle+=antimeridian?delta+sign*tau:delta,antimeridian^lambda0>=lambda^lambda1>=lambda){var arc=cartesianCross(cartesian(point0),cartesian(point1));cartesianNormalizeInPlace(arc);var intersection=cartesianCross(normal,arc);cartesianNormalizeInPlace(intersection);var phiArc=(antimeridian^delta>=0?-1:1)*asin(intersection[2]);(phi>phiArc||phi===phiArc&&(arc[0]||arc[1]))&&(winding+=antimeridian^delta>=0?1:-1)}}return(angle<-epsilon||angle<epsilon&&sum<-epsilon2)^1&winding}function merge(arrays){return Array.from(function*flatten(arrays){for(const array of arrays)yield*array}(arrays))}function clip(pointVisible,clipLine,interpolate,start){return function(sink){var polygon,segments,ring,line=clipLine(sink),ringBuffer=buffer(),ringSink=clipLine(ringBuffer),polygonStarted=!1,clip={point,lineStart,lineEnd,polygonStart:function(){clip.point=pointRing,clip.lineStart=ringStart,clip.lineEnd=ringEnd,segments=[],polygon=[]},polygonEnd:function(){clip.point=point,clip.lineStart=lineStart,clip.lineEnd=lineEnd,segments=merge(segments);var startInside=polygonContains(polygon,start);segments.length?(polygonStarted||(sink.polygonStart(),polygonStarted=!0),rejoin(segments,compareIntersection,startInside,interpolate,sink)):startInside&&(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd()),polygonStarted&&(sink.polygonEnd(),polygonStarted=!1),segments=polygon=null},sphere:function(){sink.polygonStart(),sink.lineStart(),interpolate(null,null,1,sink),sink.lineEnd(),sink.polygonEnd()}};function point(lambda,phi){pointVisible(lambda,phi)&&sink.point(lambda,phi)}function pointLine(lambda,phi){line.point(lambda,phi)}function lineStart(){clip.point=pointLine,line.lineStart()}function lineEnd(){clip.point=point,line.lineEnd()}function pointRing(lambda,phi){ring.push([lambda,phi]),ringSink.point(lambda,phi)}function ringStart(){ringSink.lineStart(),ring=[]}function ringEnd(){pointRing(ring[0][0],ring[0][1]),ringSink.lineEnd();var i,m,segment,point,clean=ringSink.clean(),ringSegments=ringBuffer.result(),n=ringSegments.length;if(ring.pop(),polygon.push(ring),ring=null,n)if(1&clean){if((m=(segment=ringSegments[0]).length-1)>0){for(polygonStarted||(sink.polygonStart(),polygonStarted=!0),sink.lineStart(),i=0;i<m;++i)sink.point((point=segment[i])[0],point[1]);sink.lineEnd()}}else n>1&&2&clean&&ringSegments.push(ringSegments.pop().concat(ringSegments.shift())),segments.push(ringSegments.filter(validSegment))}return clip}}function validSegment(segment){return segment.length>1}function compareIntersection(a,b){return((a=a.x)[0]<0?a[1]-halfPi-epsilon:halfPi-a[1])-((b=b.x)[0]<0?b[1]-halfPi-epsilon:halfPi-b[1])}const antimeridian=clip((function(){return!0}),(function clipAntimeridianLine(stream){var clean,lambda0=NaN,phi0=NaN,sign0=NaN;return{lineStart:function(){stream.lineStart(),clean=1},point:function(lambda1,phi1){var sign1=lambda1>0?pi:-pi,delta=abs(lambda1-lambda0);abs(delta-pi)<epsilon?(stream.point(lambda0,phi0=(phi0+phi1)/2>0?halfPi:-halfPi),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),stream.point(lambda1,phi0),clean=0):sign0!==sign1&&delta>=pi&&(abs(lambda0-sign0)<epsilon&&(lambda0-=sign0*epsilon),abs(lambda1-sign1)<epsilon&&(lambda1-=sign1*epsilon),phi0=function clipAntimeridianIntersect(lambda0,phi0,lambda1,phi1){var cosPhi0,cosPhi1,sinLambda0Lambda1=sin(lambda0-lambda1);return abs(sinLambda0Lambda1)>epsilon?atan((sin(phi0)*(cosPhi1=cos(phi1))*sin(lambda1)-sin(phi1)*(cosPhi0=cos(phi0))*sin(lambda0))/(cosPhi0*cosPhi1*sinLambda0Lambda1)):(phi0+phi1)/2}(lambda0,phi0,lambda1,phi1),stream.point(sign0,phi0),stream.lineEnd(),stream.lineStart(),stream.point(sign1,phi0),clean=0),stream.point(lambda0=lambda1,phi0=phi1),sign0=sign1},lineEnd:function(){stream.lineEnd(),lambda0=phi0=NaN},clean:function(){return 2-clean}}}),(function clipAntimeridianInterpolate(from,to,direction,stream){var phi;if(null==from)phi=direction*halfPi,stream.point(-pi,phi),stream.point(0,phi),stream.point(pi,phi),stream.point(pi,0),stream.point(pi,-phi),stream.point(0,-phi),stream.point(-pi,-phi),stream.point(-pi,0),stream.point(-pi,phi);else if(abs(from[0]-to[0])>epsilon){var lambda=from[0]<to[0]?pi:-pi;phi=direction*lambda/2,stream.point(-lambda,phi),stream.point(0,phi),stream.point(lambda,phi)}else stream.point(to[0],to[1])}),[-pi,-halfPi]);function circleStream(stream,radius,delta,direction,t0,t1){if(delta){var cosRadius=cos(radius),sinRadius=sin(radius),step=direction*delta;null==t0?(t0=radius+direction*tau,t1=radius-step/2):(t0=circleRadius(cosRadius,t0),t1=circleRadius(cosRadius,t1),(direction>0?t0<t1:t0>t1)&&(t0+=direction*tau));for(var point,t=t0;direction>0?t>t1:t<t1;t-=step)point=spherical([cosRadius,-sinRadius*cos(t),-sinRadius*sin(t)]),stream.point(point[0],point[1])}}function circleRadius(cosRadius,point){(point=cartesian(point))[0]-=cosRadius,cartesianNormalizeInPlace(point);var radius=acos(-point[1]);return((-point[2]<0?-radius:radius)+tau-epsilon)%tau}var clipMax=1e9,clipMin=-clipMax;function clipRectangle(x0,y0,x1,y1){function visible(x,y){return x0<=x&&x<=x1&&y0<=y&&y<=y1}function interpolate(from,to,direction,stream){var a=0,a1=0;if(null==from||(a=corner(from,direction))!==(a1=corner(to,direction))||comparePoint(from,to)<0^direction>0)do{stream.point(0===a||3===a?x0:x1,a>1?y1:y0)}while((a=(a+direction+4)%4)!==a1);else stream.point(to[0],to[1])}function corner(p,direction){return abs(p[0]-x0)<epsilon?direction>0?0:3:abs(p[0]-x1)<epsilon?direction>0?2:1:abs(p[1]-y0)<epsilon?direction>0?1:0:direction>0?3:2}function compareIntersection(a,b){return comparePoint(a.x,b.x)}function comparePoint(a,b){var ca=corner(a,1),cb=corner(b,1);return ca!==cb?ca-cb:0===ca?b[1]-a[1]:1===ca?a[0]-b[0]:2===ca?a[1]-b[1]:b[0]-a[0]}return function(stream){var segments,polygon,ring,x__,y__,v__,x_,y_,v_,first,clean,activeStream=stream,bufferStream=buffer(),clipStream={point,lineStart:function lineStart(){clipStream.point=linePoint,polygon&&polygon.push(ring=[]);first=!0,v_=!1,x_=y_=NaN},lineEnd:function lineEnd(){segments&&(linePoint(x__,y__),v__&&v_&&bufferStream.rejoin(),segments.push(bufferStream.result()));clipStream.point=point,v_&&activeStream.lineEnd()},polygonStart:function polygonStart(){activeStream=bufferStream,segments=[],polygon=[],clean=!0},polygonEnd:function polygonEnd(){var startInside=function polygonInside(){for(var winding=0,i=0,n=polygon.length;i<n;++i)for(var a0,a1,ring=polygon[i],j=1,m=ring.length,point=ring[0],b0=point[0],b1=point[1];j<m;++j)a0=b0,a1=b1,b0=(point=ring[j])[0],b1=point[1],a1<=y1?b1>y1&&(b0-a0)*(y1-a1)>(b1-a1)*(x0-a0)&&++winding:b1<=y1&&(b0-a0)*(y1-a1)<(b1-a1)*(x0-a0)&&--winding;return winding}(),cleanInside=clean&&startInside,visible=(segments=merge(segments)).length;(cleanInside||visible)&&(stream.polygonStart(),cleanInside&&(stream.lineStart(),interpolate(null,null,1,stream),stream.lineEnd()),visible&&rejoin(segments,compareIntersection,startInside,interpolate,stream),stream.polygonEnd());activeStream=stream,segments=polygon=ring=null}};function point(x,y){visible(x,y)&&activeStream.point(x,y)}function linePoint(x,y){var v=visible(x,y);if(polygon&&ring.push([x,y]),first)x__=x,y__=y,v__=v,first=!1,v&&(activeStream.lineStart(),activeStream.point(x,y));else if(v&&v_)activeStream.point(x,y);else{var a=[x_=Math.max(clipMin,Math.min(clipMax,x_)),y_=Math.max(clipMin,Math.min(clipMax,y_))],b=[x=Math.max(clipMin,Math.min(clipMax,x)),y=Math.max(clipMin,Math.min(clipMax,y))];!function line(a,b,x0,y0,x1,y1){var r,ax=a[0],ay=a[1],t0=0,t1=1,dx=b[0]-ax,dy=b[1]-ay;if(r=x0-ax,dx||!(r>0)){if(r/=dx,dx<0){if(r<t0)return;r<t1&&(t1=r)}else if(dx>0){if(r>t1)return;r>t0&&(t0=r)}if(r=x1-ax,dx||!(r<0)){if(r/=dx,dx<0){if(r>t1)return;r>t0&&(t0=r)}else if(dx>0){if(r<t0)return;r<t1&&(t1=r)}if(r=y0-ay,dy||!(r>0)){if(r/=dy,dy<0){if(r<t0)return;r<t1&&(t1=r)}else if(dy>0){if(r>t1)return;r>t0&&(t0=r)}if(r=y1-ay,dy||!(r<0)){if(r/=dy,dy<0){if(r>t1)return;r>t0&&(t0=r)}else if(dy>0){if(r<t0)return;r<t1&&(t1=r)}return t0>0&&(a[0]=ax+t0*dx,a[1]=ay+t0*dy),t1<1&&(b[0]=ax+t1*dx,b[1]=ay+t1*dy),!0}}}}}(a,b,x0,y0,x1,y1)?v&&(activeStream.lineStart(),activeStream.point(x,y),clean=!1):(v_||(activeStream.lineStart(),activeStream.point(a[0],a[1])),activeStream.point(b[0],b[1]),v||activeStream.lineEnd(),clean=!1)}x_=x,y_=y,v_=v}return clipStream}}function compose(a,b){function compose(x,y){return x=a(x,y),b(x[0],x[1])}return a.invert&&b.invert&&(compose.invert=function(x,y){return(x=b.invert(x,y))&&a.invert(x[0],x[1])}),compose}const identity=x=>x;function rotationIdentity(lambda,phi){return abs(lambda)>pi&&(lambda-=Math.round(lambda/tau)*tau),[lambda,phi]}function rotation_rotateRadians(deltaLambda,deltaPhi,deltaGamma){return(deltaLambda%=tau)?deltaPhi||deltaGamma?compose(rotationLambda(deltaLambda),rotationPhiGamma(deltaPhi,deltaGamma)):rotationLambda(deltaLambda):deltaPhi||deltaGamma?rotationPhiGamma(deltaPhi,deltaGamma):rotationIdentity}function forwardRotationLambda(deltaLambda){return function(lambda,phi){return abs(lambda+=deltaLambda)>pi&&(lambda-=Math.round(lambda/tau)*tau),[lambda,phi]}}function rotationLambda(deltaLambda){var rotation=forwardRotationLambda(deltaLambda);return rotation.invert=forwardRotationLambda(-deltaLambda),rotation}function rotationPhiGamma(deltaPhi,deltaGamma){var cosDeltaPhi=cos(deltaPhi),sinDeltaPhi=sin(deltaPhi),cosDeltaGamma=cos(deltaGamma),sinDeltaGamma=sin(deltaGamma);function rotation(lambda,phi){var cosPhi=cos(phi),x=cos(lambda)*cosPhi,y=sin(lambda)*cosPhi,z=sin(phi),k=z*cosDeltaPhi+x*sinDeltaPhi;return[atan2(y*cosDeltaGamma-k*sinDeltaGamma,x*cosDeltaPhi-z*sinDeltaPhi),asin(k*cosDeltaGamma+y*sinDeltaGamma)]}return rotation.invert=function(lambda,phi){var cosPhi=cos(phi),x=cos(lambda)*cosPhi,y=sin(lambda)*cosPhi,z=sin(phi),k=z*cosDeltaGamma-y*sinDeltaGamma;return[atan2(y*cosDeltaGamma+z*sinDeltaGamma,x*cosDeltaPhi+k*sinDeltaPhi),asin(k*cosDeltaPhi-x*sinDeltaPhi)]},rotation}function transformer(methods){return function(stream){var s=new TransformStream;for(var key in methods)s[key]=methods[key];return s.stream=stream,s}}function TransformStream(){}function streamGeometry(geometry,stream){geometry&&streamGeometryType.hasOwnProperty(geometry.type)&&streamGeometryType[geometry.type](geometry,stream)}rotationIdentity.invert=rotationIdentity,TransformStream.prototype={constructor:TransformStream,point:function(x,y){this.stream.point(x,y)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var streamObjectType={Feature:function(object,stream){streamGeometry(object.geometry,stream)},FeatureCollection:function(object,stream){for(var features=object.features,i=-1,n=features.length;++i<n;)streamGeometry(features[i].geometry,stream)}},streamGeometryType={Sphere:function(object,stream){stream.sphere()},Point:function(object,stream){object=object.coordinates,stream.point(object[0],object[1],object[2])},MultiPoint:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)object=coordinates[i],stream.point(object[0],object[1],object[2])},LineString:function(object,stream){streamLine(object.coordinates,stream,0)},MultiLineString:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamLine(coordinates[i],stream,0)},Polygon:function(object,stream){streamPolygon(object.coordinates,stream)},MultiPolygon:function(object,stream){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)streamPolygon(coordinates[i],stream)},GeometryCollection:function(object,stream){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)streamGeometry(geometries[i],stream)}};function streamLine(coordinates,stream,closed){var coordinate,i=-1,n=coordinates.length-closed;for(stream.lineStart();++i<n;)coordinate=coordinates[i],stream.point(coordinate[0],coordinate[1],coordinate[2]);stream.lineEnd()}function streamPolygon(coordinates,stream){var i=-1,n=coordinates.length;for(stream.polygonStart();++i<n;)streamLine(coordinates[i],stream,1);stream.polygonEnd()}function stream(object,stream){object&&streamObjectType.hasOwnProperty(object.type)?streamObjectType[object.type](object,stream):streamGeometry(object,stream)}var x0=1/0,y0=x0,x1=-x0,y1=x1,boundsStream={point:function boundsPoint(x,y){x<x0&&(x0=x);x>x1&&(x1=x);y<y0&&(y0=y);y>y1&&(y1=y)},lineStart:noop,lineEnd:noop,polygonStart:noop,polygonEnd:noop,result:function(){var bounds=[[x0,y0],[x1,y1]];return x1=y1=-(y0=x0=1/0),bounds}};const bounds=boundsStream;function fit(projection,fitBounds,object){var clip=projection.clipExtent&&projection.clipExtent();return projection.scale(150).translate([0,0]),null!=clip&&projection.clipExtent(null),stream(object,projection.stream(bounds)),fitBounds(bounds.result()),null!=clip&&projection.clipExtent(clip),projection}function fitExtent(projection,extent,object){return fit(projection,(function(b){var w=extent[1][0]-extent[0][0],h=extent[1][1]-extent[0][1],k=Math.min(w/(b[1][0]-b[0][0]),h/(b[1][1]-b[0][1])),x=+extent[0][0]+(w-k*(b[1][0]+b[0][0]))/2,y=+extent[0][1]+(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])}),object)}function fitSize(projection,size,object){return fitExtent(projection,[[0,0],size],object)}function fitWidth(projection,width,object){return fit(projection,(function(b){var w=+width,k=w/(b[1][0]-b[0][0]),x=(w-k*(b[1][0]+b[0][0]))/2,y=-k*b[0][1];projection.scale(150*k).translate([x,y])}),object)}function fitHeight(projection,height,object){return fit(projection,(function(b){var h=+height,k=h/(b[1][1]-b[0][1]),x=-k*b[0][0],y=(h-k*(b[1][1]+b[0][1]))/2;projection.scale(150*k).translate([x,y])}),object)}var maxDepth=16,cosMinDistance=cos(30*math_radians);function resample(project,delta2){return+delta2?function resample_resample(project,delta2){function resampleLineTo(x0,y0,lambda0,a0,b0,c0,x1,y1,lambda1,a1,b1,c1,depth,stream){var dx=x1-x0,dy=y1-y0,d2=dx*dx+dy*dy;if(d2>4*delta2&&depth--){var a=a0+a1,b=b0+b1,c=c0+c1,m=sqrt(a*a+b*b+c*c),phi2=asin(c/=m),lambda2=abs(abs(c)-1)<epsilon||abs(lambda0-lambda1)<epsilon?(lambda0+lambda1)/2:atan2(b,a),p=project(lambda2,phi2),x2=p[0],y2=p[1],dx2=x2-x0,dy2=y2-y0,dz=dy*dx2-dx*dy2;(dz*dz/d2>delta2||abs((dx*dx2+dy*dy2)/d2-.5)>.3||a0*a1+b0*b1+c0*c1<cosMinDistance)&&(resampleLineTo(x0,y0,lambda0,a0,b0,c0,x2,y2,lambda2,a/=m,b/=m,c,depth,stream),stream.point(x2,y2),resampleLineTo(x2,y2,lambda2,a,b,c,x1,y1,lambda1,a1,b1,c1,depth,stream))}}return function(stream){var lambda00,x00,y00,a00,b00,c00,lambda0,x0,y0,a0,b0,c0,resampleStream={point,lineStart,lineEnd,polygonStart:function(){stream.polygonStart(),resampleStream.lineStart=ringStart},polygonEnd:function(){stream.polygonEnd(),resampleStream.lineStart=lineStart}};function point(x,y){x=project(x,y),stream.point(x[0],x[1])}function lineStart(){x0=NaN,resampleStream.point=linePoint,stream.lineStart()}function linePoint(lambda,phi){var c=cartesian([lambda,phi]),p=project(lambda,phi);resampleLineTo(x0,y0,lambda0,a0,b0,c0,x0=p[0],y0=p[1],lambda0=lambda,a0=c[0],b0=c[1],c0=c[2],maxDepth,stream),stream.point(x0,y0)}function lineEnd(){resampleStream.point=point,stream.lineEnd()}function ringStart(){lineStart(),resampleStream.point=ringPoint,resampleStream.lineEnd=ringEnd}function ringPoint(lambda,phi){linePoint(lambda00=lambda,phi),x00=x0,y00=y0,a00=a0,b00=b0,c00=c0,resampleStream.point=linePoint}function ringEnd(){resampleLineTo(x0,y0,lambda0,a0,b0,c0,x00,y00,lambda00,a00,b00,c00,maxDepth,stream),resampleStream.lineEnd=lineEnd,lineEnd()}return resampleStream}}(project,delta2):function resampleNone(project){return transformer({point:function(x,y){x=project(x,y),this.stream.point(x[0],x[1])}})}(project)}var transformRadians=transformer({point:function(x,y){this.stream.point(x*math_radians,y*math_radians)}});function scaleTranslateRotate(k,dx,dy,sx,sy,alpha){if(!alpha)return function scaleTranslate(k,dx,dy,sx,sy){function transform(x,y){return[dx+k*(x*=sx),dy-k*(y*=sy)]}return transform.invert=function(x,y){return[(x-dx)/k*sx,(dy-y)/k*sy]},transform}(k,dx,dy,sx,sy);var cosAlpha=cos(alpha),sinAlpha=sin(alpha),a=cosAlpha*k,b=sinAlpha*k,ai=cosAlpha/k,bi=sinAlpha/k,ci=(sinAlpha*dy-cosAlpha*dx)/k,fi=(sinAlpha*dx+cosAlpha*dy)/k;function transform(x,y){return[a*(x*=sx)-b*(y*=sy)+dx,dy-b*x-a*y]}return transform.invert=function(x,y){return[sx*(ai*x-bi*y+ci),sy*(fi-bi*x-ai*y)]},transform}function projection(project){return projectionMutator((function(){return project}))()}function projectionMutator(projectAt){var project,rotate,y0,x1,y1,projectResample,projectTransform,projectRotateTransform,cache,cacheStream,k=150,x=480,y=250,lambda=0,phi=0,deltaLambda=0,deltaPhi=0,deltaGamma=0,alpha=0,sx=1,sy=1,theta=null,preclip=antimeridian,x0=null,postclip=identity,delta2=.5;function projection(point){return projectRotateTransform(point[0]*math_radians,point[1]*math_radians)}function invert(point){return(point=projectRotateTransform.invert(point[0],point[1]))&&[point[0]*math_degrees,point[1]*math_degrees]}function recenter(){var center=scaleTranslateRotate(k,0,0,sx,sy,alpha).apply(null,project(lambda,phi)),transform=scaleTranslateRotate(k,x-center[0],y-center[1],sx,sy,alpha);return rotate=rotation_rotateRadians(deltaLambda,deltaPhi,deltaGamma),projectTransform=compose(project,transform),projectRotateTransform=compose(rotate,projectTransform),projectResample=resample(projectTransform,delta2),reset()}function reset(){return cache=cacheStream=null,projection}return projection.stream=function(stream){return cache&&cacheStream===stream?cache:cache=transformRadians(function transformRotate(rotate){return transformer({point:function(x,y){var r=rotate(x,y);return this.stream.point(r[0],r[1])}})}(rotate)(preclip(projectResample(postclip(cacheStream=stream)))))},projection.preclip=function(_){return arguments.length?(preclip=_,theta=void 0,reset()):preclip},projection.postclip=function(_){return arguments.length?(postclip=_,x0=y0=x1=y1=null,reset()):postclip},projection.clipAngle=function(_){return arguments.length?(preclip=+_?function clip_circle(radius){var cr=cos(radius),delta=6*math_radians,smallRadius=cr>0,notHemisphere=abs(cr)>epsilon;function visible(lambda,phi){return cos(lambda)*cos(phi)>cr}function intersect(a,b,two){var n1=[1,0,0],n2=cartesianCross(cartesian(a),cartesian(b)),n2n2=cartesianDot(n2,n2),n1n2=n2[0],determinant=n2n2-n1n2*n1n2;if(!determinant)return!two&&a;var c1=cr*n2n2/determinant,c2=-cr*n1n2/determinant,n1xn2=cartesianCross(n1,n2),A=cartesianScale(n1,c1);cartesianAddInPlace(A,cartesianScale(n2,c2));var u=n1xn2,w=cartesianDot(A,u),uu=cartesianDot(u,u),t2=w*w-uu*(cartesianDot(A,A)-1);if(!(t2<0)){var t=sqrt(t2),q=cartesianScale(u,(-w-t)/uu);if(cartesianAddInPlace(q,A),q=spherical(q),!two)return q;var z,lambda0=a[0],lambda1=b[0],phi0=a[1],phi1=b[1];lambda1<lambda0&&(z=lambda0,lambda0=lambda1,lambda1=z);var delta=lambda1-lambda0,polar=abs(delta-pi)<epsilon;if(!polar&&phi1<phi0&&(z=phi0,phi0=phi1,phi1=z),polar||delta<epsilon?polar?phi0+phi1>0^q[1]<(abs(q[0]-lambda0)<epsilon?phi0:phi1):phi0<=q[1]&&q[1]<=phi1:delta>pi^(lambda0<=q[0]&&q[0]<=lambda1)){var q1=cartesianScale(u,(-w+t)/uu);return cartesianAddInPlace(q1,A),[q,spherical(q1)]}}}function code(lambda,phi){var r=smallRadius?radius:pi-radius,code=0;return lambda<-r?code|=1:lambda>r&&(code|=2),phi<-r?code|=4:phi>r&&(code|=8),code}return clip(visible,(function clipLine(stream){var point0,c0,v0,v00,clean;return{lineStart:function(){v00=v0=!1,clean=1},point:function(lambda,phi){var point2,point1=[lambda,phi],v=visible(lambda,phi),c=smallRadius?v?0:code(lambda,phi):v?code(lambda+(lambda<0?pi:-pi),phi):0;if(!point0&&(v00=v0=v)&&stream.lineStart(),v!==v0&&(!(point2=intersect(point0,point1))||pointEqual(point0,point2)||pointEqual(point1,point2))&&(point1[2]=1),v!==v0)clean=0,v?(stream.lineStart(),point2=intersect(point1,point0),stream.point(point2[0],point2[1])):(point2=intersect(point0,point1),stream.point(point2[0],point2[1],2),stream.lineEnd()),point0=point2;else if(notHemisphere&&point0&&smallRadius^v){var t;c&c0||!(t=intersect(point1,point0,!0))||(clean=0,smallRadius?(stream.lineStart(),stream.point(t[0][0],t[0][1]),stream.point(t[1][0],t[1][1]),stream.lineEnd()):(stream.point(t[1][0],t[1][1]),stream.lineEnd(),stream.lineStart(),stream.point(t[0][0],t[0][1],3)))}!v||point0&&pointEqual(point0,point1)||stream.point(point1[0],point1[1]),point0=point1,v0=v,c0=c},lineEnd:function(){v0&&stream.lineEnd(),point0=null},clean:function(){return clean|(v00&&v0)<<1}}}),(function interpolate(from,to,direction,stream){circleStream(stream,radius,delta,direction,from,to)}),smallRadius?[0,-radius]:[-pi,radius-pi])}(theta=_*math_radians):(theta=null,antimeridian),reset()):theta*math_degrees},projection.clipExtent=function(_){return arguments.length?(postclip=null==_?(x0=y0=x1=y1=null,identity):clipRectangle(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reset()):null==x0?null:[[x0,y0],[x1,y1]]},projection.scale=function(_){return arguments.length?(k=+_,recenter()):k},projection.translate=function(_){return arguments.length?(x=+_[0],y=+_[1],recenter()):[x,y]},projection.center=function(_){return arguments.length?(lambda=_[0]%360*math_radians,phi=_[1]%360*math_radians,recenter()):[lambda*math_degrees,phi*math_degrees]},projection.rotate=function(_){return arguments.length?(deltaLambda=_[0]%360*math_radians,deltaPhi=_[1]%360*math_radians,deltaGamma=_.length>2?_[2]%360*math_radians:0,recenter()):[deltaLambda*math_degrees,deltaPhi*math_degrees,deltaGamma*math_degrees]},projection.angle=function(_){return arguments.length?(alpha=_%360*math_radians,recenter()):alpha*math_degrees},projection.reflectX=function(_){return arguments.length?(sx=_?-1:1,recenter()):sx<0},projection.reflectY=function(_){return arguments.length?(sy=_?-1:1,recenter()):sy<0},projection.precision=function(_){return arguments.length?(projectResample=resample(projectTransform,delta2=_*_),reset()):sqrt(delta2)},projection.fitExtent=function(extent,object){return fitExtent(projection,extent,object)},projection.fitSize=function(size,object){return fitSize(projection,size,object)},projection.fitWidth=function(width,object){return fitWidth(projection,width,object)},projection.fitHeight=function(height,object){return fitHeight(projection,height,object)},function(){return project=projectAt.apply(this,arguments),projection.invert=project.invert&&invert,recenter()}}var azimuthalEqualAreaRaw=azimuthalRaw((function(cxcy){return sqrt(2/(1+cxcy))}));azimuthalEqualAreaRaw.invert=azimuthalInvert((function(z){return 2*asin(z/2)}));var azimuthalEquidistantRaw=azimuthalRaw((function(c){return(c=acos(c))&&c/sin(c)}));function gnomonicRaw(x,y){var cy=cos(y),k=cos(x)*cy;return[cy*sin(x)/k,sin(y)/k]}function orthographicRaw(x,y){return[cos(y)*sin(x),sin(y)]}function stereographicRaw(x,y){var cy=cos(y),k=1+cos(x)*cy;return[cy*sin(x)/k,sin(y)/k]}azimuthalEquidistantRaw.invert=azimuthalInvert((function(z){return z})),gnomonicRaw.invert=azimuthalInvert(atan),orthographicRaw.invert=azimuthalInvert(asin),stereographicRaw.invert=azimuthalInvert((function(z){return 2*atan(z)}));var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=sqrt(3)/2;function equalEarthRaw(lambda,phi){var l=asin(M*sin(phi)),l2=l*l,l6=l2*l2*l2;return[lambda*cos(l)/(M*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))),l*(A1+A2*l2+l6*(A3+A4*l2))]}function conicProjection(projectAt){var phi0=0,phi1=pi/3,m=projectionMutator(projectAt),p=m(phi0,phi1);return p.parallels=function(_){return arguments.length?m(phi0=_[0]*math_radians,phi1=_[1]*math_radians):[phi0*math_degrees,phi1*math_degrees]},p}function conicEqualAreaRaw(y0,y1){var sy0=sin(y0),n=(sy0+sin(y1))/2;if(abs(n)<epsilon)return function cylindricalEqualAreaRaw(phi0){var cosPhi0=cos(phi0);function forward(lambda,phi){return[lambda*cosPhi0,sin(phi)/cosPhi0]}return forward.invert=function(x,y){return[x/cosPhi0,asin(y*cosPhi0)]},forward}(y0);var c=1+sy0*(2*n-sy0),r0=sqrt(c)/n;function project(x,y){var r=sqrt(c-2*n*sin(y))/n;return[r*sin(x*=n),r0-r*cos(x)]}return project.invert=function(x,y){var r0y=r0-y,l=atan2(x,abs(r0y))*sign(r0y);return r0y*n<0&&(l-=pi*sign(x)*sign(r0y)),[l/n,asin((c-(x*x+r0y*r0y)*n*n)/(2*n))]},project}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function mercatorRaw(lambda,phi){return[lambda,log(tan((halfPi+phi)/2))]}function mercatorProjection(project){var y0,x1,y1,m=projection(project),center=m.center,scale=m.scale,translate=m.translate,clipExtent=m.clipExtent,x0=null;function reclip(){var k=pi*scale(),t=m(function rotation(rotate){function forward(coordinates){return(coordinates=rotate(coordinates[0]*math_radians,coordinates[1]*math_radians))[0]*=math_degrees,coordinates[1]*=math_degrees,coordinates}return rotate=rotation_rotateRadians(rotate[0]*math_radians,rotate[1]*math_radians,rotate.length>2?rotate[2]*math_radians:0),forward.invert=function(coordinates){return(coordinates=rotate.invert(coordinates[0]*math_radians,coordinates[1]*math_radians))[0]*=math_degrees,coordinates[1]*=math_degrees,coordinates},forward}(m.rotate()).invert([0,0]));return clipExtent(null==x0?[[t[0]-k,t[1]-k],[t[0]+k,t[1]+k]]:project===mercatorRaw?[[Math.max(t[0]-k,x0),y0],[Math.min(t[0]+k,x1),y1]]:[[x0,Math.max(t[1]-k,y0)],[x1,Math.min(t[1]+k,y1)]])}return m.scale=function(_){return arguments.length?(scale(_),reclip()):scale()},m.translate=function(_){return arguments.length?(translate(_),reclip()):translate()},m.center=function(_){return arguments.length?(center(_),reclip()):center()},m.clipExtent=function(_){return arguments.length?(null==_?x0=y0=x1=y1=null:(x0=+_[0][0],y0=+_[0][1],x1=+_[1][0],y1=+_[1][1]),reclip()):null==x0?null:[[x0,y0],[x1,y1]]},reclip()}function tany(y){return tan((halfPi+y)/2)}function conicConformalRaw(y0,y1){var cy0=cos(y0),n=y0===y1?sin(y0):log(cy0/cos(y1))/log(tany(y1)/tany(y0)),f=cy0*pow(tany(y0),n)/n;if(!n)return mercatorRaw;function project(x,y){f>0?y<-halfPi+epsilon&&(y=-halfPi+epsilon):y>halfPi-epsilon&&(y=halfPi-epsilon);var r=f/pow(tany(y),n);return[r*sin(n*x),f-r*cos(n*x)]}return project.invert=function(x,y){var fy=f-y,r=sign(n)*sqrt(x*x+fy*fy),l=atan2(x,abs(fy))*sign(fy);return fy*n<0&&(l-=pi*sign(x)*sign(fy)),[l/n,2*atan(pow(f/r,1/n))-halfPi]},project}function equirectangularRaw(lambda,phi){return[lambda,phi]}function conicEquidistantRaw(y0,y1){var cy0=cos(y0),n=y0===y1?sin(y0):(cy0-cos(y1))/(y1-y0),g=cy0/n+y0;if(abs(n)<epsilon)return equirectangularRaw;function project(x,y){var gy=g-y,nx=n*x;return[gy*sin(nx),g-gy*cos(nx)]}return project.invert=function(x,y){var gy=g-y,l=atan2(x,abs(gy))*sign(gy);return gy*n<0&&(l-=pi*sign(x)*sign(gy)),[l/n,g-sign(n)*sqrt(x*x+gy*gy)]},project}function transverseMercatorRaw(lambda,phi){return[log(tan((halfPi+phi)/2)),-lambda]}function naturalEarth1Raw(lambda,phi){var phi2=phi*phi,phi4=phi2*phi2;return[lambda*(.8707-.131979*phi2+phi4*(phi4*(.003971*phi2-.001529*phi4)-.013791)),phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))]}equalEarthRaw.invert=function(x,y){for(var delta,l=y,l2=l*l,l6=l2*l2*l2,i=0;i<12&&(l6=(l2=(l-=delta=(l*(A1+A2*l2+l6*(A3+A4*l2))-y)/(A1+3*A2*l2+l6*(7*A3+9*A4*l2)))*l)*l2*l2,!(abs(delta)<epsilon2));++i);return[M*x*(A1+3*A2*l2+l6*(7*A3+9*A4*l2))/cos(l),asin(sin(l)/M)]},mercatorRaw.invert=function(x,y){return[x,2*atan(exp(y))-halfPi]},equirectangularRaw.invert=equirectangularRaw,transverseMercatorRaw.invert=function(x,y){return[-y,2*atan(exp(x))-halfPi]},naturalEarth1Raw.invert=function(x,y){var delta,phi=y,i=25;do{var phi2=phi*phi,phi4=phi2*phi2;phi-=delta=(phi*(1.007226+phi2*(.015085+phi4*(.028874*phi2-.044475-.005916*phi4)))-y)/(1.007226+phi2*(.045255+phi4*(.259866*phi2-.311325-.005916*11*phi4)))}while(abs(delta)>epsilon&&--i>0);return[x/(.8707+(phi2=phi*phi)*(phi2*(phi2*phi2*phi2*(.003971-.001529*phi2)-.013791)-.131979)),phi]};var x00,y00,area_x0,area_y0,areaSum=new Adder,areaRingSum=new Adder,areaStream={point:noop,lineStart:noop,lineEnd:noop,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop,areaSum.add(abs(areaRingSum)),areaRingSum=new Adder},result:function(){var area=areaSum/2;return areaSum=new Adder,area}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(x,y){areaStream.point=areaPoint,x00=area_x0=x,y00=area_y0=y}function areaPoint(x,y){areaRingSum.add(area_y0*x-area_x0*y),area_x0=x,area_y0=y}function areaRingEnd(){areaPoint(x00,y00)}const path_area=areaStream;var centroid_x00,centroid_y00,centroid_x0,centroid_y0,X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var centroid=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,centroid}};function centroidPoint(x,y){X0+=x,Y0+=y,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(x,y){centroidStream.point=centroidPointLine,centroidPoint(centroid_x0=x,centroid_y0=y)}function centroidPointLine(x,y){var dx=x-centroid_x0,dy=y-centroid_y0,z=sqrt(dx*dx+dy*dy);X1+=z*(centroid_x0+x)/2,Y1+=z*(centroid_y0+y)/2,Z1+=z,centroidPoint(centroid_x0=x,centroid_y0=y)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(centroid_x00,centroid_y00)}function centroidPointFirstRing(x,y){centroidStream.point=centroidPointRing,centroidPoint(centroid_x00=centroid_x0=x,centroid_y00=centroid_y0=y)}function centroidPointRing(x,y){var dx=x-centroid_x0,dy=y-centroid_y0,z=sqrt(dx*dx+dy*dy);X1+=z*(centroid_x0+x)/2,Y1+=z*(centroid_y0+y)/2,Z1+=z,X2+=(z=centroid_y0*x-centroid_x0*y)*(centroid_x0+x),Y2+=z*(centroid_y0+y),Z2+=3*z,centroidPoint(centroid_x0=x,centroid_y0=y)}const centroid=centroidStream;function PathContext(context){this._context=context}PathContext.prototype={_radius:4.5,pointRadius:function(_){return this._radius=_,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(x,y){switch(this._point){case 0:this._context.moveTo(x,y),this._point=1;break;case 1:this._context.lineTo(x,y);break;default:this._context.moveTo(x+this._radius,y),this._context.arc(x,y,this._radius,0,tau)}},result:noop};var lengthRing,measure_x00,measure_y00,measure_x0,measure_y0,lengthSum=new Adder,lengthStream={point:noop,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(measure_x00,measure_y00),lengthStream.point=noop},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var length=+lengthSum;return lengthSum=new Adder,length}};function lengthPointFirst(x,y){lengthStream.point=lengthPoint,measure_x00=measure_x0=x,measure_y00=measure_y0=y}function lengthPoint(x,y){measure_x0-=x,measure_y0-=y,lengthSum.add(sqrt(measure_x0*measure_x0+measure_y0*measure_y0)),measure_x0=x,measure_y0=y}const measure=lengthStream;let cacheDigits,cacheAppend,cacheRadius,cacheCircle;class PathString{constructor(digits){this._append=null==digits?append:function appendRound(digits){const d=Math.floor(digits);if(!(d>=0))throw new RangeError(`invalid digits: ${digits}`);if(d>15)return append;if(d!==cacheDigits){const k=10**d;cacheDigits=d,cacheAppend=function append(strings){let i=1;this._+=strings[0];for(const j=strings.length;i<j;++i)this._+=Math.round(arguments[i]*k)/k+strings[i]}}return cacheAppend}(digits),this._radius=4.5,this._=""}pointRadius(_){return this._radius=+_,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(x,y){switch(this._point){case 0:this._append`M${x},${y}`,this._point=1;break;case 1:this._append`L${x},${y}`;break;default:if(this._append`M${x},${y}`,this._radius!==cacheRadius||this._append!==cacheAppend){const r=this._radius,s=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,cacheRadius=r,cacheAppend=this._append,cacheCircle=this._,this._=s}this._+=cacheCircle}}result(){const result=this._;return this._="",result.length?result:null}}function append(strings){let i=1;this._+=strings[0];for(const j=strings.length;i<j;++i)this._+=arguments[i]+strings[i]}function path(projection,context){let projectionStream,contextStream,digits=3,pointRadius=4.5;function path(object){return object&&("function"==typeof pointRadius&&contextStream.pointRadius(+pointRadius.apply(this,arguments)),stream(object,projectionStream(contextStream))),contextStream.result()}return path.area=function(object){return stream(object,projectionStream(path_area)),path_area.result()},path.measure=function(object){return stream(object,projectionStream(measure)),measure.result()},path.bounds=function(object){return stream(object,projectionStream(bounds)),bounds.result()},path.centroid=function(object){return stream(object,projectionStream(centroid)),centroid.result()},path.projection=function(_){return arguments.length?(projectionStream=null==_?(projection=null,identity):(projection=_).stream,path):projection},path.context=function(_){return arguments.length?(contextStream=null==_?(context=null,new PathString(digits)):new PathContext(context=_),"function"!=typeof pointRadius&&contextStream.pointRadius(pointRadius),path):context},path.pointRadius=function(_){return arguments.length?(pointRadius="function"==typeof _?_:(contextStream.pointRadius(+_),+_),path):pointRadius},path.digits=function(_){if(!arguments.length)return digits;if(null==_)digits=null;else{const d=Math.floor(_);if(!(d>=0))throw new RangeError(`invalid digits: ${_}`);digits=d}return null===context&&(contextStream=new PathString(digits)),path},path.projection(projection).digits(digits).context(context)}var length_lengthSum,lambda0,sinPhi0,cosPhi0,length_lengthStream={sphere:noop,point:noop,lineStart:function lengthLineStart(){length_lengthStream.point=length_lengthPointFirst,length_lengthStream.lineEnd=lengthLineEnd},lineEnd:noop,polygonStart:noop,polygonEnd:noop};function lengthLineEnd(){length_lengthStream.point=length_lengthStream.lineEnd=noop}function length_lengthPointFirst(lambda,phi){lambda0=lambda*=math_radians,sinPhi0=sin(phi*=math_radians),cosPhi0=cos(phi),length_lengthStream.point=length_lengthPoint}function length_lengthPoint(lambda,phi){lambda*=math_radians;var sinPhi=sin(phi*=math_radians),cosPhi=cos(phi),delta=abs(lambda-lambda0),cosDelta=cos(delta),x=cosPhi*sin(delta),y=cosPhi0*sinPhi-sinPhi0*cosPhi*cosDelta,z=sinPhi0*sinPhi+cosPhi0*cosPhi*cosDelta;length_lengthSum.add(atan2(sqrt(x*x+y*y),z)),lambda0=lambda,sinPhi0=sinPhi,cosPhi0=cosPhi}var coordinates=[null,null],object={type:"LineString",coordinates};function distance(a,b){return coordinates[0]=a,coordinates[1]=b,function src_length(object){return length_lengthSum=new Adder,stream(object,length_lengthStream),+length_lengthSum}(object)}var containsObjectType={Feature:function(object,point){return containsGeometry(object.geometry,point)},FeatureCollection:function(object,point){for(var features=object.features,i=-1,n=features.length;++i<n;)if(containsGeometry(features[i].geometry,point))return!0;return!1}},containsGeometryType={Sphere:function(){return!0},Point:function(object,point){return containsPoint(object.coordinates,point)},MultiPoint:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsPoint(coordinates[i],point))return!0;return!1},LineString:function(object,point){return containsLine(object.coordinates,point)},MultiLineString:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsLine(coordinates[i],point))return!0;return!1},Polygon:function(object,point){return containsPolygon(object.coordinates,point)},MultiPolygon:function(object,point){for(var coordinates=object.coordinates,i=-1,n=coordinates.length;++i<n;)if(containsPolygon(coordinates[i],point))return!0;return!1},GeometryCollection:function(object,point){for(var geometries=object.geometries,i=-1,n=geometries.length;++i<n;)if(containsGeometry(geometries[i],point))return!0;return!1}};function containsGeometry(geometry,point){return!(!geometry||!containsGeometryType.hasOwnProperty(geometry.type))&&containsGeometryType[geometry.type](geometry,point)}function containsPoint(coordinates,point){return 0===distance(coordinates,point)}function containsLine(coordinates,point){for(var ao,bo,ab,i=0,n=coordinates.length;i<n;i++){if(0===(bo=distance(coordinates[i],point)))return!0;if(i>0&&(ab=distance(coordinates[i],coordinates[i-1]))>0&&ao<=ab&&bo<=ab&&(ao+bo-ab)*(1-Math.pow((ao-bo)/ab,2))<epsilon2*ab)return!0;ao=bo}return!1}function containsPolygon(coordinates,point){return!!polygonContains(coordinates.map(ringRadians),pointRadians(point))}function ringRadians(ring){return(ring=ring.map(pointRadians)).pop(),ring}function pointRadians(point){return[point[0]*math_radians,point[1]*math_radians]}function range(start,stop,step){start=+start,stop=+stop,step=(n=arguments.length)<2?(stop=start,start=0,1):n<3?1:+step;for(var i=-1,n=0|Math.max(0,Math.ceil((stop-start)/step)),range=new Array(n);++i<n;)range[i]=start+i*step;return range}function graticuleX(y0,y1,dy){var y=range(y0,y1-epsilon,dy).concat(y1);return function(x){return y.map((function(y){return[x,y]}))}}function graticuleY(x0,x1,dx){var x=range(x0,x1-epsilon,dx).concat(x1);return function(y){return x.map((function(x){return[x,y]}))}}function graticule(){var x1,x0,X1,X0,y1,y0,Y1,Y0,x,y,X,Y,dx=10,dy=dx,DX=90,DY=360,precision=2.5;function graticule(){return{type:"MultiLineString",coordinates:lines()}}function lines(){return range(ceil(X0/DX)*DX,X1,DX).map(X).concat(range(ceil(Y0/DY)*DY,Y1,DY).map(Y)).concat(range(ceil(x0/dx)*dx,x1,dx).filter((function(x){return abs(x%DX)>epsilon})).map(x)).concat(range(ceil(y0/dy)*dy,y1,dy).filter((function(y){return abs(y%DY)>epsilon})).map(y))}return graticule.lines=function(){return lines().map((function(coordinates){return{type:"LineString",coordinates}}))},graticule.outline=function(){return{type:"Polygon",coordinates:[X(X0).concat(Y(Y1).slice(1),X(X1).reverse().slice(1),Y(Y0).reverse().slice(1))]}},graticule.extent=function(_){return arguments.length?graticule.extentMajor(_).extentMinor(_):graticule.extentMinor()},graticule.extentMajor=function(_){return arguments.length?(X0=+_[0][0],X1=+_[1][0],Y0=+_[0][1],Y1=+_[1][1],X0>X1&&(_=X0,X0=X1,X1=_),Y0>Y1&&(_=Y0,Y0=Y1,Y1=_),graticule.precision(precision)):[[X0,Y0],[X1,Y1]]},graticule.extentMinor=function(_){return arguments.length?(x0=+_[0][0],x1=+_[1][0],y0=+_[0][1],y1=+_[1][1],x0>x1&&(_=x0,x0=x1,x1=_),y0>y1&&(_=y0,y0=y1,y1=_),graticule.precision(precision)):[[x0,y0],[x1,y1]]},graticule.step=function(_){return arguments.length?graticule.stepMajor(_).stepMinor(_):graticule.stepMinor()},graticule.stepMajor=function(_){return arguments.length?(DX=+_[0],DY=+_[1],graticule):[DX,DY]},graticule.stepMinor=function(_){return arguments.length?(dx=+_[0],dy=+_[1],graticule):[dx,dy]},graticule.precision=function(_){return arguments.length?(precision=+_,x=graticuleX(y0,y1,90),y=graticuleY(x0,x1,precision),X=graticuleX(Y0,Y1,90),Y=graticuleY(X0,X1,precision),graticule):precision},graticule.extentMajor([[-180,-90+epsilon],[180,90-epsilon]]).extentMinor([[-180,-80-epsilon],[180,80+epsilon]])}var helpers_segment=__webpack_require__("./node_modules/chart.js/dist/chunks/helpers.segment.js");function colors(specifier){for(var n=specifier.length/6|0,colors=new Array(n),i=0;i<n;)colors[i]="#"+specifier.slice(6*i,6*++i);return colors}function src_define(constructor,factory,prototype){constructor.prototype=factory.prototype=prototype,prototype.constructor=constructor}function extend(parent,definition){var prototype=Object.create(parent.prototype);for(var key in definition)prototype[key]=definition[key];return prototype}function Color(){}var brighter=1/.7,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatRgb(){return this.rgb().formatRgb()}function color(format){var m,l;return format=(format+"").trim().toLowerCase(),(m=reHex.exec(format))?(l=m[1].length,m=parseInt(m[1],16),6===l?rgbn(m):3===l?new Rgb(m>>8&15|m>>4&240,m>>4&15|240&m,(15&m)<<4|15&m,1):8===l?rgba(m>>24&255,m>>16&255,m>>8&255,(255&m)/255):4===l?rgba(m>>12&15|m>>8&240,m>>8&15|m>>4&240,m>>4&15|240&m,((15&m)<<4|15&m)/255):null):(m=reRgbInteger.exec(format))?new Rgb(m[1],m[2],m[3],1):(m=reRgbPercent.exec(format))?new Rgb(255*m[1]/100,255*m[2]/100,255*m[3]/100,1):(m=reRgbaInteger.exec(format))?rgba(m[1],m[2],m[3],m[4]):(m=reRgbaPercent.exec(format))?rgba(255*m[1]/100,255*m[2]/100,255*m[3]/100,m[4]):(m=reHslPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,1):(m=reHslaPercent.exec(format))?hsla(m[1],m[2]/100,m[3]/100,m[4]):named.hasOwnProperty(format)?rgbn(named[format]):"transparent"===format?new Rgb(NaN,NaN,NaN,0):null}function rgbn(n){return new Rgb(n>>16&255,n>>8&255,255&n,1)}function rgba(r,g,b,a){return a<=0&&(r=g=b=NaN),new Rgb(r,g,b,a)}function rgbConvert(o){return o instanceof Color||(o=color(o)),o?new Rgb((o=o.rgb()).r,o.g,o.b,o.opacity):new Rgb}function color_rgb(r,g,b,opacity){return 1===arguments.length?rgbConvert(r):new Rgb(r,g,b,null==opacity?1:opacity)}function Rgb(r,g,b,opacity){this.r=+r,this.g=+g,this.b=+b,this.opacity=+opacity}function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatRgb(){const a=clampa(this.opacity);return`${1===a?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${1===a?")":`, ${a})`}`}function clampa(opacity){return isNaN(opacity)?1:Math.max(0,Math.min(1,opacity))}function clampi(value){return Math.max(0,Math.min(255,Math.round(value)||0))}function hex(value){return((value=clampi(value))<16?"0":"")+value.toString(16)}function hsla(h,s,l,a){return a<=0?h=s=l=NaN:l<=0||l>=1?h=s=NaN:s<=0&&(h=NaN),new Hsl(h,s,l,a)}function hslConvert(o){if(o instanceof Hsl)return new Hsl(o.h,o.s,o.l,o.opacity);if(o instanceof Color||(o=color(o)),!o)return new Hsl;if(o instanceof Hsl)return o;var r=(o=o.rgb()).r/255,g=o.g/255,b=o.b/255,min=Math.min(r,g,b),max=Math.max(r,g,b),h=NaN,s=max-min,l=(max+min)/2;return s?(h=r===max?(g-b)/s+6*(g<b):g===max?(b-r)/s+2:(r-g)/s+4,s/=l<.5?max+min:2-max-min,h*=60):s=l>0&&l<1?0:h,new Hsl(h,s,l,o.opacity)}function Hsl(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function clamph(value){return(value=(value||0)%360)<0?value+360:value}function clampt(value){return Math.max(0,Math.min(1,value||0))}function hsl2rgb(h,m1,m2){return 255*(h<60?m1+(m2-m1)*h/60:h<180?m2:h<240?m1+(m2-m1)*(240-h)/60:m1)}function basis(t1,v0,v1,v2,v3){var t2=t1*t1,t3=t2*t1;return((1-3*t1+3*t2-t3)*v0+(4-6*t2+3*t3)*v1+(1+3*t1+3*t2-3*t3)*v2+t3*v3)/6}src_define(Color,color,{copy(channels){return Object.assign(new this.constructor,this,channels)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:function color_formatHex8(){return this.rgb().formatHex8()},formatHsl:function color_formatHsl(){return hslConvert(this).formatHsl()},formatRgb:color_formatRgb,toString:color_formatRgb}),src_define(Rgb,color_rgb,extend(Color,{brighter(k){return k=null==k?brighter:Math.pow(brighter,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},darker(k){return k=null==k?.7:Math.pow(.7,k),new Rgb(this.r*k,this.g*k,this.b*k,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),src_define(Hsl,(function hsl(h,s,l,opacity){return 1===arguments.length?hslConvert(h):new Hsl(h,s,l,null==opacity?1:opacity)}),extend(Color,{brighter(k){return k=null==k?brighter:Math.pow(brighter,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},darker(k){return k=null==k?.7:Math.pow(.7,k),new Hsl(this.h,this.s,this.l*k,this.opacity)},rgb(){var h=this.h%360+360*(this.h<0),s=isNaN(h)||isNaN(this.s)?0:this.s,l=this.l,m2=l+(l<.5?l:1-l)*s,m1=2*l-m2;return new Rgb(hsl2rgb(h>=240?h-240:h+120,m1,m2),hsl2rgb(h,m1,m2),hsl2rgb(h<120?h+240:h-120,m1,m2),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const a=clampa(this.opacity);return`${1===a?"hsl(":"hsla("}${clamph(this.h)}, ${100*clampt(this.s)}%, ${100*clampt(this.l)}%${1===a?")":`, ${a})`}`}}));const src_constant=x=>()=>x;function linear(a,d){return function(t){return a+t*d}}function gamma(y){return 1==(y=+y)?nogamma:function(a,b){return b-a?function exponential(a,b,y){return a=Math.pow(a,y),b=Math.pow(b,y)-a,y=1/y,function(t){return Math.pow(a+t*b,y)}}(a,b,y):src_constant(isNaN(a)?b:a)}}function nogamma(a,b){var d=b-a;return d?linear(a,d):src_constant(isNaN(a)?b:a)}(function rgbGamma(y){var color=gamma(y);function rgb(start,end){var r=color((start=color_rgb(start)).r,(end=color_rgb(end)).r),g=color(start.g,end.g),b=color(start.b,end.b),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.r=r(t),start.g=g(t),start.b=b(t),start.opacity=opacity(t),start+""}}return rgb.gamma=rgbGamma,rgb})(1);function rgbSpline(spline){return function(colors){var i,color,n=colors.length,r=new Array(n),g=new Array(n),b=new Array(n);for(i=0;i<n;++i)color=color_rgb(colors[i]),r[i]=color.r||0,g[i]=color.g||0,b[i]=color.b||0;return r=spline(r),g=spline(g),b=spline(b),color.opacity=1,function(t){return color.r=r(t),color.g=g(t),color.b=b(t),color+""}}}var rgbBasis=rgbSpline((function src_basis(values){var n=values.length-1;return function(t){var i=t<=0?t=0:t>=1?(t=1,n-1):Math.floor(t*n),v1=values[i],v2=values[i+1],v0=i>0?values[i-1]:2*v1-v2,v3=i<n-1?values[i+2]:2*v2-v1;return basis((t-i/n)*n,v0,v1,v2,v3)}}));rgbSpline((function basisClosed(values){var n=values.length;return function(t){var i=Math.floor(((t%=1)<0?++t:t)*n),v0=values[(i+n-1)%n],v1=values[i%n],v2=values[(i+1)%n],v3=values[(i+2)%n];return basis((t-i/n)*n,v0,v1,v2,v3)}}));const ramp=scheme=>rgbBasis(scheme[scheme.length-1]);const Blues=ramp(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors));const BrBG=ramp(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors));const BuGn=ramp(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors));const BuPu=ramp(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors));const src_math_radians=Math.PI/180,src_math_degrees=180/Math.PI;var A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelix_cubehelix(h,s,l,opacity){return 1===arguments.length?function cubehelixConvert(o){if(o instanceof Cubehelix)return new Cubehelix(o.h,o.s,o.l,o.opacity);o instanceof Rgb||(o=rgbConvert(o));var r=o.r/255,g=o.g/255,b=o.b/255,l=(BC_DA*b+ED*r-EB*g)/(BC_DA+ED-EB),bl=b-l,k=(E*(g-l)-C*bl)/D,s=Math.sqrt(k*k+bl*bl)/(E*l*(1-l)),h=s?Math.atan2(k,bl)*src_math_degrees-120:NaN;return new Cubehelix(h<0?h+360:h,s,l,o.opacity)}(h):new Cubehelix(h,s,l,null==opacity?1:opacity)}function Cubehelix(h,s,l,opacity){this.h=+h,this.s=+s,this.l=+l,this.opacity=+opacity}function cubehelix(hue){return function cubehelixGamma(y){function cubehelix(start,end){var h=hue((start=cubehelix_cubehelix(start)).h,(end=cubehelix_cubehelix(end)).h),s=nogamma(start.s,end.s),l=nogamma(start.l,end.l),opacity=nogamma(start.opacity,end.opacity);return function(t){return start.h=h(t),start.s=s(t),start.l=l(Math.pow(t,y)),start.opacity=opacity(t),start+""}}return y=+y,cubehelix.gamma=cubehelixGamma,cubehelix}(1)}src_define(Cubehelix,cubehelix_cubehelix,extend(Color,{brighter(k){return k=null==k?brighter:Math.pow(brighter,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},darker(k){return k=null==k?.7:Math.pow(.7,k),new Cubehelix(this.h,this.s,this.l*k,this.opacity)},rgb(){var h=isNaN(this.h)?0:(this.h+120)*src_math_radians,l=+this.l,a=isNaN(this.s)?0:this.s*l*(1-l),cosh=Math.cos(h),sinh=Math.sin(h);return new Rgb(255*(l+a*(A*cosh+B*sinh)),255*(l+a*(C*cosh+D*sinh)),255*(l+a*(E*cosh)),this.opacity)}}));cubehelix((function hue(a,b){var d=b-a;return d?linear(a,d>180||d<-180?d-360*Math.round(d/360):d):src_constant(isNaN(a)?b:a)}));var cubehelixLong=cubehelix(nogamma),warm=cubehelixLong(cubehelix_cubehelix(-100,.75,.35),cubehelix_cubehelix(80,1.5,.8)),cool=cubehelixLong(cubehelix_cubehelix(260,.75,.35),cubehelix_cubehelix(80,1.5,.8)),c=cubehelix_cubehelix();const sequential_multi_cubehelix=cubehelixLong(cubehelix_cubehelix(300,.5,0),cubehelix_cubehelix(-240,.5,1));const GnBu=ramp(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors));const Greens=ramp(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors));const Greys=ramp(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors));function viridis_ramp(range){var n=range.length;return function(t){return range[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}const viridis=viridis_ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var magma=viridis_ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=viridis_ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=viridis_ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const OrRd=ramp(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors));const Oranges=ramp(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors));const PRGn=ramp(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors));const PiYG=ramp(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors));const PuBu=ramp(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors));const PuBuGn=ramp(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors));const PuOr=ramp(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors));const PuRd=ramp(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors));const Purples=ramp(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors));const RdBu=ramp(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors));const RdGy=ramp(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors));const RdPu=ramp(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors));const RdYlBu=ramp(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors));const RdYlGn=ramp(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors));const Reds=ramp(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors));var sinebow_c=color_rgb(),pi_1_3=Math.PI/3,pi_2_3=2*Math.PI/3;const Spectral=ramp(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors));const YlGn=ramp(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors));const YlGnBu=ramp(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors));const YlOrBr=ramp(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors));const YlOrRd=ramp(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors)),lookup$1={geoAzimuthalEqualArea:function azimuthalEqualArea(){return projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(179.999)},geoAzimuthalEquidistant:function azimuthalEquidistant(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(179.999)},geoGnomonic:function gnomonic(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)},geoOrthographic:function orthographic(){return projection(orthographicRaw).scale(249.5).clipAngle(90+epsilon)},geoStereographic:function stereographic(){return projection(stereographicRaw).scale(250).clipAngle(142)},geoEqualEarth:function equalEarth(){return projection(equalEarthRaw).scale(177.158)},geoAlbers:albers,geoAlbersUsa:function albersUsa(){var cache,cacheStream,lower48Point,alaskaPoint,hawaiiPoint,point,lower48=albers(),alaska=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),hawaii=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),pointStream={point:function(x,y){point=[x,y]}};function albersUsa(coordinates){var x=coordinates[0],y=coordinates[1];return point=null,lower48Point.point(x,y),point||(alaskaPoint.point(x,y),point)||(hawaiiPoint.point(x,y),point)}function reset(){return cache=cacheStream=null,albersUsa}return albersUsa.invert=function(coordinates){var k=lower48.scale(),t=lower48.translate(),x=(coordinates[0]-t[0])/k,y=(coordinates[1]-t[1])/k;return(y>=.12&&y<.234&&x>=-.425&&x<-.214?alaska:y>=.166&&y<.234&&x>=-.214&&x<-.115?hawaii:lower48).invert(coordinates)},albersUsa.stream=function(stream){return cache&&cacheStream===stream?cache:cache=function multiplex(streams){var n=streams.length;return{point:function(x,y){for(var i=-1;++i<n;)streams[i].point(x,y)},sphere:function(){for(var i=-1;++i<n;)streams[i].sphere()},lineStart:function(){for(var i=-1;++i<n;)streams[i].lineStart()},lineEnd:function(){for(var i=-1;++i<n;)streams[i].lineEnd()},polygonStart:function(){for(var i=-1;++i<n;)streams[i].polygonStart()},polygonEnd:function(){for(var i=-1;++i<n;)streams[i].polygonEnd()}}}([lower48.stream(cacheStream=stream),alaska.stream(stream),hawaii.stream(stream)])},albersUsa.precision=function(_){return arguments.length?(lower48.precision(_),alaska.precision(_),hawaii.precision(_),reset()):lower48.precision()},albersUsa.scale=function(_){return arguments.length?(lower48.scale(_),alaska.scale(.35*_),hawaii.scale(_),albersUsa.translate(lower48.translate())):lower48.scale()},albersUsa.translate=function(_){if(!arguments.length)return lower48.translate();var k=lower48.scale(),x=+_[0],y=+_[1];return lower48Point=lower48.translate(_).clipExtent([[x-.455*k,y-.238*k],[x+.455*k,y+.238*k]]).stream(pointStream),alaskaPoint=alaska.translate([x-.307*k,y+.201*k]).clipExtent([[x-.425*k+epsilon,y+.12*k+epsilon],[x-.214*k-epsilon,y+.234*k-epsilon]]).stream(pointStream),hawaiiPoint=hawaii.translate([x-.205*k,y+.212*k]).clipExtent([[x-.214*k+epsilon,y+.166*k+epsilon],[x-.115*k-epsilon,y+.234*k-epsilon]]).stream(pointStream),reset()},albersUsa.fitExtent=function(extent,object){return fitExtent(albersUsa,extent,object)},albersUsa.fitSize=function(size,object){return fitSize(albersUsa,size,object)},albersUsa.fitWidth=function(width,object){return fitWidth(albersUsa,width,object)},albersUsa.fitHeight=function(height,object){return fitHeight(albersUsa,height,object)},albersUsa.scale(1070)},geoConicConformal:function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])},geoConicEqualArea:conicEqualArea,geoConicEquidistant:function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])},geoEquirectangular:function equirectangular(){return projection(equirectangularRaw).scale(152.63)},geoMercator:function mercator(){return mercatorProjection(mercatorRaw).scale(961/tau)},geoTransverseMercator:function transverseMercator(){var m=mercatorProjection(transverseMercatorRaw),center=m.center,rotate=m.rotate;return m.center=function(_){return arguments.length?center([-_[1],_[0]]):[(_=center())[1],-_[0]]},m.rotate=function(_){return arguments.length?rotate([_[0],_[1],_.length>2?_[2]+90:90]):[(_=rotate())[0],_[1],_[2]-90]},rotate([0,0,90]).scale(159.155)},geoNaturalEarth1:function naturalEarth1(){return projection(naturalEarth1Raw).scale(175.295)}};Object.keys(lookup$1).forEach((key=>{lookup$1[`${key.charAt(3).toLowerCase()}${key.slice(4)}`]=lookup$1[key]}));class ProjectionScale extends chart.FE{constructor(cfg){super(cfg),this.outlineBounds=null,this.oldChartBounds=null,this.geoPath=path()}init(options){options.position="chartArea",super.init(options),"function"==typeof options.projection?this.projection=options.projection:this.projection=(lookup$1[options.projection]||lookup$1.albersUsa)(),this.geoPath.projection(this.projection),this.outlineBounds=null,this.oldChartBounds=null}computeBounds(outline){const bb=path(this.projection.fitWidth(1e3,outline)).bounds(outline),bHeight=Math.ceil(bb[1][1]-bb[0][1]),bWidth=Math.ceil(bb[1][0]-bb[0][0]),t=this.projection.translate();this.outlineBounds={width:bWidth,height:bHeight,aspectRatio:bWidth/bHeight,refScale:this.projection.scale(),refX:t[0],refY:t[1]}}updateBounds(){const area=this.chart.chartArea,bb=this.outlineBounds;if(!bb)return!1;const padding=this.options.padding,paddingTop="number"==typeof padding?padding:padding.top,paddingLeft="number"==typeof padding?padding:padding.left,paddingBottom="number"==typeof padding?padding:padding.bottom,paddingRight="number"==typeof padding?padding:padding.right,chartWidth=area.right-area.left-paddingLeft-paddingRight,chartHeight=area.bottom-area.top-paddingTop-paddingBottom,bak=this.oldChartBounds;this.oldChartBounds={chartWidth,chartHeight};const scale=Math.min(chartWidth/bb.width,chartHeight/bb.height),viewWidth=bb.width*scale,viewHeight=bb.height*scale,x=.5*(chartWidth-viewWidth)+area.left+paddingLeft,y=.5*(chartHeight-viewHeight)+area.top+paddingTop,o=this.options;return this.projection.scale(bb.refScale*scale*o.projectionScale).translate([scale*bb.refX+x+o.projectionOffset[0],scale*bb.refY+y+o.projectionOffset[1]]),!bak||bak.chartWidth!==this.oldChartBounds.chartWidth||bak.chartHeight!==this.oldChartBounds.chartHeight}}ProjectionScale.id="projection",ProjectionScale.defaults={projection:"albersUsa",projectionScale:1,projectionOffset:[0,0],padding:0},ProjectionScale.descriptors={_scriptable:name=>"projection"!==name,_indexable:name=>"projectionOffset"!==name};const baseDefaults={position:"chartArea",property:"value",grid:{z:1,drawOnChartArea:!1},ticks:{z:1},legend:{align:"right",position:"bottom-right",length:100,width:50,margin:8,indicatorWidth:10}};class LegendScale extends chart.kc{constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(options){options.position="chartArea",super.init(options),this.axis="r"}parse(raw,index){return raw&&"number"==typeof raw[this.options.property]?raw[this.options.property]:super.parse(raw,index)}isHorizontal(){return"top"===this.options.legend.align||"bottom"===this.options.legend.align}_getNormalizedValue(v){return null==v||Number.isNaN(v)?null:(v-this._startValue)/this._valueRange}update(maxWidth,maxHeight,margins){const ch=Math.min(maxHeight,null==this.bottom?Number.POSITIVE_INFINITY:this.bottom),cw=Math.min(maxWidth,null==this.right?Number.POSITIVE_INFINITY:this.right),l=this.options.legend,isHor=this.isHorizontal(),factor=(v,full)=>v<1?full*v:v,w=Math.min(cw,factor(isHor?l.length:l.width,cw))-(isHor?0:l.indicatorWidth),h=Math.min(ch,factor(isHor?l.width:l.length,ch))-(isHor?l.indicatorWidth:0);this.legendSize={w,h},this.bottom=h,this.height=h,this.right=w,this.width=w;const bak=this.options.position;this.options.position=this.options.legend.align;const r=super.update(w,h,margins);return this.options.position=bak,this.height=Math.min(h,this.height),this.width=Math.min(w,this.width),r}_computeLabelArea(){}draw(chartArea){if(!this._isVisible())return;const pos=function computeLegendPosition(chartArea,legend,width,height,legendSize){const{indicatorWidth,align:axisPos,position:pos}=legend,isHor="top"===axisPos||"bottom"===axisPos,w=("left"===axisPos?legendSize.w:width)+(isHor?indicatorWidth:0),h=("top"===axisPos?legendSize.h:height)+(isHor?0:indicatorWidth),margin=function computeLegendMargin(legend){const{indicatorWidth,align:pos,margin}=legend;return{left:("number"==typeof margin?margin:margin.left)+("right"===pos?indicatorWidth:0),top:("number"==typeof margin?margin:margin.top)+("bottom"===pos?indicatorWidth:0),right:("number"==typeof margin?margin:margin.right)+("left"===pos?indicatorWidth:0),bottom:("number"==typeof margin?margin:margin.bottom)+("top"===pos?indicatorWidth:0)}}(legend);if("string"==typeof pos)switch(pos){case"top-left":return[margin.left,margin.top];case"top":return[(chartArea.right-w)/2,margin.top];case"left":return[margin.left,(chartArea.bottom-h)/2];case"top-right":return[chartArea.right-w-margin.right,margin.top];case"bottom-right":return[chartArea.right-w-margin.right,chartArea.bottom-h-margin.bottom];case"bottom":return[(chartArea.right-w)/2,chartArea.bottom-h-margin.bottom];case"bottom-left":return[margin.left,chartArea.bottom-h-margin.bottom];default:return[chartArea.right-w-margin.right,(chartArea.bottom-h)/2]}return[pos.x,pos.y]}(chartArea,this.options.legend,this.width,this.height,this.legendSize),{ctx}=this;ctx.save(),ctx.translate(pos[0],pos[1]);const bak=this.options.position;this.options.position=this.options.legend.align,super.draw({...chartArea,bottom:this.height+10,right:this.width}),this.options.position=bak;const{indicatorWidth}=this.options.legend;switch(this.options.legend.align){case"left":ctx.translate(this.legendSize.w,0);break;case"top":ctx.translate(0,this.legendSize.h);break;case"bottom":ctx.translate(0,-indicatorWidth);break;default:ctx.translate(-indicatorWidth,0)}this._drawIndicator(),ctx.restore()}_drawIndicator(){}}class LogarithmicLegendScale extends chart.OJ{constructor(){super(...arguments),this.legendSize={w:0,h:0}}init(options){LegendScale.prototype.init.call(this,options)}parse(raw,index){return LegendScale.prototype.parse.call(this,raw,index)}isHorizontal(){return"top"===this.options.legend.align||"bottom"===this.options.legend.align}_getNormalizedValue(v){return null==v||Number.isNaN(v)?null:(Math.log10(v)-this._startValue)/this._valueRange}update(maxWidth,maxHeight,margins){return LegendScale.prototype.update.call(this,maxWidth,maxHeight,margins)}_computeLabelArea(){}draw(chartArea){return LegendScale.prototype.draw.call(this,chartArea)}_drawIndicator(){}}const lookup={interpolateBlues:Blues,interpolateBrBG:BrBG,interpolateBuGn:BuGn,interpolateBuPu:BuPu,interpolateCividis:function cividis(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},interpolateCool:cool,interpolateCubehelixDefault:sequential_multi_cubehelix,interpolateGnBu:GnBu,interpolateGreens:Greens,interpolateGreys:Greys,interpolateInferno:inferno,interpolateMagma:magma,interpolateOrRd:OrRd,interpolateOranges:Oranges,interpolatePRGn:PRGn,interpolatePiYG:PiYG,interpolatePlasma:plasma,interpolatePuBu:PuBu,interpolatePuBuGn:PuBuGn,interpolatePuOr:PuOr,interpolatePuRd:PuRd,interpolatePurples:Purples,interpolateRainbow:function rainbow(t){(t<0||t>1)&&(t-=Math.floor(t));var ts=Math.abs(t-.5);return c.h=360*t-100,c.s=1.5-1.5*ts,c.l=.8-.9*ts,c+""},interpolateRdBu:RdBu,interpolateRdGy:RdGy,interpolateRdPu:RdPu,interpolateRdYlBu:RdYlBu,interpolateRdYlGn:RdYlGn,interpolateReds:Reds,interpolateSinebow:function sinebow(t){var x;return t=(.5-t)*Math.PI,sinebow_c.r=255*(x=Math.sin(t))*x,sinebow_c.g=255*(x=Math.sin(t+pi_1_3))*x,sinebow_c.b=255*(x=Math.sin(t+pi_2_3))*x,sinebow_c+""},interpolateSpectral:Spectral,interpolateTurbo:function turbo(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"},interpolateViridis:viridis,interpolateWarm:warm,interpolateYlGn:YlGn,interpolateYlGnBu:YlGnBu,interpolateYlOrBr:YlOrBr,interpolateYlOrRd:YlOrRd};function quantize(v,steps){const perStep=1/steps;if(v<=perStep)return 0;if(v>=1-perStep)return 1;for(let acc=0;acc<1;acc+=perStep)if(v<acc)return acc-perStep/2;return v}Object.keys(lookup).forEach((key=>{lookup[`${key.charAt(11).toLowerCase()}${key.slice(12)}`]=lookup[key],lookup[key.slice(11)]=lookup[key]}));const colorScaleDefaults={interpolate:"blues",missing:"transparent",quantize:0};class ColorScale extends LegendScale{get interpolate(){const o=this.options;return o?"function"==typeof o.interpolate?o.interpolate:lookup[o.interpolate]||lookup.blues:v=>`rgb(${v},${v},${v})`}getColorForValue(value){const v=this._getNormalizedValue(value);return null==v||Number.isNaN(v)?this.options.missing:this.getColor(v)}getColor(normalized){let v=normalized;return this.options.quantize>0&&(v=quantize(v,this.options.quantize)),this.interpolate(v)}_drawIndicator(){const{indicatorWidth:indicatorSize}=this.options.legend,reverse=this._reversePixels;if(this.isHorizontal()){const w=this.width;if(this.options.quantize>0){const stepWidth=w/this.options.quantize,offset=reverse?i=>w-stepWidth-i:i=>i;for(let i=0;i<w;i+=stepWidth){const v=(i+stepWidth/2)/w;this.ctx.fillStyle=this.getColor(v),this.ctx.fillRect(offset(i),0,stepWidth,indicatorSize)}}else{const offset=reverse?i=>w-1-i:i=>i;for(let i=0;i<w;i+=1)this.ctx.fillStyle=this.getColor((i+.5)/w),this.ctx.fillRect(offset(i),0,1,indicatorSize)}}else{const h=this.height;if(this.options.quantize>0){const stepWidth=h/this.options.quantize,offset=reverse?i=>h-stepWidth-i:i=>i;for(let i=0;i<h;i+=stepWidth){const v=(i+stepWidth/2)/h;this.ctx.fillStyle=this.getColor(v),this.ctx.fillRect(0,offset(i),indicatorSize,stepWidth)}}else{const offset=reverse?i=>h-1-i:i=>i;for(let i=0;i<h;i+=1)this.ctx.fillStyle=this.getColor((i+.5)/h),this.ctx.fillRect(0,offset(i),indicatorSize,1)}}}}ColorScale.id="color",ColorScale.defaults=(0,helpers_segment.a4)({},[chart.kc.defaults,baseDefaults,colorScaleDefaults]),ColorScale.descriptors={_scriptable:name=>"interpolate"!==name,_indexable:!1};class ColorLogarithmicScale extends LogarithmicLegendScale{constructor(){super(...arguments),this.interpolate=v=>`rgb(${v},${v},${v})`}init(options){super.init(options),"function"==typeof options.interpolate?this.interpolate=options.interpolate:this.interpolate=lookup[options.interpolate]||lookup.blues}getColorForValue(value){return ColorScale.prototype.getColorForValue.call(this,value)}getColor(normalized){let v=normalized;return this.options.quantize>0&&(v=quantize(v,this.options.quantize)),this.interpolate(v)}_drawIndicator(){return ColorScale.prototype._drawIndicator.call(this)}}ColorLogarithmicScale.id="colorLogarithmic",ColorLogarithmicScale.defaults=(0,helpers_segment.a4)({},[chart.OJ.defaults,baseDefaults,colorScaleDefaults]),ColorLogarithmicScale.descriptors={_scriptable:name=>"interpolate"!==name,_indexable:!1};const scaleDefaults={missing:1,mode:"area",range:[2,20],legend:{align:"bottom",length:90,width:70,indicatorWidth:42}};class SizeScale extends LegendScale{constructor(){super(...arguments),this._model=null}getSizeForValue(value){const v=this._getNormalizedValue(value);return null==v||Number.isNaN(v)?this.options.missing:this.getSizeImpl(v)}getSizeImpl(normalized){const[r0,r1]=this.options.range;if("area"===this.options.mode){const a1=r1*r1*Math.PI,a0=r0*r0*Math.PI,a=normalized*(a1-a0)+a0;return Math.sqrt(a/Math.PI)}return normalized*(r1-r0)+r0}_drawIndicator(){const{ctx}=this,shift=this.options.legend.indicatorWidth/2,isHor=this.isHorizontal(),values=this.ticks,labelItems=this.getLabelItems(),positions=labelItems?labelItems.map((el=>({[isHor?"x":"y"]:el.options.translation[isHor?0:1]}))):values.map(((_,i)=>({[isHor?"x":"y"]:this.getPixelForTick(i)})));if((this._gridLineItems||[]).forEach((item=>{if(ctx.save(),ctx.strokeStyle=item.color,ctx.lineWidth=item.width,ctx.setLineDash&&(ctx.setLineDash(item.borderDash),ctx.lineDashOffset=item.borderDashOffset),ctx.beginPath(),this.options.grid.drawTicks)switch(this.options.legend.align){case"left":ctx.moveTo(0,item.ty1),ctx.lineTo(shift,item.ty2);break;case"top":ctx.moveTo(item.tx1,0),ctx.lineTo(item.tx2,shift);break;case"bottom":ctx.moveTo(item.tx1,shift),ctx.lineTo(item.tx2,2*shift);break;default:ctx.moveTo(shift,item.ty1),ctx.lineTo(2*shift,item.ty2)}ctx.stroke(),ctx.restore()})),this._model){const props=this._model;ctx.strokeStyle=props.borderColor,ctx.lineWidth=props.borderWidth||0,ctx.fillStyle=props.backgroundColor}else ctx.fillStyle="blue";values.forEach(((v,i)=>{const pos=positions[i],radius=this.getSizeForValue(v.value),x=isHor?pos.x:shift,y=isHor?shift:pos.y,renderOptions={pointStyle:"circle",borderWidth:0,...this._model||{},radius};(0,helpers_segment.at)(ctx,renderOptions,x,y)}))}}SizeScale.id="size",SizeScale.defaults=(0,helpers_segment.a4)({},[chart.kc.defaults,baseDefaults,scaleDefaults]),SizeScale.descriptors={_scriptable:!0,_indexable:name=>"range"!==name};class SizeLogarithmicScale extends LogarithmicLegendScale{constructor(){super(...arguments),this._model=null}getSizeForValue(value){const v=this._getNormalizedValue(value);return null==v||Number.isNaN(v)?this.options.missing:this.getSizeImpl(v)}getSizeImpl(normalized){return SizeScale.prototype.getSizeImpl.call(this,normalized)}_drawIndicator(){SizeScale.prototype._drawIndicator.call(this)}}SizeLogarithmicScale.id="sizeLogarithmic",SizeLogarithmicScale.defaults=(0,helpers_segment.a4)({},[chart.OJ.defaults,baseDefaults,scaleDefaults]);class GeoFeature extends chart.Hg{constructor(){super(...arguments),this.cache=void 0}inRange(mouseX,mouseY){const bb=this.getBounds(),r=(Number.isNaN(mouseX)||mouseX>=bb.x&&mouseX<=bb.x2)&&(Number.isNaN(mouseY)||mouseY>=bb.y&&mouseY<=bb.y2),projection=this.projectionScale.geoPath.projection();if(r&&!Number.isNaN(mouseX)&&!Number.isNaN(mouseY)&&"function"==typeof projection.invert){const longLat=projection.invert([mouseX,mouseY]);return null!=longLat&&function contains(object,point){return(object&&containsObjectType.hasOwnProperty(object.type)?containsObjectType[object.type]:containsGeometry)(object,point)}(this.feature,longLat)}return r}inXRange(mouseX){return this.inRange(mouseX,Number.NaN)}inYRange(mouseY){return this.inRange(Number.NaN,mouseY)}getCenterPoint(){if(this.cache&&this.cache.center)return this.cache.center;let center;if(this.center){const p=this.projectionScale.projection([this.center.longitude,this.center.latitude]);center={x:p[0],y:p[1]}}else{const centroid=this.projectionScale.geoPath.centroid(this.feature);center={x:centroid[0],y:centroid[1]}}return this.cache={...this.cache||{},center},center}getBounds(){if(this.cache&&this.cache.bounds)return this.cache.bounds;const bb=function growGeoBounds(bounds,amount){return[[bounds[0][0]-amount,bounds[0][1]-amount],[bounds[1][0]+amount,bounds[1][1]+amount]]}(this.projectionScale.geoPath.bounds(this.feature),this.options.borderWidth/2),bounds={x:bb[0][0],x2:bb[1][0],y:bb[0][1],y2:bb[1][1],width:bb[1][0]-bb[0][0],height:bb[1][1]-bb[0][1]};return this.cache={...this.cache||{},bounds},bounds}_drawInCache(doc){const bounds=this.getBounds();if(!Number.isFinite(bounds.x))return;const canvas=this.cache&&this.cache.canvas?this.cache.canvas:doc.createElement("canvas"),x1=Math.floor(bounds.x),y1=Math.floor(bounds.y),x2=Math.ceil(bounds.x+bounds.width),y2=Math.ceil(bounds.y+bounds.height),pixelRatio=this.pixelRatio||1,width=Math.ceil(Math.max(x2-x1,1)*pixelRatio),height=Math.ceil(Math.max(y2-y1,1)*pixelRatio);if(width<=0||height<=0)return;canvas.width=width,canvas.height=height;const ctx=canvas.getContext("2d");ctx&&(ctx.clearRect(0,0,canvas.width,canvas.height),ctx.save(),ctx.scale(pixelRatio,pixelRatio),ctx.translate(-x1,-y1),this._drawImpl(ctx),ctx.restore(),this.cache={...this.cache||{},canvas,canvasKey:this._optionsToKey()})}_optionsToKey(){const{options}=this;return`${options.backgroundColor};${options.borderColor};${options.borderWidth};${this.pixelRatio}`}_drawImpl(ctx){const{feature}=this,{options}=this;ctx.beginPath(),this.projectionScale.geoPath.context(ctx)(feature),options.backgroundColor&&(ctx.fillStyle=options.backgroundColor,ctx.fill()),options.borderColor&&(ctx.strokeStyle=options.borderColor,ctx.lineWidth=options.borderWidth,ctx.stroke())}draw(ctx){const{feature}=this;if(!feature)return;this.cache&&this.cache.canvasKey===this._optionsToKey()||this._drawInCache(ctx.canvas.ownerDocument);const bounds=this.getBounds();if(this.cache&&this.cache.canvas&&this.cache.canvas.width>0&&this.cache.canvas.height>0){const x1=Math.floor(bounds.x),y1=Math.floor(bounds.y),x2=Math.ceil(bounds.x+bounds.width),y2=Math.ceil(bounds.y+bounds.height);x2-x1>0&&y2-y1>0&&ctx.drawImage(this.cache.canvas,x1,y1,x2-x1,y2-y1)}else Number.isFinite(bounds.x)&&(ctx.save(),this._drawImpl(ctx),ctx.restore())}}GeoFeature.id="geoFeature",GeoFeature.defaults={...chart.E8.defaults,outlineBackgroundColor:null,outlineBorderWidth:0,graticuleBorderColor:"#CCCCCC",graticuleBorderWidth:0},GeoFeature.defaultRoutes={outlineBorderColor:"borderColor",...chart.E8.defaultRoutes||{}};const geoDefaults={showOutline:!1,showGraticule:!1,clipMap:!0},geoOverrides={scales:{projection:{axis:"x",type:ProjectionScale.id,position:"chartArea",display:!1}}};function patchDatasetElementOptions(options){const r={...options};return Object.keys(options).forEach((key=>{let targetKey=key;if(key.startsWith("outline")){const sub=key.slice(7);targetKey=sub[0].toLowerCase()+sub.slice(1)}else{if(!key.startsWith("hoverOutline"))return;targetKey=`hover${key.slice(12)}`}delete r[key],r[targetKey]=options[key]})),r}class GeoController extends chart.n{getGeoDataset(){return super.getDataset()}getGeoOptions(){return this.chart.options}getProjectionScale(){return this.getScaleForId("projection")}linkScales(){const dataset=this.getGeoDataset(),meta=this.getMeta();meta.xAxisID="projection",dataset.xAxisID="projection",meta.yAxisID="projection",dataset.yAxisID="projection",meta.xScale=this.getScaleForId("projection"),meta.yScale=this.getScaleForId("projection"),this.getProjectionScale().computeBounds(this.resolveOutline())}showOutline(){return(0,helpers_segment.v)(this.getGeoDataset().showOutline,this.getGeoOptions().showOutline)}clipMap(){return(0,helpers_segment.v)(this.getGeoDataset().clipMap,this.getGeoOptions().clipMap)}getGraticule(){return(0,helpers_segment.v)(this.getGeoDataset().showGraticule,this.getGeoOptions().showGraticule)}update(mode){super.update(mode);const meta=this.getMeta(),scale=this.getProjectionScale(),dirtyCache=scale.updateBounds();if(this.showOutline()){const elem=meta.dataset;if(dirtyCache&&delete elem.cache,elem.projectionScale=scale,elem.pixelRatio=this.chart.currentDevicePixelRatio,"resize"!==mode){const options=patchDatasetElementOptions(this.resolveDatasetElementOptions(mode)),properties={feature:this.resolveOutline(),options};this.updateElement(elem,void 0,properties,mode),this.getGraticule()&&(meta.graticule=options)}}else this.getGraticule()&&"resize"!==mode&&(meta.graticule=patchDatasetElementOptions(this.resolveDatasetElementOptions(mode)));this.updateElements(meta.data,0,meta.data.length,mode),dirtyCache&&meta.data.forEach((elem=>delete elem.cache))}resolveOutline(){const outline=this.getGeoDataset().outline||{type:"Sphere"};return Array.isArray(outline)?{type:"FeatureCollection",features:outline}:outline}showGraticule(){const g=this.getGraticule(),options=this.getMeta().graticule;if(!g||!options)return;const{ctx}=this.chart,path=this.getProjectionScale().geoPath.context(ctx);if(ctx.save(),ctx.beginPath(),"boolean"==typeof g)g&&path(function graticule10(){return graticule()()}());else{const geo=graticule();g.stepMajor&&geo.stepMajor(g.stepMajor),g.stepMinor&&geo.stepMinor(g.stepMinor),path(geo())}ctx.strokeStyle=options.graticuleBorderColor,ctx.lineWidth=options.graticuleBorderWidth,ctx.stroke(),ctx.restore()}draw(){const{chart}=this,clipMap=this.clipMap();let enabled=!1;!0!==clipMap&&"outline"!==clipMap&&"outline+graticule"!==clipMap||(enabled=!0,(0,helpers_segment.Y)(chart.ctx,chart.chartArea)),this.showOutline()&&this.getMeta().dataset&&this.getMeta().dataset.draw.call(this.getMeta().dataset,chart.ctx,chart.chartArea),!0===clipMap||"graticule"===clipMap||"outline+graticule"===clipMap?enabled||(0,helpers_segment.Y)(chart.ctx,chart.chartArea):enabled&&(enabled=!1,(0,helpers_segment.$)(chart.ctx)),this.showGraticule(),!0===clipMap||"items"===clipMap?enabled||(0,helpers_segment.Y)(chart.ctx,chart.chartArea):enabled&&(enabled=!1,(0,helpers_segment.$)(chart.ctx)),this.getMeta().data.forEach((elem=>elem.draw.call(elem,chart.ctx,chart.chartArea))),enabled&&(enabled=!1,(0,helpers_segment.$)(chart.ctx))}}function patchController(type,config,controller,elements=[],scales=[]){chart.u5.addControllers(controller),Array.isArray(elements)?chart.u5.addElements(...elements):chart.u5.addElements(elements),Array.isArray(scales)?chart.u5.addScales(...scales):chart.u5.addScales(scales);const c=config;return c.type=type,c}class ChoroplethController extends GeoController{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const dataset=this.getGeoDataset(),meta=this.getMeta();meta.vAxisID="color",meta.rAxisID="color",dataset.vAxisID="color",dataset.rAxisID="color",meta.rScale=this.getScaleForId("color"),meta.vScale=meta.rScale,meta.iScale=meta.xScale,meta.iAxisID=meta.xAxisID,dataset.iAxisID=meta.xAxisID}_getOtherScale(scale){return scale}parse(start,count){const rScale=this.getMeta().rScale,{data}=this.getDataset(),meta=this._cachedMeta;for(let i=start;i<start+count;i+=1)meta._parsed[i]={[rScale.axis]:rScale.parse(data[i],i)}}updateElements(elems,start,count,mode){const firstOpts=this.resolveDataElementOptions(start,mode),sharedOptions=this.getSharedOptions(firstOpts),includeOptions=this.includeOptions(mode,sharedOptions),scale=this.getProjectionScale();this.updateSharedOptions(sharedOptions,mode,firstOpts);for(let i=start;i<start+count;i+=1){const elem=elems[i];elem.projectionScale=scale,elem.feature=this._data[i].feature,elem.center=this._data[i].center,elem.pixelRatio=this.chart.currentDevicePixelRatio;const center=elem.getCenterPoint(),properties={x:center.x,y:center.y};includeOptions&&(properties.options=sharedOptions||this.resolveDataElementOptions(i,mode)),this.updateElement(elem,i,properties,mode)}}indexToColor(index){const rScale=this.getMeta().rScale;return rScale.getColorForValue(this.getParsed(index)[rScale.axis])}}ChoroplethController.id="choropleth",ChoroplethController.defaults=(0,helpers_segment.a4)({},[geoDefaults,{datasetElementType:GeoFeature.id,dataElementType:GeoFeature.id}]),ChoroplethController.overrides=(0,helpers_segment.a4)({},[geoOverrides,{plugins:{tooltip:{callbacks:{title:()=>"",label(item){var _a,_b,_c,_d;return null==item.formattedValue?null===(_b=null===(_a=item.chart.data)||void 0===_a?void 0:_a.labels)||void 0===_b?void 0:_b[item.dataIndex]:`${null===(_d=null===(_c=item.chart.data)||void 0===_c?void 0:_c.labels)||void 0===_d?void 0:_d[item.dataIndex]}: ${item.formattedValue}`}}},colors:{enabled:!1}},scales:{color:{type:ColorScale.id,axis:"x"}},elements:{geoFeature:{backgroundColor(context){if(null==context.dataIndex)return null;return context.chart.getDatasetMeta(context.datasetIndex).controller.indexToColor(context.dataIndex)}}}}]);class ChoroplethChart extends chart.t1{constructor(item,config){super(item,patchController("choropleth",config,ChoroplethController,GeoFeature,[ColorScale,ProjectionScale]))}}ChoroplethChart.id=ChoroplethController.id;class BubbleMapController extends GeoController{initialize(){super.initialize(),this.enableOptionSharing=!0}linkScales(){super.linkScales();const dataset=this.getGeoDataset(),meta=this.getMeta();meta.vAxisID="size",meta.rAxisID="size",dataset.vAxisID="size",dataset.rAxisID="size",meta.rScale=this.getScaleForId("size"),meta.vScale=meta.rScale,meta.iScale=meta.xScale,meta.iAxisID=meta.xAxisID,dataset.iAxisID=meta.xAxisID}_getOtherScale(scale){return scale}parse(start,count){const rScale=this.getMeta().rScale,data=this.getDataset().data,meta=this._cachedMeta;for(let i=start;i<start+count;i+=1){const d=data[i];meta._parsed[i]={x:null==d.longitude?d.x:d.longitude,y:null==d.latitude?d.y:d.latitude,[rScale.axis]:rScale.parse(d,i)}}}updateElements(elems,start,count,mode){const reset="reset"===mode,firstOpts=this.resolveDataElementOptions(start,mode),sharedOptions=this.getSharedOptions(firstOpts),includeOptions=this.includeOptions(mode,sharedOptions),scale=this.getProjectionScale();this.getMeta().rScale._model=firstOpts,this.updateSharedOptions(sharedOptions,mode,firstOpts);for(let i=start;i<start+count;i+=1){const elem=elems[i],parsed=this.getParsed(i),projection=scale.projection([parsed.x,parsed.y]),properties={x:projection?projection[0]:0,y:projection?projection[1]:0,skip:Number.isNaN(parsed.x)||Number.isNaN(parsed.y)};includeOptions&&(properties.options=sharedOptions||this.resolveDataElementOptions(i,mode),reset&&(properties.options.radius=0)),this.updateElement(elem,i,properties,mode)}}indexToRadius(index){const rScale=this.getMeta().rScale;return rScale.getSizeForValue(this.getParsed(index)[rScale.axis])}}BubbleMapController.id="bubbleMap",BubbleMapController.defaults=(0,helpers_segment.a4)({},[geoDefaults,{dataElementType:chart.FN.id,datasetElementType:GeoFeature.id,showOutline:!0,clipMap:"outline+graticule"}]),BubbleMapController.overrides=(0,helpers_segment.a4)({},[geoOverrides,{plugins:{tooltip:{callbacks:{title:()=>"",label(item){var _a,_b,_c,_d;return null==item.formattedValue?null===(_b=null===(_a=item.chart.data)||void 0===_a?void 0:_a.labels)||void 0===_b?void 0:_b[item.dataIndex]:`${null===(_d=null===(_c=item.chart.data)||void 0===_c?void 0:_c.labels)||void 0===_d?void 0:_d[item.dataIndex]}: ${item.formattedValue}`}}}},scales:{size:{axis:"x",type:SizeScale.id}},elements:{point:{radius(context){if(null==context.dataIndex)return null;return context.chart.getDatasetMeta(context.datasetIndex).controller.indexToRadius(context.dataIndex)},hoverRadius(context){if(null==context.dataIndex)return null;return context.chart.getDatasetMeta(context.datasetIndex).controller.indexToRadius(context.dataIndex)+1}}}}]);class BubbleMapChart extends chart.t1{constructor(item,config){super(item,patchController("bubbleMap",config,BubbleMapController,GeoFeature,[SizeScale,ProjectionScale]))}}BubbleMapChart.id=BubbleMapController.id},"./node_modules/chartjs-chart-treemap/dist/chartjs-chart-treemap.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>TreemapController,T:()=>TreemapElement});var chart_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/chart.js/dist/chart.js"),chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/chart.js/dist/chunks/helpers.segment.js");const isOlderPart=(act,req)=>req>act||act.length>req.length&&act.slice(0,req.length)===req,getGroupKey=lvl=>""+lvl;function scanTreeObject(keys,treeLeafKey,obj,tree=[],lvl=0,result=[]){const objIndex=lvl-1;if(keys[0]in obj&&lvl>0){const record=tree.reduce((function(reduced,item,i){return i!==objIndex&&(reduced[getGroupKey(i)]=item),reduced}),{});record[treeLeafKey]=tree[objIndex],keys.forEach((function(k){record[k]=obj[k]})),result.push(record)}else for(const childKey of Object.keys(obj)){const child=obj[childKey];(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.i)(child)&&(tree.push(childKey),scanTreeObject(keys,treeLeafKey,child,tree,lvl+1,result))}return tree.splice(objIndex,1),result}function normalizeTreeToArray(keys,treeLeafKey,obj){const data=scanTreeObject(keys,treeLeafKey,obj);if(!data.length)return data;const max=data.reduce((function(maxVal,element){const ikeys=Object.keys(element).length-2;return maxVal>ikeys?maxVal:ikeys}));return data.forEach((function(element){for(let i=0;i<max;i++){const groupKey=getGroupKey(i);element[groupKey]||(element[groupKey]="")}})),data}function getPath(groups,value,defaultValue){if(!groups.length)return;const path=[];for(const grp of groups){const item=value[grp];if(""===item){path.push(defaultValue);break}path.push(item)}return path.length?path.join("."):defaultValue}const widthCache=new Map;function getBounds(rect,useFinalPosition){const{x,y,width,height}=rect.getProps(["x","y","width","height"],useFinalPosition);return{left:x,top:y,right:x+width,bottom:y+height}}function limit(value,min,max){return Math.max(Math.min(value,max),min)}function parseBorderWidth(value,maxW,maxH){const o=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.av)(value);return{t:limit(o.top,0,maxH),r:limit(o.right,0,maxW),b:limit(o.bottom,0,maxH),l:limit(o.left,0,maxW)}}function boundingRects(rect){const bounds=getBounds(rect),width=bounds.right-bounds.left,height=bounds.bottom-bounds.top,border=parseBorderWidth(rect.options.borderWidth,width/2,height/2),radius=function parseBorderRadius(value,maxW,maxH){const o=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.aw)(value),maxR=Math.min(maxW,maxH);return{topLeft:limit(o.topLeft,0,maxR),topRight:limit(o.topRight,0,maxR),bottomLeft:limit(o.bottomLeft,0,maxR),bottomRight:limit(o.bottomRight,0,maxR)}}(rect.options.borderRadius,width/2,height/2),outer={x:bounds.left,y:bounds.top,w:width,h:height,active:rect.active,radius};return{outer,inner:{x:outer.x+border.l,y:outer.y+border.t,w:outer.w-border.l-border.r,h:outer.h-border.t-border.b,active:rect.active,radius:{topLeft:Math.max(0,radius.topLeft-Math.max(border.t,border.l)),topRight:Math.max(0,radius.topRight-Math.max(border.t,border.r)),bottomLeft:Math.max(0,radius.bottomLeft-Math.max(border.b,border.l)),bottomRight:Math.max(0,radius.bottomRight-Math.max(border.b,border.r))}}}}function inRange(rect,x,y,useFinalPosition){const skipX=null===x,skipY=null===y,bounds=!(!rect||skipX&&skipY)&&getBounds(rect,useFinalPosition);return bounds&&(skipX||x>=bounds.left&&x<=bounds.right)&&(skipY||y>=bounds.top&&y<=bounds.bottom)}function addNormalRectPath(ctx,rect){ctx.rect(rect.x,rect.y,rect.w,rect.h)}function shouldDrawCaption(rect,options){if(!options||!1===options.display)return!1;const{w,h}=rect,min=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a0)(options.font).lineHeight,padding=limit(2*(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.v)(options.padding,3),0,Math.min(w,h));return w-padding>min&&h-padding>min}function drawText(ctx,rect,options,item,levels){const{captions,labels}=options;ctx.save(),ctx.beginPath(),ctx.rect(rect.x,rect.y,rect.w,rect.h),ctx.clip();const isLeaf=item&&(!(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.h)(item.l)||item.l===levels);isLeaf&&labels.display?function drawLabel(ctx,rect,options){const labels=options.labels,content=labels.formatter;if(!content)return;const contents=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b)(content)?content:[content];let fonts=function getFontFromOptions(rect,labels){const{font,hoverFont}=labels,optFont=(rect.active?hoverFont:font)||font;return(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b)(optFont)?optFont.map((f=>(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a0)(f))):[(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a0)(optFont)]}(rect,labels),labelSize=function measureLabelSize(ctx,lines,fonts){const fontsKey=fonts.reduce((function(prev,item){return prev+=item.string}),""),mapKey=lines.join()+fontsKey+(ctx._measureText?"-spriting":"");if(!widthCache.has(mapKey)){ctx.save();const count=lines.length;let width=0,height=0;for(let i=0;i<count;i++){const font=fonts[Math.min(i,fonts.length-1)];ctx.font=font.string;const text=lines[i];width=Math.max(width,ctx.measureText(text).width),height+=font.lineHeight}ctx.restore(),widthCache.set(mapKey,{width,height})}return widthCache.get(mapKey)}(ctx,contents,fonts);const lblToDraw=function labelToDraw(ctx,rect,options,labelSize){const{overflow,padding}=options,{width,height}=labelSize;if("hidden"===overflow)return!(width+2*padding>rect.w||height+2*padding>rect.h);if("fit"===overflow){const ratio=Math.min(rect.w/(width+2*padding),rect.h/(height+2*padding));if(ratio<1)return ratio}return!0}(0,rect,labels,labelSize);if(!lblToDraw)return;(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.x)(lblToDraw)&&(labelSize={width:labelSize.width*lblToDraw,height:labelSize.height*lblToDraw},fonts=function toFonts(fonts,fitRatio){return fonts.map((function(f){return f.size=Math.floor(f.size*fitRatio),f.lineHeight=void 0,(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a0)(f)}))}(fonts,lblToDraw));const{color,hoverColor,align}=labels,optColor=(rect.active?hoverColor:color)||color,colors=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b)(optColor)?optColor:[optColor],xyPoint=function calculateXYLabel(rect,options,labelSize){const{align,position,padding}=options;let x,y;x=calculateX(rect,align,padding),y="top"===position?rect.y+padding:"bottom"===position?rect.y+rect.h-padding-labelSize.height:rect.y+(rect.h-labelSize.height)/2+padding;return{x,y}}(rect,labels,labelSize);ctx.textAlign=align,ctx.textBaseline="middle";let lhs=0;contents.forEach((function(l,i){const c=colors[Math.min(i,colors.length-1)],f=fonts[Math.min(i,fonts.length-1)],lh=f.lineHeight;ctx.font=f.string,ctx.fillStyle=c,ctx.fillText(l,xyPoint.x,xyPoint.y+lh/2+lhs),lhs+=lh}))}(ctx,rect,options):!isLeaf&&shouldDrawCaption(rect,captions)&&function drawCaption(ctx,rect,options,item){const{captions,spacing,rtl}=options,{color,hoverColor,font,hoverFont,padding,align,formatter}=captions,oColor=(rect.active?hoverColor:color)||color,oAlign=align||(rtl?"right":"left"),optFont=(rect.active?hoverFont:font)||font,oFont=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a0)(optFont),lh=oFont.lineHeight/2,x=calculateX(rect,oAlign,padding);ctx.fillStyle=oColor,ctx.font=oFont.string,ctx.textAlign=oAlign,ctx.textBaseline="middle",ctx.fillText(formatter||item.g,x,rect.y+padding+spacing+lh)}(ctx,rect,options,item),ctx.restore()}function calculateX(rect,align,padding){return"left"===align?rect.x+padding:"right"===align?rect.x+rect.w-padding:rect.x+rect.w/2}class TreemapElement extends chart_js__WEBPACK_IMPORTED_MODULE_1__.Hg{constructor(cfg){super(),this.options=void 0,this.width=void 0,this.height=void 0,cfg&&Object.assign(this,cfg)}draw(ctx,data,levels=0){if(!data)return;const options=this.options,{inner,outer}=boundingRects(this),addRectPath=function hasRadius(radius){return radius.topLeft||radius.topRight||radius.bottomLeft||radius.bottomRight}(outer.radius)?chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.au:addNormalRectPath;ctx.save(),outer.w===inner.w&&outer.h===inner.h||(ctx.beginPath(),addRectPath(ctx,outer),ctx.clip(),addRectPath(ctx,inner),ctx.fillStyle=options.borderColor,ctx.fill("evenodd")),ctx.beginPath(),addRectPath(ctx,inner),ctx.fillStyle=options.backgroundColor,ctx.fill(),function drawDivider(ctx,rect,options,item){const dividers=options.dividers;if(!dividers.display||!item._data.children.length)return;const{x,y,w,h}=rect,{lineColor,lineCapStyle,lineDash,lineDashOffset,lineWidth}=dividers;if(ctx.save(),ctx.strokeStyle=lineColor,ctx.lineCap=lineCapStyle,ctx.setLineDash(lineDash),ctx.lineDashOffset=lineDashOffset,ctx.lineWidth=lineWidth,ctx.beginPath(),w>h){const w2=w/2;ctx.moveTo(x+w2,y),ctx.lineTo(x+w2,y+h)}else{const h2=h/2;ctx.moveTo(x,y+h2),ctx.lineTo(x+w,y+h2)}ctx.stroke(),ctx.restore()}(ctx,inner,options,data),drawText(ctx,inner,options,data,levels),ctx.restore()}inRange(mouseX,mouseY,useFinalPosition){return inRange(this,mouseX,mouseY,useFinalPosition)}inXRange(mouseX,useFinalPosition){return inRange(this,mouseX,null,useFinalPosition)}inYRange(mouseY,useFinalPosition){return inRange(this,null,mouseY,useFinalPosition)}getCenterPoint(useFinalPosition){const{x,y,width,height}=this.getProps(["x","y","width","height"],useFinalPosition);return{x:x+width/2,y:y+height/2}}tooltipPosition(){return this.getCenterPoint()}getRange(axis){return"x"===axis?this.width/2:this.height/2}}function getDims(itm,w2,s2,key){const a=itm._normalized,ar=w2*a/s2,d1=Math.sqrt(a*ar),d2=a/d1;return{d1,d2,w:"_ix"===key?d1:d2,h:"_ix"===key?d2:d1}}TreemapElement.id="treemap",TreemapElement.defaults={label:void 0,borderRadius:0,borderWidth:0,captions:{align:void 0,color:"black",display:!0,font:{},formatter:ctx=>ctx.raw.g||ctx.raw._data.label||"",padding:3},dividers:{display:!1,lineCapStyle:"butt",lineColor:"black",lineDash:[],lineDashOffset:0,lineWidth:1},labels:{align:"center",color:"black",display:!1,font:{},formatter:ctx=>ctx.raw.g?[ctx.raw.g,ctx.raw.v+""]:ctx.raw._data.label?[ctx.raw._data.label,ctx.raw.v+""]:ctx.raw.v+"",overflow:"cut",position:"middle",padding:3},rtl:!1,spacing:.5},TreemapElement.descriptors={labels:{_fallback:!0},captions:{_fallback:!0},_scriptable:!0,_indexable:!1},TreemapElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};const getX=(rect,w)=>rect.rtl?rect.x+rect.iw-w:rect.x+rect._ix;function buildRow(rect,itm,dims,sum){const r={x:getX(rect,dims.w),y:rect.y+rect._iy,w:dims.w,h:dims.h,a:itm._normalized,v:itm.value,vs:itm.values,s:sum,_data:itm._data};return itm.group&&(r.g=itm.group,r.l=itm.level,r.gs=itm.groupSum),r}class Rect{constructor(r){r=r||{w:1,h:1},this.rtl=!!r.rtl,this.x=r.x||r.left||0,this.y=r.y||r.top||0,this._ix=0,this._iy=0,this.w=r.w||r.width||r.right-r.left,this.h=r.h||r.height||r.bottom-r.top}get area(){return this.w*this.h}get iw(){return this.w-this._ix}get ih(){return this.h-this._iy}get dir(){const ih=this.ih;return ih<=this.iw&&ih>0?"y":"x"}get side(){return"x"===this.dir?this.iw:this.ih}map(arr){const{dir,side}=this,key="x"===dir?"_ix":"_iy",sum=arr.nsum,row=arr.get(),w2=side*side,s2=sum*sum,ret=[];let maxd2=0,totd1=0;for(const itm of row){const dims=getDims(itm,w2,s2,key);totd1+=dims.d1,maxd2=Math.max(maxd2,dims.d2),ret.push(buildRow(this,itm,dims,arr.sum)),this[key]+=dims.d1}return this["x"===dir?"_iy":"_ix"]+=maxd2,this[key]-=totd1,ret}}const min=Math.min,max=Math.max;function getNewStat(sa,o){const v=+o[sa.key],n=v*sa.ratio;return o._normalized=n,{min:min(sa.min,v),max:max(sa.max,v),sum:sa.sum+v,nmin:min(sa.nmin,n),nmax:max(sa.nmax,n),nsum:sa.nsum+n}}function push(sa,o,stat){sa._arr.push(o),function setStat(sa,stat){Object.assign(sa,stat)}(sa,stat)}class StatArray{constructor(key,ratio){this.key=key,this.ratio=ratio,this.reset()}get length(){return this._arr.length}reset(){const me=this;me._arr=[],me._hist=[],me.sum=0,me.nsum=0,me.min=1/0,me.max=-1/0,me.nmin=1/0,me.nmax=-1/0}push(o){push(this,o,getNewStat(this,o))}pushIf(o,fn,...args){const nstat=getNewStat(this,o);if(!fn(function getStat(sa){return{min:sa.min,max:sa.max,sum:sa.sum,nmin:sa.nmin,nmax:sa.nmax,nsum:sa.nsum}}(this),nstat,args))return o;push(this,o,nstat)}get(){return this._arr}}function compareAspectRatio(oldStat,newStat,args){if(0===oldStat.sum)return!0;const[length]=args,os2=oldStat.nsum*oldStat.nsum,ns2=newStat.nsum*newStat.nsum,l2=length*length,or=Math.max(l2*oldStat.nmax/os2,os2/(l2*oldStat.nmin));return Math.max(l2*newStat.nmax/ns2,ns2/(l2*newStat.nmin))<=or}function squarify(values,rectangle,keys=[],grp,lvl,gsum){values=values||[];const rows=[],rect=new Rect(rectangle),row=new StatArray("value",rect.area/function sum(values,key){let s,i,n;for(s=0,i=0,n=values.length;i<n;++i)s+=key?+values[i][key]:+values[i];return s}(values,keys[0]));let length=rect.side;const n=values.length;let i,o;if(!n)return rows;const tmp=values.slice();let key=function index(values,key){let i,n=values.length;if(!n)return key;const obj=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.i)(values[0]);for(key=obj?key:"v",i=0,n=values.length;i<n;++i)obj?values[i]._idx=i:values[i]={v:values[i],_idx:i};return key}(tmp,keys[0]);!function sort(values,key){key?values.sort(((a,b)=>+b[key]-+a[key])):values.sort(((a,b)=>+b-+a))}(tmp,key);const gval=idx=>grp&&tmp[idx][grp];for(i=0;i<n;++i){if(o={value:(idx=i,key?+tmp[idx][key]:+tmp[idx]),groupSum:gsum,_data:values[tmp[i]._idx],level:void 0,group:void 0},grp){o.level=lvl,o.group=gval(i);const tmpRef=tmp[i];o.values=keys.reduce((function(obj,k){return obj[k]=+tmpRef[k],obj}),{})}o=row.pushIf(o,compareAspectRatio,length),o&&(rows.push(rect.map(row)),length=rect.side,row.reset(),row.push(o))}var idx;return row.length&&rows.push(rect.map(row)),function flatten(input){const stack=[...input],res=[];for(;stack.length;){const next=stack.pop();Array.isArray(next)?stack.push(...next):res.push(next)}return res.reverse()}(rows)}function scaleRect(sq,xScale,yScale,sp){const sp2=2*sp,x=xScale.getPixelForValue(sq.x),y=yScale.getPixelForValue(sq.y),w=xScale.getPixelForValue(sq.x+sq.w)-x,h=yScale.getPixelForValue(sq.y+sq.h)-y;return{x:x+sp,y:y+sp,width:w-sp2,height:h-sp2,hidden:sp2>w||sp2>h}}function arrayNotEqual(a,b){let i,n;if(!a||!b)return!0;if(a===b)return!1;if(a.length!==b.length)return!0;for(i=0,n=a.length;i<n;++i)if(a[i]!==b[i])return!0;return!1}function buildData(tree,dataset,keys,mainRect){const treeLeafKey=dataset.treeLeafKey||"_leaf";(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.i)(tree)&&(tree=normalizeTreeToArray(keys,treeLeafKey,tree));const groups=dataset.groups||[],glen=groups.length,sp=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.v)(dataset.spacing,0),captions=dataset.captions||{},font=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a0)(captions.font),padding=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.v)(captions.padding,3);return glen?function recur(gidx,rect,parent,gs){const g=getGroupKey(groups[gidx]),pg=gidx>0&&getGroupKey(groups[gidx-1]),gdata=function group(values,grp,keys,treeLeafKey,mainGrp,mainValue,groups=[]){const key=keys[0],addKeys=keys.slice(1),tmp=Object.create(null),data=Object.create(null),ret=[];let g,i,n;for(i=0,n=values.length;i<n;++i){const v=values[i];if(mainGrp&&v[mainGrp]!==mainValue)continue;if(g=v[grp]||v[treeLeafKey]||"",!(g in tmp)){const tmpRef=tmp[g]={value:0};addKeys.forEach((function(k){tmpRef[k]=0})),data[g]=[]}tmp[g].value+=+v[key],tmp[g].label=v[grp]||"";const tmpRef=tmp[g];addKeys.forEach((function(k){tmpRef[k]+=v[k]})),tmp[g].path=getPath(groups,v,g),data[g].push(v)}return Object.keys(tmp).forEach((k=>{const v={children:data[k]};v[key]=+tmp[k].value,addKeys.forEach((function(ak){v[ak]=+tmp[k][ak]})),v[grp]=tmp[k].label,v.label=k,v.path=tmp[k].path,mainGrp&&(v[mainGrp]=mainValue),ret.push(v)})),ret}(tree,g,keys,treeLeafKey,pg,parent,groups.filter(((item,index)=>index<=gidx))),gsq=squarify(gdata,rect,keys,g,gidx,gs),ret=gsq.slice();return gidx<glen-1&&gsq.forEach((sq=>{const bw=parseBorderWidth(dataset.borderWidth,sq.w/2,sq.h/2),subRect={...rect,x:sq.x+sp+bw.l,y:sq.y+sp+bw.t,w:sq.w-2*sp-bw.l-bw.r,h:sq.h-2*sp-bw.t-bw.b};shouldDrawCaption(subRect,captions)&&(subRect.y+=font.lineHeight+2*padding,subRect.h-=font.lineHeight+2*padding),ret.push(...recur(gidx+1,subRect,sq.g,sq.s))})),ret}(0,mainRect):squarify(tree,mainRect,keys)}class TreemapController extends chart_js__WEBPACK_IMPORTED_MODULE_1__.n{constructor(chart,datasetIndex){super(chart,datasetIndex),this._groups=void 0,this._keys=void 0,this._rect=void 0,this._rectChanged=!0}initialize(){this.enableOptionSharing=!0,super.initialize()}getMinMax(scale){return{min:0,max:"x"===scale.axis?scale.right-scale.left:scale.bottom-scale.top}}configure(){super.configure();const{xScale,yScale}=this.getMeta();if(!xScale||!yScale)return;const w=xScale.right-xScale.left,h=yScale.bottom-yScale.top,rect={x:0,y:0,w,h,rtl:!!this.options.rtl};(function rectNotEqual(r1,r2){return!r1||!r2||r1.x!==r2.x||r1.y!==r2.y||r1.w!==r2.w||r1.h!==r2.h||r1.rtl!==r2.rtl})(this._rect,rect)&&(this._rect=rect,this._rectChanged=!0),this._rectChanged&&(xScale.max=w,xScale.configure(),yScale.max=h,yScale.configure())}update(mode){const dataset=this.getDataset(),{data}=this.getMeta(),groups=dataset.groups||[],keys=[dataset.key||""].concat(dataset.sumKeys||[]),tree=dataset.tree=dataset.tree||dataset.data||[];"reset"===mode&&this.configure(),(this._rectChanged||arrayNotEqual(this._keys,keys)||arrayNotEqual(this._groups,groups)||this._prevTree!==tree)&&(this._groups=groups.slice(),this._keys=keys.slice(),this._prevTree=tree,this._rectChanged=!1,dataset.data=buildData(tree,dataset,this._keys,this._rect),this._dataCheck(),this._resyncElements()),this.updateElements(data,0,data.length,mode)}updateElements(rects,start,count,mode){const reset="reset"===mode,dataset=this.getDataset(),firstOpts=this._rect.options=this.resolveDataElementOptions(start,mode),sharedOptions=this.getSharedOptions(firstOpts),includeOptions=this.includeOptions(mode,sharedOptions),{xScale,yScale}=this.getMeta(this.index);for(let i=start;i<start+count;i++){const options=sharedOptions||this.resolveDataElementOptions(i,mode),properties=scaleRect(dataset.data[i],xScale,yScale,options.spacing);reset&&(properties.width=0,properties.height=0),includeOptions&&(properties.options=options),this.updateElement(rects[i],i,properties,mode)}this.updateSharedOptions(sharedOptions,mode,firstOpts)}draw(){const{ctx,chartArea}=this.chart,metadata=this.getMeta().data||[],dataset=this.getDataset(),levels=(dataset.groups||[]).length-1,data=dataset.data;(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.Y)(ctx,chartArea);for(let i=0,ilen=metadata.length;i<ilen;++i){const rect=metadata[i];rect.hidden||rect.draw(ctx,data[i],levels)}(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.$)(ctx)}}TreemapController.id="treemap",TreemapController.version="2.3.0",TreemapController.defaults={dataElementType:"treemap",animations:{numbers:{type:"number",properties:["x","y","width","height"]}}},TreemapController.descriptors={_scriptable:!0,_indexable:!1},TreemapController.overrides={interaction:{mode:"point",includeInvisible:!0,intersect:!0},hover:{},plugins:{tooltip:{position:"treemap",intersect:!0,callbacks:{title(items){if(items.length){return items[0].dataset.key||""}return""},label(item){const dataset=item.dataset,dataItem=dataset.data[item.dataIndex],label=dataItem.g||dataItem._data.label||dataset.label;return(label?label+": ":"")+dataItem.v}}}},scales:{x:{type:"linear",alignToPixels:!0,bounds:"data",display:!1},y:{type:"linear",alignToPixels:!0,bounds:"data",display:!1,reverse:!0}}},TreemapController.beforeRegister=function(){!function requireVersion(pkg,min,ver,strict=!0){const parts=ver.split(".");let i=0;for(const req of min.split(".")){const act=parts[i++];if(parseInt(req,10)<parseInt(act,10))break;if(isOlderPart(act,req)){if(strict)throw new Error(`${pkg} v${ver} is not supported. v${min} or newer is required.`);return!1}}return!0}("chart.js","3.8",chart_js__WEBPACK_IMPORTED_MODULE_1__.t1.version)},TreemapController.afterRegister=function(){const tooltipPlugin=chart_js__WEBPACK_IMPORTED_MODULE_1__.u5.plugins.get("tooltip");tooltipPlugin?tooltipPlugin.positioners.treemap=function(active){if(!active.length)return!1;return active[active.length-1].element.tooltipPosition()}:console.warn("Unable to register the treemap positioner because tooltip plugin is not registered")},TreemapController.afterUnregister=function(){const tooltipPlugin=chart_js__WEBPACK_IMPORTED_MODULE_1__.u5.plugins.get("tooltip");tooltipPlugin&&delete tooltipPlugin.positioners.treemap}},"./node_modules/chartjs-plugin-a11y-legend/dist/plugin.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>plugin});const chartStates=new Map;class ChartLegendManager{hitBoxes=[];focusBoxMargin;focusBox;chart;canvas;constructor(chart,startingMargin=0){this.focusBoxMargin=startingMargin,this.chart=chart,this.canvas=chart.canvas,this.focusBox=this._generateFocusBox(),this.chart.canvas.insertAdjacentElement("afterend",this.focusBox)}suppressFocusBox=()=>{this.focusBox.setAttribute("tabIndex","-1")};reviveFocusBox=()=>{this.focusBox.setAttribute("tabIndex","0")};_generateFocusBox=()=>{const focusBox=document.createElement("div");focusBox.setAttribute("tabIndex","0"),focusBox.setAttribute("data-legend-index","0"),focusBox.setAttribute("role","option"),focusBox.setAttribute("aria-selected","true"),focusBox.style.position="absolute";const hideFocusBox=()=>{focusBox.style.left="-1000px"},activateFocusBox=e=>{const index=Number(focusBox.getAttribute("data-legend-index"));if(["pie","doughnut"].includes(this.chart.config.type)){this.chart.toggleDataVisibility(index);const isVisible=this.chart.getDataVisibility(index);focusBox.setAttribute("aria-selected",String(isVisible))}else this.chart.isDatasetVisible(index)?(this.chart.hide(index),focusBox.setAttribute("aria-selected","false")):(this.chart.show(index),focusBox.setAttribute("aria-selected","true"));this.chart.update(),e.preventDefault(),e.stopPropagation()},moveFocusBox=()=>{const index=Number(focusBox.getAttribute("data-legend-index"));if(isNaN(index))return;const bbox=this.canvas.getBoundingClientRect(),{left,top,width,height,text}=this.hitBoxes[index];focusBox.style.left=bbox.x+left-this.focusBoxMargin-window.pageXOffset+"px",focusBox.style.top=`${bbox.y+top-this.focusBoxMargin+window.pageYOffset}px`,focusBox.style.width=`${width+2*this.focusBoxMargin}px`,focusBox.style.height=`${height+2*this.focusBoxMargin}px`,focusBox.setAttribute("aria-label",`${text}, ${index+1} of ${this.hitBoxes.length}`)};return hideFocusBox(),focusBox.addEventListener("focus",moveFocusBox),focusBox.addEventListener("blur",hideFocusBox),focusBox.addEventListener("keydown",(e=>{const index=Number(focusBox.getAttribute("data-legend-index")),maxIndex=this.hitBoxes.length-1;if("ArrowRight"===e.key){if(e.preventDefault(),e.stopPropagation(),index>=maxIndex)return;return focusBox.setAttribute("data-legend-index",String(index+1)),void moveFocusBox()}if("ArrowLeft"===e.key){if(e.preventDefault(),e.stopPropagation(),index<=0)return;return focusBox.setAttribute("data-legend-index",String(index-1)),void moveFocusBox()}" "!==e.key&&"Enter"!==e.key||activateFocusBox(e)})),focusBox.addEventListener("click",activateFocusBox),focusBox}}const updateForLegends=(chart,manager)=>{const{legend}=chart;if(!legend?.legendItems)return manager.suppressFocusBox();manager.hitBoxes=legend?.legendItems?.map((({text},index)=>({...legend.legendHitBoxes?.[index]??{},text})))??[]},initialize=(chart,margin)=>{const manager=new ChartLegendManager(chart,margin);return chartStates.set(chart,manager),manager},plugin={id:"a11y_legend",afterInit:(chart,args,options)=>{const manager=initialize(chart,options.margin);updateForLegends(chart,manager)},beforeDraw:(chart,args,options)=>{let manager=chartStates.get(chart);if(void 0===manager&&(manager=initialize(chart,options.margin)),!chart.options.plugins?.legend?.display)return manager.suppressFocusBox();manager.reviveFocusBox(),manager.focusBoxMargin=options.margin,updateForLegends(chart,manager)},afterDestroy(chart){chartStates.delete(chart)},defaults:{margin:4}}},"./node_modules/chartjs-plugin-annotation/dist/chartjs-plugin-annotation.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>annotation});var chart_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/chart.js/dist/chart.js"),chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/chart.js/dist/chunks/helpers.segment.js");const interaction={modes:{point:(state,event)=>filterElements(state,event,{intersect:!0}),nearest:(state,event,options)=>function getNearestItem(state,event,options){let minDistance=Number.POSITIVE_INFINITY;return filterElements(state,event,options).reduce(((nearestItems,element)=>{const center=element.getCenterPoint(),evenPoint=function getPointByAxis(event,center,axis){if("x"===axis)return{x:event.x,y:center.y};if("y"===axis)return{x:center.x,y:event.y};return center}(event,center,options.axis),distance=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.aE)(event,evenPoint);return distance<minDistance?(nearestItems=[element],minDistance=distance):distance===minDistance&&nearestItems.push(element),nearestItems}),[]).sort(((a,b)=>a._index-b._index)).slice(0,1)}(state,event,options),x:(state,event,options)=>filterElements(state,event,{intersect:options.intersect,axis:"x"}),y:(state,event,options)=>filterElements(state,event,{intersect:options.intersect,axis:"y"})}};function getElements(state,event,options){return(interaction.modes[options.mode]||interaction.modes.nearest)(state,event,options)}function filterElements(state,event,options){return state.visibleElements.filter((element=>options.intersect?element.inRange(event.x,event.y):function inRangeByAxis(element,event,axis){return"x"!==axis&&"y"!==axis?element.inRange(event.x,event.y,"x",!0)||element.inRange(event.x,event.y,"y",!0):element.inRange(event.x,event.y,axis,!0)}(element,event,options.axis)))}const isOlderPart=(act,req)=>req>act||act.length>req.length&&act.slice(0,req.length)===req,clamp=(x,from,to)=>Math.min(to,Math.max(from,x));function clampAll(obj,from,to){for(const key of Object.keys(obj))obj[key]=clamp(obj[key],from,to);return obj}function inBoxRange(point,{x,y,x2,y2},axis,borderWidth){const hBorderWidth=borderWidth/2,inRangeX=point.x>=x-hBorderWidth-.001&&point.x<=x2+hBorderWidth+.001,inRangeY=point.y>=y-hBorderWidth-.001&&point.y<=y2+hBorderWidth+.001;return"x"===axis?inRangeX:("y"===axis||inRangeX)&&inRangeY}function getElementCenterPoint(element,useFinalPosition){const{centerX,centerY}=element.getProps(["centerX","centerY"],useFinalPosition);return{x:centerX,y:centerY}}const isPercentString=s=>"string"==typeof s&&s.endsWith("%"),toPercent=s=>parseFloat(s)/100,toPositivePercent=s=>clamp(toPercent(s),0,1),boxAppering=(x,y)=>({x,y,x2:x,y2:y,width:0,height:0}),defaultInitAnimation={box:properties=>boxAppering(properties.centerX,properties.centerY),ellipse:properties=>({centerX:properties.centerX,centerY:properties.centerX,radius:0,width:0,height:0}),label:properties=>boxAppering(properties.centerX,properties.centerY),line:properties=>boxAppering(properties.x,properties.y),point:properties=>({centerX:properties.centerX,centerY:properties.centerY,radius:0,width:0,height:0}),polygon:properties=>boxAppering(properties.centerX,properties.centerY)};function getRelativePosition(size,position){return"start"===position?0:"end"===position?size:isPercentString(position)?toPositivePercent(position)*size:size/2}function getSize(size,value,positivePercent=!0){return"number"==typeof value?value:isPercentString(value)?(positivePercent?toPositivePercent(value):toPercent(value))*size:size}function toPosition(value,defaultValue="center"){return(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.i)(value)?{x:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.v)(value.x,defaultValue),y:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.v)(value.y,defaultValue)}:{x:value=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.v)(value,defaultValue),y:value}}function isBoundToPoint(options){return options&&((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.h)(options.xValue)||(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.h)(options.yValue))}function initAnimationProperties(chart,properties,options){const initAnim=options.init;if(initAnim)return!0===initAnim?applyDefault(properties,options):function execCallback(chart,properties,options){const result=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.Q)(options.init,[{chart,properties,options}]);if(!0===result)return applyDefault(properties,options);if((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.i)(result))return result}(chart,properties,options)}function loadHooks(options,hooks,hooksContainer){let activated=!1;return hooks.forEach((hook=>{(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a7)(options[hook])?(activated=!0,hooksContainer[hook]=options[hook]):(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.h)(hooksContainer[hook])&&delete hooksContainer[hook]})),activated}function applyDefault(properties,options){const type=options.type||"line";return defaultInitAnimation[type](properties)}const widthCache=new Map,fontsKey=fonts=>fonts.reduce((function(prev,item){return prev+=item.string}),"");function isImageOrCanvas(content){if(content&&"object"==typeof content){const type=content.toString();return"[object HTMLImageElement]"===type||"[object HTMLCanvasElement]"===type}}function translate(ctx,{x,y},rotation){rotation&&(ctx.translate(x,y),ctx.rotate((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.t)(rotation)),ctx.translate(-x,-y))}function setBorderStyle(ctx,options){if(options&&options.borderWidth)return ctx.lineCap=options.borderCapStyle,ctx.setLineDash(options.borderDash),ctx.lineDashOffset=options.borderDashOffset,ctx.lineJoin=options.borderJoinStyle,ctx.lineWidth=options.borderWidth,ctx.strokeStyle=options.borderColor,!0}function setShadowStyle(ctx,options){ctx.shadowColor=options.backgroundShadowColor,ctx.shadowBlur=options.shadowBlur,ctx.shadowOffsetX=options.shadowOffsetX,ctx.shadowOffsetY=options.shadowOffsetY}function measureLabelSize(ctx,options){const content=options.content;if(isImageOrCanvas(content))return{width:getSize(content.width,options.width),height:getSize(content.height,options.height)};const optFont=options.font,fonts=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b)(optFont)?optFont.map((f=>(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a0)(f))):[(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a0)(optFont)],strokeWidth=options.textStrokeWidth,lines=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b)(content)?content:[content],mapKey=lines.join()+fontsKey(fonts)+strokeWidth+(ctx._measureText?"-spriting":"");return widthCache.has(mapKey)||widthCache.set(mapKey,function calculateLabelSize(ctx,lines,fonts,strokeWidth){ctx.save();const count=lines.length;let width=0,height=strokeWidth;for(let i=0;i<count;i++){const font=fonts[Math.min(i,fonts.length-1)];ctx.font=font.string;const text=lines[i];width=Math.max(width,ctx.measureText(text).width+strokeWidth),height+=font.lineHeight}return ctx.restore(),{width,height}}(ctx,lines,fonts,strokeWidth)),widthCache.get(mapKey)}function drawBox(ctx,rect,options){const{x,y,width,height}=rect;ctx.save(),setShadowStyle(ctx,options);const stroke=setBorderStyle(ctx,options);ctx.fillStyle=options.backgroundColor,ctx.beginPath(),(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.au)(ctx,{x,y,w:width,h:height,radius:clampAll((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.aw)(options.borderRadius),0,Math.min(width,height)/2)}),ctx.closePath(),ctx.fill(),stroke&&(ctx.shadowColor=options.borderShadowColor,ctx.stroke()),ctx.restore()}function drawLabel(ctx,rect,options){const content=options.content;if(isImageOrCanvas(content))return ctx.save(),ctx.globalAlpha=function getOpacity(value,elementValue){const opacity=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.x)(value)?value:elementValue;return(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.x)(opacity)?clamp(opacity,0,1):1}(options.opacity,content.style.opacity),ctx.drawImage(content,rect.x,rect.y,rect.width,rect.height),void ctx.restore();const labels=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b)(content)?content:[content],optFont=options.font,fonts=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b)(optFont)?optFont.map((f=>(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a0)(f))):[(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a0)(optFont)],optColor=options.color,colors=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b)(optColor)?optColor:[optColor],x=function calculateTextAlignment(size,options){const{x,width}=size,textAlign=options.textAlign;return"center"===textAlign?x+width/2:"end"===textAlign||"right"===textAlign?x+width:x}(rect,options),y=rect.y+options.textStrokeWidth/2;ctx.save(),ctx.textBaseline="middle",ctx.textAlign=options.textAlign,function setTextStrokeStyle(ctx,options){if(options.textStrokeWidth>0)return ctx.lineJoin="round",ctx.miterLimit=2,ctx.lineWidth=options.textStrokeWidth,ctx.strokeStyle=options.textStrokeColor,!0}(ctx,options)&&function applyLabelDecoration(ctx,{x,y},labels,fonts){ctx.beginPath();let lhs=0;labels.forEach((function(l,i){const f=fonts[Math.min(i,fonts.length-1)],lh=f.lineHeight;ctx.font=f.string,ctx.strokeText(l,x,y+lh/2+lhs),lhs+=lh})),ctx.stroke()}(ctx,{x,y},labels,fonts),function applyLabelContent(ctx,{x,y},labels,{fonts,colors}){let lhs=0;labels.forEach((function(l,i){const c=colors[Math.min(i,colors.length-1)],f=fonts[Math.min(i,fonts.length-1)],lh=f.lineHeight;ctx.beginPath(),ctx.font=f.string,ctx.fillStyle=c,ctx.fillText(l,x,y+lh/2+lhs),lhs+=lh,ctx.fill()}))}(ctx,{x,y},labels,{fonts,colors}),ctx.restore()}function drawPoint(ctx,element,x,y){const{radius,options}=element,style=options.pointStyle,rotation=options.rotation;let rad=(rotation||0)*chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b3;if(isImageOrCanvas(style))return ctx.save(),ctx.translate(x,y),ctx.rotate(rad),ctx.drawImage(style,-style.width/2,-style.height/2,style.width,style.height),void ctx.restore();(radius=>isNaN(radius)||radius<=0)(radius)||function drawPointStyle(ctx,{x,y,radius,rotation,style,rad}){let xOffset,yOffset,size,cornerRadius;switch(ctx.beginPath(),style){default:ctx.arc(x,y,radius,0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.T),ctx.closePath();break;case"triangle":ctx.moveTo(x+Math.sin(rad)*radius,y-Math.cos(rad)*radius),rad+=chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b5,ctx.lineTo(x+Math.sin(rad)*radius,y-Math.cos(rad)*radius),rad+=chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b5,ctx.lineTo(x+Math.sin(rad)*radius,y-Math.cos(rad)*radius),ctx.closePath();break;case"rectRounded":cornerRadius=.516*radius,size=radius-cornerRadius,xOffset=Math.cos(rad+chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b4)*size,yOffset=Math.sin(rad+chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b4)*size,ctx.arc(x-xOffset,y-yOffset,cornerRadius,rad-chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.P,rad-chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.H),ctx.arc(x+yOffset,y-xOffset,cornerRadius,rad-chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.H,rad),ctx.arc(x+xOffset,y+yOffset,cornerRadius,rad,rad+chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.H),ctx.arc(x-yOffset,y+xOffset,cornerRadius,rad+chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.H,rad+chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.P),ctx.closePath();break;case"rect":if(!rotation){size=Math.SQRT1_2*radius,ctx.rect(x-size,y-size,2*size,2*size);break}rad+=chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b4;case"rectRot":xOffset=Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,ctx.moveTo(x-xOffset,y-yOffset),ctx.lineTo(x+yOffset,y-xOffset),ctx.lineTo(x+xOffset,y+yOffset),ctx.lineTo(x-yOffset,y+xOffset),ctx.closePath();break;case"crossRot":rad+=chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b4;case"cross":xOffset=Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,ctx.moveTo(x-xOffset,y-yOffset),ctx.lineTo(x+xOffset,y+yOffset),ctx.moveTo(x+yOffset,y-xOffset),ctx.lineTo(x-yOffset,y+xOffset);break;case"star":xOffset=Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,ctx.moveTo(x-xOffset,y-yOffset),ctx.lineTo(x+xOffset,y+yOffset),ctx.moveTo(x+yOffset,y-xOffset),ctx.lineTo(x-yOffset,y+xOffset),rad+=chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b4,xOffset=Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,ctx.moveTo(x-xOffset,y-yOffset),ctx.lineTo(x+xOffset,y+yOffset),ctx.moveTo(x+yOffset,y-xOffset),ctx.lineTo(x-yOffset,y+xOffset);break;case"line":xOffset=Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,ctx.moveTo(x-xOffset,y-yOffset),ctx.lineTo(x+xOffset,y+yOffset);break;case"dash":ctx.moveTo(x,y),ctx.lineTo(x+Math.cos(rad)*radius,y+Math.sin(rad)*radius)}ctx.fill()}(ctx,{x,y,radius,rotation,style,rad})}const limitedLineScale={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function scaleValue(scale,value,fallback){return value="number"==typeof value?value:scale.parse(value),(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.g)(value)?scale.getPixelForValue(value):fallback}function retrieveScaleID(scales,options,key){const scaleID=options[key];if(scaleID||"scaleID"===key)return scaleID;const axis=key.charAt(0),axes=Object.values(scales).filter((scale=>scale.axis&&scale.axis===axis));return axes.length?axes[0].id:axis}function getDimensionByScale(scale,options){if(scale){const reverse=scale.options.reverse;return{start:scaleValue(scale,options.min,reverse?options.end:options.start),end:scaleValue(scale,options.max,reverse?options.start:options.end)}}}function getChartPoint(chart,options){const{chartArea,scales}=chart,xScale=scales[retrieveScaleID(scales,options,"xScaleID")],yScale=scales[retrieveScaleID(scales,options,"yScaleID")];let x=chartArea.width/2,y=chartArea.height/2;return xScale&&(x=scaleValue(xScale,options.xValue,xScale.left+xScale.width/2)),yScale&&(y=scaleValue(yScale,options.yValue,yScale.top+yScale.height/2)),{x,y}}function resolveBoxProperties(chart,options){const scales=chart.scales,xScale=scales[retrieveScaleID(scales,options,"xScaleID")],yScale=scales[retrieveScaleID(scales,options,"yScaleID")];if(!xScale&&!yScale)return{};let{left:x,right:x2}=xScale||chart.chartArea,{top:y,bottom:y2}=yScale||chart.chartArea;const xDim=getChartDimensionByScale(xScale,{min:options.xMin,max:options.xMax,start:x,end:x2});x=xDim.start,x2=xDim.end;const yDim=getChartDimensionByScale(yScale,{min:options.yMin,max:options.yMax,start:y2,end:y});return y=yDim.start,y2=yDim.end,{x,y,x2,y2,width:x2-x,height:y2-y,centerX:x+(x2-x)/2,centerY:y+(y2-y)/2}}function resolvePointProperties(chart,options){if(!isBoundToPoint(options)){const box=resolveBoxProperties(chart,options);let radius=options.radius;radius&&!isNaN(radius)||(radius=Math.min(box.width,box.height)/2,options.radius=radius);const size=2*radius,adjustCenterX=box.centerX+options.xAdjust,adjustCenterY=box.centerY+options.yAdjust;return{x:adjustCenterX-radius,y:adjustCenterY-radius,x2:adjustCenterX+radius,y2:adjustCenterY+radius,centerX:adjustCenterX,centerY:adjustCenterY,width:size,height:size,radius}}return function getChartCircle(chart,options){const point=getChartPoint(chart,options),size=2*options.radius;return{x:point.x-options.radius+options.xAdjust,y:point.y-options.radius+options.yAdjust,x2:point.x+options.radius+options.xAdjust,y2:point.y+options.radius+options.yAdjust,centerX:point.x+options.xAdjust,centerY:point.y+options.yAdjust,radius:options.radius,width:size,height:size}}(chart,options)}function resolveLineProperties(chart,options){const{scales,chartArea}=chart,scale=scales[options.scaleID],area={x:chartArea.left,y:chartArea.top,x2:chartArea.right,y2:chartArea.bottom};return scale?function resolveFullLineProperties(scale,area,options){const min=scaleValue(scale,options.value,NaN),max=scaleValue(scale,options.endValue,min);scale.isHorizontal()?(area.x=min,area.x2=max):(area.y=min,area.y2=max)}(scale,area,options):function resolveLimitedLineProperties(scales,area,options){for(const scaleId of Object.keys(limitedLineScale)){const scale=scales[retrieveScaleID(scales,options,scaleId)];if(scale){const{min,max,start,end,startProp,endProp}=limitedLineScale[scaleId],dim=getDimensionByScale(scale,{min:options[min],max:options[max],start:scale[start],end:scale[end]});area[startProp]=dim.start,area[endProp]=dim.end}}}(scales,area,options),area}function resolveBoxAndLabelProperties(chart,options){const properties=resolveBoxProperties(chart,options);return properties.initProperties=initAnimationProperties(chart,properties,options),properties.elements=[{type:"label",optionScope:"label",properties:resolveLabelElementProperties$1(chart,properties,options),initProperties:properties.initProperties}],properties}function getChartDimensionByScale(scale,options){const result=getDimensionByScale(scale,options)||options;return{start:Math.min(result.start,result.end),end:Math.max(result.start,result.end)}}function calculatePosition$1(boxOpts,labelOpts){const{start,end,borderWidth}=boxOpts,{position,padding:{start:padStart,end:padEnd},adjust}=labelOpts;return start+borderWidth/2+adjust+getRelativePosition(end-borderWidth-start-padStart-padEnd-labelOpts.size,position)}function resolveLabelElementProperties$1(chart,properties,options){const label=options.label;label.backgroundColor="transparent",label.callout.display=!1;const position=toPosition(label.position),padding=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.E)(label.padding),labelSize=measureLabelSize(chart.ctx,label),x=function calculateX({properties,options},labelSize,position,padding){const{x:start,x2:end,width:size}=properties;return calculatePosition$1({start,end,size,borderWidth:options.borderWidth},{position:position.x,padding:{start:padding.left,end:padding.right},adjust:options.label.xAdjust,size:labelSize.width})}({properties,options},labelSize,position,padding),y=function calculateY({properties,options},labelSize,position,padding){const{y:start,y2:end,height:size}=properties;return calculatePosition$1({start,end,size,borderWidth:options.borderWidth},{position:position.y,padding:{start:padding.top,end:padding.bottom},adjust:options.label.yAdjust,size:labelSize.height})}({properties,options},labelSize,position,padding),width=labelSize.width+padding.width,height=labelSize.height+padding.height;return{x,y,x2:x+width,y2:y+height,width,height,centerX:x+width/2,centerY:y+height/2,rotation:label.rotation}}function rotated(point,center,angle){const cos=Math.cos(angle),sin=Math.sin(angle),cx=center.x,cy=center.y;return{x:cx+cos*(point.x-cx)-sin*(point.y-cy),y:cy+sin*(point.x-cx)+cos*(point.y-cy)}}const moveHooks=["enter","leave"],eventHooks=moveHooks.concat("click");function handleEvent(state,event,options){if(state.listened)switch(event.type){case"mousemove":case"mouseout":return function handleMoveEvents(state,event,options){if(!state.moveListened)return;let elements;elements="mousemove"===event.type?getElements(state,event,options.interaction):[];const previous=state.hovered;state.hovered=elements;const context={state,event};let changed=dispatchMoveEvents(context,"leave",previous,elements);return dispatchMoveEvents(context,"enter",elements,previous)||changed}(state,event,options);case"click":return function handleClickEvents(state,event,options){const listeners=state.listeners,elements=getElements(state,event,options.interaction);let changed;for(const element of elements)changed=dispatchEvent(element.options.click||listeners.click,element,event)||changed;return changed}(state,event,options)}}function dispatchMoveEvents({state,event},hook,elements,checkElements){let changed;for(const element of elements)checkElements.indexOf(element)<0&&(changed=dispatchEvent(element.options[hook]||state.listeners[hook],element,event)||changed);return changed}function dispatchEvent(handler,element,event){return!0===(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.Q)(handler,[element.$context,event])}const elementHooks=["afterDraw","beforeDraw"];function invokeHook(state,element,hook){if(state.hooked){const callbackHook=element.options[hook]||state.hooks[hook];return(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.Q)(callbackHook,[element.$context])}}function adjustScaleRange(chart,scale,annotations){const range=function getScaleLimits(scales,scale,annotations){const axis=scale.axis,scaleID=scale.id,scaleIDOption=axis+"ScaleID",limits={min:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.v)(scale.min,Number.NEGATIVE_INFINITY),max:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.v)(scale.max,Number.POSITIVE_INFINITY)};for(const annotation of annotations)annotation.scaleID===scaleID?updateLimits(annotation,scale,["value","endValue"],limits):retrieveScaleID(scales,annotation,scaleIDOption)===scaleID&&updateLimits(annotation,scale,[axis+"Min",axis+"Max",axis+"Value"],limits);return limits}(chart.scales,scale,annotations);let changed=changeScaleLimit(scale,range,"min","suggestedMin");changed=changeScaleLimit(scale,range,"max","suggestedMax")||changed,changed&&(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a7)(scale.handleTickRangeOptions)&&scale.handleTickRangeOptions()}function changeScaleLimit(scale,range,limit,suggestedLimit){if((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.g)(range[limit])&&!function scaleLimitDefined(scaleOptions,limit,suggestedLimit){return(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.h)(scaleOptions[limit])||(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.h)(scaleOptions[suggestedLimit])}(scale.options,limit,suggestedLimit)){const changed=scale[limit]!==range[limit];return scale[limit]=range[limit],changed}}function verifyScaleIDs(annotation,scales){for(const key of["scaleID","xScaleID","yScaleID"]){const scaleID=retrieveScaleID(scales,annotation,key);scaleID&&!scales[scaleID]&&verifyProperties(annotation,key)&&console.warn(`No scale found with id '${scaleID}' for annotation '${annotation.id}'`)}}function verifyProperties(annotation,key){if("scaleID"===key)return!0;const axis=key.charAt(0);for(const prop of["Min","Max","Value"])if((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.h)(annotation[axis+prop]))return!0;return!1}function updateLimits(annotation,scale,props,limits){for(const prop of props){const raw=annotation[prop];if((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.h)(raw)){const value=scale.parse(raw);limits.min=Math.min(limits.min,value),limits.max=Math.max(limits.max,value)}}}class BoxAnnotation extends chart_js__WEBPACK_IMPORTED_MODULE_1__.Hg{inRange(mouseX,mouseY,axis,useFinalPosition){const{x,y}=rotated({x:mouseX,y:mouseY},this.getCenterPoint(useFinalPosition),(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.t)(-this.options.rotation));return inBoxRange({x,y},this.getProps(["x","y","x2","y2"],useFinalPosition),axis,this.options.borderWidth)}getCenterPoint(useFinalPosition){return getElementCenterPoint(this,useFinalPosition)}draw(ctx){ctx.save(),translate(ctx,this.getCenterPoint(),this.options.rotation),drawBox(ctx,this,this.options),ctx.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(chart,options){return resolveBoxAndLabelProperties(chart,options)}}BoxAnnotation.id="boxAnnotation",BoxAnnotation.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},BoxAnnotation.defaultRoutes={borderColor:"color",backgroundColor:"color"},BoxAnnotation.descriptors={label:{_fallback:!0}};const positions=["left","bottom","top","right"];class LabelAnnotation extends chart_js__WEBPACK_IMPORTED_MODULE_1__.Hg{inRange(mouseX,mouseY,axis,useFinalPosition){const{x,y}=rotated({x:mouseX,y:mouseY},this.getCenterPoint(useFinalPosition),(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.t)(-this.rotation));return inBoxRange({x,y},this.getProps(["x","y","x2","y2"],useFinalPosition),axis,this.options.borderWidth)}getCenterPoint(useFinalPosition){return getElementCenterPoint(this,useFinalPosition)}draw(ctx){const options=this.options,visible=!(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.h)(this._visible)||this._visible;options.display&&options.content&&visible&&(ctx.save(),translate(ctx,this.getCenterPoint(),this.rotation),function drawCallout(ctx,element){const{pointX,pointY,options}=element,callout=options.callout,calloutPosition=callout&&callout.display&&function resolveCalloutPosition(element,options){const position=options.position;if(positions.includes(position))return position;return function resolveCalloutAutoPosition(element,options){const{x,y,x2,y2,width,height,pointX,pointY,centerX,centerY,rotation}=element,center={x:centerX,y:centerY},start=options.start,xAdjust=getSize(width,start),yAdjust=getSize(height,start),xPoints=[x,x+xAdjust,x+xAdjust,x2],yPoints=[y+yAdjust,y2,y,y2],result=[];for(let index=0;index<4;index++){const rotatedPoint=rotated({x:xPoints[index],y:yPoints[index]},center,(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.t)(rotation));result.push({position:positions[index],distance:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.aE)(rotatedPoint,{x:pointX,y:pointY})})}return result.sort(((a,b)=>a.distance-b.distance))[0].position}(element,options)}(element,callout);if(!calloutPosition||function isPointInRange(element,callout,position){const{pointX,pointY}=element,margin=callout.margin;let x=pointX,y=pointY;"left"===position?x+=margin:"right"===position?x-=margin:"top"===position?y+=margin:"bottom"===position&&(y-=margin);return element.inRange(x,y)}(element,callout,calloutPosition))return;ctx.save(),ctx.beginPath();const stroke=setBorderStyle(ctx,callout);if(!stroke)return ctx.restore();const{separatorStart,separatorEnd}=function getCalloutSeparatorCoord(element,position){const{x,y,x2,y2}=element,adjust=function getCalloutSeparatorAdjust(element,position){const{width,height,options}=element,adjust=options.callout.margin+options.borderWidth/2;if("right"===position)return width+adjust;if("bottom"===position)return height+adjust;return-adjust}(element,position);let separatorStart,separatorEnd;"left"===position||"right"===position?(separatorStart={x:x+adjust,y},separatorEnd={x:separatorStart.x,y:y2}):(separatorStart={x,y:y+adjust},separatorEnd={x:x2,y:separatorStart.y});return{separatorStart,separatorEnd}}(element,calloutPosition),{sideStart,sideEnd}=function getCalloutSideCoord(element,position,separatorStart){const{y,width,height,options}=element,start=options.callout.start,side=function getCalloutSideAdjust(position,options){const side=options.side;if("left"===position||"top"===position)return-side;return side}(position,options.callout);let sideStart,sideEnd;"left"===position||"right"===position?(sideStart={x:separatorStart.x,y:y+getSize(height,start)},sideEnd={x:sideStart.x+side,y:sideStart.y}):(sideStart={x:separatorStart.x+getSize(width,start),y:separatorStart.y},sideEnd={x:sideStart.x,y:sideStart.y+side});return{sideStart,sideEnd}}(element,calloutPosition,separatorStart);(callout.margin>0||0===options.borderWidth)&&(ctx.moveTo(separatorStart.x,separatorStart.y),ctx.lineTo(separatorEnd.x,separatorEnd.y));ctx.moveTo(sideStart.x,sideStart.y),ctx.lineTo(sideEnd.x,sideEnd.y);const rotatedPoint=rotated({x:pointX,y:pointY},element.getCenterPoint(),(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.t)(-element.rotation));ctx.lineTo(rotatedPoint.x,rotatedPoint.y),ctx.stroke(),ctx.restore()}(ctx,this),drawBox(ctx,this,options),drawLabel(ctx,function getLabelSize({x,y,width,height,options}){const hBorderWidth=options.borderWidth/2,padding=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.E)(options.padding);return{x:x+padding.left+hBorderWidth,y:y+padding.top+hBorderWidth,width:width-padding.left-padding.right-options.borderWidth,height:height-padding.top-padding.bottom-options.borderWidth}}(this),options),ctx.restore())}resolveElementProperties(chart,options){let point;if(isBoundToPoint(options))point=getChartPoint(chart,options);else{const{centerX,centerY}=resolveBoxProperties(chart,options);point={x:centerX,y:centerY}}const padding=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.E)(options.padding),boxSize=function measureRect(point,size,options,padding){const width=size.width+padding.width+options.borderWidth,height=size.height+padding.height+options.borderWidth,position=toPosition(options.position,"center"),x=calculatePosition(point.x,width,options.xAdjust,position.x),y=calculatePosition(point.y,height,options.yAdjust,position.y);return{x,y,x2:x+width,y2:y+height,width,height,centerX:x+width/2,centerY:y+height/2}}(point,measureLabelSize(chart.ctx,options),options,padding);return{initProperties:initAnimationProperties(chart,boxSize,options),pointX:point.x,pointY:point.y,...boxSize,rotation:options.rotation}}}function calculatePosition(start,size,adjust=0,position){return start-getRelativePosition(size,position)+adjust}LabelAnnotation.id="labelAnnotation",LabelAnnotation.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},LabelAnnotation.defaultRoutes={borderColor:"color"};const pointInLine=(p1,p2,t)=>({x:p1.x+t*(p2.x-p1.x),y:p1.y+t*(p2.y-p1.y)}),interpolateX=(y,p1,p2)=>pointInLine(p1,p2,Math.abs((y-p1.y)/(p2.y-p1.y))).x,interpolateY=(x,p1,p2)=>pointInLine(p1,p2,Math.abs((x-p1.x)/(p2.x-p1.x))).y,sqr=v=>v*v,coordInCurve=(start,cp,end,t)=>(1-t)*(1-t)*start+2*(1-t)*t*cp+t*t*end,pointInCurve=(start,cp,end,t)=>({x:coordInCurve(start.x,cp.x,end.x,t),y:coordInCurve(start.y,cp.y,end.y,t)}),coordAngleInCurve=(start,cp,end,t)=>2*(1-t)*(cp-start)+2*t*(end-cp),angleInCurve=(start,cp,end,t)=>-Math.atan2(coordAngleInCurve(start.x,cp.x,end.x,t),coordAngleInCurve(start.y,cp.y,end.y,t))+.5*chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.P;class LineAnnotation extends chart_js__WEBPACK_IMPORTED_MODULE_1__.Hg{inRange(mouseX,mouseY,axis,useFinalPosition){const hBorderWidth=this.options.borderWidth/2;if("x"!==axis&&"y"!==axis){const point={mouseX,mouseY},{path,ctx}=this;if(path){setBorderStyle(ctx,this.options);const{chart}=this.$context,mx=mouseX*chart.currentDevicePixelRatio,my=mouseY*chart.currentDevicePixelRatio,result=ctx.isPointInStroke(path,mx,my)||isOnLabel(this,point,useFinalPosition);return ctx.restore(),result}return function intersects(element,{mouseX,mouseY},epsilon=.001,useFinalPosition){const{x:x1,y:y1,x2,y2}=element.getProps(["x","y","x2","y2"],useFinalPosition),dx=x2-x1,dy=y2-y1,lenSq=sqr(dx)+sqr(dy),t=0===lenSq?-1:((mouseX-x1)*dx+(mouseY-y1)*dy)/lenSq;let xx,yy;t<0?(xx=x1,yy=y1):t>1?(xx=x2,yy=y2):(xx=x1+t*dx,yy=y1+t*dy);return sqr(mouseX-xx)+sqr(mouseY-yy)<=epsilon}(this,point,sqr(hBorderWidth),useFinalPosition)||isOnLabel(this,point,useFinalPosition)}return function inAxisRange(element,{mouseX,mouseY},axis,{hBorderWidth,useFinalPosition}){const limit=((mouseX,mouseY,{x,y,x2,y2},axis)=>"y"===axis?{start:Math.min(y,y2),end:Math.max(y,y2),value:mouseY}:{start:Math.min(x,x2),end:Math.max(x,x2),value:mouseX})(mouseX,mouseY,element.getProps(["x","y","x2","y2"],useFinalPosition),axis);return limit.value>=limit.start-hBorderWidth&&limit.value<=limit.end+hBorderWidth||isOnLabel(element,{mouseX,mouseY},useFinalPosition,axis)}(this,{mouseX,mouseY},axis,{hBorderWidth,useFinalPosition})}getCenterPoint(useFinalPosition){return getElementCenterPoint(this,useFinalPosition)}draw(ctx){const{x,y,x2,y2,cp,options}=this;if(ctx.save(),!setBorderStyle(ctx,options))return ctx.restore();setShadowStyle(ctx,options);const length=Math.sqrt(Math.pow(x2-x,2)+Math.pow(y2-y,2));if(options.curve&&cp)return function drawCurve(ctx,element,cp,length){const{x,y,x2,y2,options}=element,{startOpts,endOpts,startAdjust,endAdjust}=getArrowHeads(element),p1={x,y},p2={x:x2,y:y2},startAngle=angleInCurve(p1,cp,p2,0),endAngle=angleInCurve(p1,cp,p2,1)-chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.P,ps=pointInCurve(p1,cp,p2,startAdjust/length),pe=pointInCurve(p1,cp,p2,1-endAdjust/length),path=new Path2D;ctx.beginPath(),path.moveTo(ps.x,ps.y),path.quadraticCurveTo(cp.x,cp.y,pe.x,pe.y),ctx.shadowColor=options.borderShadowColor,ctx.stroke(path),element.path=path,element.ctx=ctx,drawArrowHeadOnCurve(ctx,ps,{angle:startAngle,adjust:startAdjust},startOpts),drawArrowHeadOnCurve(ctx,pe,{angle:endAngle,adjust:endAdjust},endOpts)}(ctx,this,cp,length),ctx.restore();const{startOpts,endOpts,startAdjust,endAdjust}=getArrowHeads(this),angle=Math.atan2(y2-y,x2-x);ctx.translate(x,y),ctx.rotate(angle),ctx.beginPath(),ctx.moveTo(0+startAdjust,0),ctx.lineTo(length-endAdjust,0),ctx.shadowColor=options.borderShadowColor,ctx.stroke(),drawArrowHead(ctx,0,startAdjust,startOpts),drawArrowHead(ctx,length,-endAdjust,endOpts),ctx.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(chart,options){const area=resolveLineProperties(chart,options),{x,y,x2,y2}=area,inside=function isLineInArea({x,y,x2,y2},{top,right,bottom,left}){return!(x<left&&x2<left||x>right&&x2>right||y<top&&y2<top||y>bottom&&y2>bottom)}(area,chart.chartArea),properties=inside?function limitLineToArea(p1,p2,area){const{x,y}=limitPointToArea(p1,p2,area),{x:x2,y:y2}=limitPointToArea(p2,p1,area);return{x,y,x2,y2,width:Math.abs(x2-x),height:Math.abs(y2-y)}}({x,y},{x:x2,y:y2},chart.chartArea):{x,y,x2,y2,width:Math.abs(x2-x),height:Math.abs(y2-y)};if(properties.centerX=(x2+x)/2,properties.centerY=(y2+y)/2,properties.initProperties=initAnimationProperties(chart,properties,options),options.curve){const p1={x:properties.x,y:properties.y},p2={x:properties.x2,y:properties.y2};properties.cp=function getControlPoint(properties,options,distance){const{x,y,x2,y2,centerX,centerY}=properties,angle=Math.atan2(y2-y,x2-x),cp=toPosition(options.controlPoint,0);return rotated({x:centerX+getSize(distance,cp.x,!1),y:centerY+getSize(distance,cp.y,!1)},{x:centerX,y:centerY},angle)}(properties,options,(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.aE)(p1,p2))}const labelProperties=function resolveLabelElementProperties(chart,properties,options){const borderWidth=options.borderWidth,padding=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.E)(options.padding),textSize=measureLabelSize(chart.ctx,options),width=textSize.width+padding.width+borderWidth,height=textSize.height+padding.height+borderWidth;return function calculateLabelPosition(properties,label,sizes,chartArea){const{width,height,padding}=sizes,{xAdjust,yAdjust}=label,p1={x:properties.x,y:properties.y},p2={x:properties.x2,y:properties.y2},rotation="auto"===label.rotation?function calculateAutoRotation(properties){const{x,y,x2,y2}=properties,rotation=Math.atan2(y2-y,x2-x);return rotation>chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.P/2?rotation-chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.P:rotation<chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.P/-2?rotation+chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.P:rotation}(properties):(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.t)(label.rotation),size=function rotatedSize(width,height,rotation){const cos=Math.cos(rotation),sin=Math.sin(rotation);return{w:Math.abs(width*cos)+Math.abs(height*sin),h:Math.abs(width*sin)+Math.abs(height*cos)}}(width,height,rotation),t=function calculateT(properties,label,sizes,chartArea){let t;const space=function spaceAround(properties,chartArea){const{x,x2,y,y2}=properties,t=Math.min(y,y2)-chartArea.top,l=Math.min(x,x2)-chartArea.left,b=chartArea.bottom-Math.max(y,y2),r=chartArea.right-Math.max(x,x2);return{x:Math.min(l,r),y:Math.min(t,b),dx:l<=r?1:-1,dy:t<=b?1:-1}}(properties,chartArea);t="start"===label.position?calculateTAdjust({w:properties.x2-properties.x,h:properties.y2-properties.y},sizes,label,space):"end"===label.position?1-calculateTAdjust({w:properties.x-properties.x2,h:properties.y-properties.y2},sizes,label,space):getRelativePosition(1,label.position);return t}(properties,label,{labelSize:size,padding},chartArea),pt=properties.cp?pointInCurve(p1,properties.cp,p2,t):pointInLine(p1,p2,t),xCoordinateSizes={size:size.w,min:chartArea.left,max:chartArea.right,padding:padding.left},yCoordinateSizes={size:size.h,min:chartArea.top,max:chartArea.bottom,padding:padding.top},centerX=adjustLabelCoordinate(pt.x,xCoordinateSizes)+xAdjust,centerY=adjustLabelCoordinate(pt.y,yCoordinateSizes)+yAdjust;return{x:centerX-width/2,y:centerY-height/2,x2:centerX+width/2,y2:centerY+height/2,centerX,centerY,pointX:pt.x,pointY:pt.y,width,height,rotation:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.U)(rotation)}}(properties,options,{width,height,padding},chart.chartArea)}(chart,properties,options.label);return labelProperties._visible=inside,properties.elements=[{type:"label",optionScope:"label",properties:labelProperties,initProperties:properties.initProperties}],properties}}LineAnnotation.id="lineAnnotation";const arrowHeadsDefaults={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};function limitPointToArea({x,y},p2,{top,right,bottom,left}){return x<left&&(y=interpolateY(left,{x,y},p2),x=left),x>right&&(y=interpolateY(right,{x,y},p2),x=right),y<top&&(x=interpolateX(top,{x,y},p2),y=top),y>bottom&&(x=interpolateX(bottom,{x,y},p2),y=bottom),{x,y}}function isOnLabel(element,{mouseX,mouseY},useFinalPosition,axis){const label=element.label;return label.options.display&&label.inRange(mouseX,mouseY,axis,useFinalPosition)}function calculateTAdjust(lineSize,sizes,label,space){const{labelSize,padding}=sizes,lineW=lineSize.w*space.dx,lineH=lineSize.h*space.dy,x=lineW>0&&(labelSize.w/2+padding.left-space.x)/lineW,y=lineH>0&&(labelSize.h/2+padding.top-space.y)/lineH;return clamp(Math.max(x,y),0,.25)}function adjustLabelCoordinate(coordinate,labelSizes){const{size,min,max,padding}=labelSizes,halfSize=size/2;return size>max-min?(max+min)/2:(min>=coordinate-padding-halfSize&&(coordinate=min+padding+halfSize),max<=coordinate+padding+halfSize&&(coordinate=max-padding-halfSize),coordinate)}function getArrowHeads(line){const options=line.options,arrowStartOpts=options.arrowHeads&&options.arrowHeads.start,arrowEndOpts=options.arrowHeads&&options.arrowHeads.end;return{startOpts:arrowStartOpts,endOpts:arrowEndOpts,startAdjust:getLineAdjust(line,arrowStartOpts),endAdjust:getLineAdjust(line,arrowEndOpts)}}function getLineAdjust(line,arrowOpts){if(!arrowOpts||!arrowOpts.display)return 0;const{length,width}=arrowOpts,adjust=line.options.borderWidth/2,p1={x:length,y:width+adjust},p2={x:0,y:adjust};return Math.abs(interpolateX(0,p1,p2))}function drawArrowHead(ctx,offset,adjust,arrowOpts){if(!arrowOpts||!arrowOpts.display)return;const{length,width,fill,backgroundColor,borderColor}=arrowOpts,arrowOffsetX=Math.abs(offset-length)+adjust;ctx.beginPath(),setShadowStyle(ctx,arrowOpts),setBorderStyle(ctx,arrowOpts),ctx.moveTo(arrowOffsetX,-width),ctx.lineTo(offset+adjust,0),ctx.lineTo(arrowOffsetX,width),!0===fill?(ctx.fillStyle=backgroundColor||borderColor,ctx.closePath(),ctx.fill(),ctx.shadowColor="transparent"):ctx.shadowColor=arrowOpts.borderShadowColor,ctx.stroke()}function drawArrowHeadOnCurve(ctx,{x,y},{angle,adjust},arrowOpts){arrowOpts&&arrowOpts.display&&(ctx.save(),ctx.translate(x,y),ctx.rotate(angle),drawArrowHead(ctx,0,-adjust,arrowOpts),ctx.restore())}LineAnnotation.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},arrowHeadsDefaults),fill:!1,length:12,start:Object.assign({},arrowHeadsDefaults),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},LabelAnnotation.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},LineAnnotation.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}},LineAnnotation.defaultRoutes={borderColor:"color"};class EllipseAnnotation extends chart_js__WEBPACK_IMPORTED_MODULE_1__.Hg{inRange(mouseX,mouseY,axis,useFinalPosition){const rotation=this.options.rotation,borderWidth=this.options.borderWidth;if("x"!==axis&&"y"!==axis)return function pointInEllipse(p,ellipse,rotation,borderWidth){const{width,height,centerX,centerY}=ellipse,xRadius=width/2,yRadius=height/2;if(xRadius<=0||yRadius<=0)return!1;const angle=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.t)(rotation||0),hBorderWidth=borderWidth/2||0,cosAngle=Math.cos(angle),sinAngle=Math.sin(angle),a=Math.pow(cosAngle*(p.x-centerX)+sinAngle*(p.y-centerY),2),b=Math.pow(sinAngle*(p.x-centerX)-cosAngle*(p.y-centerY),2);return a/Math.pow(xRadius+hBorderWidth,2)+b/Math.pow(yRadius+hBorderWidth,2)<=1.0001}({x:mouseX,y:mouseY},this.getProps(["width","height","centerX","centerY"],useFinalPosition),rotation,borderWidth);const{x,y,x2,y2}=this.getProps(["x","y","x2","y2"],useFinalPosition),hBorderWidth=borderWidth/2,limit="y"===axis?{start:y,end:y2}:{start:x,end:x2},rotatedPoint=rotated({x:mouseX,y:mouseY},this.getCenterPoint(useFinalPosition),(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.t)(-rotation));return rotatedPoint[axis]>=limit.start-hBorderWidth-.001&&rotatedPoint[axis]<=limit.end+hBorderWidth+.001}getCenterPoint(useFinalPosition){return getElementCenterPoint(this,useFinalPosition)}draw(ctx){const{width,height,centerX,centerY,options}=this;ctx.save(),translate(ctx,this.getCenterPoint(),options.rotation),setShadowStyle(ctx,this.options),ctx.beginPath(),ctx.fillStyle=options.backgroundColor;const stroke=setBorderStyle(ctx,options);ctx.ellipse(centerX,centerY,height/2,width/2,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.P/2,0,2*chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.P),ctx.fill(),stroke&&(ctx.shadowColor=options.borderShadowColor,ctx.stroke()),ctx.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(chart,options){return resolveBoxAndLabelProperties(chart,options)}}EllipseAnnotation.id="ellipseAnnotation",EllipseAnnotation.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,label:Object.assign({},BoxAnnotation.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},EllipseAnnotation.defaultRoutes={borderColor:"color",backgroundColor:"color"},EllipseAnnotation.descriptors={label:{_fallback:!0}};class PointAnnotation extends chart_js__WEBPACK_IMPORTED_MODULE_1__.Hg{inRange(mouseX,mouseY,axis,useFinalPosition){const{x,y,x2,y2,width}=this.getProps(["x","y","x2","y2","width"],useFinalPosition),borderWidth=this.options.borderWidth;if("x"!==axis&&"y"!==axis)return function inPointRange(point,center,radius,borderWidth){if(!point||!center||radius<=0)return!1;const hBorderWidth=borderWidth/2;return Math.pow(point.x-center.x,2)+Math.pow(point.y-center.y,2)<=Math.pow(radius+hBorderWidth,2)}({x:mouseX,y:mouseY},this.getCenterPoint(useFinalPosition),width/2,borderWidth);const hBorderWidth=borderWidth/2,limit="y"===axis?{start:y,end:y2,value:mouseY}:{start:x,end:x2,value:mouseX};return limit.value>=limit.start-hBorderWidth&&limit.value<=limit.end+hBorderWidth}getCenterPoint(useFinalPosition){return getElementCenterPoint(this,useFinalPosition)}draw(ctx){const options=this.options,borderWidth=options.borderWidth;if(options.radius<.1)return;ctx.save(),ctx.fillStyle=options.backgroundColor,setShadowStyle(ctx,options);const stroke=setBorderStyle(ctx,options);drawPoint(ctx,this,this.centerX,this.centerY),stroke&&!isImageOrCanvas(options.pointStyle)&&(ctx.shadowColor=options.borderShadowColor,ctx.stroke()),ctx.restore(),options.borderWidth=borderWidth}resolveElementProperties(chart,options){const properties=resolvePointProperties(chart,options);return properties.initProperties=initAnimationProperties(chart,properties,options),properties}}PointAnnotation.id="pointAnnotation",PointAnnotation.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},PointAnnotation.defaultRoutes={borderColor:"color",backgroundColor:"color"};class PolygonAnnotation extends chart_js__WEBPACK_IMPORTED_MODULE_1__.Hg{inRange(mouseX,mouseY,axis,useFinalPosition){if("x"!==axis&&"y"!==axis)return this.options.radius>=.1&&this.elements.length>1&&function pointIsInPolygon(points,x,y,useFinalPosition){let isInside=!1,A=points[points.length-1].getProps(["bX","bY"],useFinalPosition);for(const point of points){const B=point.getProps(["bX","bY"],useFinalPosition);B.bY>y!=A.bY>y&&x<(A.bX-B.bX)*(y-B.bY)/(A.bY-B.bY)+B.bX&&(isInside=!isInside),A=B}return isInside}(this.elements,mouseX,mouseY,useFinalPosition);const rotatedPoint=rotated({x:mouseX,y:mouseY},this.getCenterPoint(useFinalPosition),(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.t)(-this.options.rotation)),axisPoints=this.elements.map((point=>"y"===axis?point.bY:point.bX)),start=Math.min(...axisPoints),end=Math.max(...axisPoints);return rotatedPoint[axis]>=start&&rotatedPoint[axis]<=end}getCenterPoint(useFinalPosition){return getElementCenterPoint(this,useFinalPosition)}draw(ctx){const{elements,options}=this;ctx.save(),ctx.beginPath(),ctx.fillStyle=options.backgroundColor,setShadowStyle(ctx,options);const stroke=setBorderStyle(ctx,options);let first=!0;for(const el of elements)first?(ctx.moveTo(el.x,el.y),first=!1):ctx.lineTo(el.x,el.y);ctx.closePath(),ctx.fill(),stroke&&(ctx.shadowColor=options.borderShadowColor,ctx.stroke()),ctx.restore()}resolveElementProperties(chart,options){const properties=resolvePointProperties(chart,options),{sides,rotation}=options,elements=[],angle=2*chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.P/sides;let rad=rotation*chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b3;for(let i=0;i<sides;i++,rad+=angle){const elProps=buildPointElement(properties,options,rad);elProps.initProperties=initAnimationProperties(chart,properties,options),elements.push(elProps)}return properties.elements=elements,properties}}function buildPointElement({centerX,centerY},{radius,borderWidth},rad){const halfBorder=borderWidth/2,sin=Math.sin(rad),cos=Math.cos(rad),point={x:centerX+sin*radius,y:centerY-cos*radius};return{type:"point",optionScope:"point",properties:{x:point.x,y:point.y,centerX:point.x,centerY:point.y,bX:centerX+sin*(radius+halfBorder),bY:centerY-cos*(radius+halfBorder)}}}PolygonAnnotation.id="polygonAnnotation",PolygonAnnotation.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},PolygonAnnotation.defaultRoutes={borderColor:"color",backgroundColor:"color"};const annotationTypes={box:BoxAnnotation,ellipse:EllipseAnnotation,label:LabelAnnotation,line:LineAnnotation,point:PointAnnotation,polygon:PolygonAnnotation};Object.keys(annotationTypes).forEach((key=>{chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.d.describe(`elements.${annotationTypes[key].id}`,{_fallback:"plugins.annotation.common"})}));const directUpdater={update:Object.assign},hooks$1=eventHooks.concat(elementHooks),resolve=(value,optDefs)=>(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.i)(optDefs)?resolveObj(value,optDefs):value,isIndexable=prop=>"color"===prop||"font"===prop;function resolveType(type="line"){return annotationTypes[type]?type:(console.warn(`Unknown annotation type: '${type}', defaulting to 'line'`),"line")}function updateElements(chart,state,options,mode){const animations=function resolveAnimations(chart,animOpts,mode){if("reset"===mode||"none"===mode||"resize"===mode)return directUpdater;return new chart_js__WEBPACK_IMPORTED_MODULE_1__.Qw(chart,animOpts)}(chart,options.animations,mode),annotations=state.annotations,elements=function resyncElements(elements,annotations){const count=annotations.length,start=elements.length;if(start<count){const add=count-start;elements.splice(start,0,...new Array(add))}else start>count&&elements.splice(count,start-count);return elements}(state.elements,annotations);for(let i=0;i<annotations.length;i++){const annotationOptions=annotations[i],element=getOrCreateElement(elements,i,annotationOptions.type),resolver=annotationOptions.setContext(getContext(chart,element,annotationOptions)),properties=element.resolveElementProperties(chart,resolver);properties.skip=toSkip(properties),"elements"in properties&&(updateSubElements(element,properties.elements,resolver,animations),delete properties.elements),(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.h)(element.x)||Object.assign(element,properties),Object.assign(element,properties.initProperties),properties.options=resolveAnnotationOptions(resolver),animations.update(element,properties)}}function toSkip(properties){return isNaN(properties.x)||isNaN(properties.y)}function updateSubElements(mainElement,elements,resolver,animations){const subElements=mainElement.elements||(mainElement.elements=[]);subElements.length=elements.length;for(let i=0;i<elements.length;i++){const definition=elements[i],properties=definition.properties,subElement=getOrCreateElement(subElements,i,definition.type,definition.initProperties),subResolver=resolver[definition.optionScope].override(definition);properties.options=resolveAnnotationOptions(subResolver),animations.update(subElement,properties)}}function getOrCreateElement(elements,index,type,initProperties){const elementClass=annotationTypes[resolveType(type)];let element=elements[index];return element&&element instanceof elementClass||(element=elements[index]=new elementClass,Object.assign(element,initProperties)),element}function resolveAnnotationOptions(resolver){const elementClass=annotationTypes[resolveType(resolver.type)],result={};result.id=resolver.id,result.type=resolver.type,result.drawTime=resolver.drawTime,Object.assign(result,resolveObj(resolver,elementClass.defaults),resolveObj(resolver,elementClass.defaultRoutes));for(const hook of hooks$1)result[hook]=resolver[hook];return result}function resolveObj(resolver,defs){const result={};for(const prop of Object.keys(defs)){const optDefs=defs[prop],value=resolver[prop];isIndexable(prop)&&(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b)(value)?result[prop]=value.map((item=>resolve(item,optDefs))):result[prop]=resolve(value,optDefs)}return result}function getContext(chart,element,annotation){return element.$context||(element.$context=Object.assign(Object.create(chart.getContext()),{element,id:annotation.id,type:"annotation"}))}const chartStates=new Map,hooks=eventHooks.concat(elementHooks);var annotation={id:"annotation",version:"3.0.1",beforeRegister(){!function requireVersion(pkg,min,ver,strict=!0){const parts=ver.split(".");let i=0;for(const req of min.split(".")){const act=parts[i++];if(parseInt(req,10)<parseInt(act,10))break;if(isOlderPart(act,req)){if(strict)throw new Error(`${pkg} v${ver} is not supported. v${min} or newer is required.`);return!1}}return!0}("chart.js","4.0",chart_js__WEBPACK_IMPORTED_MODULE_1__.t1.version)},afterRegister(){chart_js__WEBPACK_IMPORTED_MODULE_1__.t1.register(annotationTypes)},afterUnregister(){chart_js__WEBPACK_IMPORTED_MODULE_1__.t1.unregister(annotationTypes)},beforeInit(chart){chartStates.set(chart,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(chart,args,options){const annotations=chartStates.get(chart).annotations=[];let annotationOptions=options.annotations;(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.i)(annotationOptions)?Object.keys(annotationOptions).forEach((key=>{const value=annotationOptions[key];(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.i)(value)&&(value.id=key,annotations.push(value))})):(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.b)(annotationOptions)&&annotations.push(...annotationOptions),function verifyScaleOptions(annotations,scales){for(const annotation of annotations)verifyScaleIDs(annotation,scales)}(annotations,chart.scales)},afterDataLimits(chart,args){const state=chartStates.get(chart);adjustScaleRange(chart,args.scale,state.annotations.filter((a=>a.display&&a.adjustScaleRange)))},afterUpdate(chart,args,options){const state=chartStates.get(chart);!function updateListeners(chart,state,options){state.listened=loadHooks(options,eventHooks,state.listeners),state.moveListened=!1,state._getElements=getElements,moveHooks.forEach((hook=>{(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a7)(options[hook])&&(state.moveListened=!0)})),state.listened&&state.moveListened||state.annotations.forEach((scope=>{!state.listened&&(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a7)(scope.click)&&(state.listened=!0),state.moveListened||moveHooks.forEach((hook=>{(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a7)(scope[hook])&&(state.listened=!0,state.moveListened=!0)}))}))}(0,state,options),updateElements(chart,state,options,args.mode),state.visibleElements=state.elements.filter((el=>!el.skip&&el.options.display)),function updateHooks(chart,state,options){const visibleElements=state.visibleElements;state.hooked=loadHooks(options,elementHooks,state.hooks),state.hooked||visibleElements.forEach((scope=>{state.hooked||elementHooks.forEach((hook=>{(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a7)(scope.options[hook])&&(state.hooked=!0)}))}))}(0,state,options)},beforeDatasetsDraw(chart,_args,options){draw(chart,"beforeDatasetsDraw",options.clip)},afterDatasetsDraw(chart,_args,options){draw(chart,"afterDatasetsDraw",options.clip)},beforeDraw(chart,_args,options){draw(chart,"beforeDraw",options.clip)},afterDraw(chart,_args,options){draw(chart,"afterDraw",options.clip)},beforeEvent(chart,args,options){handleEvent(chartStates.get(chart),args.event,options)&&(args.changed=!0)},afterDestroy(chart){chartStates.delete(chart)},_getState:chart=>chartStates.get(chart),defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:prop=>!hooks.includes(prop)&&"init"!==prop,annotations:{_allKeys:!1,_fallback:(prop,opts)=>`elements.${annotationTypes[resolveType(opts.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:isIndexable,_fallback:!0},_indexable:isIndexable}},additionalOptionScopes:[""]};function draw(chart,caller,clip){const{ctx,chartArea}=chart,state=chartStates.get(chart);clip&&(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.Y)(ctx,chartArea);const drawableElements=function getDrawableElements(elements,caller){const drawableElements=[];for(const el of elements)if(el.options.drawTime===caller&&drawableElements.push({element:el,main:!0}),el.elements&&el.elements.length)for(const sub of el.elements)sub.options.display&&sub.options.drawTime===caller&&drawableElements.push({element:sub});return drawableElements}(state.visibleElements,caller).sort(((a,b)=>a.element.options.z-b.element.options.z));for(const item of drawableElements)drawElement(ctx,chartArea,state,item);clip&&(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.$)(ctx)}function drawElement(ctx,chartArea,state,item){const el=item.element;item.main?(invokeHook(state,el,"beforeDraw"),el.draw(ctx,chartArea),invokeHook(state,el,"afterDraw")):el.draw(ctx,chartArea)}},"./node_modules/chartjs-plugin-chart2music/dist/plugin.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var AudioNotificationType;__webpack_require__.d(__webpack_exports__,{A:()=>plugin_plugin}),function(AudioNotificationType){AudioNotificationType.Annotation="Annotation"}(AudioNotificationType||(AudioNotificationType={}));const C3=130.8128,G3=195.9977,G4=2*G3;class OscillatorAudioEngine{constructor(context){this._audioContext=context,this._masterCompressor=context.createDynamicsCompressor(),this._masterCompressor.connect(this._audioContext.destination),this._masterCompressor.threshold.value=-50,this._masterCompressor.knee.value=40,this._masterCompressor.ratio.value=12,this._masterCompressor.attack.value=0,this._masterCompressor.release.value=.25,this._masterGain=this._audioContext.createGain(),this._masterGain.gain.value=.5,this._masterCompressor.connect(this._masterGain),this._masterGain.connect(this._audioContext.destination)}get masterGain(){return this._masterGain.gain.value}set masterGain(value){this._masterGain.gain.value=value}playDataPoint(frequency,panning,duration=.2){this._playDataPoint(frequency,panning,duration,this._masterCompressor)}playNotification(notificationType,panning=0,duration=.15){notificationType===AudioNotificationType.Annotation&&this._playAnnotation(panning,duration)}_playDataPoint(frequency,panning,duration,destinationNode){const t=this._audioContext.currentTime,mainFreq=this._audioContext.createOscillator();mainFreq.frequency.value=frequency,mainFreq.start();const{carrier:c1,amp:a1,modulator:m1,filter:f1,adsr:adsr1}=function createOperator(context,carrierFrequency,modulatorFrequency,modulatorDepth){const c=context.createOscillator(),a=context.createGain(),m=context.createOscillator(),f=context.createBiquadFilter(),adsr=context.createGain();return c.frequency.value=carrierFrequency,m.frequency.value=modulatorFrequency,a.gain.value=modulatorDepth,m.connect(a),a.connect(c.frequency),c.connect(f),f.connect(adsr),c.start(),m.start(),{carrier:c,amp:a,modulator:m,filter:f,adsr}}(this._audioContext,.5*frequency,3*frequency,2*frequency);c1.type="triangle",adsr1.gain.setValueCurveAtTime([.2,.1],t,.75*duration),f1.frequency.value=frequency,f1.type="lowpass";const adsr=this._audioContext.createGain();adsr.gain.setValueCurveAtTime([.5,1,.5,.5,.5,.1,1e-4],t,duration);const panner=this._audioContext.createStereoPanner();panner.pan.value=panning,mainFreq.connect(adsr),adsr1.connect(adsr),adsr.connect(panner),panner.connect(destinationNode),setTimeout((()=>{panner.disconnect(),adsr.disconnect(),adsr1.disconnect(),mainFreq.stop(),mainFreq.disconnect(),m1.stop(),m1.disconnect(),c1.stop(),c1.disconnect(),a1.disconnect(),f1.disconnect()}),1e3*duration*2)}_playAnnotation(panning,duration){const panner=this._audioContext.createStereoPanner();panner.pan.value=panning;const gain=this._audioContext.createGain();gain.gain.value=.5,gain.connect(panner),panner.connect(this._masterCompressor),this._playDataPoint(C3,0,duration/4,gain),this._playDataPoint(261.6256,0,duration/4,gain),setTimeout((()=>{this._playDataPoint(G3,0,duration/4,gain),this._playDataPoint(G4,0,duration/4,gain),this._playDataPoint(783.9908,0,duration/4,gain)}),1e3*duration*.25),setTimeout((()=>{this._playDataPoint(C3,0,duration/4,gain),this._playDataPoint(261.6256,0,duration/4,gain)}),1e3*duration*.5),setTimeout((()=>{this._playDataPoint(G3,0,duration/4,gain),this._playDataPoint(G4,0,duration/4,gain),this._playDataPoint(783.9908,0,duration/4,gain)}),1e3*duration*.75),setTimeout((()=>{gain.disconnect()}),1e3*duration*2)}}const HERTZ=[16.3516,17.32391,18.35405,19.44544,20.60172,21.82676,23.12465,24.49971,25.95654,27.5,29.13524,30.86771,32.7032,34.64783,36.7081,38.89087,41.20344,43.65353,46.2493,48.99943,51.91309,55,58.27047,61.73541,65.40639,69.29566,73.41619,77.78175,82.40689,87.30706,92.49861,97.99886,103.8262,110,116.5409,123.4708,130.8128,138.5913,146.8324,155.5635,164.8138,174.6141,184.9972,195.9977,207.6523,220,233.0819,246.9417,261.6256,277.1826,293.6648,311.127,329.6276,349.2282,369.9944,391.9954,415.3047,440,466.1638,493.8833,523.2511,554.3653,587.3295,622.254,659.2551,698.4565,739.9888,783.9909,830.6094,880,932.3275,987.7666,1046.502,1108.731,1174.659,1244.508,1318.51,1396.913,1479.978,1567.982,1661.219,1760,1864.655,1975.533,2093.005,2217.461,2349.318,2489.016,2637.02,2793.826,2959.955,3135.963,3322.438,3520,3729.31,3951.066,4186.009,4434.922,4698.636,4978.032,5274.041,5587.652,5919.911,6271.927,6644.875,7040,7458.62,7902.133],SPEEDS=[1e3,250,100,50,25],keyboardEventToString=e=>`${e.altKey?"Alt+":""}${e.ctrlKey?"Ctrl+":""}${e.shiftKey?"Shift+":""}${e.key}`;class KeyboardEventManager{constructor(target){this._keyMap={},this._target=target,this._target.addEventListener("keydown",(event=>{this._handleKeyEvents(event)})),this._target.hasAttribute("tabIndex")||this._target.setAttribute("tabIndex","0"),this._dialog=null}_handleKeyEvents(event){const keyPress=keyboardEventToString(event);keyPress in this._keyMap?(this._keyMap[keyPress].callback(),event.preventDefault()):keyPress.toUpperCase()in this._keyMap&&(this._keyMap[keyPress.toUpperCase()].callback(),event.preventDefault())}registerKeyEvent({key,callback,title="",description="",force=!1,keyDescription,caseSensitive=!0}){const checkKey=caseSensitive?key:key.toUpperCase();!force&&checkKey in this._keyMap||(this._keyMap[checkKey]={title,description,callback,keyDescription})}registerKeyEvents(keyRegistrationList){keyRegistrationList.forEach((kr=>{this.registerKeyEvent(kr)}))}generateHelpDialog(){const dialog=document.createElement("dialog"),closeButton=document.createElement("button");closeButton.textContent="X",closeButton.ariaLabel="Close",closeButton.style.position="absolute",closeButton.style.top="10px",closeButton.style.right="10px",closeButton.addEventListener("click",(()=>{dialog.close()})),dialog.appendChild(closeButton);const h1=document.createElement("h1");h1.textContent="Keyboard Manager",dialog.setAttribute("aria-live","Keyboard Manager"),dialog.appendChild(h1);const table=document.createElement("table"),tbody=document.createElement("tbody");return Object.entries(this._keyMap).forEach((([keystroke,details])=>{const tr=document.createElement("tr"),th=document.createElement("th");th.scope="row",th.textContent=details.title,tr.appendChild(th);const td1=document.createElement("td");td1.textContent=details.keyDescription??keystroke,tr.appendChild(td1);const td2=document.createElement("td");td2.textContent=details.description,tr.appendChild(td2),tbody.appendChild(tr)})),table.appendChild(tbody),dialog.appendChild(table),dialog}launchHelpDialog(){null===this._dialog&&(this._dialog=this.generateHelpDialog(),document.body.appendChild(this._dialog)),this._dialog.showModal(),this._dialog.focus()}}class ScreenReaderBridge{static addAriaAttributes(element,ariaLive="assertive"){element.setAttribute("aria-live",ariaLive),element.setAttribute("role","status"),element.setAttribute("aria-atomic","true"),element.setAttribute("aria-relevant","additions text")}constructor(captionElement){this._maxNumPaddingCharacters=3,this._numPaddingCharacters=0,this._element=captionElement,this._lastCreatedElement=null}get lastCreatedElement(){return this._lastCreatedElement}clear(){this._element.innerHTML=""}render(text){const paddedText=this._creatPaddedText(text),divElement=document.createElement("div");divElement.textContent=paddedText,divElement.setAttribute(ScreenReaderBridge.ORIGINAL_TEXT_ATTRIBUTE,text),divElement.setAttribute("data-created",Date.now().toString()),this.lastCreatedElement&&(this._removeOldElements(),this.lastCreatedElement.style.display="none"),this._element.appendChild(divElement),this._lastCreatedElement=divElement}_creatPaddedText(text){let padding="";for(let i=0;i<this._numPaddingCharacters;i++)padding+=ScreenReaderBridge.PADDING_CHARACTER;return this._numPaddingCharacters=(this._numPaddingCharacters+1)%this._maxNumPaddingCharacters,text+padding}_removeOldElements(){const curTime=Date.now();Array.from(this._element.children).forEach((kid=>{const time=Number(kid.getAttribute("data-time"));curTime-time>ScreenReaderBridge.REMOVAL_DELAY&&this._element.removeChild(kid)}))}}var SUPPORTED_CHART_TYPES;function isDataPoint(obj){return"object"==typeof obj&&"x"in obj}function isSimpleDataPoint(obj){return isDataPoint(obj)&&"y"in obj}function isAlternateAxisDataPoint(obj){return isDataPoint(obj)&&"y2"in obj}function isHighLowDataPoint(obj){return isDataPoint(obj)&&"high"in obj&&"low"in obj}function isOHLCDataPoint(obj){return isHighLowDataPoint(obj)&&"open"in obj&&"close"in obj}function isBoxDataPoint(obj){return isHighLowDataPoint(obj)&&"q1"in obj&&"q3"in obj&&"median"in obj}ScreenReaderBridge.PADDING_CHARACTER="",ScreenReaderBridge.REMOVAL_DELAY=25,ScreenReaderBridge.ORIGINAL_TEXT_ATTRIBUTE="data-original-text",function(SUPPORTED_CHART_TYPES){SUPPORTED_CHART_TYPES.LINE="line",SUPPORTED_CHART_TYPES.BAR="bar",SUPPORTED_CHART_TYPES.BAND="band",SUPPORTED_CHART_TYPES.PIE="pie",SUPPORTED_CHART_TYPES.CANDLESTICK="candlestick",SUPPORTED_CHART_TYPES.HISTOGRAM="histogram",SUPPORTED_CHART_TYPES.BOX="box",SUPPORTED_CHART_TYPES.MATRIX="matrix",SUPPORTED_CHART_TYPES.SCATTER="scatter",SUPPORTED_CHART_TYPES.TREEMAP="treemap",SUPPORTED_CHART_TYPES.UNSUPPORTED="unsupported"}(SUPPORTED_CHART_TYPES||(SUPPORTED_CHART_TYPES={}));const interpolateBin=(point,min,max,bins,scale)=>"linear"===scale?interpolateBinLinear(point,min,max,bins):interpolateBinLog(point,min,max,bins),interpolateBinLinear=(point,min,max,bins)=>{const pct=(point-min)/(max-min);return Math.floor(bins*pct)},interpolateBinLog=(pointRaw,minRaw,maxRaw,bins)=>{const point=Math.log10(pointRaw),min=Math.log10(minRaw),pct=(point-min)/(Math.log10(maxRaw)-min);return Math.floor(bins*pct)},calcPan=pct=>isNaN(pct)?0:.98*(2*pct-1),isNotNull=tmp=>null!==tmp,calculateAxisMinimum=(data,prop,filterGroupIndex)=>{let dataToProcess=data.flat().filter(isNotNull);filterGroupIndex>=0&&filterGroupIndex<data.length&&(dataToProcess=data[filterGroupIndex]);const values=dataToProcess.map((point=>{if(isSimpleDataPoint(point)){if("x"===prop||"y"===prop)return point[prop]}else if(isAlternateAxisDataPoint(point)){if("x"===prop||"y2"===prop)return point[prop]}else if(isOHLCDataPoint(point)){if("x"===prop)return point.x;if("y"===prop)return Math.min(point.high,point.low,point.open,point.close)}else if(isHighLowDataPoint(point)){if("x"===prop)return point.x;if("y"===prop)return Math.min(point.high,point.low)}return NaN})).filter((num=>!isNaN(num)));return 0===values.length?NaN:Math.min(...values)},calculateAxisMaximum=(data,prop,filterGroupIndex)=>{let dataToProcess=data.flat().filter(isNotNull);filterGroupIndex>=0&&filterGroupIndex<data.length&&(dataToProcess=data[filterGroupIndex]);const values=dataToProcess.map((point=>{if(isSimpleDataPoint(point)){if("x"===prop||"y"===prop)return point[prop]}else if(isAlternateAxisDataPoint(point)){if("x"===prop||"y2"===prop)return point[prop]}else if(isOHLCDataPoint(point)){if("x"===prop)return point.x;if("y"===prop)return Math.max(point.high,point.low,point.open,point.close)}else if(isHighLowDataPoint(point)){if("x"===prop)return point.x;if("y"===prop)return Math.max(point.high,point.low)}return NaN})).filter((num=>!isNaN(num)));return 0===values.length?NaN:Math.max(...values)},defaultFormat=value=>`${value}`,sentenceCase=str=>`${str.substring(0,1).toUpperCase()}${str.substring(1).toLowerCase()}`,initializeAxis=(data,axisName,userAxis,filterGroupIndex)=>{const format=userAxis?.format??("valueLabels"in userAxis?index=>userAxis.valueLabels[index]:defaultFormat);return{minimum:userAxis?.minimum??calculateAxisMinimum(data,axisName,filterGroupIndex),maximum:userAxis?.maximum??calculateAxisMaximum(data,axisName,filterGroupIndex),label:userAxis?.label??"",type:userAxis?.type??"linear",format,continuous:userAxis.continuous??!1}},detectDataPointType=query=>"number"==typeof query?"number":"object"!=typeof query?"unknown":isSimpleDataPoint(query)?"SimpleDataPoint":isAlternateAxisDataPoint(query)?"AlternativeAxisDataPoint":isOHLCDataPoint(query)?"OHLCDataPoint":isBoxDataPoint(query)?"BoxDataPoint":isHighLowDataPoint(query)?"HighLowDataPoint":"unknown",convertDataRow=row=>null===row?null:row.map(((point,index)=>"number"==typeof point?{x:index,y:point}:point)),formatWrapper=axis=>num=>isNaN(num)?"missing":axis.minimum&&num<axis.minimum?"too low":axis.maximum&&num>axis.maximum?"too high":axis.format(num),axisDescriptions={x:"X",y:"Y",y2:"Alternate Y"},generateAxisSummary=(axisLetter,axis)=>`${axisDescriptions[axisLetter]} is "${axis.label??""}" from ${axis.format(axis.minimum)} to ${axis.format(axis.maximum)}${"log10"===axis.type?" logarithmic":""}${"x"===axisLetter&&axis.continuous?" continuously":""}.`,isUnplayable=(yValue,yAxis)=>isNaN(yValue)||yValue<yAxis.minimum||yValue>yAxis.maximum,filteredJoin=(arr,joiner)=>arr.filter((item=>Boolean(item))).join(joiner),validateInputType=type=>{if(void 0===type)return`Required parameter 'type' was left undefined. Supported types are: ${Object.values(SUPPORTED_CHART_TYPES).join(", ")}`;if(Array.isArray(type)){const unsupported_types=type.filter((str=>!Object.values(SUPPORTED_CHART_TYPES).includes(str)));return 0===unsupported_types.length?"":`Invalid input types: ${unsupported_types.join(", ")}. Valid types are: ${Object.values(SUPPORTED_CHART_TYPES).join(", ")}`}return Object.values(SUPPORTED_CHART_TYPES).includes(type)?"":`Invalid input type: ${type}. Valid types are: ${Object.values(SUPPORTED_CHART_TYPES).join(", ")}`},validateInputTypeCountsMatchData=(type,data)=>{if(!Array.isArray(type))return"";const keys=Object.keys(data);return type.length===keys.length?"":`Error: Number of types (${type.length}) and number of data groups (${keys.length}) don't match.`},validateInputElement=element=>void 0===element?"Required parameter 'element' was left undefined. An HTMLElement or SVGElement must be provided for this parameter.":element instanceof HTMLElement||element instanceof SVGElement?"":"Provided value for 'element' must be an instance of HTMLElement or SVGElement.",valid_axis_types=["linear","log10"],validateInputAxes=axes=>{if(void 0===axes)return"";const supportedAxis=["x","y","y2"],unsupportedAxes=Object.keys(axes).filter((axis=>!supportedAxis.includes(axis)));if(unsupportedAxes.length>0)return`Unsupported axes were included: ${unsupportedAxes.join(", ")}. The only supported axes are: ${supportedAxis.join(", ")}.`;for(const axis in axes){const thisAxis=axes[axis];if("string"==typeof thisAxis.type&&!valid_axis_types.includes(thisAxis.type))return`Axis ${axis} has an unsupported axis type "${thisAxis.type}". Valid axis types are: ${valid_axis_types.join(", ")}.`;if("log10"===thisAxis.type&&(0===thisAxis.minimum||0===thisAxis.maximum))return`Axis ${axis} has type "log10", but has a minimum or maximum value of 0. No values <= 0 are supported for logarithmic axes.`}return""},validateInputDataHomogeneity=data=>{if(Array.isArray(data))return validateInputDataRowHomogeneity(data);for(const key in data){if(null===data[key])continue;const result=validateInputDataRowHomogeneity(data[key]);if(""!==result)return`Error for data category ${key}: ${result}`}return""},validateInputDataRowHomogeneity=row=>{const first=row[0];if("number"==typeof first){const failure=row.findIndex((cell=>!("number"==typeof cell)));return-1===failure?"":`The first item is a number, but item index ${failure} is not (value: ${JSON.stringify(row[failure])}). All items should be of the same type.`}if(first.x instanceof Date)return"The first item is a date, which is not a supported format type. Please re-submit with the ms version of the date. For example: `myDate.valueOf()`.";if(isSimpleDataPoint(first)){const failure=row.findIndex((cell=>!isSimpleDataPoint(cell)));return-1===failure?"":`The first item is a simple data point (x/y), but item index ${failure} is not (value: ${JSON.stringify(row[failure])}). All items should be of the same type.`}if(isAlternateAxisDataPoint(first)){const failure=row.findIndex((cell=>!isAlternateAxisDataPoint(cell)));return-1===failure?"":`The first item is an alternate axis data point (x/y2), but item index ${failure} is not (value: ${JSON.stringify(row[failure])}). All items should be of the same type.`}if(isOHLCDataPoint(first)){const failure=row.findIndex((cell=>!isOHLCDataPoint(cell)));return-1===failure?"":`The first item is an OHLC data point (x/open/high/low/close), but item index ${failure} is not (value: ${JSON.stringify(row[failure])}). All items should be of the same type.`}if(isBoxDataPoint(first)){const failure=row.findIndex((cell=>!isBoxDataPoint(cell)));if(failure>=0)return`The first item is a box data point (x/low/q1/median/q3/high), but item index ${failure} is not (value: ${JSON.stringify(row[failure])}). All items should be of the same type.`;const nonArray=row.findIndex((cell=>"outlier"in cell&&!Array.isArray(cell.outlier)));if(nonArray>=0)return`At least one box provided an outlier that was not an array. An outliers should be an array of numbers. The box is question is: ${JSON.stringify(row[nonArray])}`;const nonArrayNumber=row.findIndex((cell=>"outlier"in cell&&cell.outlier.findIndex((o=>"number"!=typeof o))>=0));return nonArrayNumber>=0?`At least one box has a non-numeric outlier. Box outliers must be an array of numbers. The box in question is: ${JSON.stringify(row[nonArrayNumber])}`:""}if(isHighLowDataPoint(first)){const failure=row.findIndex((cell=>!isHighLowDataPoint(cell)));return-1===failure?"":`The first item is a high low data point (x/high/low), but item index ${failure} is not (value: ${JSON.stringify(row[failure])}). All items should be of the same type.`}return`The first item is of an unrecognized type (value: ${JSON.stringify(first)}). Supported types are: number, simple data point (x/y), alternative axis data point (x/y2), and high low data point (x/high/low).`},validateCornerCases=input=>input.element instanceof HTMLImageElement&&void 0===input.cc?"Error: If the target element is an IMG element, a CC property must be specified.":"",validateHierarchyReferences=(data,options={})=>{const{root}=options;if(!root)return"";if(Array.isArray(data))return`Unexpected data structure. options.root="${root}", but "${root}" is not a key in data.\n        Data is: ${JSON.stringify(data).replace(/^.{0,100}(.+)$/,"...")}`;const groupNames=Object.keys(data);if(!groupNames.includes(root))return`Root points to group '${root}', but that group doesn't exist. Valid root values are: ${groupNames.join(", ")}.`;const groups=Object.values(data);for(let groupIndex=0;groupIndex<groups.length;groupIndex++){const group=groups[groupIndex],groupName=groupNames[groupIndex],omitter=n=>n!==groupName&&n!==root;if(Array.isArray(group))for(let cell=0;cell<group.length;cell++){if("object"!=typeof group[cell])continue;const{children}=group[cell];if(children){if("string"!=typeof children)return`Error: Group '${groupName}', point index ${cell}: Expected property 'children' to be of type string. Instead, it was of type '${typeof children}'.`;if(!groupNames.includes(children))return`Error: Group '${groupName}', point index ${cell}: Property 'children' has value '${children}'. Unfortunately, that is not a valid value. Valid values are: ${groupNames.filter(omitter).join(", ")}.`;if(children===groupName)return`Error: Group '${groupName}', point index ${cell}: Property 'children' has value '${children}'. Unfortunately, children are not allowed to refer to their own group. Valid values are: ${groupNames.filter(omitter).join(", ")}.`;if(children===root)return`Error: Group '${groupName}', point index ${cell}: Property 'children' is pointing to the root value, which is invalid. Valid values are: ${groupNames.filter(omitter).join(", ")}.`}}}return""};var ActionSet;!function(ActionSet){ActionSet.NEXT_POINT="next_point",ActionSet.PREVIOUS_POINT="previous_point",ActionSet.PLAY_RIGHT="play_right",ActionSet.PLAY_LEFT="play_left",ActionSet.PLAY_FORWARD_CATEGORY="play_forward_category",ActionSet.PLAY_BACKWARD_CATEGORY="play_backward_category",ActionSet.STOP_PLAY="stop_play",ActionSet.PREVIOUS_STAT="previous_stat",ActionSet.NEXT_STAT="next_stat",ActionSet.PREVIOUS_CATEGORY="previous_category",ActionSet.NEXT_CATEGORY="next_category",ActionSet.FIRST_CATEGORY="first_category",ActionSet.LAST_CATEGORY="last_category",ActionSet.FIRST_POINT="first_point",ActionSet.LAST_POINT="last_point",ActionSet.REPLAY="replay",ActionSet.SELECT="select",ActionSet.PREVIOUS_TENTH="previous_tenth",ActionSet.NEXT_TENTH="next_tenth",ActionSet.GO_MINIMUM="go_minimum",ActionSet.GO_MAXIMUM="go_maximum",ActionSet.GO_TOTAL_MINIMUM="go_total_minimum",ActionSet.GO_TOTAL_MAXIMUM="go_total_maximum",ActionSet.DRILL_DOWN="drill_down",ActionSet.DRILL_UP="drill_up",ActionSet.GO_TO_ROOT="go_to_root",ActionSet.SPEED_UP="speed_up",ActionSet.SLOW_DOWN="slow_down",ActionSet.MONITOR="monitor",ActionSet.HELP="help",ActionSet.OPTIONS="options",ActionSet.INFO="info"}(ActionSet||(ActionSet={}));let context=null;const c2mChart=input=>{const validationErrorString=(input=>{const errors=[];return errors.push(validateInputType(input.type)),errors.push(validateInputElement(input.element)),errors.push(validateInputAxes(input.axes)),errors.push(validateInputDataHomogeneity(input.data)),errors.push(validateCornerCases(input)),errors.push(validateHierarchyReferences(input.data,input.options)),errors.push(validateInputTypeCountsMatchData(input.type,input.data)),errors.filter((str=>""!==str)).join("\n")})(input);return""!==validationErrorString?{err:validationErrorString}:{err:null,data:new c2m(input)}};class c2m{constructor(input){var elem,title;(this._visible_group_indices=[],this._visibleGroupIndex=0,this._pointIndex=0,this._playListInterval=null,this._playListContinuous=[],this._speedRateIndex=1,this._flagNewLevel=!1,this._flagNewStat=!1,this._audioEngine=null,this._options={enableSound:!0,enableSpeech:!0,live:!1,hertzes:HERTZ,stack:!1,root:null},this._monitorMode=!1,this._explicitAxes={},this._hertzClamps={upper:HERTZ.length-12,lower:21},this._silent=!1,this._outlierIndex=0,this._outlierMode=!1,this._announcePointLabelFirst=!1,this._info={},this._hierarchy=!1,this._hierarchyRoot=null,this._hierarchyBreadcrumbs=[],[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some((toMatchItem=>navigator.userAgent.match(toMatchItem))))||(this._type=input.type,this._providedAudioEngine=input.audioEngine,this._title=input.title??"",this._chartElement=input.element,this._info=input.info??{},elem=this._chartElement,title=this._title,elem.hasAttribute("alt")||elem.hasAttribute("aria-label")||elem.setAttribute("aria-label",`${title}, Sonified chart`),elem.hasAttribute("role")||elem.setAttribute("role","application"),this._ccElement=input.cc??this._chartElement,input?.options&&(this._type===SUPPORTED_CHART_TYPES.SCATTER&&(this._options.stack=!0),this._options={...this._options,...input?.options},input.options.hertzes&&(this._hertzClamps={upper:input.options.hertzes.length-1,lower:0})),this._setData(input.data,input.axes),this._options.root&&(this._hierarchy=!0,this._hierarchyRoot=this._options.root,this._updateToNewLevel(this._groups.indexOf(this._hierarchyRoot))),this._generateSummary(),ScreenReaderBridge.addAriaAttributes(this._ccElement),this._sr=new ScreenReaderBridge(this._ccElement),this._availableActions=this._initializeActionMap(),this._initializeKeyActionMap(),this._startListening())}get _groupIndex(){return this._visible_group_indices[this._visibleGroupIndex]}get _currentGroupType(){return Array.isArray(this._type)?this._type[this._visibleGroupIndex]:this._type}get _currentDataRow(){return this._data[this._groupIndex]}get _movementAvailable(){return null!==this._currentDataRow}get currentPoint(){return null===this._currentDataRow?null:this._currentDataRow[this._pointIndex]}get _currentGroupName(){return this._groups[this._groupIndex]}_clearPlay(){clearInterval(this._playListInterval),this._playListContinuous.forEach((item=>{clearTimeout(item)})),this._playListContinuous=[]}_initializeActionMap(){return{next_point:()=>{this._clearPlay(),this._movementAvailable&&this._moveRight()&&this._playAndSpeak()},previous_point:()=>{this._clearPlay(),this._movementAvailable&&this._moveLeft()&&this._playAndSpeak()},drill_down:()=>{this._clearPlay(),this._drillDown()&&this._playAndSpeak()},drill_up:()=>{this._clearPlay(),this._drillUp()&&this._playAndSpeak()},go_to_root:()=>{this._clearPlay(),this._drillToRoot()&&this._playAndSpeak()},play_right:()=>{this._clearPlay(),this._movementAvailable&&this._playRight()},play_left:()=>{this._clearPlay(),this._movementAvailable&&this._playLeft()},play_forward_category:()=>{if(this._clearPlay(),!this._movementAvailable)return;const max=this._visible_group_indices.length-1;this._playListInterval=setInterval((()=>{this._visibleGroupIndex>=max?(this._visibleGroupIndex=max,this._clearPlay()):(this._visibleGroupIndex++,this._playCurrent())}),SPEEDS[this._speedRateIndex]),this._playCurrent()},play_backward_category:()=>{if(this._clearPlay(),!this._movementAvailable)return;this._playListInterval=setInterval((()=>{this._visibleGroupIndex<=0?(this._visibleGroupIndex=0,this._clearPlay()):(this._visibleGroupIndex--,this._playCurrent())}),SPEEDS[this._speedRateIndex]),this._playCurrent()},stop_play:()=>{this._clearPlay()},previous_stat:()=>{this._clearPlay(),this._movementAvailable&&this._movePrevStat()&&(this._flagNewStat=!0,this._playAndSpeak())},next_stat:()=>{this._clearPlay(),this._movementAvailable&&this._moveNextStat()&&(this._flagNewStat=!0,this._playAndSpeak())},previous_category:()=>{if(this._clearPlay(),0===this._visibleGroupIndex)return;const currentX=this.currentPoint?.x??this._pointIndex;this._visibleGroupIndex--,this._announceCategoryChange(),this._cleanupAfterCategoryChange(currentX)},next_category:()=>{if(this._clearPlay(),this._visibleGroupIndex===this._visible_group_indices.length-1)return;const currentX=this.currentPoint.x;this._visibleGroupIndex++,this._announceCategoryChange(),this._cleanupAfterCategoryChange(currentX)},first_category:()=>{this._clearPlay(),this._visibleGroupIndex=0,this._playAndSpeak()},last_category:()=>{this._clearPlay(),this._visibleGroupIndex=this._visible_group_indices.length-1,this._playAndSpeak()},first_point:()=>{this._clearPlay(),this._movementAvailable&&(this._pointIndex=0,this._playAndSpeak())},last_point:()=>{this._clearPlay(),this._movementAvailable&&(this._pointIndex=this._currentDataRow.length-1,this._playAndSpeak())},replay:()=>{this._clearPlay(),this._movementAvailable&&(this._flagNewStat=!0,this._playAndSpeak())},select:()=>{this._movementAvailable&&this._options.onSelectCallback?.({slice:this._currentGroupName,index:this._pointIndex,point:this.currentPoint})},previous_tenth:()=>{this._clearPlay(),this._movementAvailable&&(this._moveLeftTenths(),this._playAndSpeak())},next_tenth:()=>{this._clearPlay(),this._movementAvailable&&(this._moveRightTenths(),this._playAndSpeak())},go_minimum:()=>{this._clearPlay(),this._movementAvailable&&this._moveToMinimum()&&this._playAndSpeak()},go_maximum:()=>{this._clearPlay(),this._movementAvailable&&this._moveToMaximum()&&this._playAndSpeak()},go_total_maximum:()=>{this._clearPlay();const winner=this._metadataByGroup.filter(((g,index)=>this._visible_group_indices.includes(index))).reduce(((previousValue,currentValue)=>previousValue.maximumValue>currentValue.maximumValue?previousValue:currentValue));winner&&(this._visibleGroupIndex=this._visible_group_indices.indexOf(winner.index),this._pointIndex=winner.maximumPointIndex,this._playAndSpeak())},go_total_minimum:()=>{this._clearPlay();const winner=this._metadataByGroup.filter(((g,index)=>this._visible_group_indices.includes(index))).reduce(((previousValue,currentValue)=>previousValue.minimumValue<currentValue.minimumValue?previousValue:currentValue));winner&&(this._visibleGroupIndex=this._visible_group_indices.indexOf(winner.index),this._pointIndex=winner.minimumPointIndex,this._playAndSpeak())},speed_up:()=>{this._clearPlay(),this._speedRateIndex<SPEEDS.length-1&&this._speedRateIndex++,this._sr.render(`Speed, ${SPEEDS[this._speedRateIndex]}`)},slow_down:()=>{this._clearPlay(),this._speedRateIndex>0&&this._speedRateIndex--,this._sr.render(`Speed, ${SPEEDS[this._speedRateIndex]}`)},monitor:()=>{this._options.live?(this._monitorMode=!this._monitorMode,this._sr.render("Monitoring "+(this._monitorMode?"on":"off"))):this._sr.render("Not a live chart")},help:()=>{this._clearPlay(),this._keyEventManager.launchHelpDialog()},options:()=>{this._checkAudioEngine(),(({upper,lower,speedIndex,continuousMode,labelPosition},cb,playCb)=>{const dialog=document.createElement("dialog");dialog.setAttribute("aria-label","Options"),dialog.innerHTML=`<h1>Options</h1>\n\n    <p tabIndex="0">While navigating this chart, you may find some sounds too low or too high to hear. Alternatively, you may want to expand the range of the sounds available. Use these sliders to adjust the range of sound:</p>\n\n    <form id="optionForm">\n        <div>\n            <label>\n                Lower hertz:\n                <input type="range" min="0" max="${upper-1}" step="1" id="lowerRange" value="${lower}" />\n            </label>\n        </div>\n\n        <div>\n            <label>\n                Upper hertz:\n                <input type="range" min="${lower+1}" max="${HERTZ.length-1}" step="1" id="upperRange" value="${upper}" />\n            </label>\n        </div>\n\n        <div>\n            <label>\n                Play speed (aka, press 'Q' and 'E'):\n                <input type="range" min="0" max="4" id="speedRange" value="${speedIndex}" />\n            </label>\n        </div>\n\n        <div>\n            <label>\n                <input type="checkbox" id="global" checked />\n                Save my options for other charts on this page\n            </label>\n        </div>\n\n        <div>\n            <label>\n                <input type="checkbox" id="continuous" ${continuousMode?"checked":""} />\n                Use continuous mode\n            </label>\n            <br/>\n            Continuous mode changes how values are played when you press Shift+Home and Shift+End\n        </div>\n\n        <div>\n                <fieldset>\n                    <legend>Show point labels</legend>\n\n                    <label>\n                        <input type="radio" name="point-labels" value="before" ${labelPosition?"checked":""} />\n                        before values (eg: "California, 163,696 square miles, 39 million people" )\n                    </label>\n                    \n                    <br/>\n\n                    <label>\n                        <input type="radio" name="point-labels" value="after" ${labelPosition?"":"checked"} />\n                        after values (eg: "163,696 square miles, 39 million people, California" )\n                    </label>\n                </fieldset>\n        </div>\n\n        <input id="save" type="submit" value="Save" />\n    </form>\n    `;const lowerRange=dialog.querySelector("#lowerRange"),upperRange=dialog.querySelector("#upperRange"),speedRange=dialog.querySelector("#speedRange"),global=dialog.querySelector("#global"),continuous=dialog.querySelector("#continuous"),save=()=>{const lowerValue=Number(lowerRange.value),upperValue=Number(upperRange.value),speedIndex=Number(speedRange.value),saveGlobal=global.checked,continuousChecked=continuous.checked,labelPosition="before"===dialog.querySelector("input[name='point-labels']:checked").value;cb(lowerValue,upperValue,speedIndex,continuousChecked,labelPosition),window&&saveGlobal&&(window.__chart2music_options__||(window.__chart2music_options__={}),window.__chart2music_options__={_hertzClamps:{lower:lowerValue,upper:upperValue}}),dialog.close()};Array.from(dialog.querySelectorAll("input")).forEach((elem=>{elem.addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),save())}))})),dialog.querySelector("#optionForm").addEventListener("submit",(e=>{e.preventDefault(),save()})),dialog.querySelector("#save").addEventListener("click",(e=>{e.preventDefault(),save()})),playCb&&(lowerRange.addEventListener("change",(()=>{playCb(Number(lowerRange.value)),upperRange.min=String(Number(lowerRange.value)+1)})),upperRange.addEventListener("change",(()=>{playCb(Number(upperRange.value)),lowerRange.max=String(Number(upperRange.value)-1)}))),document.body.appendChild(dialog),dialog.showModal(),dialog.focus(),dialog.addEventListener("close",(()=>{dialog.parentElement.removeChild(dialog)}))})({...this._hertzClamps,speedIndex:this._speedRateIndex,continuousMode:this._xAxis.continuous,labelPosition:this._announcePointLabelFirst},((lowerIndex,upperIndex,speedIndex,continuousMode,labelPosition)=>{this._setHertzClamps(lowerIndex,upperIndex),this._speedRateIndex!==speedIndex&&(this._speedRateIndex=speedIndex,this._sr.render(`Speed, ${SPEEDS[this._speedRateIndex]}`)),this._xAxis.continuous!==continuousMode&&(this._xAxis.continuous=continuousMode,this._generateSummary()),this._announcePointLabelFirst=labelPosition}),(hertzIndex=>{this._audioEngine?.playDataPoint(this._options.hertzes[hertzIndex],0,.25)}))},info:()=>{(info=>{const dialog=document.createElement("dialog");dialog.setAttribute("aria-label","Info");let content="<h1 tabIndex='0'>Info</h1>";"notes"in info&&(content+=`<h2>Notes</h2>\n\n        <ul>\n            ${info.notes.map((str=>`<li>${(str=>str.replace(/./gm,(function(s){return s.match(/[a-z0-9\s]+/i)?s:`&#${s.charCodeAt(0)};`})))(str)}</li>`)).join("")}\n        </ul>`),dialog.innerHTML=content,document.body.appendChild(dialog),dialog.showModal(),dialog.focus(),dialog.addEventListener("close",(()=>{dialog.parentElement.removeChild(dialog)}))})(this._info)}}}_cleanupAfterCategoryChange(previousX){if(null!==this._currentDataRow){if(this._xAxis.continuous&&(!this.currentPoint||this.currentPoint.x!==previousX)){const differences=this._currentDataRow.map((({x})=>Math.abs(previousX-x))),smallestDifference=Math.min(...differences),closestIndex=differences.indexOf(smallestDifference);this._pointIndex=closestIndex}this._pointIndex>=this._currentDataRow.length&&(this._pointIndex=this._currentDataRow.length-1)}}_generateSummary(){this._chartSummary=(({title,groupCount,live=!1,hierarchy=!1})=>{const text=["Sonified"];return live&&text.push("live"),hierarchy&&text.push("hierarchical"),text.push("chart"),groupCount>1&&text.push(`with ${groupCount} groups`),title.length>0&&text.push(`titled "${title}"`),text.join(" ")+"."})({title:this._title,groupCount:this._visible_group_indices.length,live:this._options.live,hierarchy:this._hierarchy}),this._instructions=(({hierarchy,live,hasNotes})=>{const info=[filteredJoin(["Use arrow keys to navigate.",hierarchy&&"Use Alt + Up and Down to navigate between levels.",live&&"Press M to toggle monitor mode.","Press H for more hotkeys."]," ")];return hasNotes&&info.unshift("Has notes."),info.join(" ")})({live:this._options.live,hierarchy:this._hierarchy,hasNotes:this._info?.notes?.length>0})}_buildStackBar(){const freqTable={};this._data.forEach((row=>{row.forEach((cell=>{isSimpleDataPoint(cell)&&(cell.x in freqTable||(freqTable[cell.x]=0),freqTable[cell.x]+=cell.y)}))}));const newRow=Object.entries(freqTable).map((([x,y])=>({x:Number(x),y})));this._data.unshift(newRow),this._groups.unshift("All"),this._visible_group_indices.push(this._groups.length-1)}_buildStackScatter(){const newGroup=this._data.flat();this._data.unshift(newGroup),this._groups.unshift("All"),this._visible_group_indices.push(this._groups.length-1)}_setData(data,axes){if(this._explicitAxes={x:{...this._explicitAxes.x??{},...axes?.x??{}},y:{...this._explicitAxes.y??{},...axes?.y??{}},y2:{...this._explicitAxes.y2??{},...axes?.y2??{}}},this._initializeData(data),this._options.stack&&this._data.length>1&&(this._type===SUPPORTED_CHART_TYPES.SCATTER?this._buildStackScatter():this._buildStackBar()),this._xAxis=initializeAxis(this._data,"x",this._explicitAxes.x,this._groups.indexOf(this._options.root)),this._yAxis=initializeAxis(this._data,"y",this._explicitAxes.y,this._groups.indexOf(this._options.root)),((data,axisName)=>void 0!==data.filter(isNotNull).find((row=>row.find((point=>axisName in point)))))(this._data,"y2")&&(this._y2Axis=initializeAxis(this._data,"y2",this._explicitAxes.y2)),this._type!==SUPPORTED_CHART_TYPES.SCATTER||"continuous"in this._explicitAxes.x||(this._xAxis.continuous=!0),this._xAxis.continuous&&this._data.forEach(((row,index)=>{this._data[index]=row.sort(((a,b)=>{if(a.x<b.x)return-1;if(a.x>b.x)return 1;if("y"in a&&"y"in b){if(a.y<b.y)return-1;if(a.y>b.y)return 1}return 0}))})),this._info.annotations?.length>0){const annos=this._info.annotations.map((({x,label})=>({x,label,y:NaN,type:"annotation",custom:{datasetIndex:0,index:0}})));this._data.forEach(((group,i)=>{annos.forEach((a=>{const index=group.findIndex((g=>g.x>=a.x));-1!==index?0!==index?this._data[i].splice(index,0,a):this._data[i].unshift(a):this._data[i].push(a)}))}))}this._metadataByGroup=(data=>data.map(((row,index)=>{if(null===row)return{index,minimumPointIndex:null,maximumPointIndex:null,minimumValue:NaN,maximumValue:NaN,tenths:NaN,availableStats:[],statIndex:-1,inputType:null,size:0};let yValues=[],availableStats=[];isSimpleDataPoint(row[0])?yValues=row.map((({y})=>y)):isAlternateAxisDataPoint(row[0])?yValues=row.map((({y2})=>y2)):isOHLCDataPoint(row[0])?availableStats=["open","high","low","close"]:isBoxDataPoint(row[0])?availableStats=["high","q3","median","q1","low","outlier"]:isHighLowDataPoint(row[0])&&(availableStats=["high","low"]);const filteredYValues=yValues.filter((num=>!isNaN(num))),[min,max]=filteredYValues.length>0?[Math.min(...filteredYValues),Math.max(...filteredYValues)]:[-1,-1],tenths=Math.round(row.length/10);return{index,minimumPointIndex:yValues.indexOf(min),maximumPointIndex:yValues.indexOf(max),minimumValue:min,maximumValue:max,tenths,availableStats,statIndex:-1,inputType:detectDataPointType(row[0]),size:row.length}})))(this._data),this._metadataByGroup=((metadataByGroup,data)=>{if(Array.isArray(data)&&"number"==typeof data[0])metadataByGroup[0].inputType="number";else{let index=0;for(const group in data)null!==data[group]&&"number"===detectDataPointType(data[group][0])&&(metadataByGroup[index].inputType="number"),index++}return metadataByGroup})(this._metadataByGroup,data),this._generateSummary()}setData(data,axes,pointIndex,groupName){const currentStat=this.getCurrent().stat;this._setData(data,axes),this._pointIndex=Math.min(Math.max(pointIndex??0,0),this._data[0].length-1),this._visibleGroupIndex=this._visible_group_indices[Math.max(this._groups.indexOf(groupName),0)],""!==currentStat&&(this._metadataByGroup[this._groupIndex].statIndex=Math.max(0,this._metadataByGroup[this._groupIndex].availableStats.indexOf(currentStat))),this._sr.render(`${this._title||"Chart"} updated`)}setCategoryVisibility(name,state){const groupIndex=this._groups.indexOf(name);if(-1===groupIndex)return`Unknown group named "${name}". Available groups are: "${this._groups.join('", "')}".`;const visibleGroupIndex=this._visible_group_indices.indexOf(groupIndex);if(state)this._visible_group_indices.includes(groupIndex)||(this._visible_group_indices.push(groupIndex),this._visible_group_indices.sort(),this._sr.render(`${this._title||"Chart"} updated`));else if(this._visible_group_indices.includes(groupIndex)){if(1===this._visible_group_indices.length)return`Group "${name}" can not be hidden. It is the last visible group, and there must always be at least one group visible.`;this._visible_group_indices.splice(this._visible_group_indices.indexOf(groupIndex),1),this._sr.render(`${this._title||"Chart"} updated`)}return this._visibleGroupIndex>=this._visible_group_indices.length&&(this._visibleGroupIndex=this._visible_group_indices.length-1),this._visibleGroupIndex===visibleGroupIndex&&(this._silent=!0,this._availableActions.previous_category(),visibleGroupIndex>0&&this._availableActions.next_category(),this._silent=!1),""}getCurrent(){const{statIndex,availableStats}=this._metadataByGroup[this._groupIndex];return{index:this._pointIndex,group:this._currentGroupName,point:this.currentPoint,stat:availableStats[statIndex]??""}}_shrinkToMaxWidth(){if(void 0===this._options.maxWidth)return;let recalculateX=!1,recalculateY=!1,recalculateY2=!1;for(let i=0;i<this._data.length;i++){if(this._data[i].length<=this._options.maxWidth)continue;const tmp=this._data[i].shift();this._pointIndex--,this._xAxis.minimum!==tmp.x&&this._xAxis.maximum!==tmp.x||(recalculateX=!0),recalculateY=!0,isAlternateAxisDataPoint(tmp)&&(recalculateY2=!0);"number"===this._metadataByGroup[i].inputType&&this._data[i].forEach(((item,index)=>{this._data[i][index].x=index}))}recalculateX&&(this._xAxis.minimum=calculateAxisMinimum(this._data,"x"),this._xAxis.maximum=calculateAxisMaximum(this._data,"x")),recalculateY&&(this._yAxis.minimum=calculateAxisMinimum(this._data,"y"),this._yAxis.maximum=calculateAxisMaximum(this._data,"y")),recalculateY2&&(this._y2Axis.minimum=calculateAxisMinimum(this._data,"y2"),this._y2Axis.maximum=calculateAxisMaximum(this._data,"y2")),this._pointIndex<0&&(this._pointIndex=0)}appendData(dataPoint,group){const groupIndex=group?this._groups.indexOf(group):0;if(-1===groupIndex)return{err:`Error adding data to unknown group name "${group}". ${1===this._groups.length?"There are no group names.":`Valid groups: ${this._groups.join(", ")}`} `};const addedType=detectDataPointType(dataPoint),targetType=this._metadataByGroup[groupIndex].inputType;if(addedType!==targetType)return{err:`Mismatched type error. Trying to add data of type ${addedType} to target data of type ${targetType}.`};const newDataPoint="number"==typeof dataPoint?{x:this._data[groupIndex].length,y:dataPoint}:dataPoint;if(this._data[groupIndex].push(newDataPoint),this._xAxis.maximum=Math.max(this._xAxis.maximum,newDataPoint.x),isSimpleDataPoint(newDataPoint)?(this._yAxis.maximum=Math.max(this._yAxis.maximum,newDataPoint.y),this._yAxis.minimum=Math.min(this._yAxis.minimum,newDataPoint.y)):isOHLCDataPoint(newDataPoint)?(this._yAxis.maximum=Math.max(this._yAxis.maximum,newDataPoint.open,newDataPoint.high,newDataPoint.low,newDataPoint.close),this._yAxis.minimum=Math.min(this._yAxis.minimum,newDataPoint.open,newDataPoint.high,newDataPoint.low,newDataPoint.close)):isHighLowDataPoint(newDataPoint)&&(this._yAxis.maximum=Math.max(this._yAxis.maximum,newDataPoint.high,newDataPoint.low),this._yAxis.minimum=Math.min(this._yAxis.minimum,newDataPoint.high,newDataPoint.low)),this._monitorMode){const{statIndex,availableStats}=this._metadataByGroup[groupIndex];this._playDataPoint(newDataPoint,statIndex,availableStats)}return this._shrinkToMaxWidth(),{err:null,data:newDataPoint}}_initializeKeyActionMap(){this._keyEventManager=new KeyboardEventManager(this._chartElement),this._keyEventManager.registerKeyEvents([{title:"Go to next point",key:"ArrowRight",callback:this._availableActions.next_point},{title:"Go to previous point",key:"ArrowLeft",callback:this._availableActions.previous_point},{title:"Play right",key:"Shift+End",callback:this._availableActions.play_right},{title:"Play left",key:"Shift+Home",callback:this._availableActions.play_left},{title:"Cancel play",key:"Ctrl+Control",keyDescription:"Control",callback:this._availableActions.stop_play},this._type===SUPPORTED_CHART_TYPES.MATRIX?{title:"Go to previous group",key:"ArrowUp",callback:this._availableActions.previous_category}:{title:"Navigate to previous statistic",key:"ArrowUp",callback:this._availableActions.previous_stat},this._type===SUPPORTED_CHART_TYPES.MATRIX?{title:"Go to next group",key:"ArrowDown",callback:this._availableActions.next_category}:{title:"Navigate to next statistic",key:"ArrowDown",callback:this._availableActions.next_stat},!this._hierarchy&&{title:"Go to previous group",key:"PageUp",callback:this._availableActions.previous_category},!this._hierarchy&&{title:"Go to next group",key:"PageDown",callback:this._availableActions.next_category},!this._hierarchy&&{title:"Go to first group",key:"Alt+PageUp",callback:this._availableActions.first_category},this._hierarchy?{title:"Go to root",key:"Alt+PageUp",callback:this._availableActions.go_to_root}:{title:"Go to last group",key:"Alt+PageDown",callback:this._availableActions.last_category},!this._hierarchy&&{title:"Play forwards through groups",key:"Shift+PageDown",callback:this._availableActions.play_forward_category},!this._hierarchy&&{title:"Play backwards through groups",key:"Shift+PageUp",callback:this._availableActions.play_backward_category},{title:"Go to first point",key:"Home",callback:this._availableActions.first_point},{title:"Go to last point",key:"End",callback:this._availableActions.last_point},{title:"Replay",key:" ",keyDescription:"Spacebar",callback:this._availableActions.replay},{title:"Select item",key:"Enter",callback:this._availableActions.select},{title:"Go backward by a tenth",key:"Ctrl+ArrowLeft",callback:this._availableActions.previous_tenth},{title:"Go forward by a tenth",key:"Ctrl+ArrowRight",callback:this._availableActions.next_tenth},{title:`Go to ${this._hierarchy?"level":"group"} minimum value"`,key:"[",callback:this._availableActions.go_minimum},{title:`Go to ${this._hierarchy?"level":"group"} maximum value`,key:"]",callback:this._availableActions.go_maximum},!this._hierarchy&&{title:"Go to chart minimum value",key:"Ctrl+[",callback:this._availableActions.go_total_minimum},!this._hierarchy&&{title:"Go to chart maximum value",key:"Ctrl+]",callback:this._availableActions.go_total_maximum},this._hierarchy&&{title:"Go down a level",key:"Alt+ArrowDown",callback:this._availableActions.drill_down},this._hierarchy&&{title:"Go up a level",key:"Alt+ArrowUp",callback:this._availableActions.drill_up},{title:"Speed up",caseSensitive:!1,key:"q",callback:this._availableActions.speed_up},{title:"Slow down",caseSensitive:!1,key:"e",callback:this._availableActions.slow_down},{title:"Toggle monitor mode",caseSensitive:!1,key:"m",callback:this._availableActions.monitor},{title:"Open help dialog",caseSensitive:!1,key:"h",callback:this._availableActions.help},{title:"Open options dialog",caseSensitive:!1,key:"o",callback:this._availableActions.options}].filter((item=>Boolean(item)))),this._info.notes?.length>0&&this._keyEventManager.registerKeyEvent({title:"Open info dialog",caseSensitive:!1,key:"i",callback:this._availableActions.info});const hotkeyCallbackWrapper=cb=>{cb({slice:this._currentGroupName,index:this._pointIndex,point:this.currentPoint})};this._options.customHotkeys?.forEach((hotkey=>{this._keyEventManager.registerKeyEvent({...hotkey,key:keyboardEventToString(hotkey.key),callback:()=>{hotkeyCallbackWrapper(hotkey.callback)}})}))}_setHertzClamps(lowerIndex,upperIndex){this._hertzClamps.lower=lowerIndex,this._hertzClamps.upper=upperIndex}_initializeData(userData){if(!Array.isArray(userData))return this._groups=Object.keys(userData),this._visible_group_indices=this._groups.map(((value,index)=>index)),void(this._data=Object.values(userData).map((row=>convertDataRow(row))));this._groups=[""],this._visible_group_indices=[0],this._data=[convertDataRow(userData)]}generateGroupSummary(){if(this._currentGroupType===SUPPORTED_CHART_TYPES.UNSUPPORTED)return`Group titled "${this._currentGroupName}" uses an unsupported chart type.`;const text=[sentenceCase(this._currentGroupType)];return this._currentGroupName.length>0?text.push(`chart showing "${this._currentGroupName}".`):text.push("chart."),text.push(generateAxisSummary("x",this._xAxis)),isAlternateAxisDataPoint(this.currentPoint)?text.push(generateAxisSummary("y2",this._y2Axis)):text.push(generateAxisSummary("y",this._yAxis)),text.join(" ")}_startListening(){this._chartElement.addEventListener("focus",(()=>{if(this._sr.clear(),this._options.live&&this._generateSummary(),this._options.enableSpeech&&this._sr.render(this._chartSummary+" "+this.generateGroupSummary()+" "+this._instructions),window.__chart2music_options__?._hertzClamps){const{lower,upper}=window.__chart2music_options__._hertzClamps;this._setHertzClamps(lower,upper)}})),this._chartElement.addEventListener("blur",(()=>{this._monitorMode=!1}))}_announceCategoryChange(){this._silent||this._sr.render(this.generateGroupSummary())}_playAndSpeak(){this._silent||(this._playCurrent(),setTimeout((()=>{this._speakCurrent(this.currentPoint)}),250))}_moveNextOutlier(){if(isBoxDataPoint(this.currentPoint)&&"outlier"in this.currentPoint){const{outlier}=this.currentPoint;return!(this._outlierIndex>=outlier.length-1)&&(this._outlierIndex++,!0)}return!1}_movePrevOutlier(){return!(!isBoxDataPoint(this.currentPoint)||!("outlier"in this.currentPoint))&&(this._outlierIndex<=0?(this._outlierIndex=0,!1):(this._outlierIndex--,!0))}_moveRight(){if(this._outlierMode)return this._moveNextOutlier();const max=this._currentDataRow.length-1;return this._pointIndex>=max?(this._pointIndex=max,!1):(this._pointIndex++,!0)}_moveLeft(){return this._outlierMode?this._movePrevOutlier():this._pointIndex<=0?(this._pointIndex=0,!1):(this._pointIndex--,!0)}_moveToMinimum(){const index=this._metadataByGroup[this._groupIndex].minimumPointIndex;return-1!==index&&(this._pointIndex=index,!0)}_moveToMaximum(){const index=this._metadataByGroup[this._groupIndex].maximumPointIndex;return-1!==index&&(this._pointIndex=index,!0)}_moveLeftTenths(){const current=this.currentPoint;if(this._outlierMode&&isBoxDataPoint(current)&&"outlier"in current){if(this._outlierIndex<=0)return this._outlierIndex=0,!1;const tenths=Math.round(current.outlier.length/10);return this._outlierIndex=Math.max(this._outlierIndex-tenths,0),!0}return 0!==this._pointIndex&&(this._pointIndex=Math.max(this._pointIndex-this._metadataByGroup[this._groupIndex].tenths,0),!0)}_moveRightTenths(){const current=this.currentPoint;if(this._outlierMode&&isBoxDataPoint(current)&&"outlier"in current){if(this._outlierIndex>=current.outlier.length-1)return this._outlierIndex=current.outlier.length-1,!1;const tenths=Math.round(current.outlier.length/10);return this._outlierIndex=Math.min(this._outlierIndex+tenths,current.outlier.length-1),!0}return this._pointIndex!==this._currentDataRow.length-1&&(this._pointIndex=Math.min(this._pointIndex+this._metadataByGroup[this._groupIndex].tenths,this._data[this._groupIndex].length-1),!0)}_checkOutlierMode(){const{statIndex,availableStats}=this._metadataByGroup[this._groupIndex];this._outlierMode=["outlier","xtremeOutlier"].includes(availableStats[statIndex]),this._outlierIndex=0}_movePrevStat(){const{statIndex}=this._metadataByGroup[this._groupIndex];return!(statIndex<0)&&(this._metadataByGroup[this._groupIndex].statIndex=statIndex-1,this._checkOutlierMode(),!0)}_moveNextStat(){const{statIndex,availableStats}=this._metadataByGroup[this._groupIndex];if(statIndex>=availableStats.length-1)return!1;this._metadataByGroup[this._groupIndex].statIndex=statIndex+1;const newStat=availableStats[this._metadataByGroup[this._groupIndex].statIndex],current=this._data[this._groupIndex][this._pointIndex];return"outlier"!==newStat||"outlier"in current&&Array.isArray(current.outlier)&&current.outlier.length>0?(this._checkOutlierMode(),!0):(this._metadataByGroup[this._groupIndex].statIndex--,!1)}_playLeftOutlier(){this._playListInterval=setInterval((()=>{this._outlierIndex<=0?(this._outlierIndex=0,this._clearPlay()):(this._outlierIndex--,this._playCurrent())}),SPEEDS[this._speedRateIndex]),this._playCurrent()}_playLeft(){if(this._outlierMode)return void this._playLeftOutlier();if(this._xAxis.continuous)return void this._playLeftContinuous();this._playListInterval=setInterval((()=>{this._pointIndex<=0?(this._pointIndex=0,this._clearPlay()):(this._pointIndex--,this._playCurrent())}),SPEEDS[this._speedRateIndex]),this._playCurrent()}_playRightOutlier(){if(!isBoxDataPoint(this.currentPoint)||!("outlier"in this.currentPoint))return;const max=this.currentPoint.outlier?.length-1??0;this._playListInterval=setInterval((()=>{this._outlierIndex>=max?(this._outlierIndex=max,this._clearPlay()):(this._outlierIndex++,this._playCurrent())}),SPEEDS[this._speedRateIndex]),this._playCurrent()}_playRightContinuous(){const startIndex=this._pointIndex,startX=this.getCurrent().point.x,row=this._currentDataRow.slice(startIndex),totalTime=10*SPEEDS[this._speedRateIndex],xMin=this._xAxis.minimum,range=this._xAxis.maximum-xMin,change="linear"===this._xAxis.type?x=>(x-xMin)/range:x=>(Math.log10(x)-Math.log10(xMin))/Math.log10(range),startingPct=change(startX);row.forEach(((item,index)=>{this._playListContinuous.push(setTimeout((()=>{this._pointIndex=startIndex+index,this._playCurrent()}),(change(item.x)-startingPct)*totalTime))}))}_playLeftContinuous(){const startIndex=this._pointIndex,startX=this.getCurrent().point.x,row=this._currentDataRow.slice(0,startIndex+1),totalTime=10*SPEEDS[this._speedRateIndex],xMin=this._xAxis.minimum,range=this._xAxis.maximum-xMin,change="linear"===this._xAxis.type?x=>1-(x-xMin)/range:x=>1-(Math.log10(x)-Math.log10(xMin))/Math.log10(range),startingPct=change(startX);row.reverse().forEach(((item,index)=>{this._playListContinuous.push(setTimeout((()=>{this._pointIndex=startIndex-index,this._playCurrent()}),(change(item.x)-startingPct)*totalTime))}))}_playRight(){if(this._outlierMode)return void this._playRightOutlier();if(this._xAxis.continuous)return void this._playRightContinuous();const max=this._currentDataRow.length-1;this._playListInterval=setInterval((()=>{this._pointIndex>=max?(this._pointIndex=max,this._clearPlay()):(this._pointIndex++,this._playCurrent())}),SPEEDS[this._speedRateIndex]),this._playCurrent()}_updateToNewLevel(groupIndex,pointIndex=0){this._visibleGroupIndex=groupIndex,this._pointIndex=pointIndex,this._flagNewLevel=!0,this._xAxis=initializeAxis(this._data,"x",this._explicitAxes.x,this._visibleGroupIndex),this._yAxis=initializeAxis(this._data,"y",{...this._explicitAxes.y,minimum:0},this._visibleGroupIndex),this._generateSummary()}_drillDown(){const{children}=this.currentPoint;if(!children)return!1;const groupIndex=this._groups.indexOf(children);return this._hierarchyBreadcrumbs.push({groupIndex:this._visibleGroupIndex,pointIndex:this._pointIndex}),this._updateToNewLevel(groupIndex),!0}_drillUp(){if(0===this._hierarchyBreadcrumbs.length)return!1;const{groupIndex,pointIndex}=this._hierarchyBreadcrumbs.pop();return this._updateToNewLevel(groupIndex,pointIndex),!0}_drillToRoot(){if(0===this._hierarchyBreadcrumbs.length)return!1;const{groupIndex,pointIndex}=this._hierarchyBreadcrumbs[0];return this._updateToNewLevel(groupIndex,pointIndex),this._hierarchyBreadcrumbs=[],!0}_getHertzRange(){return this._options.hertzes.slice(this._hertzClamps.lower,this._hertzClamps.upper)}_playCurrent(){if(!this._options.enableSound)return void this._onFocus();const{statIndex,availableStats}=this._metadataByGroup[this._groupIndex];this._playDataPoint(this.currentPoint,statIndex,availableStats),this._onFocus()}_checkAudioEngine(){context||(context=new AudioContext),!this._audioEngine&&context&&(this._audioEngine=this._providedAudioEngine??new OscillatorAudioEngine(context))}_playDataPoint(current,statIndex,availableStats){if(this._checkAudioEngine(),!this._audioEngine)return;if(isUnplayable(current.x,this._xAxis))return;const hertzes=this._getHertzRange(),xPan="log10"===this._xAxis.type?calcPan((Math.log10(current.x)-Math.log10(this._xAxis.minimum))/(Math.log10(this._xAxis.maximum)-Math.log10(this._xAxis.minimum))):calcPan((current.x-this._xAxis.minimum)/(this._xAxis.maximum-this._xAxis.minimum));if("annotation"!==current.type){if(isSimpleDataPoint(current)){if(isUnplayable(current.y,this._yAxis))return;const yBin=interpolateBin(current.y,this._yAxis.minimum,this._yAxis.maximum,hertzes.length-1,this._yAxis.type);this._audioEngine.playDataPoint(hertzes[yBin],xPan,.25)}else if(isAlternateAxisDataPoint(current)){if(isUnplayable(current.y2,this._y2Axis))return;const yBin=interpolateBin(current.y2,this._y2Axis.minimum,this._y2Axis.maximum,hertzes.length-1,this._y2Axis.type);this._audioEngine.playDataPoint(hertzes[yBin],xPan,.25)}else if(isBoxDataPoint(current)&&this._outlierMode&&"outlier"in current){const yBin=interpolateBin(current.outlier[this._outlierIndex],this._yAxis.minimum,this._yAxis.maximum,hertzes.length-1,this._yAxis.type);this._audioEngine.playDataPoint(hertzes[yBin],xPan,.25)}else if(isOHLCDataPoint(current)||isHighLowDataPoint(current)){if(statIndex>=0){const stat=availableStats[statIndex];if(isUnplayable(current[stat],this._yAxis))return;const yBin=interpolateBin(current[stat],this._yAxis.minimum,this._yAxis.maximum,hertzes.length-1,this._yAxis.type);return void this._audioEngine.playDataPoint(hertzes[yBin],xPan,.25)}const interval=1/(availableStats.length+1);availableStats.forEach(((stat,index)=>{if(isUnplayable(current[stat],this._yAxis)||"outlier"===stat)return;const yBin=interpolateBin(current[stat],this._yAxis.minimum,this._yAxis.maximum,hertzes.length-1,this._yAxis.type);setTimeout((()=>{this._audioEngine.playDataPoint(hertzes[yBin],xPan,.25)}),SPEEDS[this._speedRateIndex]*interval*index)}))}}else this._audioEngine.playNotification(AudioNotificationType.Annotation,xPan)}_onFocus(){"annotation"!==this.currentPoint.type&&this._options?.onFocusCallback?.({slice:this._currentGroupName,index:this._pointIndex,point:this.currentPoint})}_speakCurrent(current){if(!this._options.enableSpeech)return;if("annotation"===current.type)return void this._sr.render(current.label);const{statIndex,availableStats}=this._metadataByGroup[this._groupIndex];this._flagNewStat&&0===availableStats.length&&(this._flagNewStat=!1);const point=((point,xFormat,yFormat,stat,outlierIndex=null,announcePointLabelFirst=!1)=>{if(isOHLCDataPoint(point))return void 0!==stat?`${xFormat(point.x)}, ${yFormat(point[stat])}`:[`${xFormat(point.x)}, ${yFormat(point.open)}`,yFormat(point.high),yFormat(point.low),yFormat(point.close)].join(" - ");if(isBoxDataPoint(point)&&null!==outlierIndex)return`${xFormat(point.x)}, ${yFormat(point.outlier[outlierIndex])}, ${outlierIndex+1} of ${point.outlier.length}`;if(isBoxDataPoint(point)||isHighLowDataPoint(point)){if(void 0!==stat)return`${xFormat(point.x)}, ${yFormat(point[stat])}`;const outlierNote="outlier"in point&&point.outlier?.length>0?`, with ${point.outlier.length} outliers`:"";return`${xFormat(point.x)}, ${yFormat(point.high)} - ${yFormat(point.low)}${outlierNote}`}if(isSimpleDataPoint(point)){const details=[xFormat(point.x),yFormat(point.y)];return point.label&&(announcePointLabelFirst?details.unshift(point.label):details.push(point.label)),details.join(", ")}return isAlternateAxisDataPoint(point)?`${xFormat(point.x)}, ${yFormat(point.y2)}`:""})(current,formatWrapper(this._xAxis),formatWrapper(isAlternateAxisDataPoint(current)?this._y2Axis:this._yAxis),availableStats[statIndex],this._outlierMode?this._outlierIndex:null,this._announcePointLabelFirst),text=filteredJoin([this._flagNewLevel&&this._currentGroupName,this._flagNewStat&&sentenceCase(availableStats[statIndex]??"all"),point,this._hierarchy&&current.children&&"has children"],", ");this._sr.render(text),this._flagNewLevel=!1,this._flagNewStat=!1}}const calcMedian=nums=>nums.length%2?nums[Math.floor(nums.length/2)]:(nums[nums.length/2]+nums[nums.length/2-1])/2,fiveNumberSummary=nums=>{const sortedNumbers=nums.sort();let min,max,q1,q3;const datamin=Math.min(...sortedNumbers),datamax=Math.max(...sortedNumbers),median=calcMedian(sortedNumbers),length=sortedNumbers.length;length%2?(q1=calcMedian(sortedNumbers.slice(0,Math.floor(length/2))),q3=calcMedian(sortedNumbers.slice(Math.ceil(length%2)))):(q1=calcMedian(sortedNumbers.slice(0,length/2-1)),q3=calcMedian(sortedNumbers.slice(length/2)));const iqr=q3-q1;max=datamax<q3+iqr?datamax:sortedNumbers.reverse().find((num=>num<datamax))??datamax,min=datamin<q1-iqr?datamin:sortedNumbers.reverse().find((num=>num<datamin))??datamin;const outlier=sortedNumbers.filter((num=>num<min||num>max));return{low:min,high:max,median,q1,q3,...outlier.length>0?{outlier}:{}}},whichBoxData=data=>data.map(((row,index)=>"object"==typeof row&&"min"in row?{...row,low:row.min,high:row.max,x:index,..."outliers"in row?{outlier:row.outliers}:{}}:Array.isArray(row)?{...fiveNumberSummary(row),x:index}:void 0)),chartStates=new Map,chartjs_c2m_converter={bar:"bar",line:"line",pie:"pie",polarArea:"bar",doughnut:"pie",boxplot:"box",radar:"bar",wordCloud:"bar",scatter:"scatter"},generateAxisInfo=(chartAxisInfo,chart)=>{const axis={};chartAxisInfo?.min&&("string"==typeof chartAxisInfo.min?axis.minimum=chart.data.labels.indexOf(chartAxisInfo.min):axis.minimum=chartAxisInfo.min),chartAxisInfo?.max&&("string"==typeof chartAxisInfo.max?axis.maximum=chart.data.labels.indexOf(chartAxisInfo.max):axis.maximum=chartAxisInfo.max);const label=chartAxisInfo?.title?.text;return label&&(axis.label=label),"logarithmic"===chartAxisInfo?.type&&(axis.type="log10"),axis},whichDataStructure=data=>Array.isArray(data[0])?data.map(((arr,x)=>{let[low,high]=arr.sort();return{x,low,high}})):data,processData=(data,c2m_types)=>{if("box"===c2m_types)return(data=>{if(1===data.datasets.length)return{data:whichBoxData(data.datasets[0].data)};const groups=[],result={};return data.datasets.forEach(((obj,index)=>{const groupName=obj.label??`Group ${index+1}`;groups.push(groupName),result[groupName]=whichBoxData(obj.data)})),{groups,data:result}})(data);let groups=[];if(1===data.datasets.length)return{data:whichDataStructure(data.datasets[0].data)};const result={};return data.datasets.forEach(((obj,index)=>{const groupName=obj.label??`Group ${index+1}`;groups.push(groupName),result[groupName]=whichDataStructure(obj.data)})),{groups,data:result}},determineChartTitle=options=>options.plugins?.title?.text?Array.isArray(options.plugins.title.text)?options.plugins.title.text.join(", "):options.plugins.title.text:"",plugin_plugin={id:"chartjs2music",afterInit:(chart,args,options)=>{const{valid,c2m_types,invalidType}=(chart=>{const topLevelType=chart.config.type,panelTypes=chart.data.datasets.map((({type})=>type??topLevelType)),invalid=panelTypes.find((t=>!(t in chartjs_c2m_converter)));return invalid?{valid:!1,invalidType:invalid}:1===[...new Set(panelTypes)].length?{valid:!0,c2m_types:chartjs_c2m_converter[panelTypes[0]]}:{valid:!0,c2m_types:panelTypes.map((t=>chartjs_c2m_converter[t]))}})(chart);if(!valid)return void options.errorCallback?.(`Unable to connect chart2music to chart. The chart is of type "${invalidType}", which is not one of the supported chart types for this plugin. This plugin supports: ${Object.keys(chartjs_c2m_converter).join(", ")}`);let axes=(chart=>({x:{...generateAxisInfo(chart.options?.scales?.x,chart),valueLabels:chart.data.labels.slice(0)},y:{...generateAxisInfo(chart.options?.scales?.y,chart),format:value=>value.toLocaleString()}}))(chart);"wordCloud"===chart.config.type&&(delete axes.x.minimum,delete axes.x.maximum,delete axes.y.minimum,delete axes.y.maximum,axes.x.label||(axes.x.label="Word"),axes.y.label||(axes.y.label="Emphasis"));const cc=((canvas,provided)=>{if(provided)return provided;const cc=document.createElement("div");return canvas.insertAdjacentElement("afterend",cc),cc})(chart.canvas,options.cc),{data,groups}=processData(chart.data,c2m_types);let scrub=(data=>{const blackboard=JSON.parse(JSON.stringify(data));let labels=[];if(Array.isArray(data))return blackboard.forEach(((item,x)=>{"object"==typeof item&&"x"in item&&(labels.push(item.x),item.x=x)})),{labels,data:blackboard}})(data);scrub?.labels&&scrub?.labels?.length>0&&(chart.data.labels&&0!==chart.data.labels.length||(axes.x.valueLabels=scrub.labels.slice(0))),"scatter"===c2m_types&&(delete scrub?.data,delete axes.x.valueLabels),axes={...axes,x:{...axes.x,...options.axes?.x},y:{...axes.y,...options.axes?.y}};const c2mOptions={cc,element:chart.canvas,type:c2m_types,data:scrub?.data??data,title:determineChartTitle(chart.options),axes,options:{onFocusCallback:({point,index})=>{try{const highlightElements=[];if("custom"in point)highlightElements.push({datasetIndex:point.custom.group,index:point.custom.index});else{const{visible_groups}=chartStates.get(chart);visible_groups.forEach((datasetIndex=>{highlightElements.push({datasetIndex,index})}))}chart?.setActiveElements(highlightElements),chart?.tooltip?.setActiveElements(highlightElements,{}),chart?.update()}catch(e){}}}};if(Array.isArray(c2mOptions.data))isNaN(c2mOptions.data[0])?c2mOptions.data=c2mOptions.data.map(((point,index)=>({...point,custom:{group:0,index}}))):c2mOptions.data=c2mOptions.data.map(((num,index)=>({x:index,y:num,custom:{group:0,index}})));else{Object.keys(c2mOptions.data).forEach(((groupName,groupNumber)=>{isNaN(c2mOptions.data[groupName][0])?c2mOptions.data[groupName]=c2mOptions.data[groupName].map(((point,index)=>({...point,custom:{group:groupNumber,index}}))):c2mOptions.data[groupName]=c2mOptions.data[groupName].map(((num,index)=>({x:index,y:num,custom:{group:groupNumber,index}})))}))}chart.config.options?.scales?.x?.stacked&&(c2mOptions.options.stack=!0),options.audioEngine&&(c2mOptions.audioEngine=options.audioEngine);const{err,data:c2m}=c2mChart(c2mOptions);chartStates.set(chart,{c2m,visible_groups:groups?.map(((g,i)=>i))}),err&&options.errorCallback?.(err)},afterDatasetUpdate:(chart,args)=>{if(!args.mode)return;const{c2m:ref,visible_groups}=chartStates.get(chart);if(!ref)return;const groups=ref._groups.slice(0);if(ref._options.stack&&groups.shift(),"hide"===args.mode){const err=ref.setCategoryVisibility(groups[args.index],!1);return visible_groups.splice(args.index,1),void(err&&console.error(err))}if("show"===args.mode){const err=ref.setCategoryVisibility(groups[args.index],!0);return visible_groups.push(args.index),void(err&&console.error(err))}},defaults:{cc:null,audioEngine:null,errorCallback:null}}},"./node_modules/chartjs-plugin-datalabels/dist/chartjs-plugin-datalabels.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>plugin});var chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/chart.js/dist/chunks/helpers.segment.js"),chart_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/chart.js/dist/chart.js"),devicePixelRatio=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var screen=window.screen;if(screen)return(screen.deviceXDPI||1)/(screen.logicalXDPI||1)}return 1}(),utils_toTextLines=function(inputs){var input,lines=[];for(inputs=[].concat(inputs);inputs.length;)"string"==typeof(input=inputs.pop())?lines.unshift.apply(lines,input.split("\n")):Array.isArray(input)?inputs.push.apply(inputs,input):(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.k)(inputs)||lines.unshift(""+input);return lines},utils_textSize=function(ctx,lines,font){var i,items=[].concat(lines),ilen=items.length,prev=ctx.font,width=0;for(ctx.font=font.string,i=0;i<ilen;++i)width=Math.max(ctx.measureText(items[i]).width,width);return ctx.font=prev,{height:ilen*font.lineHeight,width}},utils_bound=function(min,value,max){return Math.max(min,Math.min(value,max))},utils_arrayDiff=function(a0,a1){var i,j,ilen,v,prev=a0.slice(),updates=[];for(i=0,ilen=a1.length;i<ilen;++i)v=a1[i],-1===(j=prev.indexOf(v))?updates.push([v,1]):prev.splice(j,1);for(i=0,ilen=prev.length;i<ilen;++i)updates.push([prev[i],-1]);return updates};function orient(point,origin){var x0=origin.x,y0=origin.y;if(null===x0)return{x:0,y:-1};if(null===y0)return{x:1,y:0};var dx=point.x-x0,dy=point.y-y0,ln=Math.sqrt(dx*dx+dy*dy);return{x:ln?dx/ln:0,y:ln?dy/ln:-1}}var R_INSIDE=0,R_LEFT=1,R_RIGHT=2,R_BOTTOM=4,R_TOP=8;function region(x,y,rect){var res=R_INSIDE;return x<rect.left?res|=R_LEFT:x>rect.right&&(res|=R_RIGHT),y<rect.top?res|=R_TOP:y>rect.bottom&&(res|=R_BOTTOM),res}function compute$1(range,config){var x,y,anchor=config.anchor,segment=range;return config.clamp&&(segment=function clipped(segment,area){for(var r,x,y,x0=segment.x0,y0=segment.y0,x1=segment.x1,y1=segment.y1,r0=region(x0,y0,area),r1=region(x1,y1,area);r0|r1&&!(r0&r1);)(r=r0||r1)&R_TOP?(x=x0+(x1-x0)*(area.top-y0)/(y1-y0),y=area.top):r&R_BOTTOM?(x=x0+(x1-x0)*(area.bottom-y0)/(y1-y0),y=area.bottom):r&R_RIGHT?(y=y0+(y1-y0)*(area.right-x0)/(x1-x0),x=area.right):r&R_LEFT&&(y=y0+(y1-y0)*(area.left-x0)/(x1-x0),x=area.left),r===r0?r0=region(x0=x,y0=y,area):r1=region(x1=x,y1=y,area);return{x0,x1,y0,y1}}(segment,config.area)),"start"===anchor?(x=segment.x0,y=segment.y0):"end"===anchor?(x=segment.x1,y=segment.y1):(x=(segment.x0+segment.x1)/2,y=(segment.y0+segment.y1)/2),function aligned(x,y,vx,vy,align){switch(align){case"center":vx=vy=0;break;case"bottom":vx=0,vy=1;break;case"right":vx=1,vy=0;break;case"left":vx=-1,vy=0;break;case"top":vx=0,vy=-1;break;case"start":vx=-vx,vy=-vy;break;case"end":break;default:align*=Math.PI/180,vx=Math.cos(align),vy=Math.sin(align)}return{x,y,vx,vy}}(x,y,range.vx,range.vy,config.align)}var positioners_arc=function(el,config){var angle=(el.startAngle+el.endAngle)/2,vx=Math.cos(angle),vy=Math.sin(angle),r0=el.innerRadius,r1=el.outerRadius;return compute$1({x0:el.x+vx*r0,y0:el.y+vy*r0,x1:el.x+vx*r1,y1:el.y+vy*r1,vx,vy},config)},positioners_point=function(el,config){var v=orient(el,config.origin),rx=v.x*el.options.radius,ry=v.y*el.options.radius;return compute$1({x0:el.x-rx,y0:el.y-ry,x1:el.x+rx,y1:el.y+ry,vx:v.x,vy:v.y},config)},positioners_bar=function(el,config){var v=orient(el,config.origin),x=el.x,y=el.y,sx=0,sy=0;return el.horizontal?(x=Math.min(el.x,el.base),sx=Math.abs(el.base-el.x)):(y=Math.min(el.y,el.base),sy=Math.abs(el.base-el.y)),compute$1({x0:x,y0:y+sy,x1:x+sx,y1:y,vx:v.x,vy:v.y},config)},positioners_fallback=function(el,config){var v=orient(el,config.origin);return compute$1({x0:el.x,y0:el.y,x1:el.x+(el.width||0),y1:el.y+(el.height||0),vx:v.x,vy:v.y},config)},rasterize=function(v){return Math.round(v*devicePixelRatio)/devicePixelRatio};function getScaleOrigin(el,context){var scale=context.chart.getDatasetMeta(context.datasetIndex).vScale;if(!scale)return null;if(void 0!==scale.xCenter&&void 0!==scale.yCenter)return{x:scale.xCenter,y:scale.yCenter};var pixel=scale.getBasePixel();return el.horizontal?{x:pixel,y:null}:{x:null,y:pixel}}function drawFrame(ctx,rect,model){var bgColor=model.backgroundColor,borderColor=model.borderColor,borderWidth=model.borderWidth;(bgColor||borderColor&&borderWidth)&&(ctx.beginPath(),function drawRoundedRect(ctx,x,y,w,h,radius){var HALF_PI=Math.PI/2;if(radius){var r=Math.min(radius,h/2,w/2),left=x+r,top=y+r,right=x+w-r,bottom=y+h-r;ctx.moveTo(x,top),left<right&&top<bottom?(ctx.arc(left,top,r,-Math.PI,-HALF_PI),ctx.arc(right,top,r,-HALF_PI,0),ctx.arc(right,bottom,r,0,HALF_PI),ctx.arc(left,bottom,r,HALF_PI,Math.PI)):left<right?(ctx.moveTo(left,y),ctx.arc(right,top,r,-HALF_PI,HALF_PI),ctx.arc(left,top,r,HALF_PI,Math.PI+HALF_PI)):top<bottom?(ctx.arc(left,top,r,-Math.PI,0),ctx.arc(left,bottom,r,0,Math.PI)):ctx.arc(left,top,r,-Math.PI,Math.PI),ctx.closePath(),ctx.moveTo(x,y)}else ctx.rect(x,y,w,h)}(ctx,rasterize(rect.x)+borderWidth/2,rasterize(rect.y)+borderWidth/2,rasterize(rect.w)-borderWidth,rasterize(rect.h)-borderWidth,model.borderRadius),ctx.closePath(),bgColor&&(ctx.fillStyle=bgColor,ctx.fill()),borderColor&&borderWidth&&(ctx.strokeStyle=borderColor,ctx.lineWidth=borderWidth,ctx.lineJoin="miter",ctx.stroke()))}function drawTextLine(ctx,text,cfg){var shadow=ctx.shadowBlur,stroked=cfg.stroked,x=rasterize(cfg.x),y=rasterize(cfg.y),w=rasterize(cfg.w);stroked&&ctx.strokeText(text,x,y,w),cfg.filled&&(shadow&&stroked&&(ctx.shadowBlur=0),ctx.fillText(text,x,y,w),shadow&&stroked&&(ctx.shadowBlur=shadow))}var Label=function(config,ctx,el,index){var me=this;me._config=config,me._index=index,me._model=null,me._rects=null,me._ctx=ctx,me._el=el};(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a4)(Label.prototype,{_modelize:function(display,lines,config,context){var el,index=this._index,font=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a0)((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.font,{}],context,index)),color=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.color,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.d.color],context,index);return{align:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.align,"center"],context,index),anchor:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.anchor,"center"],context,index),area:context.chart.chartArea,backgroundColor:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.backgroundColor,null],context,index),borderColor:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.borderColor,null],context,index),borderRadius:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.borderRadius,0],context,index),borderWidth:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.borderWidth,0],context,index),clamp:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.clamp,!1],context,index),clip:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.clip,!1],context,index),color,display,font,lines,offset:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.offset,4],context,index),opacity:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.opacity,1],context,index),origin:getScaleOrigin(this._el,context),padding:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.E)((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.padding,4],context,index)),positioner:(el=this._el,el instanceof chart_js__WEBPACK_IMPORTED_MODULE_1__.Bs?positioners_arc:el instanceof chart_js__WEBPACK_IMPORTED_MODULE_1__.FN?positioners_point:el instanceof chart_js__WEBPACK_IMPORTED_MODULE_1__.E8?positioners_bar:positioners_fallback),rotation:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.rotation,0],context,index)*(Math.PI/180),size:utils_textSize(this._ctx,lines,font),textAlign:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.textAlign,"start"],context,index),textShadowBlur:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.textShadowBlur,0],context,index),textShadowColor:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.textShadowColor,color],context,index),textStrokeColor:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.textStrokeColor,color],context,index),textStrokeWidth:(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.textStrokeWidth,0],context,index)}},update:function(context){var value,label,lines,me=this,model=null,rects=null,index=me._index,config=me._config,display=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a)([config.display,!0],context,index);display&&(value=context.dataset.data[index],label=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.v)((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.Q)(config.formatter,[value,context]),value),(lines=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.k)(label)?[]:utils_toTextLines(label)).length&&(rects=function boundingRects(model){var borderWidth=model.borderWidth||0,padding=model.padding,th=model.size.height,tw=model.size.width,tx=-tw/2,ty=-th/2;return{frame:{x:tx-padding.left-borderWidth,y:ty-padding.top-borderWidth,w:tw+padding.width+2*borderWidth,h:th+padding.height+2*borderWidth},text:{x:tx,y:ty,w:tw,h:th}}}(model=me._modelize(display,lines,config,context)))),me._model=model,me._rects=rects},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(chart,center){var area,ctx=chart.ctx,model=this._model,rects=this._rects;this.visible()&&(ctx.save(),model.clip&&(area=model.area,ctx.beginPath(),ctx.rect(area.left,area.top,area.right-area.left,area.bottom-area.top),ctx.clip()),ctx.globalAlpha=utils_bound(0,model.opacity,1),ctx.translate(rasterize(center.x),rasterize(center.y)),ctx.rotate(model.rotation),drawFrame(ctx,rects.frame,model),function drawText(ctx,lines,rect,model){var i,align=model.textAlign,color=model.color,filled=!!color,font=model.font,ilen=lines.length,strokeColor=model.textStrokeColor,strokeWidth=model.textStrokeWidth,stroked=strokeColor&&strokeWidth;if(ilen&&(filled||stroked))for(rect=function textGeometry(rect,align,font){var h=font.lineHeight,w=rect.w,x=rect.x;return"center"===align?x+=w/2:"end"!==align&&"right"!==align||(x+=w),{h,w,x,y:rect.y+h/2}}(rect,align,font),ctx.font=font.string,ctx.textAlign=align,ctx.textBaseline="middle",ctx.shadowBlur=model.textShadowBlur,ctx.shadowColor=model.textShadowColor,filled&&(ctx.fillStyle=color),stroked&&(ctx.lineJoin="round",ctx.lineWidth=strokeWidth,ctx.strokeStyle=strokeColor),i=0,ilen=lines.length;i<ilen;++i)drawTextLine(ctx,lines[i],{stroked,filled,w:rect.w,x:rect.x,y:rect.y+rect.h*i})}(ctx,model.lines,rects.text,model),ctx.restore())}});var MIN_INTEGER=Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;function rotated(point,center,angle){var cos=Math.cos(angle),sin=Math.sin(angle),cx=center.x,cy=center.y;return{x:cx+cos*(point.x-cx)-sin*(point.y-cy),y:cy+sin*(point.x-cx)+cos*(point.y-cy)}}function projected(points,axis){var i,pt,vx,vy,dp,min=MAX_INTEGER,max=MIN_INTEGER,origin=axis.origin;for(i=0;i<points.length;++i)vx=(pt=points[i]).x-origin.x,vy=pt.y-origin.y,dp=axis.vx*vx+axis.vy*vy,min=Math.min(min,dp),max=Math.max(max,dp);return{min,max}}function toAxis(p0,p1){var vx=p1.x-p0.x,vy=p1.y-p0.y,ln=Math.sqrt(vx*vx+vy*vy);return{vx:(p1.x-p0.x)/ln,vy:(p1.y-p0.y)/ln,origin:p0,ln}}var HitBox=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function coordinates(el,model,geometry){var point=model.positioner(el,model),vx=point.vx,vy=point.vy;if(!vx&&!vy)return{x:point.x,y:point.y};var w=geometry.w,h=geometry.h,rotation=model.rotation,dx=Math.abs(w/2*Math.cos(rotation))+Math.abs(h/2*Math.sin(rotation)),dy=Math.abs(w/2*Math.sin(rotation))+Math.abs(h/2*Math.cos(rotation)),vs=1/Math.max(Math.abs(vx),Math.abs(vy));return dx*=vx*vs,dy*=vy*vs,dx+=model.offset*vx,dy+=model.offset*vy,{x:point.x+dx,y:point.y+dy}}(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a4)(HitBox.prototype,{center:function(){var r=this._rect;return{x:r.x+r.w/2,y:r.y+r.h/2}},update:function(center,rect,rotation){this._rotation=rotation,this._rect={x:rect.x+center.x,y:rect.y+center.y,w:rect.w,h:rect.h}},contains:function(point){var rect=this._rect;return!((point=rotated(point,this.center(),-this._rotation)).x<rect.x-1||point.y<rect.y-1||point.x>rect.x+rect.w+2||point.y>rect.y+rect.h+2)},intersects:function(other){var i,pr0,pr1,r0=this._points(),r1=other._points(),axes=[toAxis(r0[0],r0[1]),toAxis(r0[0],r0[3])];for(this._rotation!==other._rotation&&axes.push(toAxis(r1[0],r1[1]),toAxis(r1[0],r1[3])),i=0;i<axes.length;++i)if(pr0=projected(r0,axes[i]),pr1=projected(r1,axes[i]),pr0.max<pr1.min||pr1.max<pr0.min)return!1;return!0},_points:function(){var rect=this._rect,angle=this._rotation,center=this.center();return[rotated({x:rect.x,y:rect.y},center,angle),rotated({x:rect.x+rect.w,y:rect.y},center,angle),rotated({x:rect.x+rect.w,y:rect.y+rect.h},center,angle),rotated({x:rect.x,y:rect.y+rect.h},center,angle)]}});var layout={prepare:function(datasets){var i,j,ilen,jlen,label,labels=[];for(i=0,ilen=datasets.length;i<ilen;++i)for(j=0,jlen=datasets[i].length;j<jlen;++j)label=datasets[i][j],labels.push(label),label.$layout={_box:new HitBox,_hidable:!1,_visible:!0,_set:i,_idx:label._index};return labels.sort((function(a,b){var sa=a.$layout,sb=b.$layout;return sa._idx===sb._idx?sb._set-sa._set:sb._idx-sa._idx})),this.update(labels),labels},update:function(labels){var i,ilen,label,model,state,dirty=!1;for(i=0,ilen=labels.length;i<ilen;++i)model=(label=labels[i]).model(),(state=label.$layout)._hidable=model&&"auto"===model.display,state._visible=label.visible(),dirty|=state._hidable;dirty&&function compute(labels){var i,ilen,label,state,geometry,center,proxy;for(i=0,ilen=labels.length;i<ilen;++i)(state=(label=labels[i]).$layout)._visible&&(proxy=new Proxy(label._el,{get:(el,p)=>el.getProps([p],!0)[p]}),geometry=label.geometry(),center=coordinates(proxy,label.model(),geometry),state._box.update(center,geometry,label.rotation()));return function collide(labels,collider){var i,j,s0,s1;for(i=labels.length-1;i>=0;--i)for(s0=labels[i].$layout,j=i-1;j>=0&&s0._visible;--j)(s1=labels[j].$layout)._visible&&s0._box.intersects(s1._box)&&collider(s0,s1);return labels}(labels,(function(s0,s1){var h0=s0._hidable,h1=s1._hidable;h0&&h1||h1?s1._visible=!1:h0&&(s0._visible=!1)}))}(labels)},lookup:function(labels,point){var i,state;for(i=labels.length-1;i>=0;--i)if((state=labels[i].$layout)&&state._visible&&state._box.contains(point))return labels[i];return null},draw:function(chart,labels){var i,ilen,label,state,geometry,center;for(i=0,ilen=labels.length;i<ilen;++i)(state=(label=labels[i]).$layout)._visible&&(geometry=label.geometry(),center=coordinates(label._el,label.model(),geometry),state._box.update(center,geometry,label.rotation()),label.draw(chart,center))}},EXPANDO_KEY="$datalabels";function dispatchEvent(chart,listeners,label,event){if(listeners){var callback$1,context=label.$context,groups=label.$groups;listeners[groups._set]&&(callback$1=listeners[groups._set][groups._key])&&!0===(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.Q)(callback$1,[context,event])&&(chart[EXPANDO_KEY]._dirty=!0,label.update(context))}}function handleMoveEvents(chart,event){var previous,label,expando=chart[EXPANDO_KEY],listeners=expando._listeners;if(listeners.enter||listeners.leave){if("mousemove"===event.type)label=layout.lookup(expando._labels,event);else if("mouseout"!==event.type)return;previous=expando._hovered,expando._hovered=label,function dispatchMoveEvents(chart,listeners,previous,label,event){var enter,leave;(previous||label)&&(previous?label?previous!==label&&(leave=enter=!0):leave=!0:enter=!0,leave&&dispatchEvent(chart,listeners.leave,previous,event),enter&&dispatchEvent(chart,listeners.enter,label,event))}(chart,listeners,previous,label,event)}}var plugin={id:"datalabels",defaults:{align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(value){if((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.k)(value))return null;var keys,klen,k,label=value;if((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.i)(value))if((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.k)(value.label))if((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.k)(value.r))for(label="",k=0,klen=(keys=Object.keys(value)).length;k<klen;++k)label+=(0!==k?", ":"")+keys[k]+": "+value[keys[k]];else label=value.r;else label=value.label;return""+label},labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},beforeInit:function(chart){chart[EXPANDO_KEY]={_actives:[]}},beforeUpdate:function(chart){var expando=chart[EXPANDO_KEY];expando._listened=!1,expando._listeners={},expando._datasets=[],expando._labels=[]},afterDatasetUpdate:function(chart,args,options){var i,j,ilen,jlen,cfg,key,el,label,datasetIndex=args.index,expando=chart[EXPANDO_KEY],labels=expando._datasets[datasetIndex]=[],visible=chart.isDatasetVisible(datasetIndex),dataset=chart.data.datasets[datasetIndex],config=function configure(dataset,options){var listeners,labels,keys,override=dataset.datalabels,configs=[];return!1===override?null:(!0===override&&(override={}),options=(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a4)({},[options,override]),labels=options.labels||{},keys=Object.keys(labels),delete options.labels,keys.length?keys.forEach((function(key){labels[key]&&configs.push((0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a4)({},[options,labels[key],{_key:key}]))})):configs.push(options),listeners=configs.reduce((function(target,config){return(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.F)(config.listeners||{},(function(fn,event){target[event]=target[event]||{},target[event][config._key||"$default"]=fn})),delete config.listeners,target}),{}),{labels:configs,listeners})}(dataset,options),elements=args.meta.data||[],ctx=chart.ctx;for(ctx.save(),i=0,ilen=elements.length;i<ilen;++i)if((el=elements[i])[EXPANDO_KEY]=[],visible&&el&&chart.getDataVisibility(i)&&!el.skip)for(j=0,jlen=config.labels.length;j<jlen;++j)key=(cfg=config.labels[j])._key,(label=new Label(cfg,ctx,el,i)).$groups={_set:datasetIndex,_key:key||"$default"},label.$context={active:!1,chart,dataIndex:i,dataset,datasetIndex},label.update(label.$context),el[EXPANDO_KEY].push(label),labels.push(label);ctx.restore(),(0,chart_js_helpers__WEBPACK_IMPORTED_MODULE_0__.a4)(expando._listeners,config.listeners,{merger:function(event,target,source){target[event]=target[event]||{},target[event][args.index]=source[event],expando._listened=!0}})},afterUpdate:function(chart){chart[EXPANDO_KEY]._labels=layout.prepare(chart[EXPANDO_KEY]._datasets)},afterDatasetsDraw:function(chart){layout.draw(chart,chart[EXPANDO_KEY]._labels)},beforeEvent:function(chart,args){if(chart[EXPANDO_KEY]._listened){var event=args.event;switch(event.type){case"mousemove":case"mouseout":handleMoveEvents(chart,event);break;case"click":!function handleClickEvents(chart,event){var expando=chart[EXPANDO_KEY],handlers=expando._listeners.click,label=handlers&&layout.lookup(expando._labels,event);label&&dispatchEvent(chart,handlers,label,event)}(chart,event)}}},afterEvent:function(chart){var i,ilen,j,jlen,update,label,labels,expando=chart[EXPANDO_KEY],previous=expando._actives,actives=expando._actives=chart.getActiveElements(),updates=utils_arrayDiff(previous,actives);for(i=0,ilen=updates.length;i<ilen;++i)if((update=updates[i])[1])for(j=0,jlen=(labels=update[0].element[EXPANDO_KEY]||[]).length;j<jlen;++j)(label=labels[j]).$context.active=1===update[1],label.update(label.$context);(expando._dirty||updates.length)&&(layout.update(expando._labels),chart.render()),delete expando._dirty}}},"./node_modules/deepmerge-ts/dist/node/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{TJ:()=>deepmerge,s8:()=>deepmergeCustom});const actions={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};actions.defaultMerge;function defaultMetaDataUpdater(previousMeta,metaMeta){return metaMeta}function getObjectType(object){return"object"!=typeof object||null===object?0:Array.isArray(object)?2:function isRecord(value){if(!validRecordToStringValues.has(Object.prototype.toString.call(value)))return!1;const{constructor}=value;if(void 0===constructor)return!0;const prototype=constructor.prototype;if(null===prototype||"object"!=typeof prototype||!validRecordToStringValues.has(Object.prototype.toString.call(prototype)))return!1;if(!prototype.hasOwnProperty("isPrototypeOf"))return!1;return!0}(object)?1:object instanceof Set?3:object instanceof Map?4:5}function getKeys(objects){const keys=new Set;for(const object of objects)for(const key of[...Object.keys(object),...Object.getOwnPropertySymbols(object)])keys.add(key);return keys}function objectHasProperty(object,property){return"object"==typeof object&&Object.prototype.propertyIsEnumerable.call(object,property)}function getIterableOfIterables(iterables){return{*[Symbol.iterator](){for(const iterable of iterables)for(const value of iterable)yield value}}}const validRecordToStringValues=new Set(["[object Object]","[object Module]"]);function mergeOthers$2(values){return values.at(-1)}var defaultMergeFunctions=Object.freeze({__proto__:null,mergeArrays:function mergeArrays$2(values){return values.flat()},mergeMaps:function mergeMaps$2(values){return new Map(getIterableOfIterables(values))},mergeOthers:mergeOthers$2,mergeRecords:function mergeRecords$2(values,utils,meta){const result={};for(const key of getKeys(values)){const propValues=[];for(const value of values)objectHasProperty(value,key)&&propValues.push(value[key]);if(0===propValues.length)continue;const updatedMeta=utils.metaDataUpdater(meta,{key,parents:values}),propertyResult=mergeUnknowns(propValues,utils,updatedMeta);propertyResult!==actions.skip&&("__proto__"===key?Object.defineProperty(result,key,{value:propertyResult,configurable:!0,enumerable:!0,writable:!0}):result[key]=propertyResult)}return result},mergeSets:function mergeSets$2(values){return new Set(getIterableOfIterables(values))}});function deepmerge(...objects){return deepmergeCustom({})(...objects)}function deepmergeCustom(options,rootMetaData){const utils=function getUtils(options,customizedDeepmerge){return{defaultMergeFunctions,mergeFunctions:{...defaultMergeFunctions,...Object.fromEntries(Object.entries(options).filter((([key,option])=>Object.hasOwn(defaultMergeFunctions,key))).map((([key,option])=>!1===option?[key,mergeOthers$2]:[key,option])))},metaDataUpdater:options.metaDataUpdater??defaultMetaDataUpdater,deepmerge:customizedDeepmerge,useImplicitDefaultMerging:options.enableImplicitDefaultMerging??!1,actions}}(options,customizedDeepmerge);function customizedDeepmerge(...objects){return mergeUnknowns(objects,utils,rootMetaData)}return customizedDeepmerge}function mergeUnknowns(values,utils,meta){if(0===values.length)return;if(1===values.length)return mergeOthers$1(values,utils,meta);const type=getObjectType(values[0]);if(0!==type&&5!==type)for(let m_index=1;m_index<values.length;m_index++)if(getObjectType(values[m_index])!==type)return mergeOthers$1(values,utils,meta);switch(type){case 1:return function mergeRecords$1(values,utils,meta){const result=utils.mergeFunctions.mergeRecords(values,utils,meta);if(result===actions.defaultMerge||utils.useImplicitDefaultMerging&&void 0===result&&utils.mergeFunctions.mergeRecords!==utils.defaultMergeFunctions.mergeRecords)return utils.defaultMergeFunctions.mergeRecords(values,utils,meta);return result}(values,utils,meta);case 2:return function mergeArrays$1(values,utils,meta){const result=utils.mergeFunctions.mergeArrays(values,utils,meta);if(result===actions.defaultMerge||utils.useImplicitDefaultMerging&&void 0===result&&utils.mergeFunctions.mergeArrays!==utils.defaultMergeFunctions.mergeArrays)return utils.defaultMergeFunctions.mergeArrays(values);return result}(values,utils,meta);case 3:return function mergeSets$1(values,utils,meta){const result=utils.mergeFunctions.mergeSets(values,utils,meta);if(result===actions.defaultMerge||utils.useImplicitDefaultMerging&&void 0===result&&utils.mergeFunctions.mergeSets!==utils.defaultMergeFunctions.mergeSets)return utils.defaultMergeFunctions.mergeSets(values);return result}(values,utils,meta);case 4:return function mergeMaps$1(values,utils,meta){const result=utils.mergeFunctions.mergeMaps(values,utils,meta);if(result===actions.defaultMerge||utils.useImplicitDefaultMerging&&void 0===result&&utils.mergeFunctions.mergeMaps!==utils.defaultMergeFunctions.mergeMaps)return utils.defaultMergeFunctions.mergeMaps(values);return result}(values,utils,meta);default:return mergeOthers$1(values,utils,meta)}}function mergeOthers$1(values,utils,meta){const result=utils.mergeFunctions.mergeOthers(values,utils,meta);return result===actions.defaultMerge||utils.useImplicitDefaultMerging&&void 0===result&&utils.mergeFunctions.mergeOthers!==utils.defaultMergeFunctions.mergeOthers?utils.defaultMergeFunctions.mergeOthers(values):result}},"./node_modules/lit/decorators.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{EM:()=>custom_element_e,MZ:()=>n,P:()=>query_i,wk:()=>state_t});const custom_element_e=e=>n=>"function"==typeof n?((e,n)=>(customElements.define(e,n),n))(e,n):((e,n)=>{const{kind:t,elements:s}=n;return{kind:t,elements:s,finisher(n){customElements.define(e,n)}}})(e,n),i=(i,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,i)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,i)}},property_e=(i,e,n)=>{e.constructor.createProperty(n,i)};function n(n){return(t,o)=>void 0!==o?property_e(n,t,o):i(n,t)}function state_t(t){return n({...t,state:!0})}const base_o=({finisher:e,descriptor:t})=>(o,n)=>{var r;if(void 0===n){const n=null!==(r=o.originalKey)&&void 0!==r?r:o.key,i=null!=t?{kind:"method",placement:"prototype",key:n,descriptor:t(o.key)}:{...o,key:n};return null!=e&&(i.finisher=function(t){e(t,n)}),i}{const r=o.constructor;void 0!==t&&Object.defineProperty(o,n,t(n)),null==e||e(r,n)}};function query_i(i,n){return base_o({descriptor:o=>{const t={get(){var o,n;return null!==(n=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(i))&&void 0!==n?n:null},enumerable:!0,configurable:!0};if(n){const n="symbol"==typeof o?Symbol():"__"+o;t.get=function(){var o,t;return void 0===this[n]&&(this[n]=null!==(t=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(i))&&void 0!==t?t:null),this[n]}}return t}})}var query_assigned_elements_n;null===(query_assigned_elements_n=window.HTMLSlotElement)||void 0===query_assigned_elements_n||query_assigned_elements_n.prototype.assignedElements}}]);
//# sourceMappingURL=780.16277170.iframe.bundle.js.map